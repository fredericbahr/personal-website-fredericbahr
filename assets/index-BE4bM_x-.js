var P0=Object.defineProperty;var Lf=r=>{throw TypeError(r)};var R0=(r,e,t)=>e in r?P0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var q=(r,e,t)=>R0(r,typeof e!="symbol"?e+"":e,t),ad=(r,e,t)=>e.has(r)||Lf("Cannot "+t);var l=(r,e,t)=>(ad(r,e,"read from private field"),t?t.call(r):e.get(r)),x=(r,e,t)=>e.has(r)?Lf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),b=(r,e,t,n)=>(ad(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),w=(r,e,t)=>(ad(r,e,"access private method"),t);var xt=(r,e,t,n)=>({set _(s){b(r,e,s,t)},get _(){return l(r,e,n)}});import{r as C,j as p,C as M0,V as H,H as Ye,A as L0,a as re,T as Os,b as D0,B as Ku,c as W,F as wi,d as Yg,e as Kg,f as I0,I as Cn,g as Ae,h as j0,S as an,i as wt,u as Jg,k as co,L as ke,l as Ju,m as Qu,w as Zu,P as Qg,n as Zg,o as ep,p as tp,q as np,s as sp,t as ip,v as rp,x as Ft,y as ap,z as hc,D as _t,E as ef,O as F0,G as O0,J as N0,K as xc,M as Hh,N as yd,R as dh,Q as z0,U as H0,W as $0,X as B0,Y as W0,Z as U0,_ as V0,$ as G0,a0 as q0,a1 as me,a2 as Df,a3 as If,a4 as jf,a5 as vi,a6 as X0,a7 as Y0,a8 as K0,a9 as J0,aa as Q0,ab as Ac,ac as Z0,ad as ey,ae as ty}from"./chakra-ui-OyE5wu65.js";import{a as ny,g as op}from"./react-18Fyy8LS.js";import{I as sy,C as iy,M as ry,a as ay,l as ki,b as lp,P as oy,R as ly,c as cy,L as hy,d as wd,w as dy,D as uy,e as fy,f as $h,g as gy,h as py}from"./phosphor-icons-DGf5J9R_.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Sc={},Ff;function my(){if(Ff)return Sc;Ff=1;var r=ny();return Sc.createRoot=r.createRoot,Sc.hydrateRoot=r.hydrateRoot,Sc}var by=my();const yy=op(by);var wo={},Of;function wy(){if(Of)return wo;Of=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.parse=a,wo.serialize=h;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function a(f,g){const m=new i,y=f.length;if(y<2)return m;const A=(g==null?void 0:g.decode)||d;let v=0;do{const S=f.indexOf("=",v);if(S===-1)break;const E=f.indexOf(";",v),_=E===-1?y:E;if(S>_){v=f.lastIndexOf(";",S-1)+1;continue}const k=o(f,v,S),T=c(f,S,k),P=f.slice(k,T);if(m[P]===void 0){let R=o(f,S+1,_),M=c(f,_,R);const L=A(f.slice(R,M));m[P]=L}v=_+1}while(v<y);return m}function o(f,g,m){do{const y=f.charCodeAt(g);if(y!==32&&y!==9)return g}while(++g<m);return m}function c(f,g,m){for(;g>m;){const y=f.charCodeAt(--g);if(y!==32&&y!==9)return g+1}return m}function h(f,g,m){const y=(m==null?void 0:m.encode)||encodeURIComponent;if(!r.test(f))throw new TypeError(`argument name is invalid: ${f}`);const A=y(g);if(!e.test(A))throw new TypeError(`argument val is invalid: ${g}`);let v=f+"="+A;if(!m)return v;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);v+="; Max-Age="+m.maxAge}if(m.domain){if(!t.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);v+="; Domain="+m.domain}if(m.path){if(!n.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);v+="; Path="+m.path}if(m.expires){if(!u(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);v+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(v+="; HttpOnly"),m.secure&&(v+="; Secure"),m.partitioned&&(v+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return v}function d(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function u(f){return s.call(f)==="[object Date]"}return wo}wy();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nf="popstate";function vy(r={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return vd("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Vo(s)}return Ay(e,t,null,r)}function Te(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function kn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xy(){return Math.random().toString(36).substring(2,10)}function zf(r,e){return{usr:r.state,key:r.key,idx:e}}function vd(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ho(e):e,state:t,key:e&&e.key||n||xy()}}function Vo({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ho(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function Ay(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",c=null,h=d();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function d(){return(a.state||{idx:null}).idx}function u(){o="POP";let A=d(),v=A==null?null:A-h;h=A,c&&c({action:o,location:y.location,delta:v})}function f(A,v){o="PUSH";let S=vd(y.location,A,v);h=d()+1;let E=zf(S,h),_=y.createHref(S);try{a.pushState(E,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}i&&c&&c({action:o,location:y.location,delta:1})}function g(A,v){o="REPLACE";let S=vd(y.location,A,v);h=d();let E=zf(S,h),_=y.createHref(S);a.replaceState(E,"",_),i&&c&&c({action:o,location:y.location,delta:0})}function m(A){let v=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof A=="string"?A:Vo(A);return S=S.replace(/ $/,"%20"),Te(v,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,v)}let y={get action(){return o},get location(){return r(s,a)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Nf,u),c=A,()=>{s.removeEventListener(Nf,u),c=null}},createHref(A){return e(s,A)},createURL:m,encodeLocation(A){let v=m(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(A){return a.go(A)}};return y}function cp(r,e,t="/"){return Sy(r,e,t,!1)}function Sy(r,e,t,n){let s=typeof e=="string"?ho(e):e,i=xi(s.pathname||"/",t);if(i==null)return null;let a=hp(r);Ey(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let h=jy(i);o=Dy(a[c],h,n)}return o}function hp(r,e=[],t=[],n=""){let s=(i,a,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Te(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let h=Ds([n,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(Te(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),hp(i.children,e,d,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:My(h,i.index),routesMeta:d})};return r.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let c of dp(i.path))s(i,a,c)}),e}function dp(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=dp(n.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function Ey(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Ly(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var _y=/^:[\w-]+$/,Cy=3,ky=2,Ty=1,Py=10,Ry=-2,Hf=r=>r==="*";function My(r,e){let t=r.split("/"),n=t.length;return t.some(Hf)&&(n+=Ry),e&&(n+=ky),t.filter(s=>!Hf(s)).reduce((s,i)=>s+(_y.test(i)?Cy:i===""?Ty:Py),n)}function Ly(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function Dy(r,e,t=!1){let{routesMeta:n}=r,s={},i="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],h=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",u=uh({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),f=c.route;if(!u&&h&&t&&!n[n.length-1].route.index&&(u=uh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:Ds([i,u.pathname]),pathnameBase:zy(Ds([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=Ds([i,u.pathnameBase]))}return a}function uh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Iy(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((h,{paramName:d,isOptional:u},f)=>{if(d==="*"){let m=o[f]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[f];return u&&!g?h[d]=void 0:h[d]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:r}}function Iy(r,e=!1,t=!0){kn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function jy(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kn(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function xi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Fy(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?ho(r):r;return{pathname:t?t.startsWith("/")?t:Oy(t,e):e,search:Hy(n),hash:$y(s)}}function Oy(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function od(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ny(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tf(r){let e=Ny(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function nf(r,e,t,n=!1){let s;typeof r=="string"?s=ho(r):(s={...r},Te(!s.pathname||!s.pathname.includes("?"),od("?","pathname","search",s)),Te(!s.pathname||!s.pathname.includes("#"),od("#","pathname","hash",s)),Te(!s.search||!s.search.includes("#"),od("#","search","hash",s)));let i=r===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let u=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),u-=1;s.pathname=f.join("/")}o=u>=0?e[u]:"/"}let c=Fy(s,o),h=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var Ds=r=>r.join("/").replace(/\/\/+/g,"/"),zy=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Hy=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,$y=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function By(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var up=["POST","PUT","PATCH","DELETE"];new Set(up);var Wy=["GET",...up];new Set(Wy);var uo=C.createContext(null);uo.displayName="DataRouter";var Bh=C.createContext(null);Bh.displayName="DataRouterState";var fp=C.createContext({isTransitioning:!1});fp.displayName="ViewTransition";var Uy=C.createContext(new Map);Uy.displayName="Fetchers";var Vy=C.createContext(null);Vy.displayName="Await";var Tn=C.createContext(null);Tn.displayName="Navigation";var dc=C.createContext(null);dc.displayName="Location";var ns=C.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var sf=C.createContext(null);sf.displayName="RouteError";function Gy(r,{relative:e}={}){Te(fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=C.useContext(Tn),{hash:s,pathname:i,search:a}=uc(r,{relative:e}),o=i;return t!=="/"&&(o=i==="/"?t:Ds([t,i])),n.createHref({pathname:o,search:a,hash:s})}function fo(){return C.useContext(dc)!=null}function Ti(){return Te(fo(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(dc).location}var gp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pp(r){C.useContext(Tn).static||C.useLayoutEffect(r)}function Hr(){let{isDataRoute:r}=C.useContext(ns);return r?rw():qy()}function qy(){Te(fo(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(uo),{basename:e,navigator:t}=C.useContext(Tn),{matches:n}=C.useContext(ns),{pathname:s}=Ti(),i=JSON.stringify(tf(n)),a=C.useRef(!1);return pp(()=>{a.current=!0}),C.useCallback((c,h={})=>{if(kn(a.current,gp),!a.current)return;if(typeof c=="number"){t.go(c);return}let d=nf(c,JSON.parse(i),s,h.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ds([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,i,s,r])}C.createContext(null);function uc(r,{relative:e}={}){let{matches:t}=C.useContext(ns),{pathname:n}=Ti(),s=JSON.stringify(tf(t));return C.useMemo(()=>nf(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function Xy(r,e){return mp(r,e)}function mp(r,e,t,n){var v;Te(fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(Tn),{matches:i}=C.useContext(ns),a=i[i.length-1],o=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",d=a&&a.route;{let S=d&&d.path||"";bp(c,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let u=Ti(),f;if(e){let S=typeof e=="string"?ho(e):e;Te(h==="/"||((v=S.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),f=S}else f=u;let g=f.pathname||"/",m=g;if(h!=="/"){let S=h.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=cp(r,{pathname:m});kn(d||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),kn(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Zy(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:Ds([h,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Ds([h,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,t,n);return e&&A?C.createElement(dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},A):A}function Yy(){let r=iw(),e=By(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,a)}var Ky=C.createElement(Yy,null),Jy=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?C.createElement(ns.Provider,{value:this.props.routeContext},C.createElement(sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qy({routeContext:r,match:e,children:t}){let n=C.useContext(uo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(ns.Provider,{value:r},t)}function Zy(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,i=t==null?void 0:t.errors;if(i!=null){let c=s.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);Te(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,o=-1;if(t)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(o=c),h.route.id){let{loaderData:d,errors:u}=t,f=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!u||u[h.route.id]===void 0);if(h.route.lazy||f){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((c,h,d)=>{let u,f=!1,g=null,m=null;t&&(u=i&&h.route.id?i[h.route.id]:void 0,g=h.route.errorElement||Ky,a&&(o<0&&d===0?(bp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):o===d&&(f=!0,m=h.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,d+1)),A=()=>{let v;return u?v=g:f?v=m:h.route.Component?v=C.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,C.createElement(Qy,{match:h,routeContext:{outlet:c,matches:y,isDataRoute:t!=null},children:v})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?C.createElement(Jy,{location:t.location,revalidation:t.revalidation,component:g,error:u,children:A(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):A()},null)}function rf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ew(r){let e=C.useContext(uo);return Te(e,rf(r)),e}function tw(r){let e=C.useContext(Bh);return Te(e,rf(r)),e}function nw(r){let e=C.useContext(ns);return Te(e,rf(r)),e}function af(r){let e=nw(r),t=e.matches[e.matches.length-1];return Te(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function sw(){return af("useRouteId")}function iw(){var n;let r=C.useContext(sf),e=tw("useRouteError"),t=af("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function rw(){let{router:r}=ew("useNavigate"),e=af("useNavigate"),t=C.useRef(!1);return pp(()=>{t.current=!0}),C.useCallback(async(s,i={})=>{kn(t.current,gp),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...i}))},[r,e])}var $f={};function bp(r,e,t){!e&&!$f[r]&&($f[r]=!0,kn(!1,t))}C.memo(aw);function aw({routes:r,future:e,state:t}){return mp(r,void 0,t,e)}function yp({to:r,replace:e,state:t,relative:n}){Te(fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(Tn);kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(ns),{pathname:a}=Ti(),o=Hr(),c=nf(r,tf(i),a,n==="path"),h=JSON.stringify(c);return C.useEffect(()=>{o(JSON.parse(h),{replace:e,state:t,relative:n})},[o,h,n,e,t]),null}function Ln(r){Te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ow({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:i=!1}){Te(!fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=C.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof t=="string"&&(t=ho(t));let{pathname:c="/",search:h="",hash:d="",state:u=null,key:f="default"}=t,g=C.useMemo(()=>{let m=xi(c,a);return m==null?null:{location:{pathname:m,search:h,hash:d,state:u,key:f},navigationType:n}},[a,c,h,d,u,f,n]);return kn(g!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:C.createElement(Tn.Provider,{value:o},C.createElement(dc.Provider,{children:e,value:g}))}function lw({children:r,location:e}){return Xy(xd(r),e)}function xd(r,e=[]){let t=[];return C.Children.forEach(r,(n,s)=>{if(!C.isValidElement(n))return;let i=[...e,s];if(n.type===C.Fragment){t.push.apply(t,xd(n.props.children,i));return}Te(n.type===Ln,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Te(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=xd(n.props.children,i)),t.push(a)}),t}var Dc="get",Ic="application/x-www-form-urlencoded";function Wh(r){return r!=null&&typeof r.tagName=="string"}function cw(r){return Wh(r)&&r.tagName.toLowerCase()==="button"}function hw(r){return Wh(r)&&r.tagName.toLowerCase()==="form"}function dw(r){return Wh(r)&&r.tagName.toLowerCase()==="input"}function uw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fw(r,e){return r.button===0&&(!e||e==="_self")&&!uw(r)}var Ec=null;function gw(){if(Ec===null)try{new FormData(document.createElement("form"),0),Ec=!1}catch{Ec=!0}return Ec}var pw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ld(r){return r!=null&&!pw.has(r)?(kn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ic}"`),null):r}function mw(r,e){let t,n,s,i,a;if(hw(r)){let o=r.getAttribute("action");n=o?xi(o,e):null,t=r.getAttribute("method")||Dc,s=ld(r.getAttribute("enctype"))||Ic,i=new FormData(r)}else if(cw(r)||dw(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||o.getAttribute("action");if(n=c?xi(c,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Dc,s=ld(r.getAttribute("formenctype"))||ld(o.getAttribute("enctype"))||Ic,i=new FormData(o,r),!gw()){let{name:h,type:d,value:u}=r;if(d==="image"){let f=h?`${h}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else h&&i.append(h,u)}}else{if(Wh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dc,n=null,s=Ic,a=r}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:i,body:a}}function of(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function bw(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function ww(r,e,t){let n=await Promise.all(r.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await bw(i,t);return a.links?a.links():[]}return[]}));return Sw(n.flat(1).filter(yw).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Bf(r,e,t,n,s,i){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,o=(c,h)=>{var d;return t[h].pathname!==c.pathname||((d=t[h].route.path)==null?void 0:d.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,h)=>a(c,h)||o(c,h)):i==="data"?e.filter((c,h)=>{var u;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((u=t[0])==null?void 0:u.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function vw(r,e){return xw(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function xw(r){return[...new Set(r)]}function Aw(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Sw(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let i=JSON.stringify(Aw(s));return t.has(i)||(t.add(i),n.push({key:i,link:s})),n},[])}function Ew(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function _w(){let r=C.useContext(uo);return of(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Cw(){let r=C.useContext(Bh);return of(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var lf=C.createContext(void 0);lf.displayName="FrameworkContext";function wp(){let r=C.useContext(lf);return of(r,"You must render this element inside a <HydratedRouter> element"),r}function kw(r,e){let t=C.useContext(lf),[n,s]=C.useState(!1),[i,a]=C.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:u}=e,f=C.useRef(null);C.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let y=v=>{v.forEach(S=>{a(S.isIntersecting)})},A=new IntersectionObserver(y,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[r]),C.useEffect(()=>{if(n){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[n]);let g=()=>{s(!0)},m=()=>{s(!1),a(!1)};return t?r!=="intent"?[i,f,{}]:[i,f,{onFocus:vo(o,g),onBlur:vo(c,m),onMouseEnter:vo(h,g),onMouseLeave:vo(d,m),onTouchStart:vo(u,g)}]:[!1,f,{}]}function vo(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Tw({page:r,...e}){let{router:t}=_w(),n=C.useMemo(()=>cp(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?C.createElement(Rw,{page:r,matches:n,...e}):null}function Pw(r){let{manifest:e,routeModules:t}=wp(),[n,s]=C.useState([]);return C.useEffect(()=>{let i=!1;return ww(r,e,t).then(a=>{i||s(a)}),()=>{i=!0}},[r,e,t]),n}function Rw({page:r,matches:e,...t}){let n=Ti(),{manifest:s,routeModules:i}=wp(),{loaderData:a,matches:o}=Cw(),c=C.useMemo(()=>Bf(r,e,o,s,n,"data"),[r,e,o,s,n]),h=C.useMemo(()=>Bf(r,e,o,s,n,"assets"),[r,e,o,s,n]),d=C.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let g=new Set,m=!1;if(e.forEach(A=>{var S;let v=s.routes[A.route.id];!v||!v.hasLoader||(!c.some(E=>E.route.id===A.route.id)&&A.route.id in a&&((S=i[A.route.id])!=null&&S.shouldRevalidate)||v.hasClientLoader?m=!0:g.add(A.route.id))}),g.size===0)return[];let y=Ew(r);return m&&g.size>0&&y.searchParams.set("_routes",e.filter(A=>g.has(A.route.id)).map(A=>A.route.id).join(",")),[y.pathname+y.search]},[a,n,s,c,e,r,i]),u=C.useMemo(()=>vw(h,s),[h,s]),f=Pw(h);return C.createElement(C.Fragment,null,d.map(g=>C.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),u.map(g=>C.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),f.map(({key:g,link:m})=>C.createElement("link",{key:g,...m})))}function Mw(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vp&&(window.__reactRouterVersion="7.1.1")}catch{}function Lw({basename:r,children:e,window:t}){let n=C.useRef();n.current==null&&(n.current=vy({window:t,v5Compat:!0}));let s=n.current,[i,a]=C.useState({action:s.action,location:s.location}),o=C.useCallback(c=>{C.startTransition(()=>a(c))},[a]);return C.useLayoutEffect(()=>s.listen(o),[s,o]),C.createElement(ow,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:s})}var xp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ap=C.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:c,to:h,preventScrollReset:d,viewTransition:u,...f},g){let{basename:m}=C.useContext(Tn),y=typeof h=="string"&&xp.test(h),A,v=!1;if(typeof h=="string"&&y&&(A=h,vp))try{let M=new URL(window.location.href),L=h.startsWith("//")?new URL(M.protocol+h):new URL(h),D=xi(L.pathname,m);L.origin===M.origin&&D!=null?h=D+L.search+L.hash:v=!0}catch{kn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Gy(h,{relative:s}),[E,_,k]=kw(n,f),T=Fw(h,{replace:a,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:u});function P(M){e&&e(M),M.defaultPrevented||T(M)}let R=C.createElement("a",{...f,...k,href:A||S,onClick:v||i?e:P,ref:Mw(g,_),target:c,"data-discover":!y&&t==="render"?"true":void 0});return E&&!y?C.createElement(C.Fragment,null,R,C.createElement(Tw,{page:S})):R});Ap.displayName="Link";var Dw=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:c,...h},d){let u=uc(a,{relative:h.relative}),f=Ti(),g=C.useContext(Bh),{navigator:m,basename:y}=C.useContext(Tn),A=g!=null&&$w(u)&&o===!0,v=m.encodeLocation?m.encodeLocation(u).pathname:u.pathname,S=f.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&y&&(E=xi(E,y)||E);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=S===v||!s&&S.startsWith(v)&&S.charAt(_)==="/",T=E!=null&&(E===v||!s&&E.startsWith(v)&&E.charAt(v.length)==="/"),P={isActive:k,isPending:T,isTransitioning:A},R=k?e:void 0,M;typeof n=="function"?M=n(P):M=[n,k?"active":null,T?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(P):i;return C.createElement(Ap,{...h,"aria-current":R,className:M,ref:d,style:L,to:a,viewTransition:o},typeof c=="function"?c(P):c)});Dw.displayName="NavLink";var Iw=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:i,method:a=Dc,action:o,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:u,...f},g)=>{let m=zw(),y=Hw(o,{relative:h}),A=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&xp.test(o),S=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||a;m(_||E.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:s,state:i,relative:h,preventScrollReset:d,viewTransition:u})};return C.createElement("form",{ref:g,method:A,action:y,onSubmit:n?c:S,...f,"data-discover":!v&&r==="render"?"true":void 0})});Iw.displayName="Form";function jw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sp(r){let e=C.useContext(uo);return Te(e,jw(r)),e}function Fw(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=Hr(),c=Ti(),h=uc(r,{relative:i});return C.useCallback(d=>{if(fw(d,e)){d.preventDefault();let u=t!==void 0?t:Vo(c)===Vo(h);o(r,{replace:u,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,h,t,n,e,r,s,i,a])}var Ow=0,Nw=()=>`__${String(++Ow)}__`;function zw(){let{router:r}=Sp("useSubmit"),{basename:e}=C.useContext(Tn),t=sw();return C.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:c,body:h}=mw(n,e);if(s.navigate===!1){let d=s.fetcherKey||Nw();await r.fetch(d,t,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await r.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function Hw(r,{relative:e}={}){let{basename:t}=C.useContext(Tn),n=C.useContext(ns);Te(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...uc(r||".",{relative:e})},a=Ti();if(r==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(u=>u).forEach(u=>o.append("index",u));let d=o.toString();i.search=d?`?${d}`:""}}return(!r||r===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Ds([t,i.pathname])),Vo(i)}function $w(r,e={}){let t=C.useContext(fp);Te(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Sp("useViewTransitionState"),s=uc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let i=xi(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=xi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return uh(s.pathname,a)!=null||uh(s.pathname,i)!=null}new TextEncoder;const Y=r=>typeof r=="string",xo=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Wf=r=>r==null?"":""+r,Bw=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Ww=/###/g,Uf=r=>r&&r.indexOf("###")>-1?r.replace(Ww,"."):r,Vf=r=>!r||Y(r),$o=(r,e,t)=>{const n=Y(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Vf(r))return{};const i=Uf(n[s]);!r[i]&&t&&(r[i]=new t),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={},++s}return Vf(r)?{}:{obj:r,k:Uf(n[s])}},Gf=(r,e,t)=>{const{obj:n,k:s}=$o(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=$o(r,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=$o(r,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=t},Uw=(r,e,t,n)=>{const{obj:s,k:i}=$o(r,e,Object);s[i]=s[i]||[],s[i].push(t)},fh=(r,e)=>{const{obj:t,k:n}=$o(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},Vw=(r,e,t)=>{const n=fh(r,t);return n!==void 0?n:fh(e,t)},Ep=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Y(r[n])||r[n]instanceof String||Y(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):Ep(r[n],e[n],t):r[n]=e[n]);return r},Gr=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Gw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const qw=r=>Y(r)?r.replace(/[&<>"'\/]/g,e=>Gw[e]):r;class Xw{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Yw=[" ",",","?","!",";"],Kw=new Xw(20),Jw=(r,e,t)=>{e=e||"",t=t||"";const n=Yw.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const s=Kw.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(r);if(!i){const a=r.indexOf(t);a>0&&!s.test(r.substring(0,a))&&(i=!0)}return i},Ad=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let a,o="";for(let c=i;c<n.length;++c)if(c!==i&&(o+=t),o+=n[c],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<n.length-1)continue;i+=c-i+1;break}s=a}return s},gh=r=>r==null?void 0:r.replace("_","-"),Qw={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){var t,n;(n=(t=console==null?void 0:console[r])==null?void 0:t.apply)==null||n.call(t,console,e)}};class ph{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Qw,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Y(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ph(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ph(this.logger,e)}}var Zn=new ph;class Uh{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,c]=a;for(let h=0;h<c;h++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,c]=a;for(let h=0;h<c;h++)o.apply(o,[e,...n])})}}class qf extends Uh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var h,d;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Y(n)&&i?o.push(...n.split(i)):o.push(n)));const c=fh(this.data,o);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),c||!a||!Y(n)?c:Ad((d=(h=this.data)==null?void 0:h[e])==null?void 0:d[t],n,i)}addResource(e,t,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),Gf(this.data,o,s),i.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(Y(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=n,n=t,t=o[1]),this.addNamespaces(t);let c=fh(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?Ep(c,n,i):c={...c,...n},Gf(this.data,o,c),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var _p={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(i=>{var a;e=((a=this.processors[i])==null?void 0:a.process(e,t,n,s))??e}),e}};const Xf={};class mh extends Uh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Bw(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Jw(e,n,s);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Y(i)?[i]:i};const h=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),e=h.join(s)}return{key:e,namespaces:Y(i)?[i]:i}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),c=o[o.length-1],h=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode"){if(d){const _=t.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${_}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${_}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:a}const u=this.resolve(e,t);let f=u==null?void 0:u.res;const g=(u==null?void 0:u.usedKey)||a,m=(u==null?void 0:u.exactUsedKey)||a,y=Object.prototype.toString.apply(f),A=["[object Number]","[object Function]","[object RegExp]"],v=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,E=!Y(f)&&typeof f!="boolean"&&typeof f!="number";if(S&&f&&E&&A.indexOf(y)<0&&!(Y(v)&&Array.isArray(f))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(u.res=_,u.usedParams=this.getUsedParamsDetails(t),u):_}if(i){const _=Array.isArray(f),k=_?[]:{},T=_?m:g;for(const P in f)if(Object.prototype.hasOwnProperty.call(f,P)){const R=`${T}${i}${P}`;k[P]=this.translate(R,{...t,joinArrays:!1,ns:o}),k[P]===R&&(k[P]=f[P])}f=k}}else if(S&&Y(v)&&Array.isArray(f))f=f.join(v),f&&(f=this.extendTranslation(f,e,t,n));else{let _=!1,k=!1;const T=t.count!==void 0&&!Y(t.count),P=mh.hasDefaultValue(t),R=T?this.pluralResolver.getSuffix(h,t.count,t):"",M=t.ordinal&&T?this.pluralResolver.getSuffix(h,t.count,{ordinal:!1}):"",L=T&&!t.ordinal&&t.count===0,D=L&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${R}`]||t[`defaultValue${M}`]||t.defaultValue;!this.isValidLookup(f)&&P&&(_=!0,f=D),this.isValidLookup(f)||(k=!0,f=a);const U=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:f,$=P&&D!==f&&this.options.updateMissing;if(k||_||$){if(this.logger.log($?"updateKey":"missingKey",h,c,a,$?D:f),i){const N=this.resolve(a,{...t,keySeparator:!1});N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let V=[];const G=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&G&&G[0])for(let N=0;N<G.length;N++)V.push(G[N]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(t.lng||this.language):V.push(t.lng||this.language);const O=(N,Ee,je)=>{var we;const We=P&&je!==f?je:U;this.options.missingKeyHandler?this.options.missingKeyHandler(N,c,Ee,We,$,t):(we=this.backendConnector)!=null&&we.saveMissing&&this.backendConnector.saveMissing(N,c,Ee,We,$,t),this.emit("missingKey",N,c,Ee,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?V.forEach(N=>{const Ee=this.pluralResolver.getSuffixes(N,t);L&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ee.push(`${this.options.pluralSeparator}zero`),Ee.forEach(je=>{O([N],a+je,t[`defaultValue${je}`]||D)})}):O(V,a,D))}f=this.extendTranslation(f,e,t,u,n),k&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${a}`),(k||_)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,_?f:void 0))}return s?(u.res=f,u.usedParams=this.getUsedParamsDetails(t),u):f}extendTranslation(e,t,n,s,i){var h,d;var a=this;if((h=this.i18nFormat)!=null&&h.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=Y(e)&&(((d=n==null?void 0:n.interpolation)==null?void 0:d.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(u){const m=e.match(this.interpolator.nestingRegexp);f=m&&m.length}let g=n.replace&&!Y(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),u){const m=e.match(this.interpolator.nestingRegexp),y=m&&m.length;f<y&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,y=new Array(m),A=0;A<m;A++)y[A]=arguments[A];return(i==null?void 0:i[0])===y[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):a.translate(...y,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,c=Y(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&n.applyPostProcessor!==!1&&(e=_p.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,i,a,o;return Y(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(c,t),d=h.key;s=d;let u=h.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const f=t.count!==void 0&&!Y(t.count),g=f&&!t.ordinal&&t.count===0,m=t.context!==void 0&&(Y(t.context)||typeof t.context=="number")&&t.context!=="",y=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);u.forEach(A=>{var v,S;this.isValidLookup(n)||(o=A,!Xf[`${y[0]}-${A}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(Xf[`${y[0]}-${A}`]=!0,this.logger.warn(`key "${s}" for languages "${y.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(E=>{var T;if(this.isValidLookup(n))return;a=E;const _=[d];if((T=this.i18nFormat)!=null&&T.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,E,A,t);else{let P;f&&(P=this.pluralResolver.getSuffix(E,t.count,t));const R=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(_.push(d+P),t.ordinal&&P.indexOf(M)===0&&_.push(d+P.replace(M,this.options.pluralSeparator)),g&&_.push(d+R)),m){const L=`${d}${this.options.contextSeparator}${t.context}`;_.push(L),f&&(_.push(L+P),t.ordinal&&P.indexOf(M)===0&&_.push(L+P.replace(M,this.options.pluralSeparator)),g&&_.push(L+R))}}let k;for(;k=_.pop();)this.isValidLookup(n)||(i=k,n=this.getResource(E,A,k,t))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){var i;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Y(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of t)delete s[i]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Yf{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zn.create("languageUtils")}getScriptPartFromCode(e){if(e=gh(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=gh(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Y(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Y(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Y(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Y(e)&&i(this.formatLanguageCode(e)),n.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}const Kf={zero:0,one:1,two:2,few:3,many:4,other:5},Jf={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Zw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Zn.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=gh(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Jf;if(!e.match(/-|_/))return Jf;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,i)=>Kf[s]-Kf[i]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Qf=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Vw(r,e,t);return!i&&s&&Y(t)&&(i=Ad(r,t,n),i===void 0&&(i=Ad(e,t,n))),i},cd=r=>r.replace(/\$/g,"$$$$");class ev{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zn.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:h,unescapeSuffix:d,unescapePrefix:u,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:m,nestingSuffixEscaped:y,nestingOptionsSeparator:A,maxReplaces:v,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:qw,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Gr(i):a||"{{",this.suffix=o?Gr(o):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=d?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?Gr(f):g||Gr("$t("),this.nestingSuffix=m?Gr(m):y||Gr(")"),this.nestingOptionsSeparator=A||",",this.maxReplaces=v||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>(t==null?void 0:t.source)===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){var g;let i,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=m=>{if(m.indexOf(this.formatSeparator)<0){const S=Qf(t,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,n,{...s,...t,interpolationkey:m}):S}const y=m.split(this.formatSeparator),A=y.shift().trim(),v=y.join(this.formatSeparator).trim();return this.format(Qf(t,c,A,this.options.keySeparator,this.options.ignoreJSONStructure),v,n,{...s,...t,interpolationkey:A})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>cd(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?cd(this.escape(m)):cd(m)}].forEach(m=>{for(o=0;i=m.regex.exec(e);){const y=i[1].trim();if(a=h(y),a===void 0)if(typeof d=="function"){const v=d(e,i,s);a=Y(v)?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,y))a="";else if(u){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!Y(a)&&!this.useRawValueToEscape&&(a=Wf(a));const A=m.safeValue(a);if(e=e.replace(i[0],A),u?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,a;const o=(c,h)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const u=c.split(new RegExp(`${d}[ ]*{`));let f=`{${u[1]}`;c=u[0],f=this.interpolate(f,a);const g=f.match(/'/g),m=f.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),h&&(a={...h,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${d}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];a={...n},a=a.replace&&!Y(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const d=s[1].split(this.formatSeparator).map(u=>u.trim());s[1]=d.shift(),c=d,h=!0}if(i=t(o.call(this,s[1].trim(),a),a),i&&s[0]===e&&!Y(i))return i;Y(i)||(i=Wf(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),h&&(i=c.reduce((d,u)=>this.format(d,u,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const tv=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();t[d]||(t[d]=h),h==="false"&&(t[d]=!1),h==="true"&&(t[d]=!0),isNaN(h)||(t[d]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},qr=r=>{const e={};return(t,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=n+JSON.stringify(i);let o=e[a];return o||(o=r(gh(n),s),e[a]=o),o(t)}};class nv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zn.create("formatter"),this.options=e,this.formats={number:qr((t,n)=>{const s=new Intl.NumberFormat(t,{...n});return i=>s.format(i)}),currency:qr((t,n)=>{const s=new Intl.NumberFormat(t,{...n,style:"currency"});return i=>s.format(i)}),datetime:qr((t,n)=>{const s=new Intl.DateTimeFormat(t,{...n});return i=>s.format(i)}),relativetime:qr((t,n)=>{const s=new Intl.RelativeTimeFormat(t,{...n});return i=>s.format(i,n.range||"day")}),list:qr((t,n)=>{const s=new Intl.ListFormat(t,{...n});return i=>s.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=qr(t)}format(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var u;const{formatName:h,formatOptions:d}=tv(c);if(this.formats[h]){let f=o;try{const g=((u=s==null?void 0:s.formatParams)==null?void 0:u[s.interpolationkey])||{},m=g.locale||g.lng||s.locale||s.lng||n;f=this.formats[h](o,m,{...d,...s,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${h}`);return o},e)}}const sv=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class iv extends Uh{constructor(e,t,n){var i,a;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Zn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(a=(i=this.backend)==null?void 0:i.init)==null||a.call(i,n,s.backend,s)}queueLoad(e,t,n,s){const i={},a={},o={},c={};return e.forEach(h=>{let d=!0;t.forEach(u=>{const f=`${h}|${u}`;!n.reload&&this.store.hasResourceBundle(h,u)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,d=!1,a[f]===void 0&&(a[f]=!0),i[f]===void 0&&(i[f]=!0),c[u]===void 0&&(c[u]=!0)))}),d||(o[h]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,n){const s=e.split("|"),i=s[0],a=s[1];t&&this.emit("failedLoading",i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(c=>{Uw(c.loaded,[i],a),sv(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{o[h]||(o[h]={});const d=c.loaded[h];d.length&&d.forEach(u=>{o[h][u]===void 0&&(o[h][u]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:i,callback:a});return}this.readingCalls++;const o=(h,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(h&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,i*2,a)},i);return}a(h,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(d=>o(null,d)).catch(o):o(null,h)}catch(h){o(h)}return}return c(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Y(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Y(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,s,i){var c,h,d,u,f;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace&&!((u=(d=this.services)==null?void 0:d.utils)!=null&&u.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((f=this.backend)!=null&&f.create){const g={...a,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(e,t,n,s,g):y=m(e,t,n,s),y&&typeof y.then=="function"?y.then(A=>o(null,A)).catch(o):o(null,y)}catch(y){o(y)}else m(e,t,n,s,o,g)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Zf=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Y(r[1])&&(e.defaultValue=r[1]),Y(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),eg=r=>{var e,t;return Y(r.ns)&&(r.ns=[r.ns]),Y(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Y(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((t=(e=r.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},_c=()=>{},rv=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Go extends Uh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=eg(e),this.services={},this.logger=Zn,this.modules={external:[]},rv(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(Y(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Zf();this.options={...s,...this.options,...eg(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Zn.init(i(this.modules.logger),this.options):Zn.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=nv;const u=new Yf(this.options);this.store=new qf(this.options.resources,this.options);const f=this.services;f.logger=Zn,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new Zw(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=i(d),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new ev(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new iv(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(g){for(var m=arguments.length,y=new Array(m>1?m-1:0),A=1;A<m;A++)y[A-1]=arguments[A];e.emit(g,...y)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new mh(this.services,this.options),this.translator.on("*",function(g){for(var m=arguments.length,y=new Array(m>1?m-1:0),A=1;A<m;A++)y[A-1]=arguments[A];e.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=_c),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=xo(),h=()=>{const d=(u,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),n(u,f)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),c}loadResources(e){var i,a;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_c;const s=Y(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(a=(i=this.options.preload)==null?void 0:i.forEach)==null||a.call(i,h=>c(h)),this.services.backendConnector.load(o,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(h)})}else n(null)}reloadResources(e,t,n){const s=xo();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=_c),this.services.backendConnector.reload(e,t,i=>{s.resolve(),n(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&_p.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=xo();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,h)=>{h?(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(c,function(){return n.t(...arguments)})},o=c=>{var d,u;!e&&!c&&this.services.languageDetector&&(c=[]);const h=Y(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(u=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||u.call(d,h)),this.loadResources(h,f=>{a(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,n){var s=this;const i=function(a,o){let c;if(typeof o!="object"){for(var h=arguments.length,d=new Array(h>2?h-2:0),u=2;u<h;u++)d[u-2]=arguments[u];c=s.options.overloadTranslationOptionHandler([a,o].concat(d))}else c={...o};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const f=s.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(a)?g=a.map(m=>`${c.keyPrefix}${f}${m}`):g=c.keyPrefix?`${c.keyPrefix}${f}${a}`:a,s.t(g,c)};return Y(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.translate(...t)}exists(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const h=this.services.backendConnector.state[`${o}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!s||a(i,e)))}loadNamespaces(e,t){const n=xo();return this.options.ns?(Y(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=xo();Y(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((i=this.services)==null?void 0:i.languageUtils)||new Yf(Zf());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Go(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_c;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Go(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const o=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},Object.keys(c[h]).reduce((d,u)=>(d[u]={...c[h][u]},d),{})),{});i.store=new qf(o,s),i.services.resourceStore=i.store}return i.translator=new mh(i.services,s),i.translator.on("*",function(o){for(var c=arguments.length,h=new Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];i.emit(o,...h)}),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vt=Go.createInstance();vt.createInstance=Go.createInstance;vt.createInstance;vt.dir;vt.init;vt.loadResources;vt.reloadResources;vt.use;vt.changeLanguage;vt.getFixedT;vt.t;vt.exists;vt.setDefaultNamespace;vt.hasLoadedNamespace;vt.loadNamespaces;vt.loadLanguages;const av=(r,...e)=>{var t,n,s,i;(n=(t=r==null?void 0:r.services)==null?void 0:t.logger)!=null&&n.forward?r.services.logger.forward(e,"warn","react-i18next::",!0):(i=(s=r==null?void 0:r.services)==null?void 0:s.logger)!=null&&i.warn?(yi(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),r.services.logger.warn(...e)):console!=null&&console.warn&&(yi(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},tg={},Sd=(r,...e)=>{yi(e[0])&&tg[e[0]]||(yi(e[0])&&(tg[e[0]]=new Date),av(r,...e))},Cp=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Ed=(r,e,t)=>{r.loadNamespaces(e,Cp(r,t))},ng=(r,e,t,n)=>{if(yi(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Ed(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,Cp(r,n))},ov=(r,e,t={})=>!e.languages||!e.languages.length?(Sd(e,"i18n.languages were undefined or empty",e.languages),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{var i;if(((i=t.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),yi=r=>typeof r=="string",lv=r=>typeof r=="object"&&r!==null,cv=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,hv={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},dv=r=>hv[r],uv=r=>r.replace(cv,dv);let _d={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:uv};const fv=(r={})=>{_d={..._d,...r}},gv=()=>_d;let kp;const pv=r=>{kp=r},mv=()=>kp,bv={type:"3rdParty",init(r){fv(r.options.react),pv(r)}},yv=C.createContext();class wv{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const vv=(r,e)=>{const t=C.useRef();return C.useEffect(()=>{t.current=r},[r,e]),t.current},Tp=(r,e,t,n)=>r.getFixedT(e,t,n),xv=(r,e,t,n)=>C.useCallback(Tp(r,e,t,n),[r,e,t,n]),Se=(r,e={})=>{var _,k,T,P;const{i18n:t}=e,{i18n:n,defaultNS:s}=C.useContext(yv)||{},i=t||n||mv();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new wv),!i){Sd(i,"You will need to pass in an i18next instance by using initReactI18next");const R=(L,D)=>yi(D)?D:lv(D)&&yi(D.defaultValue)?D.defaultValue:Array.isArray(L)?L[L.length-1]:L,M=[R,{},!1];return M.t=R,M.i18n={},M.ready=!1,M}(_=i.options.react)!=null&&_.wait&&Sd(i,"It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...gv(),...i.options.react,...e},{useSuspense:o,keyPrefix:c}=a;let h=s||((k=i.options)==null?void 0:k.defaultNS);h=yi(h)?[h]:h||["translation"],(P=(T=i.reportNamespaces).addUsedNamespaces)==null||P.call(T,h);const d=(i.isInitialized||i.initializedStoreOnce)&&h.every(R=>ov(R,i,a)),u=xv(i,e.lng||null,a.nsMode==="fallback"?h:h[0],c),f=()=>u,g=()=>Tp(i,e.lng||null,a.nsMode==="fallback"?h:h[0],c),[m,y]=C.useState(f);let A=h.join();e.lng&&(A=`${e.lng}${A}`);const v=vv(A),S=C.useRef(!0);C.useEffect(()=>{const{bindI18n:R,bindI18nStore:M}=a;S.current=!0,!d&&!o&&(e.lng?ng(i,e.lng,h,()=>{S.current&&y(g)}):Ed(i,h,()=>{S.current&&y(g)})),d&&v&&v!==A&&S.current&&y(g);const L=()=>{S.current&&y(g)};return R&&(i==null||i.on(R,L)),M&&(i==null||i.store.on(M,L)),()=>{S.current=!1,i&&(R==null||R.split(" ").forEach(D=>i.off(D,L))),M&&i&&M.split(" ").forEach(D=>i.store.off(D,L))}},[i,A]),C.useEffect(()=>{S.current&&d&&y(f)},[i,c,d]);const E=[m,i,d];if(E.t=m,E.i18n=i,E.ready=d,d||!d&&!o)return E;throw new Promise(R=>{e.lng?ng(i,e.lng,h,()=>R()):Ed(i,h,()=>R())})},Av={about:"Über mich",experience:"Erfahrung",projects:"Projekte",contact:"Kontakt",themeSwitch:{title:"Passe die UI an",light:"Heller Modus",dark:"Dunkler Modus",bordeaux:"Bordeaux",green:"Grün",lime:"Limette"},languageSwitch:{title:"Passe die Sprache an",german:"Deutsch",english:"Englisch"}},Sv={intro:"Hey, ich bin",subtitle:"Ich entwickle leidenschaftlich innovative Lösungen zur Optimierung von Arbeitsabläufen und Steigerung der Produktivität der Nutzer durch benutzerfreundliche Webanwendungen.",contact:"Kontakt"},Ev={title:"Über mich",introduction:"Ich bin Frederic Bahr, ein leidenschaftlicher Softwareentwickler aus Leipzig, Deutschland. Seit meiner ersten Berührung im Jahr 2017 während eines Schulprojektes entdeckte ich meine Leidenschaft für die Webentwicklung. Seither verbessere und vertiefe ich kontinuierlich meine Fähigkeiten und Kenntnisse. Darüberhinaus bietet mir ein akademischer Hintergrund in Medieninformatik ein solides Fundament und untermauert meine Expertise.",main:"Besonders fasziniert bin ich von der Entwicklung hochwertiger User Interfaces, die durch eine intuitive Benutzeroberfläche Prozesse für Nutzer vereinfachen. Meine Begeisterung für dieses Feld treibt mich dazu an, stets neue Technologien und Frameworks zu erforschen und mich weiterzuentwickeln. Dabei lege ich großen Wert auf eine saubere und strukturierte Codebasis, die eine Wartbarkeit und Skalierbarkeit gewährleistet.",volunteering:"Neben meiner beruflichen Tätigkeit entwickel ich in meiner Freizeit eine cloudbasierte Anwendung zur Verwaltung von Terminen für kleine Vereine in meiner Heimat.",technologies:"Mit einem klaren Fokus auf Qualität und Benutzerfreundlichkeit strebe ich danach, innovative Lösungen zu entwickeln, die einen echten Mehrwert bieten. Dafür verwende ich meistens:"},_v={title:"Erfahrung",subtitle:"Mein bisheriger Werdegang",jobTitles:{seniorSoftwareDeveloper:"Senior Software Developer",softwareDeveloper:"Software Developer",juniorSoftwareDeveloper:"Junior Software Developer",workingStudent:"Werkstudent",intern:"Praktikant",bachelor:"Bachelorand",master:"Masterand"},experiences:{softwareDeveloperIpoque:{description:{first:"Entwicklung von User Interfaces im Basis-Team",second:"Implementierung und Wartung von Komponenten für ein internes Designsystem",third:"Implementierung und Wartung eines internen Frameworks für Micro Frontends"}},juniorSoftwareDeveloperIpoque:{description:{first:"Entwicklung von User Interfaces im Basis-Team",second:"Implementierung und Wartung von Komponenten für ein internes Designsystem",third:"Implementierung und Wartung eines internen Frameworks für Micro Frontends"}},workingStudentIpoque:{description:{first:"Weiterentwicklung der DSL und des dazugehörigen Compilers",second:"Implementierung von Plugins für IDEs zur Unterstützung der DSL",third:"Migration der bestehenden Frontend-Tests auf modernere Technologien (Unit- und E2E-Tests)",fourth:"Implementierung und Wartung von Komponenten in das interne Designsystem",fifth:"Implementierung und Wartung eines internen Frontend Frameworks für Micro Frontends",sixth:"Entwicklung von Features in einer Micro Frontend Architektur"}},masterIpoque:{description:{first:"Konzeption, Implementierung und Evaluation framework-agnostischer Lösungen für das Scoping von Web Components in Micro-Frontends zur Vermeidung von Versionskonflikten",second:"Prototypische Implementierung der Lösungen in einer Micro-Frontend-Architektur und Evaluation der Ergebnisse",third:"Untersuchung einer möglichen Lösung zum Scoping von Web Components in Micro-Frontends mit unterschiedlichen Frameworks"}},bachelorIpoque:{description:{first:"Konzeption, Entwurf und Implementierung einer domänenspezifischen Sprache für die Generierung von Komponentenquellcode",second:"Entwurf und Implementierung eines Compilers für die Realisierung der domänenspezifischen Sprache",third:"Generierung von Angular-Komponentenquellcode auf Basis des definierten DSL-Modells"}},internIpoque:{description:{first:"Erstellung generischer Angularkomponenten zur Darstellung von UI-Komponenten in internem Showcase",second:"Automatisiertes Rendern verschiedener Formularelemente aufgrundlage einer benutzerdefinierten Konfiguration",third:"Reaktive Implementierung der Businesslogik mittels RxJS"}},workingStudentGDM:{description:{first:"Werkstudent in der Abteilung Service ITK",second:"Automatisierung von wiederkehrenden Aufgaben im Bereich der Microsoft Office Suite und Dateisystemen",third:"Prototypische Implementierung einer Automatisierung der Standortdatenpflege basierend auf diversen Dateien"}}},present:"Heute",cv:"Lebenslauf"},Cv=JSON.parse('{"title":"Projekte","tab":"Auswahl","website":"Webseite","github":"GitHub","projectTitles":{"kirmize":"Kirmize","portfolio":"Portfolio","chatbot":"QUAtsCH Chatbot ´22","multimediaDB":"Multimedia Datenbank Tierartzpraxis","eaFlowShop":"EA Flow Shop Optimierung","weatherData":"XML Wetterdaten Visualisierung"},"details":{"focus":"Fokus","period":"Zeitraum","present":"Heute","goal":"Ziel","implementation":"Umsetzung","technologies":"Technologien","screenshots":"Screenshots","kirmize":{"focus":"Webentwicklung","subtitle":"Die mobile Webanwendung für die Kirmes zur Planung von Terminen.","goal":"Die Kirmize-App wurde entwickelt, um die Organisation und Planung von Terminen von lokalen Vereinen zu erleichtern. Das Ziel war es, eine benutzerfreundliche und intuitive Anwendung zu schaffen, die es den Nutzern ermöglicht, sich über die verschiedenen Veranstaltungen zu informieren und ihre Teilnahme an den Terminen zu planen. Die App sollte eine klare Struktur und ein ansprechendes Design aufweisen, um die Nutzererfahrung zu verbessern und die Interaktion mit der Anwendung zu erleichtern. Darüber hinaus sollte die Anwendung es ermöglichen Fotos und Videos von den Veranstaltungen hochzuladen und zu teilen. Zusätzlich sollen Umfragen und Abstimmungen duchgeführt werden können, um die Meinung der Nutzer zu verschiedenen Themen zu erfassen.","implementation":"Die Kirmize-App wurde mit React und ChakraUI entwickelt. Die Anwendung wurde als Progressive Web App (PWA) konzipiert, um eine optimale Performance und Benutzererfahrung auf verschiedenen Geräten zu gewährleisten. Die Implementierung erfolgte in enger Zusammenarbeit mit einem lokalen Vereinen, um die Anforderungen und Wünsche der Nutzer zu berücksichtigen. Zur Datenhaltung wird eine MongoDB-Datenbank verwendet, dessen Zugriff mittels Prisma ORM abstrahiert wird. Die Business-Logik der Anwedung wird in einem Express-Backend realisiert, welches die Kommunikation mit der Datenbank und die Bereitstellung der Daten für die Frontend-Anwendung übernimmt. Die Authentifizierung und Autorisierung der Nutzer erfolgt über JSON Web Tokens (JWT)."},"portfolio":{"focus":"Webentwicklung","subtitle":"Implementierung meiner persönlichen Portfolio-Webseite.","goal":"Das Ziel der Entwicklug meines eigenen Portfolios war es, meine bisherigen Projekte und Erfahrungen hervorzuheben, um so meine Fähigkeiten und Kenntnisse zu präsentieren. Zusätzlich diente es als Übung, um meine Fähigkeiten in Bereichen wie Design und Animation zu verbessern. Schließlich erhöht ein Portfolio die Online-Präsenz und erleichtert die Kontaktaufnahme mit potenziellen Arbeitgebern oder Kunden.","implementation":"Zunächst habe ich recherchiert, welche Merkmale in gutes Portfolio erfüllt und dazu Inspirationen gesammelt. Anschließend habe ich die Struktur meiner Webseite geplant und ein Konzept erstellt. Anschließend wurde das Portfolio mit React, ChakraUI und Framer Motion umgesetzt. Das Deployment erfolgt über GitHub Pages."},"chatbot":{"focus":"Question Answering Systeme","subtitle":"Ein Projekt zur Entwicklung eines Chatbots für die Landesanstalt für Umwelt Baden-Württemberg.","goal":"Die Landesanstalt für Umwelt Baden-Württemberg erfasst in einem Netz aus Messstationen Umweltdaten. Aus diesen Daten können Beobachtungen abgeleitet werden, um Aussagen über den Zustand der Ökosysteme zu treffen. Der öffentliche Zugang ermöglicht sowohl Forscher:innen als auch Privatpersonen eine Exploration der beobachteten Biotope. Die Menge und Komplexität der erfassten Daten erfordert neben einem vereinfachten Zugang für die diversen Benutzergruppen auch eine nachvollziehbare Aufbereitung der Informationen. Das Ziel dieses Projekts war es, die Umweltdaten über ein Frage-Antwort-System zugänglich zu machen und die korrekte Eingabe mithilfe von Chatbot-Funktionen zu stützen. Wesentlich hierbei war die Erzeugung eines Kontexts, in welchem eine Frage gestellt werden kann, sodass sie den Anforderungen der Datenquellen entspricht. Des Weiteren war eine Präzisierung der Frage, die Verarbeitung der Datensätze und dessen Darstellung relevant, um die Zugänglichkeit für den jeweiligen Benutzer zu gewährleisten.","implementation":"Um die Projektziele zu erfüllen, wurde eine webbasierte Anwendung entwickelt, welche die jeweiligen Anforderungen bedienen kann. Zur Bearbeitung der Chatbot-Funktionalität wurde der Rasa-Technologie-Stack* benutzt, welcher sowohl die Eingabe in einer webbasierten Oberflächen, die Zuweisung von natürlichsprachigen Anfragen zu Computer-Befehlen als auch die Ausführung der Befehle möglich macht. Das Frage-Antwort-System wurde mithilfe des Qanary-Technologie-Stack** umgesetzt. Diese Technologie ermöglicht es, einzelne Wissensfragmente aus der an das System gestellten Frage zu extrahieren und den Kontext der Frage herzustellen, sodass die Datenquellen abgefragt werden können. Die Präzisierung der Frage, die Verarbeitung und Darstellung der Datensätze konnte ebenfalls über diesen Mechanismus integriert werden.","rasa-detail":"Der Rasa-Technologie-Stack besteht aus Rasa-Chat, Rasa Open Source und Rasa Action Server:","qanary-detail":"Der Qanary-Technologie-Stack besteht aus einer Referenzimplementierung zur Erstellung von Fragebeantwortunssystemen nach der Qanary-Methodik:"},"multimediaDB":{"focus":"Multimedia Datenbanken, Fortgeschrittene Suchalgorithmen","subtitle":"Eine Implementierung einer Software zur Verwendung einer Multimedia Datenbank in einer Tierartztpraxis.","goal":"Das Ziel dieses Universitätsprojekts war es, die Verwendung einer Multimediadatenbank, insbesondere PostgreSQL, in einem nahezu realen Kontext zu präsentieren und zu erlernen. Letztendlich sollte eine erweiterte Suchfunktionalität basierend auf einem der vielfältigen Medientypen implementiert werden. Das Projekt wurde von einem Team aus zwei Studenten durchgeführt und von einem Professor betreut. Es war Teil des Kurses Multimediadatenbanksysteme und wurde in etwa 6 Wochen umgesetzt.","implementation":"Um das definierte Ziel zu erreichen, wurde ein auf die Bedürfnisse von Tierarztpraxen zugeschnittenes System entwickelt, das die Speicherung von Kunden-, Tier- und Medikamentendaten ermöglicht. Die Implementierung verschiedene Suchtechniken bezieht sich auf eine erweiterte Filterung von Medikamentendaten, eine datenbankbasierte Volltextsuche und das Finden von Tieren auf Basis von Bildvergleichen. Die Einführung dieser Suchtechniken soll die Benutzerfreundlichkeit und Funktionalität des Systems im veterinärmedizinischen Bereich verbessern. In diesem Projekt lernten wir erste praktische Erfahrungen in der Datenbankgestaltung und -implementierung sowie der Nutzung von Multimediadaten in spezialisierten Anwendungen sammeln."},"eaFlowShop":{"focus":"Optimierung, Evolutionäre Algorithmen","subtitle":"Ein evolutionärer Algorithmus (GA) zur Optimierung von Flow-Shop Problemen.","goal":"Das Fließbandproblem ist eine klassische Optimierungsherausforderung in Operations Research und Fertigung, bei der eine Reihe von Aufgaben über eine Folge von Maschinen geplant werden müssen, wobei die Gesamtfertigstellungszeit minimiert wird. In diesem Universitätsprojekt bin ich dieses Problem angegangen, indem ich evolutionäre Algorithmen, voranging den Hillclimber und den genetischen Algorithmus, eingesetzt habe, um ihre Wirksamkeit bei der Suche nach optimalen Lösungen zu untersuchen. Das Projekt hatte zusätzlich zum Ziel, ein Rahmen für das Testen verschiedener Methoden evolutionärer Algorithmen zu spannen.","implementation":"In meinem Projekt habe ich die Optimierung des Problems mithilfe von zwei unterschiedlichen evolutionären Algorithmen untersucht: der Hillclimber mit einer Verschiebungsmutation und einem genetischen Algorithmus mit verschiedenen evolutionären Methoden. Für den Hillclimber-Ansatz habe ich einen iterativen Verfeinerungsprozess entwickelt, der darauf abzielte, Lösungen kontinuierlich zu verbessern, indem Aufgaben zwischen Maschinen verschoben werden. Um die Erkundungsfähigkeiten des Algorithmus zu verbessern, habe ich einen Verschiebungsmutationsoperator integriert, der systematisch benachbarte Lösungen erforscht. Im Gegensatz dazu wurde der genetische Algorithmus entworfen, um eine Reihe von genetischen Operatoren und Auswahlstrategien zu testen. Konkret habe ich Methoden wie die Ordnungs-Rekombination, den Ein-Punkt-Crossover, die fitnessproportionale Auswahl, die Besten-Auswahl und die Turnierselektion implementiert. Die Ordnungs-Rekombination förderte die Vielfalt durch die Vermischung genetischen Materials aus Elternlösungen, während der Ein-Punkt-Crossover die Erstellung neuer Lösungen durch den Austausch von genetischem Material als Vorteil aufweiste. Die Auswahlstrategien waren vielfältig: Die fitnessproportionale Auswahl gewährleistete, dass Individuen mit höheren Fitnesswerten wahrscheinlicher ausgewählt wurden, um den evolutionären Prozess hin zu fitteren Lösungen zu lenken. Die Besten-Auswahl erhielt elitäre Lösungen, indem sie Individuen mit den höchsten Fitnesswerten bevorzugte und so über Generationen hinweg eine hochwertige Population aufrechterhielt. Die Turnierselektion hingegen förderte die Vielfalt und erhielt die Lösungsqualität, indem sie eine Teilmenge von Individuen gegeneinander antreten ließ. Diese komplexen Implementierungen ermöglichten eine umfassende Erforschung evolutionärer Techniken zur Bewältigung des Fließbandplanungsproblems und erleichterten Vergleiche zwischen verschiedenen Algorithmen und Strategien."},"weatherData":{"focus":"Data Visualization","subtitle":"Projekt zur Visualisierung von Wetterdaten aus einer XML-Datei.","goal":"Das Hauptziel dieses Universitätsprojekts bestand darin, ein visuelles Verarbeitungssystem für Wetterdaten zu entwickeln, die aus XML-Dateien stammen. Dabei sollten Techniken von Dokumentenbeschreibungssprachen wie XML-Schema-Definition und XSL-Transformation verwendet werden.","implementation":"Das definierte Ziel wurde erreicht, indem ein XML-Schema mit XML-Schema-Definition etabliert wurde, um die Daten effektiv zu strukturieren. Anschließend habe ich die XML-Daten mithilfe eigener XSL-Transformationen transformiert, um eine HTML-Struktur zur Darstellung der Daten zu generieren. Unter Nutzung von D3.js, einer leistungsfähigen JavaScript-Bibliothek für Datenvisualisierung, habe ich eine interaktive Website erstellt, um die verarbeiteten Wetterdaten anzuzeigen. Dieses Projekt demonstrierte nicht nur die Integration von XML-Technologien zur Datenstrukturierung und Transformation, sondern zeigte auch die Fähigkeiten von D3.js bei der Erstellung dynamischer und informativer Visualisierungen im Web."}}}'),kv={text:"Entwickelt von Frederic Bahr mit"},Tv={tooltip:"Chatbot öffnen",header:{title:"Chatbot",subtitle:"Stell mir eine Frage!",close:"Schließen"},initialMessage:{firstMessage:"Hi, Ich bin Frederic`s ChatBot 🤖",secondMessage:"Wie kann ich dir helfen?"},sayHello:{actionText:"Ich wollte nur einmal Hallo sagen",firstMessage:"Hi, wie gehts?",secondMessage:"Hey, schön dich kennenzulernen!",thirdMessage:"Danke dass du dir mein Portfolio anschaust.",fourthMessage:"Ich hoffe dir gefällt meine Arbeit.",fifthMessage:"Kann ich dir sonst irgendwie helfen?"},showCV:{actionText:"Zeig mir deinen Lebenslauf.",firstMessage:"Hey, ich interessiere mich für deinen Lebenslauf!",secondMessage:"Danke für dein Interesse.",thirdMessage:"Unten kannst du meinen Lebenslauf herunterladen.",download:"Lebenslauf herunterladen"},directChat:{actionText:"Ich will mit dir persönlich reden.",firstMessage:"Ich mag deinen Chatbot sehr, aber ich würde gerne mit dir direkt reden.",secondMessage:"Schade, aber ich respektiere deine Entscheidung.",thirdMessage:"Schicke meinem Schöpfer eine Nachricht, er wird so schnell wie möglich antworten!"}},Pv={github:"GitHub Profil",linkedin:"LinkedIn Profil"},Rv={headline:"Komm' mit mir ins Gespräch - Ich bin nur eine Nachricht entfernt!",subtext:"Für eine gute Unterhaltung bin ich immer zu haben, sei es über ein Projekt, ein Jobangebot oder einfach nur, um Hallo zu sagen. Zögere nicht, mich über das Kontaktformular oder direkt per E-Mail zu erreichen.",form:{headline:"Schreib mir eine Nachricht!",name:"Name",email:"E-Mail",message:"Nachricht",submit:"Senden",emailError:"Bitte gib eine gültige E-Mail-Adresse ein."}},Mv={navigation:Av,hero:Sv,about:Ev,experience:_v,projects:Cv,footer:kv,chatbot:Tv,socials:Pv,contact:Rv},Lv={about:"About",experience:"Experience",projects:"Projects",contact:"Contact me",themeSwitch:{title:"Customize the ui",light:"Light mode",dark:"Dark mode",bordeaux:"Bordeaux",green:"Green",lime:"Lime"},languageSwitch:{title:"Customize the language",german:"German",english:"English"}},Dv={intro:"Hey, I am",subtitle:"I specialize in creating innovative solutions designed to streamline processes, drive digital transformation, and enhance the customer experience.",contact:"Contact me"},Iv={title:"About me",introduction:"I'm Frederic Bahr, an enthusiastic software developer hailing from Leipzig, Germany. My journey into the world of web development began with a school project back in 2017, igniting a passion that has only grown since. Over time, I've honed and expanded my skills, delving deeper into the intricacies of the field. Moreover, my academic background in media informatics not only lays a strong foundation but also reinforces my expertise in the domain.",main:"I'm particularly fascinated by the development of high-quality user interfaces that streamline processes for users through an intuitive interface. My enthusiasm for this field drives me to constantly explore new technologies and frameworks and to continue evolving. I place great emphasis on maintaining a clean and structured codebase that ensures maintainability and scalability.",volunteering:"In addition to my professional work, I develop a cloud-based application in my free time for managing appointments for small local clubs based in my hometown.",technologies:"With a clear focus on quality and user-friendliness, I strive to develop innovative solutions that provide real value. For this, I mainly use:"},jv={title:"Experience",subtitle:"My professional journey",jobTitles:{seniorSoftwareDeveloper:"Senior Software Developer",softwareDeveloper:"Software Developer",juniorSoftwareDeveloper:"Junior Software Developer",workingStudent:"Working Student",intern:"Intern",bachelor:"Bachelor thesis",master:"Master thesis"},experiences:{softwareDeveloperIpoque:{description:{first:"Development of User Interfaces in the core team",second:"Implementation and maintenance of components for an internal design system",third:"Implementation and maintenance of an internal frontend framework for micro frontends"}},juniorSoftwareDeveloperIpoque:{description:{first:"Development of User Interfaces in the core team",second:"Implementation and maintenance of components for an internal design system",third:"Implementation and maintenance of an internal frontend framework for micro frontends"}},workingStudentIpoque:{description:{first:"Further development of the DSL and the associated compiler",second:"Implementation of plugins for IDEs to support the DSL",third:"Migration of existing front-end tests to more modern technologies (unit and e2e tests)",fourth:"Implementation and maintenance of components in the internal design system",fifth:"Implementation and maintenance of an internal frontend framework for micro frontends",sixth:"Development of features in a micro front-end architecture"}},masterIpoque:{description:{first:"Conception, implementation and evaluation of framework-agnostic solutions for the scoping of web components in micro-frontends to avoid version conflicts",second:"Prototypical implementation of the solutions in a micro front-end architecture and evaluation of the results",third:"Investigation of a possible solution for scoping web components in micro-frontends with different frameworks"}},bachelorIpoque:{description:{first:"Conception, design and implementation of a domain-specific language for the generation of component source code",second:"Design and implementation of a compiler for the realization of the domain-specific language",third:"Generierung von Angular-Komponentenquellcode auf Basis des definierten DSL-Modells"}},internIpoque:{description:{first:"Creation of generic Angular components to display UI components in an internal showcase",second:"Automated rendering of various form elements based on a user-defined configuration",third:"Reactive implementation of the business logic using RxJS"}},workingStudentGDM:{description:{first:"Working student in the Service ITK department",second:"Automation of recurring tasks in the area of the Microsoft Office Suite and file systems",third:"Prototypical implementation of an automation of location data maintenance based on various files"}}},present:"Present",cv:"Curriculum Vitae"},Fv={title:"Projects",tab:"Featured",website:"Website",github:"GitHub",projectTitles:{kirmize:"Kirmize",portfolio:"Portfolio",chatbot:"QUAtsCH Chatbot ´22",multimediaDB:"Multimedia Database Veterinary Practice",eaFlowShop:"EA Flow Shop Optimization",weatherData:"XML Weather Data Visiualization"},details:{focus:"Focus",period:"Period",present:"Present",goal:"Goal",implementation:"Implementation",technologies:"Technologies",screenshots:"Screenshots",kirmize:{focus:"Web Development",subtitle:"A mobil web application for the digitalization of planning appointments.",goal:"The Kirmize app was developed to facilitate the organization and planning of appointments for local clubs. The goal was to create a user-friendly and intuitive application that allows users to stay informed about various events and plan their attendance. The app should have a clear structure and appealing design to enhance user experience and facilitate interaction with the application. Additionally, the application should allow users to upload and share photos and videos from the events. Furthermore, surveys and polls should be conducted to capture users' opinions on various topics.",implementation:"The Kirmize app was developed using React and ChakraUI. The application was designed as a Progressive Web App (PWA) to ensure optimal performance and user experience across various devices. The implementation was done in close collaboration with local clubs to consider the requirements and preferences of the users. For data storage, a MongoDB database is used, with access abstracted through Prisma ORM. The business logic of the application is implemented in an Express backend, which handles communication with the database and provides data to the frontend application. User authentication and authorization are performed using JSON Web Tokens (JWT)."},portfolio:{focus:"Web Development",subtitle:"My personal portfolio website to showcase my work.",goal:"The goal of creating my own portfolio was to highlight my previous projects and experiences in order to showcase my skills and expertise. Additionally, it served as practice to improve skills such as design and animation. Lastly, a portfolio enhances online presence and facilitates contact with potential employers or clients.",implementation:"First, I researched what features make a good portfolio and gathered inspiration. Then, I planned the structure of my website and created a concept. Subsequently, the portfolio was implemented using React, ChakraUI, and Framer Motion. Deployment is done via GitHub Pages."},chatbot:{focus:"Question Answering System",subtitle:"A prototype of a chatbot for the Landesanstalt für Umwelt Baden-Württemberg.",goal:"The Landesanstalt für Umwelt Baden-Württemberg captures environmental data through a network of monitoring stations. From these data, observations can be derived to make statements about the state of ecosystems. Public access enables both researchers and private individuals to explore the observed biotopes. The quantity and complexity of the collected data require not only simplified access for various user groups but also a comprehensible preparation of the information. The goal of this project was to make environmental data accessible through a question-answer system and to support correct input using chatbot functions. Essential here was the creation of a context in which a question can be asked so that it corresponds to the requirements of the data sources. Furthermore, the clarification of the question, the processing of the data sets, and their presentation were relevant to ensure accessibility for the respective user.",implementation:"To fulfill the project goals, a web-based application was developed, which can meet the respective requirements. For the implementation of the chatbot functionality, the Rasa technology stack* was used, which enables both input in a web-based interface, the mapping of natural language queries to computer commands and the execution of commands. The question-answering system was implemented using the Qanary technology stack**. This technology allows for the extraction of individual knowledge fragments from the question posed to the system and establishing the context of the question so that the data sources can be queried. The clarification of the question, the processing, and presentation of the data sets could also be integrated through this mechanism.","rasa-detail":"The Rasa technology stack consists of Rasa Chat, Rasa Open Source, and Rasa Action Server:","qanary-detail":"The Qanary technology stack consists of a reference implementation for creating question answering systems based on the Qanary methodology:"},multimediaDB:{focus:"Database Management, Advanced Searching",subtitle:"A prototypical software using multimedia database for the digitalization of veterinary practices (Case Study).",goal:"The goal of this university project was to showcase and learn the usage of a multimedia database, specifically PostgreSQL, within a near-real-world context. Ultimately an advances searching functionality based on one of the diverse media types needed to be implemented. The project was conducted in a team of two students and was supervised by a professor. The project was part of the course 'Multimedia Database Systems' and was realised in about 6 weeks.",implementation:"To achieve the defined goal, a system tailored for veterinary practices was developed, allowing for the storage of customer, animal, and medication data. The implementation of various search techniques involved advanced filtering of medication data, database-based full-text search and finding animals based on image comparisons. The introduction of these search techniques aims to enhance the usability and functionality of the system within the veterinary domain. In this project, we gained initial practical experience in database design and implementation, as well as the utilization of multimedia data in specialized applications."},eaFlowShop:{focus:"Optimization, Evolutionary Algorithm",subtitle:"An evolutionary algorithm for the optimization of flow shop scheduling problems.",goal:"The flow shop problem is a classic optimization challenge in operations research and manufacturing, where a set of tasks must be scheduled across a series of machines while minimizing the overall completion time. In this university project, I tackled this problem by employing evolutionary algorithms, namely the hill climber and genetic algorithm, to explore their effectiveness in finding optimal solutions. The project also aimed to be a learning playground for different evolutionary algorithm methods.",implementation:"In my project, I delved into optimizing the problem through two distinct evolutionary algorithms: hill climbing with a shift mutation and a genetic algorithm featuring multiple methods. For the hill climbing approach, I engineered an iterative refinement process aimed at continuously improving solutions by shifting tasks between machines. To enhance the algorithm's exploration capabilities, I integrated a shift mutation operator, which systematically explores neighboring solutions. Conversely, the genetic algorithm was meticulously designed to accommodate a range of genetic operators and selection strategies. Specifically, I implemented order recombination, one-point crossover, fitness-proportional selection, best selection and tournament selection methods. Order recombination fostered diversity by blending genetic material from parent solutions, while one-point crossover facilitated the creation of novel solutions through random genetic material exchange. The selection strategies were varied: fitness-proportional selection ensured that individuals with higher fitness levels were more likely to be chosen, thereby driving the evolutionary process toward fitter solutions. Best selection preserved elite solutions by favoring individuals with the highest fitness values, maintaining a high-quality population over generations. Tournament selection, on the other hand, promoted diversity and maintained solution quality by pitting a subset of individuals against each other for selection. These intricate implementations allowed for a comprehensive exploration of evolutionary techniques in tackling the flow shop scheduling problem, facilitating nuanced comparisons between different algorithms and strategies."},weatherData:{focus:"Data Visualization",subtitle:"A web application for the visualization of weather data based on XML files.",goal:"The primary objective of this university project was to develop a visual processing system for weather data obtained from XML files. Thereby the techniques of Document Description Languages such as XML Schema Definition and XSL Transformation should be used.",implementation:"The defined goal was reached by establishing an XML schema with XML Schema Defintion to structure the data effectively. Subsequently, I transformed the XML data utilizing a custom XSL transformations to generate a HTML structure for representing the data. Leveraging D3.js, a powerful JavaScript library for data visualization, I created an interactive website to display the processed weather data. This project not only demonstrated the integration of XML technologies for data structuring and transformation but also showcased the capabilities of D3.js in rendering dynamic and informative visualizations on the web."}}},Ov={text:"Developed by Frederic Bahr with"},Nv={tooltip:"Open the chatbot",header:{title:"Chatbot",subtitle:"Ask me anything!",close:"Close"},initialMessage:{firstMessage:"Hi, I´m Frederic`s ChatBot 🤖",secondMessage:"How can i help you?"},sayHello:{actionText:"I just wanted to say hello",firstMessage:"Hi, whats up?",secondMessage:"Well hello there, nice to meet you!👋",thirdMessage:"Thanks for looking at my personal website.",fourthMessage:"I hope you enjoy my work.",fifthMessage:"Can I help you with anything else?"},showCV:{actionText:"I want to see your CV.",firstMessage:"Hey, im interested in your CV!",secondMessage:"Thanks for reaching out to me.",thirdMessage:"Underneath you can download my CV.",download:"Download CV"},directChat:{actionText:"I want to talk to you directly.",firstMessage:"I really like your Chatbot, but i would rather talk to you directly.",secondMessage:"Sad times, but I respect your decision.",thirdMessage:"Send my creator a message and he will answer as soon as possible!"}},zv={github:"GitHub Profile",linkedin:"LinkedIn Profile"},Hv={headline:"Get in touch",subtext:"I'm always open for a good chat, whether it's about a project, a job offer, or just to say hello. Feel free to reach out to me via the contact form or directly via email.",form:{headline:"Send me a message!",name:"Name",email:"Email",message:"Message",submit:"Send message",emailError:"Please enter a valid email address."}},$v={navigation:Lv,hero:Dv,about:Iv,experience:jv,projects:Fv,footer:Ov,chatbot:Nv,socials:zv,contact:Hv},Bv={en:{translation:$v},de:{translation:Mv}};vt.use(bv).init({resources:Bv,lng:"de",fallbackLng:"de",interpolation:{escapeValue:!1}});const Wv=()=>p.jsxs("svg",{width:"20mm",height:"20mm",viewBox:"0 0 20 20",version:"1.1",id:"svg1139",children:[p.jsx("title",{id:"title200",children:"Chatbot icon"}),p.jsxs("defs",{id:"defs1133",children:[p.jsx("clipPath",{clipPathUnits:"userSpaceOnUse",id:"clipPath5238-1-8-9-8-4",children:p.jsx("rect",{transform:"rotate(-90)",style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#ffffff",fillOpacity:1,fillRule:"evenodd",stroke:"none"},id:"rect5240-2-3-9-5-1",width:"315.35437",height:"744.09448",x:"-1016.9291",y:"1461.6753"})}),p.jsx("clipPath",{clipPathUnits:"userSpaceOnUse",id:"clipPath5242-3-9-7-7",children:p.jsx("rect",{transform:"rotate(-90)",style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#ffffff",fillOpacity:1,fillRule:"evenodd",stroke:"none"},id:"rect5244-3-2-6-6",width:"315.35437",height:"744.09448",x:"-1016.9291",y:"1461.6753"})})]}),p.jsx("g",{id:"layer1",transform:"translate(-25.414562,-111.28127)",children:p.jsx("path",{style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#fbfffe",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:.62069714,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1,marker:"none"},d:"m 35.412312,115.5918 c -1.442046,0 -2.880739,0.49168 -4.052401,1.4748 -0.705182,0.59173 -1.2502,1.31171 -1.628713,2.10012 -0.05253,-0.005 -0.103652,-0.0164 -0.157588,-0.0164 -0.941869,0 -1.70024,0.75836 -1.70024,1.70021 v 2.10134 c 0,0.94184 0.758371,1.70021 1.70024,1.70021 0.05394,0 0.105059,-0.0117 0.157588,-0.0164 0.06777,0.14047 0.137889,0.27991 0.216918,0.41689 0.308938,0.55139 1.134304,0.0793 0.815588,-0.46655 -1.304955,-2.26029 -0.799571,-5.12447 1.199708,-6.80208 1.999326,-1.67765 4.903352,-1.67765 6.902655,0 1.999326,1.67761 2.50471,4.54174 1.199732,6.80208 l -0.01407,0.0234 -0.0094,0.0234 c 0,0 -0.633799,1.40211 -1.878344,1.40211 l -1.575387,-0.0141 c -0.147739,-0.21575 -0.384191,-0.366 -0.666512,-0.366 h -1.015533 c -0.45534,0 -0.821638,0.36752 -0.821638,0.82286 0,0.28087 0.178225,0.49415 0.586056,0.49415 l 3.493009,2.8e-4 c 1.867604,0 2.675336,-1.8335 2.712107,-1.91835 v -0.005 c 0.07832,-0.13578 0.147269,-0.27521 0.214572,-0.41444 0.05488,0.005 0.108342,0.0164 0.164858,0.0164 0.941869,0 1.700237,-0.75836 1.700237,-1.70021 v -2.10134 c 0,-0.94184 -0.75837,-1.70021 -1.700237,-1.70021 -0.05441,0 -0.105762,0.009 -0.158761,0.0164 -0.377627,-0.78846 -0.921023,-1.50837 -1.6263,-2.10014 -1.171614,-0.98312 -2.616355,-1.47481 -4.058451,-1.47481 z m -2.049205,2.98718 c -0.366019,-0.0239 -0.700354,0.0535 -0.992502,0.36114 -0.779049,0.82018 -1.260325,1.9365 -1.260325,3.12533 0,0.98061 0.327722,2.07941 0.879793,2.11951 0.786511,0.0572 2.027657,-0.45928 3.424676,-0.45928 1.480437,0 2.786843,0.57951 3.561606,0.44232 0.469528,-0.083 0.744064,-1.20536 0.744064,-2.10255 0,-1.18883 -0.482452,-2.30515 -1.261524,-3.12533 -0.779054,-0.82021 -1.855342,0 -3.044146,0 -0.743006,0 -1.441646,-0.32109 -2.051642,-0.36114 z m -0.174473,2.02134 c 0.434305,1.7e-4 0.786345,0.35219 0.786486,0.78651 -1.41e-4,0.43431 -0.352181,0.78633 -0.786486,0.78649 -0.434304,-1.6e-4 -0.786345,-0.35218 -0.786485,-0.78649 1.4e-4,-0.43432 0.352181,-0.78634 0.786485,-0.78651 z m 4.452304,0 c 0.434329,1.7e-4 0.786345,0.35219 0.786509,0.78651 -1.66e-4,0.43431 -0.35218,0.78633 -0.786509,0.78649 -0.434304,-1.6e-4 -0.786321,-0.35218 -0.786485,-0.78649 1.64e-4,-0.43432 0.352181,-0.78634 0.786485,-0.78651 z",id:"rect6094-5-9"})})]}),Uv=({onClick:r})=>{const{t:e}=Se();return p.jsx(M0,{paddingX:4,paddingY:4,children:p.jsx(H,{children:p.jsxs(Ye,{width:"full",children:[p.jsx(L0,{icon:p.jsx(Wv,{}),colorScheme:"gray"}),p.jsxs(H,{flex:1,children:[p.jsx(re,{as:"h2",fontSize:"md",children:e("chatbot.header.title")}),p.jsx(re,{as:"h3",fontSize:"sm",fontWeight:"normal",children:e("chatbot.header.subtitle")})]}),p.jsx(Os,{label:e("chatbot.header.close"),hasArrow:!0,openDelay:300,children:p.jsx(D0,{onClick:r})})]})})})},Pp="/portfolio/assets/lebenslauf-CJWm1AYW.pdf",Vv=[{message:"chatbot.initialMessage.firstMessage",owner:"bot"},{message:"chatbot.initialMessage.secondMessage",owner:"bot"}],Rp={actionText:"chatbot.sayHello.actionText",messges:[{message:"chatbot.sayHello.firstMessage",owner:"customer"},{message:"chatbot.sayHello.secondMessage",owner:"bot"},{message:"chatbot.sayHello.thirdMessage",owner:"bot"},{message:"chatbot.sayHello.fourthMessage",owner:"bot"},{message:"chatbot.sayHello.fifthMessage",owner:"bot"}],furtherActions:["showCV","directChat"]},Mp={actionText:"chatbot.showCV.actionText",messges:[{message:"chatbot.showCV.firstMessage",owner:"customer"},{message:"chatbot.showCV.secondMessage",owner:"bot"},{message:"chatbot.showCV.thirdMessage",owner:"bot"},{type:"pdf",owner:"bot",url:Pp,fileName:"cv_fredericbahr"}],furtherActions:["sayHello","directChat"]},Lp={actionText:"chatbot.directChat.actionText",messges:[{message:"chatbot.directChat.firstMessage",owner:"customer"},{message:"chatbot.directChat.secondMessage",owner:"bot"},{message:"chatbot.directChat.thirdMessage",owner:"bot"},{url:"/contact"}],furtherActions:["sayHello","showCV"]},Vh=new Map;Vh.set("sayHello",Rp);Vh.set("showCV",Mp);Vh.set("directChat",Lp);const Gv=[Rp,Mp,Lp];function qv(r){return r.message!==void 0}function Xv(r){return r.fileName!==void 0}function Yv(r){return r.url!==void 0}const Kv=({children:r,handleAction:e})=>p.jsx(Ku,{variant:"outline",colorScheme:"gray",onClick:e,children:p.jsx(W,{as:"span",width:"full",style:{textWrap:"wrap"},textAlign:{base:"start",lg:"center"},children:r})}),Jv="modulepreload",Qv=function(r){return"/portfolio/"+r},sg={},Cc=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Qv(c),c in sg)return;sg[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Jv,h||(u.as="script"),u.crossOrigin="",u.href=c,o&&u.setAttribute("nonce",o),document.head.appendChild(u),h)return new Promise((f,g)=>{u.addEventListener("load",f),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var Bo={};Bo.d=(r,e)=>{for(var t in e)Bo.o(e,t)&&!Bo.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};Bo.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var K=globalThis.pdfjsLib={};Bo.d(K,{AbortException:()=>Br,AnnotationEditorLayer:()=>Ou,AnnotationEditorParamsType:()=>X,AnnotationEditorType:()=>Z,AnnotationEditorUIManager:()=>jr,AnnotationLayer:()=>KA,AnnotationMode:()=>Us,ColorPicker:()=>vh,DOMSVGFactory:()=>vf,DrawLayer:()=>$u,FeatureTest:()=>Ct,GlobalWorkerOptions:()=>Ls,ImageKind:()=>jc,InvalidPDFException:()=>Ip,MissingPDFException:()=>$r,OPS:()=>dn,OutputScale:()=>Rd,PDFDataRangeTransport:()=>Rm,PDFDateString:()=>ff,PDFWorker:()=>aa,PasswordResponses:()=>nx,PermissionFlag:()=>tx,PixelsPerInch:()=>Ai,RenderingCancelledException:()=>df,TextLayer:()=>iu,UnexpectedResponseException:()=>Yh,Util:()=>z,VerbosityLevel:()=>Gh,XfaLayer:()=>Lm,build:()=>RA,createValidAbsoluteUrl:()=>ax,fetchData:()=>Jh,getDocument:()=>xA,getFilenameFromUrl:()=>px,getPdfFilenameFromUrl:()=>mx,getXfaPageViewport:()=>bx,isDataScheme:()=>Qh,isPdfFile:()=>uf,noContextMenu:()=>on,normalizeUnicode:()=>ux,setLayerDimensions:()=>Ir,shadow:()=>ie,version:()=>PA});const yt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Dp=[1,0,0,1,0,0],Cd=[.001,0,0,.001,0,0],Zv=1e7,hd=1.35,qt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Us={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ex="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},X={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},tx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},dt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},jc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ao={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Gh={ERRORS:0,WARNINGS:1,INFOS:5},dn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},nx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let qh=Gh.WARNINGS;function sx(r){Number.isInteger(r)&&(qh=r)}function ix(){return qh}function Xh(r){qh>=Gh.INFOS&&console.log(`Info: ${r}`)}function te(r){qh>=Gh.WARNINGS&&console.log(`Warning: ${r}`)}function xe(r){throw new Error(r)}function Xe(r,e){r||xe(e)}function rx(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ax(r,e=null,t=null){if(!r)return null;try{if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const s=r.match(/\./g);(s==null?void 0:s.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=dx(r)}catch{}}const n=e?new URL(r,e):new URL(r);if(rx(n))return n}catch{}return null}function ie(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Pi=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class kd extends Pi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Td extends Pi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ip extends Pi{constructor(e){super(e,"InvalidPDFException")}}class $r extends Pi{constructor(e){super(e,"MissingPDFException")}}class Yh extends Pi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class ox extends Pi{constructor(e){super(e,"FormatError")}}class Br extends Pi{constructor(e){super(e,"AbortException")}}function jp(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&xe("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=r.subarray(s,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Kh(r){typeof r!="string"&&xe("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function lx(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function cf(r){const e=Object.create(null);for(const[t,n]of r)e[t]=n;return e}function cx(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function hx(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return ie(this,"isLittleEndian",cx())}static get isEvalSupported(){return ie(this,"isEvalSupported",hx())}static get isOffscreenCanvasSupported(){return ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ie(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ie(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ie(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const dd=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var js,Fc,Pd;class z{static makeHexColor(e,t,n){return`#${dd[e]}${dd[t]}${dd[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,i]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],i[0],a[0]),Math.min(n[1],s[1],i[1],a[1]),Math.max(n[0],s[0],i[0],a[0]),Math.max(n[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-i*s))/2,h=o+c||1,d=o-c||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,s,a]}static bezierBoundingBox(e,t,n,s,i,a,o,c,h){return h?(h[0]=Math.min(h[0],e,o),h[1]=Math.min(h[1],t,c),h[2]=Math.max(h[2],e,o),h[3]=Math.max(h[3],t,c)):h=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],w(this,js,Pd).call(this,e,n,i,o,t,s,a,c,3*(-e+3*(n-i)+o),6*(e-2*n+i),3*(n-e),h),w(this,js,Pd).call(this,e,n,i,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),h),h}}js=new WeakSet,Fc=function(e,t,n,s,i,a,o,c,h,d){if(h<=0||h>=1)return;const u=1-h,f=h*h,g=f*h,m=u*(u*(u*e+3*h*t)+3*f*n)+g*s,y=u*(u*(u*i+3*h*a)+3*f*o)+g*c;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],y)},Pd=function(e,t,n,s,i,a,o,c,h,d,u,f){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&w(this,js,Fc).call(this,e,t,n,s,i,a,o,c,-u/d,f);return}const g=d**2-4*u*h;if(g<0)return;const m=Math.sqrt(g),y=2*h;w(this,js,Fc).call(this,e,t,n,s,i,a,o,c,(-d+m)/y,f),w(this,js,Fc).call(this,e,t,n,s,i,a,o,c,(-d-m)/y,f)},x(z,js);function dx(r){return decodeURIComponent(escape(r))}let ud=null,ig=null;function ux(r){return ud||(ud=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ig=new Map([["ﬅ","ſt"]])),r.replaceAll(ud,(e,t,n)=>t?t.normalize("NFKC"):ig.get(n))}function fx(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const r=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(r);else for(let e=0;e<32;e++)r[e]=Math.floor(Math.random()*255);return jp(r)}const hf="pdfjs_internal_id_",ss={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function gx(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(jp(r))}const rs="http://www.w3.org/2000/svg",Fi=class Fi{};q(Fi,"CSS",96),q(Fi,"PDF",72),q(Fi,"PDF_TO_CSS_UNITS",Fi.CSS/Fi.PDF);let Ai=Fi;async function Jh(r,e="text"){if(_o(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class fc{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=i;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,d,u,f;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,d=0,u=0,f=1;break;case 90:h=0,d=1,u=1,f=0;break;case 270:h=0,d=-1,u=-1,f=0;break;case 0:h=1,d=0,u=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,f=-f);let g,m,y,A;h===0?(g=Math.abs(c-e[1])*t+s,m=Math.abs(o-e[0])*t+i,y=(e[3]-e[1])*t,A=(e[2]-e[0])*t):(g=Math.abs(o-e[0])*t+s,m=Math.abs(c-e[1])*t+i,y=(e[2]-e[0])*t,A=(e[3]-e[1])*t),this.transform=[h*t,d*t,u*t,f*t,g-h*t*o-u*t*c,m-d*t*o-f*t*c],this.width=y,this.height=A}get rawDims(){const{viewBox:e}=this;return ie(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new fc({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return z.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=z.applyTransform([e[0],e[1]],this.transform),n=z.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return z.applyInverseTransform([e,t],this.transform)}}class df extends Pi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Qh(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function uf(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function px(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function mx(r,e="document.pdf"){if(typeof r!="string")return e;if(Qh(r))return te('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(r);let i=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||e}class rg{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&te(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||te(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-s}ms
`);return e.join("")}}function _o(r,e){try{const{protocol:t}=e?new URL(r,e):new URL(r);return t==="http:"||t==="https:"}catch{return!1}}function on(r){r.preventDefault()}function ag(r){console.log("Deprecated API usage: "+r)}var Yo;class ff{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Yo)||b(this,Yo,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Yo).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(a+=d,o+=u):h==="+"&&(a-=d,o-=u),new Date(Date.UTC(n,s,i,a,o,c))}}Yo=new WeakMap,x(ff,Yo);function bx(r,{scale:e=1,rotation:t=0}){const{width:n,height:s}=r.attributes.style,i=[0,0,parseInt(n),parseInt(s)];return new fc({viewBox:i,scale:e,rotation:t})}function gf(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(te(`Not a valid color format: "${r}"`),[0,0,0])}function yx(r){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,gf(n))}e.remove()}function Le(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform();return[e,t,n,s,i,a]}function is(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform().invertSelf();return[e,t,n,s,i,a]}function Ir(r,e,t=!1,n=!0){if(e instanceof fc){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=r,o=Ct.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${i}px`,d=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,u=o?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=d,a.height=u):(a.width=u,a.height=d)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Rd{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Vs,Ni,un,zi,Ko,Jo,Sh,Fp,kt,Op,Np,Oc,zp,Ld;const as=class as{constructor(e){x(this,kt);x(this,Vs,null);x(this,Ni,null);x(this,un);x(this,zi,null);x(this,Ko,null);b(this,un,e),l(as,Jo)||b(as,Jo,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,Vs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,un)._uiManager._signal;e.addEventListener("contextmenu",on,{signal:t}),e.addEventListener("pointerdown",w(as,Sh,Fp),{signal:t});const n=b(this,zi,document.createElement("div"));n.className="buttons",e.append(n);const s=l(this,un).toolbarPosition;if(s){const{style:i}=e,a=l(this,un)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,kt,zp).call(this),e}get div(){return l(this,Vs)}hide(){var e;l(this,Vs).classList.add("hidden"),(e=l(this,Ni))==null||e.hideDropdown()}show(){var e;l(this,Vs).classList.remove("hidden"),(e=l(this,Ko))==null||e.shown()}async addAltText(e){const t=await e.render();w(this,kt,Oc).call(this,t),l(this,zi).prepend(t,l(this,kt,Ld)),b(this,Ko,e)}addColorPicker(e){b(this,Ni,e);const t=e.renderButton();w(this,kt,Oc).call(this,t),l(this,zi).prepend(t,l(this,kt,Ld))}remove(){var e;l(this,Vs).remove(),(e=l(this,Ni))==null||e.destroy(),b(this,Ni,null)}};Vs=new WeakMap,Ni=new WeakMap,un=new WeakMap,zi=new WeakMap,Ko=new WeakMap,Jo=new WeakMap,Sh=new WeakSet,Fp=function(e){e.stopPropagation()},kt=new WeakSet,Op=function(e){l(this,un)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Np=function(e){l(this,un)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Oc=function(e){const t=l(this,un)._uiManager._signal;e.addEventListener("focusin",w(this,kt,Op).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",w(this,kt,Np).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",on,{signal:t})},zp=function(){const{editorType:e,_uiManager:t}=l(this,un),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",l(as,Jo)[e]),w(this,kt,Oc).call(this,n),n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,zi).append(n)},Ld=function(){const e=document.createElement("div");return e.className="divider",e},x(as,Sh),x(as,Jo,null);let Md=as;var Qo,Hi,$i,_i,Hp,$p,Bp;class wx{constructor(e){x(this,_i);x(this,Qo,null);x(this,Hi,null);x(this,$i);b(this,$i,e)}show(e,t,n){const[s,i]=w(this,_i,$p).call(this,t,n),{style:a}=l(this,Hi)||b(this,Hi,w(this,_i,Hp).call(this));e.append(l(this,Hi)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Hi).remove()}}Qo=new WeakMap,Hi=new WeakMap,$i=new WeakMap,_i=new WeakSet,Hp=function(){const e=b(this,Hi,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",on,{signal:l(this,$i)._signal});const t=b(this,Qo,document.createElement("div"));return t.className="buttons",e.append(t),w(this,_i,Bp).call(this),e},$p=function(e,t){let n=0,s=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const o=i.x+(t?i.width:0);if(a>n){s=o,n=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,n]},Bp=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=l(this,$i)._signal;e.addEventListener("contextmenu",on,{signal:n}),e.addEventListener("click",()=>{l(this,$i).highlightSelection("floating_button")},{signal:n}),l(this,Qo).append(e)};function bh(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}function vx(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}var Eh;class xx{constructor(){x(this,Eh,0)}get id(){return`${ex}${xt(this,Eh)._++}`}}Eh=new WeakMap;var ha,Zo,ft,da,Nc;const Pf=class Pf{constructor(){x(this,da);x(this,ha,fx());x(this,Zo,0);x(this,ft,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ie(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:i}=e;return w(this,da,Nc).call(this,`${t}_${n}_${s}_${i}`,e)}async getFromUrl(e){return w(this,da,Nc).call(this,e,e)}async getFromBlob(e,t){const n=await t;return w(this,da,Nc).call(this,e,n)}async getFromId(e){l(this,ft)||b(this,ft,new Map);const t=l(this,ft).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,ft)||b(this,ft,new Map);let n=l(this,ft).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${l(this,ha)}_${xt(this,Zo)._++}`,refCounter:1,isSvg:!1},l(this,ft).set(e,n),l(this,ft).set(n.id,n),n}getSvgUrl(e){const t=l(this,ft).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,ft)||b(this,ft,new Map);const t=l(this,ft).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,ha)}_`)}};ha=new WeakMap,Zo=new WeakMap,ft=new WeakMap,da=new WeakSet,Nc=async function(e,t){l(this,ft)||b(this,ft,new Map);let n=l(this,ft).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,ha)}_${xt(this,Zo)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Jh(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=Pf._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((h,d)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,h()},a.onload=async()=>{const u=n.svgUrl=a.result;o.src=await i?`${u}#svgView(preserveAspectRatio(none))`:u},o.onerror=a.onerror=d});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return l(this,ft).set(e,n),n&&l(this,ft).set(n.id,n),n};let Dd=Pf;var Ze,Gs,el,et;class Ax{constructor(e=128){x(this,Ze,[]);x(this,Gs,!1);x(this,el);x(this,et,-1);b(this,el,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),l(this,Gs))return;const c={cmd:e,undo:t,post:n,type:i};if(l(this,et)===-1){l(this,Ze).length>0&&(l(this,Ze).length=0),b(this,et,0),l(this,Ze).push(c);return}if(a&&l(this,Ze)[l(this,et)].type===i){o&&(c.undo=l(this,Ze)[l(this,et)].undo),l(this,Ze)[l(this,et)]=c;return}const h=l(this,et)+1;h===l(this,el)?l(this,Ze).splice(0,1):(b(this,et,h),h<l(this,Ze).length&&l(this,Ze).splice(h)),l(this,Ze).push(c)}undo(){if(l(this,et)===-1)return;b(this,Gs,!0);const{undo:e,post:t}=l(this,Ze)[l(this,et)];e(),t==null||t(),b(this,Gs,!1),b(this,et,l(this,et)-1)}redo(){if(l(this,et)<l(this,Ze).length-1){b(this,et,l(this,et)+1),b(this,Gs,!0);const{cmd:e,post:t}=l(this,Ze)[l(this,et)];e(),t==null||t(),b(this,Gs,!1)}}hasSomethingToUndo(){return l(this,et)!==-1}hasSomethingToRedo(){return l(this,et)<l(this,Ze).length-1}destroy(){b(this,Ze,null)}}Ze=new WeakMap,Gs=new WeakMap,el=new WeakMap,et=new WeakMap;var _h,Wp;class gc{constructor(e){x(this,_h);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ct.platform;for(const[n,s,i={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(w(this,_h,Wp).call(this,t));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(s.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}_h=new WeakSet,Wp=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ch=class Ch{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return yx(e),ie(this,"_colors",e)}convert(e){const t=gf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((i,a)=>i===t[a]))return Ch._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?z.makeHexColor(...t):e}};q(Ch,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Id=Ch;var ua,zt,Ve,rt,fa,ls,ga,fn,qs,pa,Bi,Dn,gn,Wi,tl,nl,ma,sl,In,Xs,ba,Ys,jn,kh,Ks,il,Js,Ui,rl,al,tt,ce,cs,Vi,ol,ll,Qs,Fn,hs,cl,Jt,j,zc,jd,Up,Vp,Hc,Gp,qp,Xp,Fd,Yp,Od,Nd,Kp,At,Bs,Jp,Qp,zd,Zp,Co,Hd;const ia=class ia{constructor(e,t,n,s,i,a,o,c,h,d,u){x(this,j);x(this,ua,new AbortController);x(this,zt,null);x(this,Ve,new Map);x(this,rt,new Map);x(this,fa,null);x(this,ls,null);x(this,ga,null);x(this,fn,new Ax);x(this,qs,null);x(this,pa,0);x(this,Bi,new Set);x(this,Dn,null);x(this,gn,null);x(this,Wi,new Set);x(this,tl,!1);x(this,nl,!1);x(this,ma,!1);x(this,sl,null);x(this,In,null);x(this,Xs,null);x(this,ba,null);x(this,Ys,!1);x(this,jn,null);x(this,kh,new xx);x(this,Ks,!1);x(this,il,!1);x(this,Js,null);x(this,Ui,null);x(this,rl,null);x(this,al,null);x(this,tt,Z.NONE);x(this,ce,new Set);x(this,cs,null);x(this,Vi,null);x(this,ol,null);x(this,ll,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Qs,[0,0]);x(this,Fn,null);x(this,hs,null);x(this,cl,null);x(this,Jt,null);const f=this._signal=l(this,ua).signal;b(this,hs,e),b(this,cl,t),b(this,fa,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:f}),w(this,j,Gp).call(this),w(this,j,Kp).call(this),w(this,j,Fd).call(this),b(this,ls,i.annotationStorage),b(this,sl,i.filterFactory),b(this,Vi,a),b(this,ba,o||null),b(this,tl,c),b(this,nl,h),b(this,ma,d),b(this,al,u||null),this.viewParameters={realScale:Ai.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ia.prototype,t=a=>l(a,hs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ie(this,"_keyboardManager",new gc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,hs).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,hs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,s;(e=l(this,Jt))==null||e.resolve(),b(this,Jt,null),(t=l(this,ua))==null||t.abort(),b(this,ua,null),this._signal=null;for(const i of l(this,rt).values())i.destroy();l(this,rt).clear(),l(this,Ve).clear(),l(this,Wi).clear(),b(this,zt,null),l(this,ce).clear(),l(this,fn).destroy(),(n=l(this,fa))==null||n.destroy(),(s=l(this,jn))==null||s.hide(),b(this,jn,null),l(this,In)&&(clearTimeout(l(this,In)),b(this,In,null)),l(this,Fn)&&(clearTimeout(l(this,Fn)),b(this,Fn,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,al)}get useNewAltTextFlow(){return l(this,nl)}get useNewAltTextWhenAddingImage(){return l(this,ma)}get hcmFilter(){return ie(this,"hcmFilter",l(this,Vi)?l(this,sl).addHCMFilter(l(this,Vi).foreground,l(this,Vi).background):"none")}get direction(){return ie(this,"direction",getComputedStyle(l(this,hs)).direction)}get highlightColors(){return ie(this,"highlightColors",l(this,ba)?new Map(l(this,ba).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){b(this,rl,e)}editAltText(e,t=!1){var n;(n=l(this,fa))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,ma,t);break}}onPageChanging({pageNumber:e}){b(this,pa,e-1)}focusMainContainer(){l(this,hs).focus()}findParent(e,t){for(const n of l(this,rt).values()){const{x:s,y:i,width:a,height:o}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return n}return null}disableUserSelect(e=!1){l(this,cl).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Wi).add(e)}removeShouldRescale(e){l(this,Wi).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ai.PDF_TO_CSS_UNITS;for(const t of l(this,Wi))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),h=w(this,j,zc).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;t.empty();const u=w(this,j,jd).call(this,h),f=l(this,tt)===Z.NONE,g=()=>{u==null||u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Z.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ls)&&!l(this,ls).has(e.id)&&l(this,ls).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Ys)&&(b(this,Ys,!1),w(this,j,Hc).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,ce))if(t.div.contains(e)){b(this,Ui,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Ui))return;const[e,t]=l(this,Ui);b(this,Ui,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){w(this,j,Fd).call(this),w(this,j,Od).call(this)}removeEditListeners(){w(this,j,Yp).call(this),w(this,j,Nd).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of l(this,gn))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of l(this,gn))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=l(this,zt))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,ce)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of l(this,gn))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){te(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of n){const h=await s.deserialize(c);if(!h)return;i.push(h)}const a=()=>{for(const c of i)w(this,j,zd).call(this,c);w(this,j,Hd).call(this,i)},o=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){te(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,tt)!==Z.NONE&&!this.isEditorHandlingKeyboard&&ia._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ys)&&(b(this,Ys,!1),w(this,j,Hc).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(w(this,j,qp).call(this),w(this,j,Od).call(this),w(this,j,At).call(this,{isEditing:l(this,tt)!==Z.NONE,isEmpty:w(this,j,Co).call(this),hasSomethingToUndo:l(this,fn).hasSomethingToUndo(),hasSomethingToRedo:l(this,fn).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,j,Xp).call(this),w(this,j,Nd).call(this),w(this,j,At).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,gn)){b(this,gn,e);for(const t of l(this,gn))w(this,j,Bs).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,kh).id}get currentLayer(){return l(this,rt).get(l(this,pa))}getLayer(e){return l(this,rt).get(e)}get currentPageIndex(){return l(this,pa)}addLayer(e){l(this,rt).set(e.pageIndex,e),l(this,Ks)?e.enable():e.disable()}removeLayer(e){l(this,rt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(l(this,tt)!==e&&!(l(this,Jt)&&(await l(this,Jt).promise,!l(this,Jt)))){if(b(this,Jt,Promise.withResolvers()),b(this,tt,e),e===Z.NONE){this.setEditingState(!1),w(this,j,Qp).call(this),l(this,Jt).resolve();return}this.setEditingState(!0),await w(this,j,Jp).call(this),this.unselectAll();for(const s of l(this,rt).values())s.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),l(this,Jt).resolve();return}for(const s of l(this,Ve).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,Jt).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,tt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(l(this,gn)){switch(e){case X.CREATE:this.currentLayer.addNewEditor();return;case X.HIGHLIGHT_DEFAULT_COLOR:(n=l(this,rl))==null||n.updateColor(t);break;case X.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,ol)||b(this,ol,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,ce))s.updateParams(e,t);for(const s of l(this,gn))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of l(this,Ve).values())a.editorType===e&&a.show(t);(((i=l(this,ol))==null?void 0:i.get(X.HIGHLIGHT_SHOW_ALL))??!0)!==t&&w(this,j,Bs).call(this,[[X.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,il)!==e){b(this,il,e);for(const t of l(this,rt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of l(this,Ve).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return l(this,Ve).get(e)}addEditor(e){l(this,Ve).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,In)&&clearTimeout(l(this,In)),b(this,In,setTimeout(()=>{this.focusMainContainer(),b(this,In,null)},0))),l(this,Ve).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Bi).has(e.annotationElementId))&&((t=l(this,ls))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Bi).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Bi).has(e)}removeDeletedAnnotationElement(e){l(this,Bi).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,zt)!==e&&(b(this,zt,e),e&&w(this,j,Bs).call(this,e.propertiesToUpdate))}updateUI(e){l(this,j,Zp)===e&&w(this,j,Bs).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,ce).has(e)){l(this,ce).delete(e),e.unselect(),w(this,j,At).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ce).add(e),e.select(),w(this,j,Bs).call(this,e.propertiesToUpdate),w(this,j,At).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,ce))t!==e&&t.unselect();l(this,ce).clear(),l(this,ce).add(e),e.select(),w(this,j,Bs).call(this,e.propertiesToUpdate),w(this,j,At).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,ce).has(e)}get firstSelectedEditor(){return l(this,ce).values().next().value}unselect(e){e.unselect(),l(this,ce).delete(e),w(this,j,At).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ce).size!==0}get isEnterHandled(){return l(this,ce).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,fn).undo(),w(this,j,At).call(this,{hasSomethingToUndo:l(this,fn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,j,Co).call(this)})}redo(){l(this,fn).redo(),w(this,j,At).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,fn).hasSomethingToRedo(),isEmpty:w(this,j,Co).call(this)})}addCommands(e){l(this,fn).add(e),w(this,j,At).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,j,Co).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,ce)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)w(this,j,zd).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=l(this,zt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,zt)||this.hasSelection}selectAll(){for(const e of l(this,ce))e.commit();w(this,j,Hd).call(this,l(this,Ve).values())}unselectAll(){if(!(l(this,zt)&&(l(this,zt).commitOrRemove(),l(this,tt)!==Z.NONE))&&this.hasSelection){for(const e of l(this,ce))e.unselect();l(this,ce).clear(),w(this,j,At).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Qs)[0]+=e,l(this,Qs)[1]+=t;const[s,i]=l(this,Qs),a=[...l(this,ce)],o=1e3;l(this,Fn)&&clearTimeout(l(this,Fn)),b(this,Fn,setTimeout(()=>{b(this,Fn,null),l(this,Qs)[0]=l(this,Qs)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Ve).has(c.id)&&c.translateInPage(s,i)},undo:()=>{for(const c of a)l(this,Ve).has(c.id)&&c.translateInPage(-s,-i)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Dn,new Map);for(const e of l(this,ce))l(this,Dn).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Dn))return!1;this.disableUserSelect(!1);const e=l(this,Dn);b(this,Dn,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(s,i,a,o)=>{if(l(this,Ve).has(s.id)){const c=l(this,rt).get(o);c?s._setParentAndPosition(c,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)n(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)n(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Dn))for(const n of l(this,Dn).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,ce).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,zt)===e}getActive(){return l(this,zt)}getMode(){return l(this,tt)}get imageManager(){return ie(this,"imageManager",new Dd)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(h,d,u,f)=>({x:(d-s)/a,y:1-(h+u-n)/i,width:f/a,height:u/i});break;case"180":o=(h,d,u,f)=>({x:1-(h+u-n)/i,y:1-(d+f-s)/a,width:u/i,height:f/a});break;case"270":o=(h,d,u,f)=>({x:1-(d+f-s)/a,y:(h-n)/i,width:f/a,height:u/i});break;default:o=(h,d,u,f)=>({x:(h-n)/i,y:(d-s)/a,width:u/i,height:f/a});break}const c=[];for(let h=0,d=t.rangeCount;h<d;h++){const u=t.getRangeAt(h);if(!u.collapsed)for(const{x:f,y:g,width:m,height:y}of u.getClientRects())m===0||y===0||c.push(o(f,g,m,y))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,ga)||b(this,ga,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,ga))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,ga))==null?void 0:s.get(e.data.id);if(!t)return;const n=l(this,ls).getRawValue(t);n&&(l(this,tt)===Z.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};ua=new WeakMap,zt=new WeakMap,Ve=new WeakMap,rt=new WeakMap,fa=new WeakMap,ls=new WeakMap,ga=new WeakMap,fn=new WeakMap,qs=new WeakMap,pa=new WeakMap,Bi=new WeakMap,Dn=new WeakMap,gn=new WeakMap,Wi=new WeakMap,tl=new WeakMap,nl=new WeakMap,ma=new WeakMap,sl=new WeakMap,In=new WeakMap,Xs=new WeakMap,ba=new WeakMap,Ys=new WeakMap,jn=new WeakMap,kh=new WeakMap,Ks=new WeakMap,il=new WeakMap,Js=new WeakMap,Ui=new WeakMap,rl=new WeakMap,al=new WeakMap,tt=new WeakMap,ce=new WeakMap,cs=new WeakMap,Vi=new WeakMap,ol=new WeakMap,ll=new WeakMap,Qs=new WeakMap,Fn=new WeakMap,hs=new WeakMap,cl=new WeakMap,Jt=new WeakMap,j=new WeakSet,zc=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},jd=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of l(this,rt).values())if(n.hasTextLayer(e))return n;return null},Up=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=w(this,j,zc).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(l(this,jn)||b(this,jn,new wx(this)),l(this,jn).show(n,s,this.direction==="ltr"))},Vp=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,cs)&&((i=l(this,jn))==null||i.hide(),b(this,cs,null),w(this,j,At).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,cs))return;const s=w(this,j,zc).call(this,e).closest(".textLayer");if(!s){l(this,cs)&&((a=l(this,jn))==null||a.hide(),b(this,cs,null),w(this,j,At).call(this,{hasSelectedText:!1}));return}if((o=l(this,jn))==null||o.hide(),b(this,cs,t),w(this,j,At).call(this,{hasSelectedText:!0}),!(l(this,tt)!==Z.HIGHLIGHT&&l(this,tt)!==Z.NONE)&&(l(this,tt)===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Ys,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,tt)===Z.HIGHLIGHT?w(this,j,jd).call(this,s):null;c==null||c.toggleDrawing();const h=new AbortController,d=this.combinedSignal(h),u=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&w(this,j,Hc).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:d}),window.addEventListener("blur",u,{signal:d})}},Hc=function(e=""){l(this,tt)===Z.HIGHLIGHT?this.highlightSelection(e):l(this,tl)&&w(this,j,Up).call(this)},Gp=function(){document.addEventListener("selectionchange",w(this,j,Vp).bind(this),{signal:this._signal})},qp=function(){if(l(this,Xs))return;b(this,Xs,new AbortController);const e=this.combinedSignal(l(this,Xs));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Xp=function(){var e;(e=l(this,Xs))==null||e.abort(),b(this,Xs,null)},Fd=function(){if(l(this,Js))return;b(this,Js,new AbortController);const e=this.combinedSignal(l(this,Js));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Yp=function(){var e;(e=l(this,Js))==null||e.abort(),b(this,Js,null)},Od=function(){if(l(this,qs))return;b(this,qs,new AbortController);const e=this.combinedSignal(l(this,qs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Nd=function(){var e;(e=l(this,qs))==null||e.abort(),b(this,qs,null)},Kp=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},At=function(e){Object.entries(e).some(([n,s])=>l(this,ll)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ll),e)}),l(this,tt)===Z.HIGHLIGHT&&e.hasSelectedEditor===!1&&w(this,j,Bs).call(this,[[X.HIGHLIGHT_FREE,!0]]))},Bs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Jp=async function(){if(!l(this,Ks)){b(this,Ks,!0);const e=[];for(const t of l(this,rt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ve).values())t.enable()}},Qp=function(){if(this.unselectAll(),l(this,Ks)){b(this,Ks,!1);for(const e of l(this,rt).values())e.disable();for(const e of l(this,Ve).values())e.disable()}},zd=function(e){const t=l(this,rt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Zp=function(){let e=null;for(e of l(this,ce));return e},Co=function(){if(l(this,Ve).size===0)return!0;if(l(this,Ve).size===1)for(const e of l(this,Ve).values())return e.isEmpty();return!1},Hd=function(e){for(const t of l(this,ce))t.unselect();l(this,ce).clear();for(const t of e)t.isEmpty()||(l(this,ce).add(t),t.select());w(this,j,At).call(this,{hasSelectedEditor:this.hasSelection})},q(ia,"TRANSLATE_SMALL",1),q(ia,"TRANSLATE_BIG",10);let jr=ia;var nt,On,pn,ya,Nn,Ht,wa,zn,Lt,ds,Gi,Hn,Zs,_n,ko,$c;const St=class St{constructor(e){x(this,_n);x(this,nt,null);x(this,On,!1);x(this,pn,null);x(this,ya,null);x(this,Nn,null);x(this,Ht,null);x(this,wa,!1);x(this,zn,null);x(this,Lt,null);x(this,ds,null);x(this,Gi,null);x(this,Hn,!1);b(this,Lt,e),b(this,Hn,e._uiManager.useNewAltTextFlow),l(St,Zs)||b(St,Zs,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){St._l10n??(St._l10n=e)}async render(){const e=b(this,pn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,ya,document.createElement("span"));e.append(t),l(this,Hn)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(St,Zs).missing),t.setAttribute("data-l10n-id",l(St,Zs)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,Lt)._uiManager._signal;e.addEventListener("contextmenu",on,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),l(this,Lt)._uiManager.editAltText(l(this,Lt)),l(this,Hn)&&l(this,Lt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,_n,ko)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(b(this,wa,!0),s(i))},{signal:n}),await w(this,_n,$c).call(this),e}finish(){l(this,pn)&&(l(this,pn).focus({focusVisible:l(this,wa)}),b(this,wa,!1))}isEmpty(){return l(this,Hn)?l(this,nt)===null:!l(this,nt)&&!l(this,On)}hasData(){return l(this,Hn)?l(this,nt)!==null||!!l(this,ds):this.isEmpty()}get guessedText(){return l(this,ds)}async setGuessedText(e){l(this,nt)===null&&(b(this,ds,e),b(this,Gi,await St._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),w(this,_n,$c).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Hn)||l(this,nt)){(t=l(this,zn))==null||t.remove(),b(this,zn,null);return}if(!l(this,zn)){const n=b(this,zn,document.createElement("div"));n.className="noAltTextBadge",l(this,Lt).div.append(n)}l(this,zn).classList.toggle("hidden",!e)}serialize(e){let t=l(this,nt);return!e&&l(this,ds)===t&&(t=l(this,Gi)),{altText:t,decorative:l(this,On),guessedText:l(this,ds),textWithDisclaimer:l(this,Gi)}}get data(){return{altText:l(this,nt),decorative:l(this,On)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:i=!1}){n&&(b(this,ds,n),b(this,Gi,s)),!(l(this,nt)===e&&l(this,On)===t)&&(i||(b(this,nt,e),b(this,On,t)),w(this,_n,$c).call(this))}toggle(e=!1){l(this,pn)&&(!e&&l(this,Ht)&&(clearTimeout(l(this,Ht)),b(this,Ht,null)),l(this,pn).disabled=!e)}shown(){l(this,Lt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,_n,ko)}})}destroy(){var e,t;(e=l(this,pn))==null||e.remove(),b(this,pn,null),b(this,ya,null),b(this,Nn,null),(t=l(this,zn))==null||t.remove(),b(this,zn,null)}};nt=new WeakMap,On=new WeakMap,pn=new WeakMap,ya=new WeakMap,Nn=new WeakMap,Ht=new WeakMap,wa=new WeakMap,zn=new WeakMap,Lt=new WeakMap,ds=new WeakMap,Gi=new WeakMap,Hn=new WeakMap,Zs=new WeakMap,_n=new WeakSet,ko=function(){return l(this,nt)&&"added"||l(this,nt)===null&&this.guessedText&&"review"||"missing"},$c=async function(){var s,i,a;const e=l(this,pn);if(!e)return;if(l(this,Hn)){if(e.classList.toggle("done",!!l(this,nt)),e.setAttribute("data-l10n-id",l(St,Zs)[l(this,_n,ko)]),(s=l(this,ya))==null||s.setAttribute("data-l10n-id",l(St,Zs)[`${l(this,_n,ko)}-label`]),!l(this,nt)){(i=l(this,Nn))==null||i.remove();return}}else{if(!l(this,nt)&&!l(this,On)){e.classList.remove("done"),(a=l(this,Nn))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Nn);if(!t){b(this,Nn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Lt).id}`;const o=100,c=l(this,Lt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,Ht)),b(this,Ht,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,Ht,setTimeout(()=>{b(this,Ht,null),l(this,Nn).classList.add("show"),l(this,Lt)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var h;l(this,Ht)&&(clearTimeout(l(this,Ht)),b(this,Ht,null)),(h=l(this,Nn))==null||h.classList.remove("show")},{signal:c})}l(this,On)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,nt)),t.parentNode||e.append(t);const n=l(this,Lt).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},x(St,Zs,null),q(St,"_l10n",null);let yh=St;var qi,mn,Re,va,Xi,at,Yi,ei,hl,Ki,ti,dl,Ji,us,$n,xa,Aa,Qt,ul,Th,ee,$d,fl,Bd,Wd,em,tm,Ud,Vd,Gd,nm,qd,sm,im,rm,Xd,To;const le=class le{constructor(e){x(this,ee);x(this,qi,null);x(this,mn,null);x(this,Re,null);x(this,va,!1);x(this,Xi,!1);x(this,at,null);x(this,Yi,null);x(this,ei,null);x(this,hl,"");x(this,Ki,!1);x(this,ti,null);x(this,dl,!1);x(this,Ji,!1);x(this,us,!1);x(this,$n,null);x(this,xa,0);x(this,Aa,0);x(this,Qt,null);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);x(this,ul,!1);x(this,Th,le._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=le.prototype._resizeWithKeyboard,t=jr.TRANSLATE_SMALL,n=jr.TRANSLATE_BIG;return ie(this,"_resizerKeyboardManager",new gc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Sx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(le._l10n??(le._l10n=e),le._l10nResizer||(le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),le._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);le._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,ul)}set _isDraggable(e){var t;b(this,ul,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Th)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):w(this,ee,To).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Ki)?b(this,Ki,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[i,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/i,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){w(this,ee,$d).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,ti)||b(this,ti,[this.x,this.y]),w(this,ee,$d).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,ti)||b(this,ti,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[o,c]=this.getBaseTranslation();i+=o,a+=c,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,ti)&&(l(this,ti)[0]!==this.x||l(this,ti)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=le,s=n/e,i=n/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:i,width:a,height:o}=this;if(a*=t,o*=n,s*=t,i*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),i=Math.max(0,Math.min(n-o,i));break;case 90:s=Math.max(0,Math.min(t-o,s)),i=Math.min(n,Math.max(a,i));break;case 180:s=Math.min(t,Math.max(a,s)),i=Math.min(n,Math.max(o,i));break;case 270:s=Math.min(t,Math.max(o,s)),i=Math.max(0,Math.min(n-a,i));break}this.x=s/=t,this.y=i/=n;const[c,h]=this.getBaseTranslation();s+=c,i+=h;const{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return w(n=le,fl,Bd).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return w(n=le,fl,Bd).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,l(this,Xi)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),i=!l(this,Xi)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!l(this,Xi)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Re))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Ji)?this._editToolbar:(this._editToolbar=new Md(this),this.div.append(this._editToolbar.render()),l(this,Re)&&await this._editToolbar.addAltText(l(this,Re)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Re))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Re)||(yh.initialize(le._l10n),b(this,Re,new yh(this)),l(this,qi)&&(l(this,Re).data=l(this,qi),b(this,qi,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Re))==null?void 0:e.data}set altTextData(e){l(this,Re)&&(l(this,Re).data=e)}get guessedAltText(){var e;return(e=l(this,Re))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Re))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Re))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Re)&&!l(this,Re).isEmpty()}hasAltTextData(){var e;return((e=l(this,Re))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,va)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),w(this,ee,qd).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),bh(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Ct.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,Ki,!0),this._isDraggable){w(this,ee,nm).call(this,e);return}w(this,ee,Gd).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,$n)&&clearTimeout(l(this,$n)),b(this,$n,setTimeout(()=>{var e;b(this,$n,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,c]=this.pageTranslation,h=e/s,d=t/s,u=this.x*i,f=this.y*a,g=this.width*i,m=this.height*a;switch(n){case 0:return[u+h+o,a-f-d-m+c,u+h+g+o,a-f-d+c];case 90:return[u+d+o,a-f+h+c,u+d+m+o,a-f+h+g+c];case 180:return[u-h-g+o,a-f+d+c,u-h+o,a-f+d+m+c];case 270:return[u-d-m+o,a-f-h-g+c,u-d+o,a-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,i,a]=e,o=i-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,o,c];case 90:return[n,t-s,c,o];case 180:return[i,t-s,o,c];case 270:return[i,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){b(this,Ji,!0)}disableEditMode(){b(this,Ji,!1)}isInEditMode(){return l(this,Ji)}shouldGetKeyboardEvents(){return l(this,us)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){w(this,ee,qd).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){xe("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,b(s,qi,e.accessibilityData);const[i,a]=s.pageDimensions,[o,c,h,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=c/a,s.width=h/i,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,ei))==null||e.abort(),b(this,ei,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,$n)&&(clearTimeout(l(this,$n)),b(this,$n,null)),w(this,ee,To).call(this),this.removeEditToolbar(),l(this,Qt)){for(const t of l(this,Qt).values())clearTimeout(t);b(this,Qt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,ee,em).call(this),l(this,at).classList.remove("hidden"),bh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,at).children;if(!l(this,mn)){b(this,mn,Array.from(t));const a=w(this,ee,sm).bind(this),o=w(this,ee,im).bind(this),c=this._uiManager._signal;for(const h of l(this,mn)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:c}),h.addEventListener("blur",o,{signal:c}),h.addEventListener("focus",w(this,ee,rm).bind(this,d),{signal:c}),h.setAttribute("data-l10n-id",le._l10nResizer[d])}}const n=l(this,mn)[0];let s=0;for(const a of t){if(a===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,mn).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)l(this,at).append(l(this,at).firstChild);else if(i>s)for(let o=0;o<i-s;o++)l(this,at).firstChild.before(l(this,at).lastChild);let a=0;for(const o of t){const h=l(this,mn)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",le._l10nResizer[h])}}w(this,ee,Xd).call(this,0),b(this,us,!0),l(this,at).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,us)&&w(this,ee,Vd).call(this,l(this,hl),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){w(this,ee,To).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=l(this,Re))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,s,i;(e=l(this,at))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=l(this,Re))==null||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,dl)}set isEditing(e){b(this,dl,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,Xi,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Qt)||b(this,Qt,new Map);const{action:n}=e;let s=l(this,Qt).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,Qt).delete(n),l(this,Qt).size===0&&b(this,Qt,null)},le._telemetryTimeout),l(this,Qt).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,va,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,va,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};qi=new WeakMap,mn=new WeakMap,Re=new WeakMap,va=new WeakMap,Xi=new WeakMap,at=new WeakMap,Yi=new WeakMap,ei=new WeakMap,hl=new WeakMap,Ki=new WeakMap,ti=new WeakMap,dl=new WeakMap,Ji=new WeakMap,us=new WeakMap,$n=new WeakMap,xa=new WeakMap,Aa=new WeakMap,Qt=new WeakMap,ul=new WeakMap,Th=new WeakMap,ee=new WeakSet,$d=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},fl=new WeakSet,Bd=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Wd=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},em=function(){if(l(this,at))return;b(this,at,document.createElement("div")),l(this,at).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");l(this,at).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",w(this,ee,tm).bind(this,n),{signal:t}),s.addEventListener("contextmenu",on,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,at))},tm=function(e,t){var m;t.preventDefault();const{isMac:n}=Ct.platform;if(t.button!==0||t.ctrlKey&&n)return;(m=l(this,Re))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,ee,Vd).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",on,{signal:a});const o=this.x,c=this.y,h=this.width,d=this.height,u=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var y;i.abort(),this.parent.togglePointerEvents(!0),(y=l(this,Re))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=f,w(this,ee,Ud).call(this,o,c,h,d)};window.addEventListener("pointerup",g,{signal:a}),window.addEventListener("blur",g,{signal:a})},Ud=function(e,t,n,s){const i=this.x,a=this.y,o=this.width,c=this.height;i===e&&a===t&&o===n&&c===s||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=i,this.y=a;const[h,d]=this.parentDimensions;this.setDims(h*o,d*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[h,d]=this.parentDimensions;this.setDims(h*n,d*s),this.fixAndSetPosition()},mustExec:!0})},Vd=function(e,t){const[n,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,c=this.height,h=le.MIN_SIZE/n,d=le.MIN_SIZE/s,u=O=>Math.round(O*1e4)/1e4,f=w(this,ee,Wd).call(this,this.rotation),g=(O,N)=>[f[0]*O+f[2]*N,f[1]*O+f[3]*N],m=w(this,ee,Wd).call(this,360-this.rotation),y=(O,N)=>[m[0]*O+m[2]*N,m[1]*O+m[3]*N];let A,v,S=!1,E=!1;switch(e){case"topLeft":S=!0,A=(O,N)=>[0,0],v=(O,N)=>[O,N];break;case"topMiddle":A=(O,N)=>[O/2,0],v=(O,N)=>[O/2,N];break;case"topRight":S=!0,A=(O,N)=>[O,0],v=(O,N)=>[0,N];break;case"middleRight":E=!0,A=(O,N)=>[O,N/2],v=(O,N)=>[0,N/2];break;case"bottomRight":S=!0,A=(O,N)=>[O,N],v=(O,N)=>[0,0];break;case"bottomMiddle":A=(O,N)=>[O/2,N],v=(O,N)=>[O/2,0];break;case"bottomLeft":S=!0,A=(O,N)=>[0,N],v=(O,N)=>[O,0];break;case"middleLeft":E=!0,A=(O,N)=>[0,N/2],v=(O,N)=>[O,N/2];break}const _=A(o,c),k=v(o,c);let T=g(...k);const P=u(i+T[0]),R=u(a+T[1]);let M=1,L=1,[D,Q]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,Q]=y(D/n,Q/s),S){const O=Math.hypot(o,c);M=L=Math.max(Math.min(Math.hypot(k[0]-_[0]-D,k[1]-_[1]-Q)/O,1/o,1/c),h/o,d/c)}else E?M=Math.max(h,Math.min(1,Math.abs(k[0]-_[0]-D)))/o:L=Math.max(d,Math.min(1,Math.abs(k[1]-_[1]-Q)))/c;const U=u(o*M),$=u(c*L);T=g(...v(U,$));const V=P-T[0],G=R-T[1];this.width=U,this.height=$,this.x=V,this.y=G,this.setDims(n*U,s*$),this.fixAndSetPosition()},Gd=function(e){const{isMac:t}=Ct.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},nm=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),b(this,xa,e.clientX),b(this,Aa,e.clientY);const a=o=>{const{clientX:c,clientY:h}=o,[d,u]=this.screenToPageTranslation(c-l(this,xa),h-l(this,Aa));b(this,xa,c),b(this,Aa,h),this._uiManager.dragSelectedEditors(d,u)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const i=()=>{n.abort(),t&&this.div.classList.remove("moving"),b(this,Ki,!1),this._uiManager.endDragSession()||w(this,ee,Gd).call(this,e)};window.addEventListener("pointerup",i,{signal:s}),window.addEventListener("blur",i,{signal:s})},qd=function(){if(l(this,ei)||!this.div)return;b(this,ei,new AbortController);const e=this._uiManager.combinedSignal(l(this,ei));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},sm=function(e){le._resizerKeyboardManager.exec(this,e)},im=function(e){var t;l(this,us)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,at)&&w(this,ee,To).call(this)},rm=function(e){b(this,hl,l(this,us)?e:"")},Xd=function(e){if(l(this,mn))for(const t of l(this,mn))t.tabIndex=e},To=function(){if(b(this,us,!1),w(this,ee,Xd).call(this,-1),l(this,Yi)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=l(this,Yi);w(this,ee,Ud).call(this,e,t,n,s),b(this,Yi,null)}},x(le,fl),q(le,"_l10n",null),q(le,"_l10nResizer",null),q(le,"_borderLineWidth",-1),q(le,"_colorManager",new Id),q(le,"_zIndex",1),q(le,"_telemetryTimeout",1e3);let ue=le;class Sx extends ue{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const og=3285377520,Kt=4294901760,Mn=65535;class am{constructor(e){this.h1=e?e&4294967295:og,this.h2=e?e&4294967295:og}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let y=0,A=e.length;y<A;y++){const v=e.charCodeAt(y);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,i=n-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,h=this.h1,d=this.h2;const u=3432918353,f=461845907,g=u&Mn,m=f&Mn;for(let y=0;y<s;y++)y&1?(o=a[y],o=o*u&Kt|o*g&Mn,o=o<<15|o>>>17,o=o*f&Kt|o*m&Mn,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[y],c=c*u&Kt|c*g&Mn,c=c<<15|c>>>17,c=c*f&Kt|c*m&Mn,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*u&Kt|o*g&Mn,o=o<<15|o>>>17,o=o*f&Kt|o*m&Mn,s&1?h^=o:d^=o}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Kt|e*36045&Mn,t=t*4283543511&Kt|((t<<16|e>>>16)*2950163797&Kt)>>>16,e^=t>>>1,e=e*444984403&Kt|e*60499&Mn,t=t*3301882366&Kt|((t<<16|e>>>16)*3120437893&Kt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Yd=Object.freeze({map:null,hash:"",transfer:void 0});var Qi,Zi,st,Ph,om;class pf{constructor(){x(this,Ph);x(this,Qi,!1);x(this,Zi,null);x(this,st,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=l(this,st).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,st).get(e)}remove(e){if(l(this,st).delete(e),l(this,st).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,st).values())if(t instanceof ue)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=l(this,st).get(e);let s=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(s=!0,n[i]=a);else s=!0,l(this,st).set(e,t);s&&w(this,Ph,om).call(this),t instanceof ue&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,st).has(e)}getAll(){return l(this,st).size>0?cf(l(this,st)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return l(this,st).size}resetModified(){l(this,Qi)&&(b(this,Qi,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lm(this)}get serializable(){if(l(this,st).size===0)return Yd;const e=new Map,t=new am,n=[],s=Object.create(null);let i=!1;for(const[a,o]of l(this,st)){const c=o instanceof ue?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Yd}get editorStats(){let e=null;const t=new Map;for(const n of l(this,st).values()){if(!(n instanceof ue))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const d=h.get(c)??0;h.set(c,d+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){b(this,Zi,null)}get modifiedIds(){if(l(this,Zi))return l(this,Zi);const e=[];for(const t of l(this,st).values())!(t instanceof ue)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,Zi,{ids:new Set(e),hash:e.join(",")})}}Qi=new WeakMap,Zi=new WeakMap,st=new WeakMap,Ph=new WeakSet,om=function(){l(this,Qi)||(b(this,Qi,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var gl;class lm extends pf{constructor(t){super();x(this,gl);const{map:n,hash:s,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);b(this,gl,{map:a,hash:s,transfer:i})}get print(){xe("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,gl)}get modifiedIds(){return ie(this,"modifiedIds",{ids:new Set,hash:""})}}gl=new WeakMap;var Sa;class Ex{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Sa,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Sa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Sa).has(e.loadedName))){if(Xe(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:i}=e,a=new FontFace(n,s,i);this.addNativeFontFace(a);try{await a.load(),l(this,Sa).add(n),t==null||t(e)}catch{te(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}xe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw te(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ie(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(yt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ie(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Xe(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ie(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(_,k){return _.charCodeAt(k)<<24|_.charCodeAt(k+1)<<16|_.charCodeAt(k+2)<<8|_.charCodeAt(k+3)&255}function s(_,k,T,P){const R=_.substring(0,k),M=_.substring(k+T);return R+P+M}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let h=0;function d(_,k){if(++h>30){te("Load test font never loaded."),k();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(d.bind(null,_,k))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,u.length,u);const m=16,y=1482184792;let A=n(f,m);for(i=0,a=u.length-3;i<a;i+=4)A=A-y+n(u,i)|0;i<u.length&&(A=A-y+n(u+"XXX",i)|0),f=s(f,m,4,lx(A));const v=`url(data:font/opentype;base64,${btoa(f)});`,S=`@font-face {font-family:"${u}";src:${v}}`;this.insertRule(S);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const _ of[e.loadedName,u]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=_,E.append(k)}this._document.body.append(E),d(u,()=>{E.remove(),t.complete()})}}Sa=new WeakMap;class _x{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${gx(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){te(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(i,a){};const s=[];for(let i=0,a=n.length;i<a;)switch(n[i++]){case ss.BEZIER_CURVE_TO:{const[o,c,h,d,u,f]=n.slice(i,i+6);s.push(g=>g.bezierCurveTo(o,c,h,d,u,f)),i+=6}break;case ss.MOVE_TO:{const[o,c]=n.slice(i,i+2);s.push(h=>h.moveTo(o,c)),i+=2}break;case ss.LINE_TO:{const[o,c]=n.slice(i,i+2);s.push(h=>h.lineTo(o,c)),i+=2}break;case ss.QUADRATIC_CURVE_TO:{const[o,c,h,d]=n.slice(i,i+4);s.push(u=>u.quadraticCurveTo(o,c,h,d)),i+=4}break;case ss.RESTORE:s.push(o=>o.restore());break;case ss.SAVE:s.push(o=>o.save());break;case ss.SCALE:Xe(s.length===2,"Scale command is only valid at the third position.");break;case ss.TRANSFORM:{const[o,c,h,d,u,f]=n.slice(i,i+6);s.push(g=>g.transform(o,c,h,d,u,f)),i+=6}break;case ss.TRANSLATE:{const[o,c]=n.slice(i,i+2);s.push(h=>h.translate(o,c)),i+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let c=2,h=s.length;c<h;c++)s[c](a)}}}var pl;class cm{constructor({enableHWA:e=!1}){x(this,pl,!1);b(this,pl,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,pl)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xe("Abstract method `_createCanvas` called.")}}pl=new WeakMap;class Cx extends cm{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class hm{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){xe("Abstract method `_fetch` called.")}}class dm extends hm{async _fetch(e){const t=await Jh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Kh(t)}}class um{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,i){return"none"}destroy(e=!1){}}var er,tr,Bn,fs,gt,Rh,nr,F,ut,Yr,Kr,Bc,Jr,fm,Kd,Qr,Po,Ro,Jd,Mo;class kx extends um{constructor({docId:t,ownerDocument:n=globalThis.document}){super();x(this,F);x(this,er);x(this,tr);x(this,Bn);x(this,fs);x(this,gt);x(this,Rh);x(this,nr,0);b(this,fs,t),b(this,gt,n)}addFilter(t){if(!t)return"none";let n=l(this,F,ut).get(t);if(n)return n;const[s,i,a]=w(this,F,Bc).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(n=l(this,F,ut).get(o),n)return l(this,F,ut).set(t,n),n;const c=`g_${l(this,fs)}_transfer_map_${xt(this,nr)._++}`,h=w(this,F,Jr).call(this,c);l(this,F,ut).set(t,h),l(this,F,ut).set(o,h);const d=w(this,F,Qr).call(this,c);return w(this,F,Ro).call(this,s,i,a,d),h}addHCMFilter(t,n){var m;const s=`${t}-${n}`,i="base";let a=l(this,F,Yr).get(i);if((a==null?void 0:a.key)===s||(a?((m=a.filter)==null||m.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},l(this,F,Yr).set(i,a)),!t||!n))return a.url;const o=w(this,F,Mo).call(this,t);t=z.makeHexColor(...o);const c=w(this,F,Mo).call(this,n);if(n=z.makeHexColor(...c),l(this,F,Kr).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let y=0;y<=255;y++){const A=y/255;h[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),u=`g_${l(this,fs)}_hcm_filter`,f=a.filter=w(this,F,Qr).call(this,u);w(this,F,Ro).call(this,d,d,d,f),w(this,F,Kd).call(this,f);const g=(y,A)=>{const v=o[y]/255,S=c[y]/255,E=new Array(A+1);for(let _=0;_<=A;_++)E[_]=v+_/A*(S-v);return E.join(",")};return w(this,F,Ro).call(this,g(0,5),g(1,5),g(2,5),f),a.url=w(this,F,Jr).call(this,u),a.url}addAlphaFilter(t){let n=l(this,F,ut).get(t);if(n)return n;const[s]=w(this,F,Bc).call(this,[t]),i=`alpha_${s}`;if(n=l(this,F,ut).get(i),n)return l(this,F,ut).set(t,n),n;const a=`g_${l(this,fs)}_alpha_map_${xt(this,nr)._++}`,o=w(this,F,Jr).call(this,a);l(this,F,ut).set(t,o),l(this,F,ut).set(i,o);const c=w(this,F,Qr).call(this,a);return w(this,F,Jd).call(this,s,c),o}addLuminosityFilter(t){let n=l(this,F,ut).get(t||"luminosity");if(n)return n;let s,i;if(t?([s]=w(this,F,Bc).call(this,[t]),i=`luminosity_${s}`):i="luminosity",n=l(this,F,ut).get(i),n)return l(this,F,ut).set(t,n),n;const a=`g_${l(this,fs)}_luminosity_map_${xt(this,nr)._++}`,o=w(this,F,Jr).call(this,a);l(this,F,ut).set(t,o),l(this,F,ut).set(i,o);const c=w(this,F,Qr).call(this,a);return w(this,F,fm).call(this,c),t&&w(this,F,Jd).call(this,s,c),o}addHighlightHCMFilter(t,n,s,i,a){var S;const o=`${n}-${s}-${i}-${a}`;let c=l(this,F,Yr).get(t);if((c==null?void 0:c.key)===o||(c?((S=c.filter)==null||S.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,F,Yr).set(t,c)),!n||!s))return c.url;const[h,d]=[n,s].map(w(this,F,Mo).bind(this));let u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,m]=[i,a].map(w(this,F,Mo).bind(this));f<u&&([u,f,g,m]=[f,u,m,g]),l(this,F,Kr).style.color="";const y=(E,_,k)=>{const T=new Array(256),P=(f-u)/k,R=E/255,M=(_-E)/(255*k);let L=0;for(let D=0;D<=k;D++){const Q=Math.round(u+D*P),U=R+D*M;for(let $=L;$<=Q;$++)T[$]=U;L=Q+1}for(let D=L;D<256;D++)T[D]=T[L-1];return T.join(",")},A=`g_${l(this,fs)}_hcm_${t}_filter`,v=c.filter=w(this,F,Qr).call(this,A);return w(this,F,Kd).call(this,v),w(this,F,Ro).call(this,y(g[0],m[0],5),y(g[1],m[1],5),y(g[2],m[2],5),v),c.url=w(this,F,Jr).call(this,A),c.url}destroy(t=!1){t&&l(this,F,Yr).size!==0||(l(this,Bn)&&(l(this,Bn).parentNode.parentNode.remove(),b(this,Bn,null)),l(this,tr)&&(l(this,tr).clear(),b(this,tr,null)),b(this,nr,0))}}er=new WeakMap,tr=new WeakMap,Bn=new WeakMap,fs=new WeakMap,gt=new WeakMap,Rh=new WeakMap,nr=new WeakMap,F=new WeakSet,ut=function(){return l(this,tr)||b(this,tr,new Map)},Yr=function(){return l(this,Rh)||b(this,Rh,new Map)},Kr=function(){if(!l(this,Bn)){const t=l(this,gt).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=l(this,gt).createElementNS(rs,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,Bn,l(this,gt).createElementNS(rs,"defs")),t.append(s),s.append(l(this,Bn)),l(this,gt).body.append(t)}return l(this,Bn)},Bc=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=h[f]/255;const u=d.join(",");return[u,u,u]}const[n,s,i]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,o[h]=s[h]/255,c[h]=i[h]/255;return[a.join(","),o.join(","),c.join(",")]},Jr=function(t){if(l(this,er)===void 0){b(this,er,"");const n=l(this,gt).URL;n!==l(this,gt).baseURI&&(Qh(n)?te('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,er,n.split("#",1)[0]))}return`url(${l(this,er)}#${t})`},fm=function(t){const n=l(this,gt).createElementNS(rs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Kd=function(t){const n=l(this,gt).createElementNS(rs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Qr=function(t){const n=l(this,gt).createElementNS(rs,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,F,Kr).append(n),n},Po=function(t,n,s){const i=l(this,gt).createElementNS(rs,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Ro=function(t,n,s,i){const a=l(this,gt).createElementNS(rs,"feComponentTransfer");i.append(a),w(this,F,Po).call(this,a,"feFuncR",t),w(this,F,Po).call(this,a,"feFuncG",n),w(this,F,Po).call(this,a,"feFuncB",s)},Jd=function(t,n){const s=l(this,gt).createElementNS(rs,"feComponentTransfer");n.append(s),w(this,F,Po).call(this,s,"feFuncA",t)},Mo=function(t){return l(this,F,Kr).style.color=t,gf(getComputedStyle(l(this,F,Kr)).getPropertyValue("color"))};class gm{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){xe("Abstract method `_fetch` called.")}}class pm extends gm{async _fetch(e){const t=await Jh(e,"arraybuffer");return new Uint8Array(t)}}if(yt){var Qd=Promise.withResolvers(),Wo=null;(async()=>{const e=await Cc(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Cc(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Cc(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Cc(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,a;return new Map(Object.entries({fs:e,http:t,https:n,url:s,canvas:i,path2d:a}))})().then(e=>{Wo=e,Qd.resolve()},e=>{te(`loadPackages: ${e}`),Wo=new Map,Qd.resolve()})}class Si{static get promise(){return Qd.promise}static get(e){return Wo==null?void 0:Wo.get(e)}}async function mm(r){const t=await Si.get("fs").promises.readFile(r);return new Uint8Array(t)}class Tx extends um{}class Px extends cm{_createCanvas(e,t){return Si.get("canvas").createCanvas(e,t)}}class Rx extends hm{async _fetch(e){return mm(e)}}class Mx extends gm{async _fetch(e){return mm(e)}}const Et={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Zd(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),r.clip(s)}class mf{getPattern(){xe("Abstract method `getPattern` called.")}}class Lx extends mf{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let i;if(s===Et.STROKE||s===Et.FILL){const a=t.current.getClippedPathBoundingBox(s,Le(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",o,c),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),n=z.transform(n,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Zd(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(n);i.setTransform(u)}else Zd(e,this._bbox),i=this._createGradient(e);return i}}function fd(r,e,t,n,s,i,a,o){const c=e.coords,h=e.colors,d=r.data,u=r.width*4;let f;c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=a,a=o,o=f),c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f);const g=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,y=(c[n]+e.offsetX)*e.scaleX,A=(c[n+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,S=(c[s+1]+e.offsetY)*e.scaleY;if(m>=S)return;const E=h[i],_=h[i+1],k=h[i+2],T=h[a],P=h[a+1],R=h[a+2],M=h[o],L=h[o+1],D=h[o+2],Q=Math.round(m),U=Math.round(S);let $,V,G,O,N,Ee,je,We;for(let we=Q;we<=U;we++){if(we<A){const oe=we<m?0:(m-we)/(m-A);$=g-(g-y)*oe,V=E-(E-T)*oe,G=_-(_-P)*oe,O=k-(k-R)*oe}else{let oe;we>S?oe=1:A===S?oe=0:oe=(A-we)/(A-S),$=y-(y-v)*oe,V=T-(T-M)*oe,G=P-(P-L)*oe,O=R-(R-D)*oe}let ve;we<m?ve=0:we>S?ve=1:ve=(m-we)/(m-S),N=g-(g-v)*ve,Ee=E-(E-M)*ve,je=_-(_-L)*ve,We=k-(k-D)*ve;const Pt=Math.round(Math.min($,N)),ln=Math.round(Math.max($,N));let Fe=u*we+Pt*4;for(let oe=Pt;oe<=ln;oe++)ve=($-oe)/($-N),ve<0?ve=0:ve>1&&(ve=1),d[Fe++]=V-(V-Ee)*ve|0,d[Fe++]=G-(G-je)*ve|0,d[Fe++]=O-(O-We)*ve|0,d[Fe++]=255}}function Dx(r,e,t){const n=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(n.length/o)-1,h=o-1;for(i=0;i<c;i++){let d=i*o;for(let u=0;u<h;u++,d++)fd(r,t,n[d],n[d+1],n[d+o],s[d],s[d+1],s[d+o]),fd(r,t,n[d+o+1],n[d+1],n[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)fd(r,t,n[i],n[i+1],n[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Ix extends mf{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,u=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=h/u,m=d/f,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/g,scaleY:1/m},A=u+2*2,v=f+2*2,S=n.getCanvas("mesh",A,v),E=S.context,_=E.createImageData(u,f);if(t){const T=_.data;for(let P=0,R=T.length;P<R;P+=4)T[P]=t[0],T[P+1]=t[1],T[P+2]=t[2],T[P+3]=255}for(const T of this._figures)Dx(_,T,y);return E.putImageData(_,2,2),{canvas:S.canvas,offsetX:o-2*g,offsetY:c-2*m,scaleX:g,scaleY:m}}getPattern(e,t,n,s){Zd(e,this._bbox);let i;if(s===Et.SHADING)i=z.singularValueDecompose2dScale(Le(e));else if(i=z.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=z.singularValueDecompose2dScale(this.matrix);i=[i[0]*o[0],i[1]*o[1]]}const a=this._createMeshCanvas(i,s===Et.SHADING?null:this._background,t.cachedCanvases);return s!==Et.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class jx extends mf{getPattern(){return"hotpink"}}function Fx(r){switch(r[0]){case"RadialAxial":return new Lx(r);case"Mesh":return new Ix(r);case"Dummy":return new jx}throw new Error(`Unknown IR type: ${r[0]}`)}const lg={COLORED:1,UNCOLORED:2},Mh=class Mh{constructor(e,t,n,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),Xh("TilingType: "+i);const d=t[0],u=t[1],f=t[2],g=t[3],m=f-d,y=g-u,A=z.singularValueDecompose2dScale(this.matrix),v=z.singularValueDecompose2dScale(this.baseTransform),S=A[0]*v[0],E=A[1]*v[1];let _=m,k=y,T=!1,P=!1;const R=Math.ceil(c*S),M=Math.ceil(h*E),L=Math.ceil(m*S),D=Math.ceil(y*E);R>=L?_=c:T=!0,M>=D?k=h:P=!0;const Q=this.getSizeAndScale(_,this.ctx.canvas.width,S),U=this.getSizeAndScale(k,this.ctx.canvas.height,E),$=e.cachedCanvases.getCanvas("pattern",Q.size,U.size),V=$.context,G=o.createCanvasGraphics(V);if(G.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(G,s,a),V.translate(-Q.scale*d,-U.scale*u),G.transform(Q.scale,0,0,U.scale,0,0),V.save(),this.clipBbox(G,d,u,f,g),G.baseTransform=Le(G.ctx),G.executeOperatorList(n),G.endDrawing(),V.restore(),T||P){const O=$.canvas;T&&(_=c),P&&(k=h);const N=this.getSizeAndScale(_,this.ctx.canvas.width,S),Ee=this.getSizeAndScale(k,this.ctx.canvas.height,E),je=N.size,We=Ee.size,we=e.cachedCanvases.getCanvas("pattern-workaround",je,We),ve=we.context,Pt=T?Math.floor(m/c):0,ln=P?Math.floor(y/h):0;for(let Fe=0;Fe<=Pt;Fe++)for(let oe=0;oe<=ln;oe++)ve.drawImage(O,je*Fe,We*oe,je,We,0,0,je,We);return{canvas:we.canvas,scaleX:N.scale,scaleY:Ee.scale,offsetX:d,offsetY:u}}return{canvas:$.canvas,scaleX:Q.scale,scaleY:U.scale,offsetX:d,offsetY:u}}getSizeAndScale(e,t,n){const s=Math.max(Mh.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=s?i=s:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,s,i){const a=s-t,o=i-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax(Le(e.ctx),[t,n,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,i=e.current;switch(t){case lg.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case lg.UNCOLORED:const o=z.makeHexColor(n[0],n[1],n[2]);s.fillStyle=o,s.strokeStyle=o,i.fillColor=o,i.strokeColor=o;break;default:throw new ox(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let i=n;s!==Et.SHADING&&(i=z.transform(i,t.baseTransform),this.matrix&&(i=z.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};q(Mh,"MAX_PATTERN_SIZE",3e3);let eu=Mh;function Ox({src:r,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=Ct.isLittleEndian?4278190080:255,[c,h]=a?[i,o]:[o,i],d=n>>3,u=n&7,f=r.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<s;m++){for(const A=e+d;e<A;e++){const v=e<f?r[e]:255;t[g++]=v&128?h:c,t[g++]=v&64?h:c,t[g++]=v&32?h:c,t[g++]=v&16?h:c,t[g++]=v&8?h:c,t[g++]=v&4?h:c,t[g++]=v&2?h:c,t[g++]=v&1?h:c}if(u===0)continue;const y=e<f?r[e++]:255;for(let A=0;A<u;A++)t[g++]=y&1<<7-A?h:c}return{srcPos:e,destPos:g}}const cg=16,hg=100,Nx=15,dg=10,ug=1e3,jt=16;function zx(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},r.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},r.transform=function(n,s,i,a,o,c){e.transform(n,s,i,a,o,c),this.__originalTransform(n,s,i,a,o,c)},r.setTransform=function(n,s,i,a,o,c){e.setTransform(n,s,i,a,o,c),this.__originalSetTransform(n,s,i,a,o,c)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(n){e.rotate(n),this.__originalRotate(n)},r.clip=function(n){e.clip(n),this.__originalClip(n)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,s,i,a,o){e.bezierCurveTo(t,n,s,i,a,o),this.__originalBezierCurveTo(t,n,s,i,a,o)},r.rect=function(t,n,s,i){e.rect(t,n,s,i),this.__originalRect(t,n,s,i)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Hx{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function kc(r,e,t,n,s,i,a,o,c,h){const[d,u,f,g,m,y]=Le(r);if(u===0&&f===0){const S=a*d+m,E=Math.round(S),_=o*g+y,k=Math.round(_),T=(a+c)*d+m,P=Math.abs(Math.round(T)-E)||1,R=(o+h)*g+y,M=Math.abs(Math.round(R)-k)||1;return r.setTransform(Math.sign(d),0,0,Math.sign(g),E,k),r.drawImage(e,t,n,s,i,0,0,P,M),r.setTransform(d,u,f,g,m,y),[P,M]}if(d===0&&g===0){const S=o*f+m,E=Math.round(S),_=a*u+y,k=Math.round(_),T=(o+h)*f+m,P=Math.abs(Math.round(T)-E)||1,R=(a+c)*u+y,M=Math.abs(Math.round(R)-k)||1;return r.setTransform(0,Math.sign(u),Math.sign(f),0,E,k),r.drawImage(e,t,n,s,i,0,0,M,P),r.setTransform(d,u,f,g,m,y),[M,P]}r.drawImage(e,t,n,s,i,a,o,c,h);const A=Math.hypot(d,u),v=Math.hypot(f,g);return[A*c,v*h]}function $x(r){const{width:e,height:t}=r;if(e>ug||t>ug)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),o,c,h;const d=e+7&-8;let u=new Uint8Array(d*t),f=0;for(const v of r.data){let S=128;for(;S>0;)u[f++]=v&S?0:255,S>>=1}let g=0;for(f=0,u[f]!==0&&(a[0]=1,++g),c=1;c<e;c++)u[f]!==u[f+1]&&(a[c]=u[f]?2:1,++g),f++;for(u[f]!==0&&(a[c]=2,++g),o=1;o<t;o++){f=o*d,h=o*i,u[f-d]!==u[f]&&(a[h]=u[f]?1:8,++g);let v=(u[f]?4:0)+(u[f-d]?8:0);for(c=1;c<e;c++)v=(v>>2)+(u[f+1]?4:0)+(u[f-d+1]?8:0),s[v]&&(a[h+c]=s[v],++g),f++;if(u[f-d]!==u[f]&&(a[h+c]=u[f]?2:4,++g),g>n)return null}for(f=d*(t-1),h=o*i,u[f]!==0&&(a[h]=8,++g),c=1;c<e;c++)u[f]!==u[f+1]&&(a[h+c]=u[f]?4:8,++g),f++;if(u[f]!==0&&(a[h+c]=4,++g),g>n)return null;const m=new Int32Array([0,i,-1,0,-i,0,0,0,1]),y=new Path2D;for(o=0;g&&o<=t;o++){let v=o*i;const S=v+e;for(;v<S&&!a[v];)v++;if(v===S)continue;y.moveTo(v%i,o);const E=v;let _=a[v];do{const k=m[_];do v+=k;while(!a[v]);const T=a[v];T!==5&&T!==10?(_=T,a[v]=0):(_=T&51*_>>4,a[v]&=_>>2|_<<2),y.lineTo(v%i,v/i|0),a[v]||--g}while(E!==v);--o}return u=null,a=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(y),v.beginPath(),v.restore()}}class fg{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Dp,this.textMatrixScale=1,this.fontMatrix=Cd,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=dt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=z.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=z.applyTransform(t,e),s=z.applyTransform(t.slice(2),e),i=z.applyTransform([t[0],t[3]],e),a=z.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){z.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,i,a,o,c,h,d){const u=z.bezierBoundingBox(t,n,s,i,a,o,c,h,d);d||this.updateRectMinMax(e,u)}getPathBoundingBox(e=Et.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Et.STROKE){t||xe("Stroke bounding box must include transform.");const s=z.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=z.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Et.FILL,t=null){return z.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function gg(r,e){if(typeof ImageData<"u"&&e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%jt,i=(t-s)/jt,a=s===0?i:i+1,o=r.createImageData(n,jt);let c=0,h;const d=e.data,u=o.data;let f,g,m,y;if(e.kind===jc.GRAYSCALE_1BPP){const A=d.byteLength,v=new Uint32Array(u.buffer,0,u.byteLength>>2),S=v.length,E=n+7>>3,_=4294967295,k=Ct.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<i?jt:s,h=0,g=0;g<m;g++){const T=A-c;let P=0;const R=T>E?n:T*8-7,M=R&-8;let L=0,D=0;for(;P<M;P+=8)D=d[c++],v[h++]=D&128?_:k,v[h++]=D&64?_:k,v[h++]=D&32?_:k,v[h++]=D&16?_:k,v[h++]=D&8?_:k,v[h++]=D&4?_:k,v[h++]=D&2?_:k,v[h++]=D&1?_:k;for(;P<R;P++)L===0&&(D=d[c++],L=128),v[h++]=D&L?_:k,L>>=1}for(;h<S;)v[h++]=0;r.putImageData(o,0,f*jt)}}else if(e.kind===jc.RGBA_32BPP){for(g=0,y=n*jt*4,f=0;f<i;f++)u.set(d.subarray(c,c+y)),c+=y,r.putImageData(o,0,g),g+=jt;f<a&&(y=n*s*4,u.set(d.subarray(c,c+y)),r.putImageData(o,0,g))}else if(e.kind===jc.RGB_24BPP)for(m=jt,y=n*m,f=0;f<a;f++){for(f>=i&&(m=s,y=n*m),h=0,g=y;g--;)u[h++]=d[c++],u[h++]=d[c++],u[h++]=d[c++],u[h++]=255;r.putImageData(o,0,f*jt)}else throw new Error(`bad image kind: ${e.kind}`)}function pg(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%jt,i=(t-s)/jt,a=s===0?i:i+1,o=r.createImageData(n,jt);let c=0;const h=e.data,d=o.data;for(let u=0;u<a;u++){const f=u<i?jt:s;({srcPos:c}=Ox({src:h,srcPos:c,dest:d,width:n,height:f,nonBlackColor:0})),r.putImageData(o,0,u*jt)}}function So(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Tc(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!yt){const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}}function mg(r,e){if(e)return!0;const t=z.singularValueDecompose2dScale(r);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ai.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const Bx=["butt","round","square"],Wx=["miter","round","bevel"],Ux={},bg={};var Ci,tu,nu;const Rf=class Rf{constructor(e,t,n,s,i,{optionalContentConfig:a,markedContentStack:o=null},c,h){x(this,Ci);this.ctx=e,this.current=new fg(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Hx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Le(this.compositeCtx))}this.ctx.save(),Tc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Le(this.ctx)}executeOperatorList(e,t,n,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const c=i.length;if(c===o)return o;const h=c-o>dg&&typeof n=="function",d=h?Date.now()+Nx:0;let u=0;const f=this.commonObjs,g=this.objs;let m;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,n),o;if(m=a[o],m!==dn.dependency)this[m].apply(this,i[o]);else for(const y of i[o]){const A=y.startsWith("g_")?f:g;if(!A.has(y))return A.get(y,n),o}if(o++,o===c)return o;if(h&&++u>dg){if(Date.now()>d)return n(),o;u=0}}}endDrawing(){w(this,Ci,tu).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),w(this,Ci,nu).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,c=s,h="prescale1",d,u;for(;i>2&&o>1||a>2&&c>1;){let f=o,g=c;i>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/f),a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/g),d=this.cachedCanvases.getCanvas(h,f,g),u=d.context,u.clearRect(0,0,f,g),u.drawImage(e,0,0,o,c,0,0,f,g),e=d.canvas,o=f,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=Le(t);let c,h,d,u;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),i]),c=this._cachedBitmapsMap.get(R),c||(c=new Map,this._cachedBitmapsMap.set(R,c));const M=c.get(h);if(M&&!a){const L=Math.round(Math.min(o[0],o[2])+o[4]),D=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:L,offsetY:D}}d=M}d||(u=this.cachedCanvases.getCanvas("maskCanvas",n,s),pg(u.context,e));let f=z.transform(o,[1/n,0,0,-1/s,0,0]);f=z.transform(f,[1,0,0,1,0,-s]);const[g,m,y,A]=z.getAxialAlignedBoundingBox([0,0,n,s],f),v=Math.round(y-g)||1,S=Math.round(A-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",v,S),_=E.context,k=g,T=m;_.translate(-k,-T),_.transform(...f),d||(d=this._scaleImage(u.canvas,is(_)),d=d.img,c&&a&&c.set(h,d)),_.imageSmoothingEnabled=mg(Le(_),e.interpolate),kc(_,d,0,0,d.width,d.height,0,0,n,s),_.globalCompositeOperation="source-in";const P=z.transform(is(_),[1,0,0,1,-k,-T]);return _.fillStyle=a?i.getPattern(t,this,P,Et.FILL):i,_.fillRect(0,0,n,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,E.canvas)),{canvas:E.canvas,offsetX:Math.round(k),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Bx[e]}setLineJoin(e){this.ctx.lineJoin=Wx[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...Le(this.suspendedCtx)),So(this.suspendedCtx,i),zx(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),So(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const i=s[0],a=s[1],o=s[2]-i,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,n,o,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,i,a,o,c,h,d,u){let f=e.canvas,g=c-d,m=h-u;if(a){const A=z.makeHexColor(...a);if(g<0||m<0||g+n>f.width||m+s>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,s),S=v.context;S.drawImage(f,-g,-m),S.globalCompositeOperation="destination-atop",S.fillStyle=A,S.fillRect(0,0,n,s),S.globalCompositeOperation="source-over",f=v.canvas,g=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(g,m,n,s),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=A,e.fillRect(g,m,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const y=new Path2D;y.rect(c,h,n,s),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,g,m,n,s,c,h,n,s),t.restore()}save(){this.inSMaskMode?(So(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),So(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,i,a){this.ctx.transform(e,t,n,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,i=this.current;let a=i.x,o=i.y,c,h;const d=Le(s),u=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,f=u?n.slice(0):null;for(let g=0,m=0,y=e.length;g<y;g++)switch(e[g]|0){case dn.rectangle:a=t[m++],o=t[m++];const A=t[m++],v=t[m++],S=a+A,E=o+v;s.moveTo(a,o),A===0||v===0?s.lineTo(S,E):(s.lineTo(S,o),s.lineTo(S,E),s.lineTo(a,E)),u||i.updateRectMinMax(d,[a,o,S,E]),s.closePath();break;case dn.moveTo:a=t[m++],o=t[m++],s.moveTo(a,o),u||i.updatePathMinMax(d,a,o);break;case dn.lineTo:a=t[m++],o=t[m++],s.lineTo(a,o),u||i.updatePathMinMax(d,a,o);break;case dn.curveTo:c=a,h=o,a=t[m+4],o=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),i.updateCurvePathMinMax(d,c,h,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case dn.curveTo2:c=a,h=o,s.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),i.updateCurvePathMinMax(d,c,h,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case dn.curveTo3:c=a,h=o,a=t[m+2],o=t[m+3],s.bezierCurveTo(t[m],t[m+1],a,o,a,o),i.updateCurvePathMinMax(d,c,h,t[m],t[m+1],a,o,a,o,f),m+=4;break;case dn.closePath:s.closePath();break}u&&i.updateScalingPathMinMax(d,f),i.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,is(t),Et.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,is(t),Et.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ux}eoClip(){this.pendingClip=bg}beginText(){this.current.textMatrix=Dp,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||Cd,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&te("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",a=((d=n.systemFontInfo)==null?void 0:d.css)||`"${i}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const c=n.italic?"italic":"normal";let h=t;t<cg?h=cg:t>hg&&(h=hg),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${o} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,i,a){this.current.textMatrix=[e,t,n,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const i=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=c&dt.FILL_STROKE_MASK,u=!!(c&dt.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let g;(o.disableFontFace||u||f)&&(g=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(i.save(),i.translate(t,n),i.beginPath(),g(i,h),s&&i.setTransform(...s),(d===dt.FILL||d===dt.FILL_STROKE)&&i.fill(),(d===dt.STROKE||d===dt.FILL_STROKE)&&i.stroke(),i.restore()):((d===dt.FILL||d===dt.FILL_STROKE)&&i.fillText(e,t,n),(d===dt.STROKE||d===dt.FILL_STROKE)&&i.strokeText(e,t,n)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Le(i),x:t,y:n,fontSize:h,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return ie(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,h=t.fontDirection,d=t.textHScale*h,u=e.length,f=n.vertical,g=f?1:-1,m=n.defaultVMetrics,y=s*t.fontMatrix[0],A=t.textRenderingMode===dt.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(d,-1):i.scale(d,1);let v;if(t.patternFill){i.save();const T=t.fillColor.getPattern(i,this,is(i),Et.FILL);v=Le(i),i.restore(),i.fillStyle=T}let S=t.lineWidth;const E=t.textMatrixScale;if(E===0||S===0){const T=t.textRenderingMode&dt.FILL_STROKE_MASK;(T===dt.STROKE||T===dt.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=E;if(a!==1&&(i.scale(a,a),S/=a),i.lineWidth=S,n.isInvalidPDFjsFont){const T=[];let P=0;for(const R of e)T.push(R.unicode),P+=R.width;i.fillText(T.join(""),0,0),t.x+=P*y*d,i.restore(),this.compose();return}let _=0,k;for(k=0;k<u;++k){const T=e[k];if(typeof T=="number"){_+=g*T*s/1e3;continue}let P=!1;const R=(T.isSpace?c:0)+o,M=T.fontChar,L=T.accent;let D,Q,U=T.width;if(f){const V=T.vmetric||m,G=-(T.vmetric?V[1]:U*.5)*y,O=V[2]*y;U=V?-V[0]:U,D=G/a,Q=(_+O)/a}else D=_/a,Q=0;if(n.remeasure&&U>0){const V=i.measureText(M).width*1e3/s*a;if(U<V&&this.isFontSubpixelAAEnabled){const G=U/V;P=!0,i.save(),i.scale(G,1),D/=G}else U!==V&&(D+=(U-V)/2e3*s/a)}if(this.contentVisible&&(T.isInFont||n.missingFile)){if(A&&!L)i.fillText(M,D,Q);else if(this.paintChar(M,D,Q,v),L){const V=D+s*L.offset.x/a,G=Q-s*L.offset.y/a;this.paintChar(L.fontChar,V,G,v)}}const $=f?U*y-R*h:U*y+R*h;_+=$,P&&i.restore()}f?t.y-=_:t.x+=_*d,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,i=n.fontSize,a=n.fontDirection,o=s.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,d=n.textHScale*a,u=n.fontMatrix||Cd,f=e.length,g=n.textRenderingMode===dt.INVISIBLE;let m,y,A,v;if(!(g||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,a),m=0;m<f;++m){if(y=e[m],typeof y=="number"){v=o*y*i/1e3,this.ctx.translate(v,0),n.x+=v*d;continue}const S=(y.isSpace?h:0)+c,E=s.charProcOperatorList[y.operatorListId];if(!E){te(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(i,i),t.transform(...u),this.executeOperatorList(E),this.restore()),A=z.applyTransform([y.width,0],u)[0]*i+S,t.translate(A,0),n.x+=A*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,i,a){this.ctx.rect(n,s,i-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||Le(this.ctx),i={createCanvasGraphics:a=>new Rf(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new eu(e,n,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=z.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=z.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Fx(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,is(t),Et.SHADING);const s=is(t);if(s){const{width:i,height:a}=t.canvas,[o,c,h,d]=z.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(o,c,h-o,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){xe("Should not call beginInlineImage")}beginImageData(){xe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Le(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(Le(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Xh("TODO: Support non-isolated groups."),e.knockout&&te("Knockout groups not supported.");const n=Le(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=z.getAxialAlignedBoundingBox(e.bbox,Le(t));const i=[0,0,t.canvas.width,t.canvas.height];s=z.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(d,c,h),f=u.context;f.translate(-a,-o),f.transform(...n),e.smask?this.smaskStack.push({canvas:u.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),So(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=z.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,s,i){if(w(this,Ci,tu).call(this),Tc(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,h]=z.singularValueDecompose2dScale(Le(this.ctx)),{viewportScale:d}=this,u=Math.ceil(a*this.outputScaleX*d),f=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(u,f);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,o*h),Tc(this.ctx)}else Tc(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new fg(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,Ci,nu).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=$x(e)),s.compiled)){s.compiled(n);return}const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Le(o);o.transform(t,n,s,i,0,0);const h=this._createMaskCanvas(e);o.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let d=0,u=a.length;d<u;d+=2){const f=z.transform(c,[t,n,s,i,a[d],a[d+1]]),[g,m]=z.applyTransform([0,0],f);o.drawImage(h.canvas,g,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:c,transform:h}=i,d=this.cachedCanvases.getCanvas("maskCanvas",o,c),u=d.context;u.save();const f=this.getObject(a,i);pg(u,f),u.globalCompositeOperation="source-in",u.fillStyle=s?n.getPattern(u,this,is(t),Et.FILL):n,u.fillRect(0,0,o,c),u.restore(),t.save(),t.transform(...h),t.scale(1,-1),kc(t,d.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){te("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){te("Dependent image isn't ready yet");return}const a=i.width,o=i.height,c=[];for(let h=0,d=s.length;h<d;h+=2)c.push({transform:[t,0,0,n,s[h],s[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!yt){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/n);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;gg(c,e),i=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(i,is(s));s.imageSmoothingEnabled=mg(Le(s),e.interpolate),kc(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;gg(c,e),s=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),kc(n,s,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===bg?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Le(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:i}=this.ctx.getTransform();let a,o;if(n===0&&s===0){const c=Math.abs(t),h=Math.abs(i);if(c===h)if(e===0)a=o=1/c;else{const d=c*e;a=o=d<1?1/d:1}else if(e===0)a=1/c,o=1/h;else{const d=c*e,u=h*e;a=d<1?1/d:1,o=u<1?1/u:1}}else{const c=Math.abs(t*i-n*s),h=Math.hypot(t,n),d=Math.hypot(s,i);if(e===0)a=d/c,o=h/c;else{const u=e*c;a=d>u?d/u:1,o=h>u?h/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const o=Math.max(s,i);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ci=new WeakSet,tu=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nu=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ra=Rf;for(const r in dn)ra.prototype[r]!==void 0&&(ra.prototype[dn[r]]=ra.prototype[r]);var ml,bl;class Ls{static get workerPort(){return l(this,ml)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,ml,e)}static get workerSrc(){return l(this,bl)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,bl,e)}}ml=new WeakMap,bl=new WeakMap,x(Ls,ml,null),x(Ls,bl,"");const Pc={UNKNOWN:0,DATA:1,ERROR:2},He={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Nt(r){switch(r instanceof Error||typeof r=="object"&&r!==null||xe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Br(r.message);case"MissingPDFException":return new $r(r.message);case"PasswordException":return new kd(r.message,r.code);case"UnexpectedResponseException":return new Yh(r.message,r.status);case"UnknownErrorException":return new Td(r.message,r.details);default:return new Td(r.message,r.toString())}}var Ea,rn,bm,ym,wm,Wc;class Lo{constructor(e,t,n){x(this,rn);x(this,Ea,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",w(this,rn,bm).bind(this),{signal:l(this,Ea).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:a,targetName:o,stream:He.PULL,streamId:i,desiredSize:h.desiredSize}),d.promise},cancel:h=>{Xe(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:He.CANCEL,streamId:i,reason:Nt(h)}),d.promise}},n)}destroy(){var e;(e=l(this,Ea))==null||e.abort(),b(this,Ea,null)}}Ea=new WeakMap,rn=new WeakSet,bm=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){w(this,rn,wm).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Pc.DATA)s.resolve(e.data);else if(e.callback===Pc.ERROR)s.reject(Nt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,i=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){i.postMessage({sourceName:n,targetName:s,callback:Pc.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:s,callback:Pc.ERROR,callbackId:e.callbackId,reason:Nt(a)})});return}if(e.streamId){w(this,rn,ym).call(this,e);return}t(e.data)},ym=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(h,d=1,u){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:He.ENQUEUE,streamId:t,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:He.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){Xe(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:He.ERROR,streamId:t,reason:Nt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(h){h(o(e.data,c))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:He.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:s,stream:He.START_COMPLETE,streamId:t,reason:Nt(h)})})},wm=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case He.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Nt(e.reason));break;case He.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Nt(e.reason));break;case He.PULL:if(!o){i.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){var h;c((h=o.onPull)==null?void 0:h.call(o))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:t,reason:Nt(c)})});break;case He.ENQUEUE:if(Xe(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case He.CLOSE:if(Xe(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),w(this,rn,Wc).call(this,a,t);break;case He.ERROR:Xe(a,"error should have stream controller"),a.controller.error(Nt(e.reason)),w(this,rn,Wc).call(this,a,t);break;case He.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Nt(e.reason)),w(this,rn,Wc).call(this,a,t);break;case He.CANCEL:if(!o)break;new Promise(function(c){var h;c((h=o.onCancel)==null?void 0:h.call(o,Nt(e.reason)))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:He.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:He.CANCEL_COMPLETE,streamId:t,reason:Nt(c)})}),o.sinkCapability.reject(Nt(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Wc=async function(e,t){var n,s,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var sr,yl;class Vx{constructor({parsedData:e,rawData:t}){x(this,sr);x(this,yl);b(this,sr,e),b(this,yl,t)}getRaw(){return l(this,yl)}get(e){return l(this,sr).get(e)??null}getAll(){return cf(l(this,sr))}has(e){return l(this,sr).has(e)}}sr=new WeakMap,yl=new WeakMap;const Zr=Symbol("INTERNAL");var wl,vl,xl,_a;class Gx{constructor(e,{name:t,intent:n,usage:s,rbGroups:i}){x(this,wl,!1);x(this,vl,!1);x(this,xl,!1);x(this,_a,!0);b(this,wl,!!(e&qt.DISPLAY)),b(this,vl,!!(e&qt.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=i}get visible(){if(l(this,xl))return l(this,_a);if(!l(this,_a))return!1;const{print:e,view:t}=this.usage;return l(this,wl)?(t==null?void 0:t.viewState)!=="OFF":l(this,vl)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Zr&&xe("Internal method `_setVisible` called."),b(this,xl,n),b(this,_a,t)}}wl=new WeakMap,vl=new WeakMap,xl=new WeakMap,_a=new WeakMap;var ni,he,Ca,ka,Al,su;class qx{constructor(e,t=qt.DISPLAY){x(this,Al);x(this,ni,null);x(this,he,new Map);x(this,Ca,null);x(this,ka,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,ka,e.order);for(const n of e.groups)l(this,he).set(n.id,new Gx(t,n));if(e.baseState==="OFF")for(const n of l(this,he).values())n._setVisible(Zr,!1);for(const n of e.on)l(this,he).get(n)._setVisible(Zr,!0);for(const n of e.off)l(this,he).get(n)._setVisible(Zr,!1);b(this,Ca,this.getHash())}}isVisible(e){if(l(this,he).size===0)return!0;if(!e)return Xh("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,he).has(e.id)?l(this,he).get(e.id).visible:(te(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return w(this,Al,su).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,he).has(t))return te(`Optional content group not found: ${t}`),!0;if(l(this,he).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,he).has(t))return te(`Optional content group not found: ${t}`),!0;if(!l(this,he).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,he).has(t))return te(`Optional content group not found: ${t}`),!0;if(!l(this,he).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,he).has(t))return te(`Optional content group not found: ${t}`),!0;if(l(this,he).get(t).visible)return!1}return!0}return te(`Unknown optional content policy ${e.policy}.`),!0}return te(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const s=l(this,he).get(e);if(!s){te(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=l(this,he).get(o))==null||i._setVisible(Zr,!1,!0));s._setVisible(Zr,!!t,!0),b(this,ni,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const i=l(this,he).get(s);if(i)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}b(this,ni,null)}get hasInitialVisibility(){return l(this,Ca)===null||this.getHash()===l(this,Ca)}getOrder(){return l(this,he).size?l(this,ka)?l(this,ka).slice():[...l(this,he).keys()]:null}getGroups(){return l(this,he).size>0?cf(l(this,he)):null}getGroup(e){return l(this,he).get(e)||null}getHash(){if(l(this,ni)!==null)return l(this,ni);const e=new am;for(const[t,n]of l(this,he))e.update(`${t}:${n.visible}`);return b(this,ni,e.hexdigest())}}ni=new WeakMap,he=new WeakMap,Ca=new WeakMap,ka=new WeakMap,Al=new WeakSet,su=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=w(this,Al,su).call(this,i);else if(l(this,he).has(i))a=l(this,he).get(i).visible;else return te(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class Xx{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),e.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Xe(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Yx(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Kx(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Yx{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=uf(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Kx{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Jx(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=h(d),i(d)}if(t=a(r),t){const d=h(t);return i(d)}if(t=n("filename","i").exec(r),t){t=t[1];let d=o(t);return d=h(d),i(d)}function n(d,u){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function s(d,u){if(d){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const f=new TextDecoder(d,{fatal:!0}),g=Kh(u);u=f.decode(g),e=!1}catch{}}return u}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const u=[];let f;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(d))!==null;){let[,y,A,v]=f;if(y=parseInt(y,10),y in u){if(y===0)break;continue}u[y]=[A,v]}const m=[];for(let y=0;y<u.length&&y in u;++y){let[A,v]=u[y];v=o(v),A&&(v=unescape(v),y===0&&(v=c(v))),m.push(v)}return m.join("")}function o(d){if(d.startsWith('"')){const u=d.slice(1).split('\\"');for(let f=0;f<u.length;++f){const g=u[f].indexOf('"');g!==-1&&(u[f]=u[f].slice(0,g),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}d=u.join('"')}return d}function c(d){const u=d.indexOf("'");if(u===-1)return d;const f=d.slice(0,u),m=d.slice(u+1).replace(/^[^']*'/,"");return s(f,m)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,A){return String.fromCharCode(parseInt(A,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function bf(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function yf({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(r.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function wf(r){const e=r.get("Content-Disposition");if(e){let t=Jx(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uf(t))return t}return null}function Zh(r,e){return r===404||r===0&&e.startsWith("file:")?new $r('Missing PDF "'+e+'".'):new Yh(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r)}function vm(r){return r===200||r===206}function xm(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Am(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(te(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class yg{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=bf(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Qx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Zx(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Qx{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,xm(n,this._withCredentials,this._abortController)).then(i=>{if(!vm(i.status))throw Zh(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:c}=yf({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=wf(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Br("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Am(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Zx{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const a=s.url;fetch(a,xm(i,this._withCredentials,this._abortController)).then(o=>{if(!vm(o.status))throw Zh(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Am(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const gd=200,pd=206;function eA(r){const e=r.response;return typeof e!="string"?e:Kh(e).buffer}class tA{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=bf(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const i in n)s[i]=n[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=pd):s.expectedStatus=gd,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){var c,h,d;const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,s.status);return}const i=s.status||gd;if(!(i===gd&&n.expectedStatus===pd)&&i!==n.expectedStatus){(h=n.onError)==null||h.call(n,s.status);return}const o=eA(s);if(i===pd){const u=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);n.onDone({begin:parseInt(f[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):(d=n.onError)==null||d.call(n,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class nA{constructor(e){this._source=e,this._manager=new tA(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new sA(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new iA(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class sA{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...c]=a.split(": ");return[o,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:i}=yf({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=wf(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Zh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iA{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Zh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const rA=/^[a-z][a-z0-9\-+.]+:/i;function aA(r){if(rA.test(r))return new URL(r);const e=Si.get("url");return new URL(e.pathToFileURL(r))}function Sm(r,e,t){return r.protocol==="http:"?Si.get("http").request(r,{headers:e},t):Si.get("https").request(r,{headers:e},t)}class oA{constructor(e){this.source=e,this.url=aA(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=bf(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new hA(this):new lA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new dA(this,e,t):new cA(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Em{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Br("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _m{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class lA extends Em{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=s=>{if(s.statusCode===404){const c=new $r(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const i=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=yf({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=wf(i)};this._request=Sm(this._url,t,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class cA extends _m{constructor(e,t,n){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${n-1}`;const i=a=>{if(a.statusCode===404){const o=new $r(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=Sm(this._url,s,i),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class hA extends Em{constructor(e){super(e);const t=Si.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new $r(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class dA extends _m{constructor(e,t,n){super(e);const s=Si.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}}const uA=1e5,Rt=30,fA=.8;var qg,si,Dt,Sl,El,ir,gs,_l,Cl,rr,Ta,Pa,ii,Ra,kl,Ma,ar,Tl,Pl,Ie,or,lr,Rl,ri,La,Ns,Cm,km,ru,Yt,Uc,au,Tm,Pm;let iu=(Ie=class{constructor({textContentSource:e,container:t,viewport:n}){x(this,Ns);x(this,si,Promise.withResolvers());x(this,Dt,null);x(this,Sl,!1);x(this,El,!!((qg=globalThis.FontInspector)!=null&&qg.enabled));x(this,ir,null);x(this,gs,null);x(this,_l,0);x(this,Cl,0);x(this,rr,null);x(this,Ta,null);x(this,Pa,0);x(this,ii,0);x(this,Ra,Object.create(null));x(this,kl,[]);x(this,Ma,null);x(this,ar,[]);x(this,Tl,new WeakMap);x(this,Pl,null);var c;if(e instanceof ReadableStream)b(this,Ma,e);else if(typeof e=="object")b(this,Ma,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Dt,b(this,Ta,t)),b(this,ii,n.scale*(globalThis.devicePixelRatio||1)),b(this,Pa,n.rotation),b(this,gs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=n.rawDims;b(this,Pl,[1,0,0,-1,-a,o+i]),b(this,Cl,s),b(this,_l,i),w(c=Ie,Yt,Tm).call(c),Ir(t,n),l(this,si).promise.finally(()=>{l(Ie,La).delete(this),b(this,gs,null),b(this,Ra,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ct.platform;return ie(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,rr).read().then(({value:t,done:n})=>{if(n){l(this,si).resolve();return}l(this,ir)??b(this,ir,t.lang),Object.assign(l(this,Ra),t.styles),w(this,Ns,Cm).call(this,t.items),e()},l(this,si).reject)};return b(this,rr,l(this,Ma).getReader()),l(Ie,La).add(this),e(),l(this,si).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Pa)&&(t==null||t(),b(this,Pa,s),Ir(l(this,Ta),{rotation:s})),n!==l(this,ii)){t==null||t(),b(this,ii,n);const a={div:null,properties:null,ctx:w(i=Ie,Yt,Uc).call(i,l(this,ir))};for(const o of l(this,ar))a.properties=l(this,Tl).get(o),a.div=o,w(this,Ns,ru).call(this,a)}}cancel(){var t;const e=new Br("TextLayer task cancelled.");(t=l(this,rr))==null||t.cancel(e).catch(()=>{}),b(this,rr,null),l(this,si).reject(e)}get textDivs(){return l(this,ar)}get textContentItemsStr(){return l(this,kl)}static cleanup(){if(!(l(this,La).size>0)){l(this,or).clear();for(const{canvas:e}of l(this,lr).values())e.remove();l(this,lr).clear()}}},si=new WeakMap,Dt=new WeakMap,Sl=new WeakMap,El=new WeakMap,ir=new WeakMap,gs=new WeakMap,_l=new WeakMap,Cl=new WeakMap,rr=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,ii=new WeakMap,Ra=new WeakMap,kl=new WeakMap,Ma=new WeakMap,ar=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,or=new WeakMap,lr=new WeakMap,Rl=new WeakMap,ri=new WeakMap,La=new WeakMap,Ns=new WeakSet,Cm=function(e){var s,i;if(l(this,Sl))return;(i=l(this,gs)).ctx??(i.ctx=w(s=Ie,Yt,Uc).call(s,l(this,ir)));const t=l(this,ar),n=l(this,kl);for(const a of e){if(t.length>uA){te("Ignoring additional textDivs for performance reasons."),b(this,Sl,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,Dt);b(this,Dt,document.createElement("span")),l(this,Dt).classList.add("markedContent"),a.id!==null&&l(this,Dt).setAttribute("id",`${a.id}`),o.append(l(this,Dt))}else a.type==="endMarkedContent"&&b(this,Dt,l(this,Dt).parentNode);continue}n.push(a.str),w(this,Ns,km).call(this,a)}},km=function(e){var y;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,ar).push(t);const s=z.transform(l(this,Pl),e.transform);let i=Math.atan2(s[1],s[0]);const a=l(this,Ra)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=l(this,El)&&a.fontSubstitution||a.fontFamily;o=Ie.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),h=c*w(y=Ie,Yt,Pm).call(y,o,l(this,ir));let d,u;i===0?(d=s[4],u=s[5]-h):(d=s[4]+h*Math.sin(i),u=s[5]-h*Math.cos(i));const f="calc(var(--scale-factor)*",g=t.style;l(this,Dt)===l(this,Ta)?(g.left=`${(100*d/l(this,Cl)).toFixed(2)}%`,g.top=`${(100*u/l(this,_l)).toFixed(2)}%`):(g.left=`${f}${d.toFixed(2)}px)`,g.top=`${f}${u.toFixed(2)}px)`),g.fontSize=`${f}${(l(Ie,ri)*c).toFixed(2)}px)`,g.fontFamily=o,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,El)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);A!==v&&Math.max(A,v)/Math.min(A,v)>1.5&&(m=!0)}if(m&&(n.canvasWidth=a.vertical?e.height:e.width),l(this,Tl).set(t,n),l(this,gs).div=t,l(this,gs).properties=n,w(this,Ns,ru).call(this,l(this,gs)),n.hasText&&l(this,Dt).append(t),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),l(this,Dt).append(A)}},ru=function(e){var o;const{div:t,properties:n,ctx:s}=e,{style:i}=t;let a="";if(l(Ie,ri)>1&&(a=`scale(${1/l(Ie,ri)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:h,fontSize:d}=n;w(o=Ie,Yt,au).call(o,s,d*l(this,ii),c);const{width:u}=s.measureText(t.textContent);u>0&&(a=`scaleX(${h*l(this,ii)/u}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Yt=new WeakSet,Uc=function(e=null){let t=l(this,lr).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,lr).set(e,t),l(this,Rl).set(t,{size:0,family:""})}return t},au=function(e,t,n){const s=l(this,Rl).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},Tm=function(){if(l(this,ri)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,ri,e.getBoundingClientRect().height),e.remove()},Pm=function(e,t){const n=l(this,or).get(e);if(n)return n;const s=w(this,Yt,Uc).call(this,t);s.canvas.width=s.canvas.height=Rt,w(this,Yt,au).call(this,s,Rt,e);const i=s.measureText("");let a=i.fontBoundingBoxAscent,o=Math.abs(i.fontBoundingBoxDescent);if(a){const d=a/(a+o);return l(this,or).set(e,d),s.canvas.width=s.canvas.height=0,d}s.strokeStyle="red",s.clearRect(0,0,Rt,Rt),s.strokeText("g",0,0);let c=s.getImageData(0,0,Rt,Rt).data;o=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){o=Math.ceil(d/4/Rt);break}s.clearRect(0,0,Rt,Rt),s.strokeText("A",0,Rt),c=s.getImageData(0,0,Rt,Rt).data,a=0;for(let d=0,u=c.length;d<u;d+=4)if(c[d]>0){a=Rt-Math.floor(d/4/Rt);break}s.canvas.width=s.canvas.height=0;const h=a?a/(a+o):fA;return l(this,or).set(e,h),h},x(Ie,Yt),x(Ie,or,new Map),x(Ie,lr,new Map),x(Ie,Rl,new WeakMap),x(Ie,ri,null),x(Ie,La,new Set),Ie);class qo{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(qo.shouldBuildText(o))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)s(h)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const gA=65536,pA=100,mA=5e3,bA=yt?Px:Cx,yA=yt?Rx:dm,wA=yt?Tx:kx,vA=yt?Mx:pm;function xA(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new ou,{docId:t}=e,n=r.url?AA(r.url):null,s=r.data?SA(r.data):null,i=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,c=r.range instanceof Rm?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:gA;let d=r.worker instanceof aa?r.worker:null;const u=r.verbosity,f=typeof r.docBaseUrl=="string"&&!Qh(r.docBaseUrl)?r.docBaseUrl:null,g=typeof r.cMapUrl=="string"?r.cMapUrl:null,m=r.cMapPacked!==!1,y=r.CMapReaderFactory||yA,A=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,v=r.StandardFontDataFactory||vA,S=r.stopAtErrors!==!0,E=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,_=r.isEvalSupported!==!1,k=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!yt,T=typeof r.isChrome=="boolean"?r.isChrome:!Ct.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),P=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,R=typeof r.disableFontFace=="boolean"?r.disableFontFace:yt,M=r.fontExtraProperties===!0,L=r.enableXfa===!0,D=r.ownerDocument||globalThis.document,Q=r.disableRange===!0,U=r.disableStream===!0,$=r.disableAutoFetch===!0,V=r.pdfBug===!0,G=r.CanvasFactory||bA,O=r.FilterFactory||wA,N=r.enableHWA===!0,Ee=c?c.length:r.length??NaN,je=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!yt&&!R,We=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:y===dm&&v===pm&&g&&A&&_o(g,document.baseURI)&&_o(A,document.baseURI);r.canvasFactory&&ag("`canvasFactory`-instance option, please use `CanvasFactory` instead."),r.filterFactory&&ag("`filterFactory`-instance option, please use `FilterFactory` instead.");const we=null;sx(u);const ve={canvasFactory:new G({ownerDocument:D,enableHWA:N}),filterFactory:new O({docId:t,ownerDocument:D}),cMapReaderFactory:We?null:new y({baseUrl:g,isCompressed:m}),standardFontDataFactory:We?null:new v({baseUrl:A})};if(!d){const Fe={verbosity:u,port:Ls.workerPort};d=Fe.port?aa.fromPort(Fe):new aa(Fe),e._worker=d}const Pt={docId:t,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:$,rangeChunkSize:h,length:Ee,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:E,disableFontFace:R,ignoreErrors:S,isEvalSupported:_,isOffscreenCanvasSupported:k,isChrome:T,canvasMaxAreaInBytes:P,fontExtraProperties:M,useSystemFonts:je,cMapUrl:We?g:null,standardFontDataUrl:We?A:null}},ln={disableFontFace:R,fontExtraProperties:M,ownerDocument:D,pdfBug:V,styleElement:we,loadingParams:{disableAutoFetch:$,enableXfa:L}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Fe=d.messageHandler.sendWithPromise("GetDocRequest",Pt,s?[s.buffer]:null);let oe;if(c)oe=new Xx(c,{disableRange:Q,disableStream:U});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Rn;yt?Rn=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&_o(n)?yg:oA:Rn=_o(n)?yg:nA,oe=new Rn({url:n,length:Ee,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:Q,disableStream:U})}return Fe.then(Rn=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const cn=new Lo(t,Rn,d.port),_e=new kA(cn,e,oe,ln,ve);e._transport=_e,cn.send("Ready",null)})}).catch(e._capability.reject),e}function AA(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(yt&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function SA(r){if(yt&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Kh(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function wg(r){return typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0}var Lh;const Dh=class Dh{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${xt(Dh,Lh)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Lh=new WeakMap,x(Dh,Lh,0);let ou=Dh,Rm=class{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){xe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class EA{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ai,ps,nn,ea,Vc;class _A{constructor(e,t,n,s=!1){x(this,nn);x(this,ai,null);x(this,ps,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new rg:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new Mm,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}={}){return new fc({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=Us.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:u=!1}){var _,k;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(n,s,d,u),{renderingIntent:g,cacheKey:m}=f;b(this,ps,!1),w(this,nn,Vc).call(this),o||(o=this._transport.getOptionalContentConfig(g));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const A=!!(g&qt.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const v=T=>{var P;y.renderTasks.delete(S),(this._maybeCleanupAfterRender||A)&&b(this,ps,!0),w(this,nn,ea).call(this,!A),T?(S.capability.reject(T),this._abortOperatorList({intentState:y,reason:T instanceof Error?T:new Error(T)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new cu({callback:v,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h});(y.renderTasks||(y.renderTasks=new Set)).add(S);const E=S.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([T,P])=>{var R;if(this.destroyed){v();return}if((R=this._stats)==null||R.time("Rendering"),!(P.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:T,optionalContentConfig:P}),S.operatorListChanged()}).catch(v),E}getOperatorList({intent:e="display",annotationMode:t=Us.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var h;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>qo.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function i(){a.read().then(function({value:c,done:h}){if(h){n(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),b(this,ps,!1),w(this,nn,Vc).call(this),Promise.all(e)}cleanup(e=!1){b(this,ps,!0);const t=w(this,nn,ea).call(this,!1);return e&&t&&this._stats&&(this._stats=new rg),t}_startRenderPage(e,t){var s,i;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&w(this,nn,ea).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:i,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),h=this._intentStates.get(t);h.streamReader=c;const d=()=>{c.read().then(({value:u,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,h),d())},u=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();w(this,nn,ea).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(u);else if(h.opListReadCapability)h.opListReadCapability.reject(u);else throw u}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof df){let s=pA;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Br(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ai=new WeakMap,ps=new WeakMap,nn=new WeakSet,ea=function(e=!1){if(w(this,nn,Vc).call(this),!l(this,ps)||this.destroyed)return!1;if(e)return b(this,ai,setTimeout(()=>{b(this,ai,null),w(this,nn,ea).call(this,!1)},mA)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,ps,!1),!0},Vc=function(){l(this,ai)&&(clearTimeout(l(this,ai)),b(this,ai,null))};var ms,Ih;class CA{constructor(){x(this,ms,new Map);x(this,Ih,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};l(this,Ih).then(()=>{for(const[s]of l(this,ms))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){te("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}l(this,ms).set(t,s)}removeEventListener(e,t){const n=l(this,ms).get(t);n==null||n(),l(this,ms).delete(t)}terminate(){for(const[,e]of l(this,ms))e==null||e();l(this,ms).clear()}}ms=new WeakMap,Ih=new WeakMap;var jh,cr,hr,Da,Gc,Ia,qc;const Ce=class Ce{constructor({name:e=null,port:t=null,verbosity:n=ix()}={}){x(this,Da);var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(Ce,hr))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Ce,hr)||b(Ce,hr,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return yt?Promise.all([Si.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Lo("main","worker",e),this._messageHandler.on("ready",function(){}),w(this,Da,Gc).call(this)}_initialize(){if(l(Ce,cr)||l(Ce,Ia,qc)){this._setupFakeWorker();return}let{workerSrc:e}=Ce;try{Ce._isSameOrigin(window.location.href,e)||(e=Ce._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Lo("main","worker",t),s=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),n.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}this._messageHandler=n,this._port=t,this._webWorker=t,w(this,Da,Gc).call(this)}),n.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{Xh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Ce,cr)||(te("Setting up fake worker."),b(Ce,cr,!0)),Ce._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new CA;this._port=t;const n=`fake${xt(Ce,jh)._++}`,s=new Lo(n+"_worker",n,t);e.setup(s,t),this._messageHandler=new Lo(n,n+"_worker",t),w(this,Da,Gc).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Ce,hr))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=l(this,hr))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ce(e)}static get workerSrc(){if(Ls.workerSrc)return Ls.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ie(this,"_setupFakeWorkerGlobal",(async()=>l(this,Ia,qc)?l(this,Ia,qc):(await import(this.workerSrc)).WorkerMessageHandler)())}};jh=new WeakMap,cr=new WeakMap,hr=new WeakMap,Da=new WeakSet,Gc=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ia=new WeakSet,qc=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(Ce,Ia),x(Ce,jh,0),x(Ce,cr,!1),x(Ce,hr),yt&&(b(Ce,cr,!0),Ls.workerSrc||(Ls.workerSrc="./pdf.worker.mjs")),Ce._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(t,n);return n.origin===s.origin},Ce._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let aa=Ce;var bs,Wn,ja,Fa,Un,dr,Do;class kA{constructor(e,t,n,s,i){x(this,dr);x(this,bs,new Map);x(this,Wn,new Map);x(this,ja,new Map);x(this,Fa,new Map);x(this,Un,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Mm,this.fontLoader=new Ex({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ie(this,"annotationStorage",new pf)}getRenderingIntent(e,t=Us.ENABLE,n=null,s=!1,i=!1){let a=qt.DISPLAY,o=Yd;switch(e){case"any":a=qt.ANY;break;case"display":break;case"print":a=qt.PRINT;break;default:te(`getRenderingIntent - invalid intent: ${e}`)}const c=a&qt.PRINT&&n instanceof lm?n:this.annotationStorage;switch(t){case Us.DISABLE:a+=qt.ANNOTATIONS_DISABLE;break;case Us.ENABLE:break;case Us.ENABLE_FORMS:a+=qt.ANNOTATIONS_FORMS;break;case Us.ENABLE_STORAGE:a+=qt.ANNOTATIONS_STORAGE,o=c.serializable;break;default:te(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=qt.IS_EDITING),i&&(a+=qt.OPLIST);const{ids:h,hash:d}=c.modifiedIds,u=[a,o.hash,d];return{renderingIntent:a,cacheKey:u.join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,Un))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Wn).values())e.push(s._destroy());l(this,Wn).clear(),l(this,ja).clear(),l(this,Fa).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,bs).clear(),this.filterFactory.destroy(),iu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Br("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Xe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Xe(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,s)=>{Xe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Xe(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new EA(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new kd(n.message,n.code);break;case"InvalidPDFException":s=new Ip(n.message);break;case"MissingPDFException":s=new $r(n.message);break;case"UnexpectedResponseException":s=new Yh(n.message,n.status);break;case"UnknownErrorException":s=new Td(n.message,n.details);break;default:xe("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(b(this,Un,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?l(this,Un).reject(i):l(this,Un).resolve({password:i})};try{t.onPassword(s,n.code)}catch(i){l(this,Un).reject(i)}}else l(this,Un).reject(new kd(n.message,n.code));return l(this,Un).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Wn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in i){const g=i.error;te(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const d=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,u=new _x(i,{disableFontFace:o,inspectFont:d});this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:f}=i;Xe(f,"The imageRef must be defined.");for(const g of l(this,Wn).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,i,a])=>{var c;if(this.destroyed)return;const o=l(this,Wn).get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":o.objs.resolve(n,a),(a==null?void 0:a.dataLen)>Zv&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&te("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=l(this,ja).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,Fa).set(i.refStr,e);const a=new _A(t,i,this,this._params.pdfBug);return l(this,Wn).set(t,a),a});return l(this,ja).set(t,s),s}getPageIndex(e){return wg(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return w(this,dr,Do).call(this,"GetFieldObjects")}hasJSActions(){return w(this,dr,Do).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,dr,Do).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return w(this,dr,Do).call(this,"GetOptionalContentConfig").then(t=>new qx(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,bs).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new Vx(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,bs).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Wn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,bs).clear(),this.filterFactory.destroy(!0),iu.cleanup()}}cachedPageNumber(e){if(!wg(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Fa).get(t)??null}}bs=new WeakMap,Wn=new WeakMap,ja=new WeakMap,Fa=new WeakMap,Un=new WeakMap,dr=new WeakSet,Do=function(e,t=null){const n=l(this,bs).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return l(this,bs).set(e,s),s};const Rc=Symbol("INITIAL_DATA");var bn,Ml,lu;class Mm{constructor(){x(this,Ml);x(this,bn,Object.create(null))}get(e,t=null){if(t){const s=w(this,Ml,lu).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=l(this,bn)[e];if(!n||n.data===Rc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=l(this,bn)[e];return!!t&&t.data!==Rc}resolve(e,t=null){const n=w(this,Ml,lu).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in l(this,bn)){const{data:n}=l(this,bn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}b(this,bn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,bn)){const{data:t}=l(this,bn)[e];t!==Rc&&(yield[e,t])}}}bn=new WeakMap,Ml=new WeakSet,lu=function(e){var t;return(t=l(this,bn))[e]||(t[e]={...Promise.withResolvers(),data:Rc})};var oi;class TA{constructor(e){x(this,oi,null);b(this,oi,e),this.onContinue=null}get promise(){return l(this,oi).capability.promise}cancel(e=0){l(this,oi).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,oi).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,oi);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}oi=new WeakMap;var li,ur;const Oi=class Oi{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:f=null}){x(this,li,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new TA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(Oi,ur).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Oi,ur).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:i,background:a}=this.params;this.gfx=new ra(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,li)&&(window.cancelAnimationFrame(l(this,li)),b(this,li,null)),l(Oi,ur).delete(this._canvas),this.callback(e||new df(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,li,window.requestAnimationFrame(()=>{b(this,li,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Oi,ur).delete(this._canvas),this.callback())))}};li=new WeakMap,ur=new WeakMap,x(Oi,ur,new WeakSet);let cu=Oi;const PA="4.8.69",RA="3634dab10";function vg(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Eo(r){return Math.max(0,Math.min(255,255*r))}class xg{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Eo(e),[e,e,e]}static G_HTML([e]){const t=vg(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Eo)}static RGB_HTML(e){return`#${e.map(vg).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Eo(1-Math.min(1,e+s)),Eo(1-Math.min(1,n+s)),Eo(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,i=1-t,a=1-n,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class MA{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xe("Abstract method `_createSVG` called.")}}class vf extends MA{_createSVG(e){return document.createElementNS(rs,e)}}class Lm{static setupStorage(e,t,n,s,i){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&e.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,h)}o&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var u,f;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:n});const o=i!=="richText",c=e.div;if(c.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}o&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);a.append(g),o&&qo.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const d=[[s,-1,a]];for(;d.length>0;){const[g,m,y]=d.at(-1);if(m+1===g.children.length){d.pop();continue}const A=g.children[++d.at(-1)[1]];if(A===null)continue;const{name:v}=A;if(v==="#text"){const E=document.createTextNode(A.value);h.push(E),y.append(E);continue}const S=(u=A==null?void 0:A.attributes)!=null&&u.xmlns?document.createElementNS(A.attributes.xmlns,v):document.createElement(v);if(y.append(S),A.attributes&&this.setAttributes({html:S,element:A,storage:t,intent:i,linkService:n}),((f=A.children)==null?void 0:f.length)>0)d.push([A,-1,S]);else if(A.value){const E=document.createTextNode(A.value);o&&qo.shouldBuildText(v)&&h.push(E),S.append(E)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const pc=1e3,LA=9,Fr=new WeakSet;function Is(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class DA{static create(e){switch(e.data.annotationType){case Ue.LINK:return new Dm(e);case Ue.TEXT:return new IA(e);case Ue.WIDGET:switch(e.data.fieldType){case"Tx":return new jA(e);case"Btn":return e.data.radioButton?new Fm(e):e.data.checkBox?new OA(e):new NA(e);case"Ch":return new zA(e);case"Sig":return new FA(e)}return new Wr(e);case Ue.POPUP:return new du(e);case Ue.FREETEXT:return new $m(e);case Ue.LINE:return new $A(e);case Ue.SQUARE:return new BA(e);case Ue.CIRCLE:return new WA(e);case Ue.POLYLINE:return new Bm(e);case Ue.CARET:return new VA(e);case Ue.INK:return new xf(e);case Ue.POLYGON:return new UA(e);case Ue.HIGHLIGHT:return new Wm(e);case Ue.UNDERLINE:return new GA(e);case Ue.SQUIGGLY:return new qA(e);case Ue.STRIKEOUT:return new XA(e);case Ue.STAMP:return new Um(e);case Ue.FILEATTACHMENT:return new YA(e);default:return new Ne(e)}}}var fr,Oa,Na,Ll,hu;const Mf=class Mf{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){x(this,Ll);x(this,fr,null);x(this,Oa,!1);x(this,Na,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Mf._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;l(this,fr)||b(this,fr,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&w(this,Ll,hu).call(this,t),(n=l(this,Na))==null||n.popup.updateEdited(e)}resetEdited(){var e;l(this,fr)&&(w(this,Ll,hu).call(this,l(this,fr).rect),(e=l(this,Na))==null||e.popup.resetEdited(),b(this,fr,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Wr||(i.tabIndex=pc);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof du){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,i),i}const{width:o,height:c}=Is(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(y>0||A>0){const S=`calc(${y}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;a.borderRadius=S}else if(this instanceof Fm){const S=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=S}switch(t.borderStyle.style){case Ao.SOLID:a.borderStyle="solid";break;case Ao.DASHED:a.borderStyle="dashed";break;case Ao.BEVELED:te("Unimplemented border style: beveled");break;case Ao.INSET:te("Unimplemented border style: inset");break;case Ao.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(b(this,Oa,!0),a.borderColor=z.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const h=z.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:u,pageX:f,pageY:g}=s.rawDims;a.left=`${100*(h[0]-f)/d}%`,a.top=`${100*(h[1]-g)/u}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/d}%`,a.height=`${100*c/u}%`):this.setRotation(m,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=Is(this.data.rect);let o,c;e%180===0?(o=100*i/n,c=100*a/s):(o=100*a/n,c=100*i/s),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[n]=xg[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:xg[`${a}_rgb`](o)})};return ie(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||n[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,i]of Object.entries(t)){const a=n[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,i]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,A,v,S]=e.subarray(2,6);if(s===y&&i===A&&t===v&&n===S)return}const{style:a}=this.container;let o;if(l(this,Oa)){const{borderColor:y,borderWidth:A}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=s-t,h=i-n,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const f=d.createElement("defs");u.append(f);const g=d.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let y=2,A=e.length;y<A;y+=8){const v=e[y],S=e[y+1],E=e[y+2],_=e[y+3],k=d.createElement("rect"),T=(E-t)/c,P=(i-S)/h,R=(v-E)/c,M=(S-_)/h;k.setAttribute("x",T),k.setAttribute("y",P),k.setAttribute("width",R),k.setAttribute("height",M),g.append(k),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${P}" width="${R}" height="${M}"/>`)}l(this,Oa)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=b(this,Na,new du({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){xe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const c=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Fr.has(h)){te(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Fr.has(s)&&n.push({id:a,exportValue:i,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};fr=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Ll=new WeakSet,hu=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:d}=Is(e);t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*h/i}%`,t.height=`${100*d/a}%`):this.setRotation(s)};let Ne=Mf;var Xt,Mi,Im,jm;class Dm extends Ne{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,Xt);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(w(this,Xt,Im).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(w(this,Xt,jm).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&w(this,Xt,Mi).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),w(this,Xt,Mi).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),w(this,Xt,Mi).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),w(this,Xt,Mi).call(this),!this._fieldObjects){te('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var u;s==null||s();const{fields:i,refs:a,include:o}=n,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const g of i){const m=this._fieldObjects[g]||[];for(const{id:y}of m)f.add(y)}for(const g of Object.values(this._fieldObjects))for(const m of g)f.has(m.id)===o&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,d=[];for(const f of c){const{id:g}=f;switch(d.push(g),f.type){case"text":{const y=f.defaultValue||"";h.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;h.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";h.setValue(g,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Fr.has(m)){te(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Xt=new WeakSet,Mi=function(){this.container.setAttribute("data-internal-link","")},Im=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(n.content,n.filename,s),!1},w(this,Xt,Mi).call(this)},jm=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),w(this,Xt,Mi).call(this)};class IA extends Ne{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Wr extends Ne{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ct.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,i){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,n,s){var i,a,o;for(const[c,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,h,s),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":z.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||LA,i=e.style;let a;const o=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(h/(hd*s))||1,u=h/d;a=Math.min(s,c(u/hd))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(h/hd))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=z.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class jA extends Wr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[s]:n})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let h=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Fr.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=pc,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";n.value=d.userValue=g,d.formattedValue=null});let u=f=>{const{formattedValue:g}=d;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var y;if(d.focused)return;const{target:m}=g;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(y){d.userValue=y.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),y.target.value=d.userValue},formattedValue(y){const{formattedValue:A}=y.detail;d.formattedValue=A,A!=null&&y.target!==document.activeElement&&(y.target.value=A),e.setValue(t,{formattedValue:A})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var E;const{charLimit:A}=y.detail,{target:v}=y;if(A===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",A);let S=d.userValue;!S||S.length<=A||(S=S.slice(0,A),v.value=d.userValue=S,e.setValue(t,{value:S}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),n.addEventListener("keydown",g=>{var A;d.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:y}=g.target;d.lastCommittedValue!==y&&(d.lastCommittedValue=y,d.userValue=y,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=u;u=null,n.addEventListener("blur",g=>{var y,A;if(!d.focused||!g.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(d.focused=!1);const{value:m}=g.target;d.userValue=m,d.lastCommittedValue!==m&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",g=>{var k;d.lastCommittedValue=null;const{data:m,target:y}=g,{value:A,selectionStart:v,selectionEnd:S}=y;let E=v,_=S;switch(g.inputType){case"deleteWordBackward":{const T=A.substring(0,v).match(/\w*[^\w]*$/);T&&(E-=T[0].length);break}case"deleteWordForward":{const T=A.substring(v).match(/^[^\w]*\w*/);T&&(_+=T[0].length);break}case"deleteContentBackward":v===S&&(E-=1);break;case"deleteContentForward":v===S&&(_+=1);break}g.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:m||"",willCommit:!1,selStart:E,selEnd:_}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(u&&n.addEventListener("blur",u),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class FA extends Wr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class OA extends Wr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Fr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=pc,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n)){const d=c&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Fm extends Wr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Fr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=pc,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const c={value:h=>{const d=a===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const f=d&&u.id===n;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class NA extends Dm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class zA extends Wr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Fr.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=pc;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const u=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===u});for(const d of this.data.options){const u=document.createElement("option");u.textContent=d.displayValue,u.value=d.exportValue,n.value.includes(d.exportValue)&&(u.setAttribute("selected",!0),i=!1),s.append(u)}let a=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const u=d?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[u]):f.selectedIndex===-1?null:f[f.selectedIndex][u]};let c=o(!1);const h=d=>{const u=d.target.options;return Array.prototype.map.call(u,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const u={value(f){a==null||a();const g=f.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const y of s.options)y.selected=m.has(y.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,m=f.detail.remove;g[m].selected=!1,s.remove(m),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:g,displayValue:m,exportValue:y}=f.detail.insert,A=s.children[g],v=document.createElement("option");v.textContent=m,v.value=y,A?A.before(v):s.append(v),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of g){const{displayValue:y,exportValue:A}=m,v=document.createElement("option");v.textContent=y,v.value=A,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},indices(f){const g=new Set(f.detail.indices);for(const m of f.target.options)m.selected=g.has(m.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(u,d)}),s.addEventListener("input",d=>{var g;const u=o(!0),f=o(!1);e.setValue(t,{value:u}),d.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class du extends Ne{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Ne._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new HA({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${hf}${n}`).join(",")),this.container}}var za,Fh,Oh,Ha,gr,De,ys,$a,Dl,Il,Ba,ws,yn,vs,jl,xs,Fl,pr,mr,ge,Xc,uu,Om,Nm,zm,Hm,Yc,Kc,fu;class HA{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:c,rect:h,parentRect:d,open:u}){x(this,ge);x(this,za,w(this,ge,zm).bind(this));x(this,Fh,w(this,ge,fu).bind(this));x(this,Oh,w(this,ge,Kc).bind(this));x(this,Ha,w(this,ge,Yc).bind(this));x(this,gr,null);x(this,De,null);x(this,ys,null);x(this,$a,null);x(this,Dl,null);x(this,Il,null);x(this,Ba,null);x(this,ws,!1);x(this,yn,null);x(this,vs,null);x(this,jl,null);x(this,xs,null);x(this,Fl,null);x(this,pr,null);x(this,mr,!1);var f;b(this,De,e),b(this,Fl,s),b(this,ys,a),b(this,xs,o),b(this,Il,c),b(this,gr,t),b(this,jl,h),b(this,Ba,d),b(this,Dl,n),b(this,$a,ff.toDateObject(i)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,Ha)),g.addEventListener("mouseenter",l(this,Oh)),g.addEventListener("mouseleave",l(this,Fh)),g.classList.add("popupTriggerArea");for(const g of n)(f=g.container)==null||f.addEventListener("keydown",l(this,za));l(this,De).hidden=!0,u&&w(this,ge,Yc).call(this)}render(){if(l(this,yn))return;const e=b(this,yn,document.createElement("div"));if(e.className="popup",l(this,gr)){const i=e.style.outlineColor=z.makeHexColor(...l(this,gr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=z.makeHexColor(...l(this,gr).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=l(this,Fl),e.append(t),l(this,$a)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,$a).valueOf()})),t.append(i)}const s=l(this,ge,Xc);if(s)Lm.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(l(this,ys));e.append(i)}l(this,De).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];n.append(document.createTextNode(o)),i<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;l(this,pr)||b(this,pr,{contentsObj:l(this,ys),richText:l(this,xs)}),e&&b(this,vs,null),t&&(b(this,xs,w(this,ge,Nm).call(this,t)),b(this,ys,null)),(n=l(this,yn))==null||n.remove(),b(this,yn,null)}resetEdited(){var e;l(this,pr)&&({contentsObj:xt(this,ys)._,richText:xt(this,xs)._}=l(this,pr),b(this,pr,null),(e=l(this,yn))==null||e.remove(),b(this,yn,null),b(this,vs,null))}forceHide(){b(this,mr,this.isVisible),l(this,mr)&&(l(this,De).hidden=!0)}maybeShow(){l(this,mr)&&(l(this,yn)||w(this,ge,Kc).call(this),b(this,mr,!1),l(this,De).hidden=!1)}get isVisible(){return l(this,De).hidden===!1}}za=new WeakMap,Fh=new WeakMap,Oh=new WeakMap,Ha=new WeakMap,gr=new WeakMap,De=new WeakMap,ys=new WeakMap,$a=new WeakMap,Dl=new WeakMap,Il=new WeakMap,Ba=new WeakMap,ws=new WeakMap,yn=new WeakMap,vs=new WeakMap,jl=new WeakMap,xs=new WeakMap,Fl=new WeakMap,pr=new WeakMap,mr=new WeakMap,ge=new WeakSet,Xc=function(){const e=l(this,xs),t=l(this,ys);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,xs).html||null},uu=function(){var e,t,n;return((n=(t=(e=l(this,ge,Xc))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},Om=function(){var e,t,n;return((n=(t=(e=l(this,ge,Xc))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},Nm=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,ge,Om),fontSize:l(this,ge,uu)?`calc(${l(this,ge,uu)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return n},zm=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,ws))&&w(this,ge,Yc).call(this)},Hm=function(){if(l(this,vs)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:i}}}=l(this,Il);let a=!!l(this,Ba),o=a?l(this,Ba):l(this,jl);for(const m of l(this,Dl))if(!o||z.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const c=z.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,u=c[0]+d,f=c[1];b(this,vs,[100*(u-s)/t,100*(f-i)/n]);const{style:g}=l(this,De);g.left=`${l(this,vs)[0]}%`,g.top=`${l(this,vs)[1]}%`},Yc=function(){b(this,ws,!l(this,ws)),l(this,ws)?(w(this,ge,Kc).call(this),l(this,De).addEventListener("click",l(this,Ha)),l(this,De).addEventListener("keydown",l(this,za))):(w(this,ge,fu).call(this),l(this,De).removeEventListener("click",l(this,Ha)),l(this,De).removeEventListener("keydown",l(this,za)))},Kc=function(){l(this,yn)||this.render(),this.isVisible?l(this,ws)&&l(this,De).classList.add("focused"):(w(this,ge,Hm).call(this),l(this,De).hidden=!1,l(this,De).style.zIndex=parseInt(l(this,De).style.zIndex)+1e3)},fu=function(){l(this,De).classList.remove("focused"),!(l(this,ws)||!this.isVisible)&&(l(this,De).hidden=!0,l(this,De).style.zIndex=parseInt(l(this,De).style.zIndex)-1e3)};class $m extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ol;class $A extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Ol,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=Is(t.rect),i=this.svgFactory.create(n,s,!0),a=b(this,Ol,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ol)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ol=new WeakMap;var Nl;class BA extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Nl,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=Is(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=b(this,Nl,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Nl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nl=new WeakMap;var zl;class WA extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,zl,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=Is(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=b(this,zl,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",s/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,zl)}addHighlightArea(){this.container.classList.add("highlightArea")}}zl=new WeakMap;var Hl;class Bm extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Hl,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:i}}=this;if(!n)return this.container;const{width:a,height:o}=Is(t),c=this.svgFactory.create(a,o,!0);let h=[];for(let u=0,f=n.length;u<f;u+=2){const g=n[u]-t[0],m=t[3]-n[u+1];h.push(`${g},${m}`)}h=h.join(" ");const d=b(this,Hl,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Hl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hl=new WeakMap;class UA extends Bm{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class VA extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $l;class xf extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,$l,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:s,popupRef:i}}=this,{width:a,height:o}=Is(t),c=this.svgFactory.create(a,o,!0);for(const h of n){let d=[];for(let f=0,g=h.length;f<g;f+=2){const m=h[f]-t[0],y=t[3]-h[f+1];d.push(`${m},${y}`)}d=d.join(" ");const u=this.svgFactory.createElement(this.svgElementName);l(this,$l).push(u),u.setAttribute("points",d),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,$l)}addHighlightArea(){this.container.classList.add("highlightArea")}}$l=new WeakMap;class Wm extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class GA extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class qA extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class XA extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Um extends Ne{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bl,Wl,gu;class YA extends Ne{constructor(t){var s;super(t,{isRenderable:!0});x(this,Wl);x(this,Bl,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",w(this,Wl,gu).bind(this)),b(this,Bl,s);const{isMac:i}=Ct.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&w(this,Wl,gu).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Bl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bl=new WeakMap,Wl=new WeakSet,gu=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ul,br,yr,Vl,Nr,Vm,pu,Xg;let KA=(Xg=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o}){x(this,Nr);x(this,Ul,null);x(this,br,null);x(this,yr,new Map);x(this,Vl,null);this.div=e,b(this,Ul,t),b(this,br,n),b(this,Vl,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,yr).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;Ir(n,this.viewport);const s=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new vf,annotationStorage:e.annotationStorage||new pf,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Ue.POPUP;if(c){const u=s.get(o.id);if(!u)continue;i.elements=u}else{const{width:u,height:f}=Is(o.rect);if(u<=0||f<=0)continue}i.data=o;const h=DA.create(i);if(!h.isRenderable)continue;if(!c&&o.popupRef){const u=s.get(o.popupRef);u?u.push(h):s.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await w(this,Nr,Vm).call(this,d,o.id),h._isEditable&&(l(this,yr).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}w(this,Nr,pu).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Ir(t,{rotation:e.rotation}),w(this,Nr,pu).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,yr).values())}getEditableAnnotation(e){return l(this,yr).get(e)}},Ul=new WeakMap,br=new WeakMap,yr=new WeakMap,Vl=new WeakMap,Nr=new WeakSet,Vm=async function(e,t){var a,o;const n=e.firstChild||e,s=n.id=`${hf}${t}`,i=await((a=l(this,Vl))==null?void 0:a.getAriaAttributes(s));if(i)for(const[c,h]of i)n.setAttribute(c,h);this.div.append(e),(o=l(this,Ul))==null||o.moveElementInDOM(this.div,e,n,!1)},pu=function(){if(!l(this,br))return;const e=this.div;for(const[t,n]of l(this,br)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):s.append(n)}l(this,br).clear()},Xg);const Mc=/\r\n?|\n/g;var wn,$t,Gl,wr,Bt,Be,Gm,qm,Xm,Jc,Fs,Qc,Zc,Ym,bu,Km;const ye=class ye extends ue{constructor(t){super({...t,name:"freeTextEditor"});x(this,Be);x(this,wn);x(this,$t,"");x(this,Gl,`${this.id}-editor`);x(this,wr,null);x(this,Bt);b(this,wn,t.color||ye._defaultColor||ue._defaultLineColor),b(this,Bt,t.fontSize||ye._defaultFontSize)}static get _keyboardManager(){const t=ye.prototype,n=a=>a.isEmpty(),s=jr.TRANSLATE_SMALL,i=jr.TRANSLATE_BIG;return ie(this,"_keyboardManager",new gc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){ue.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case X.FREETEXT_SIZE:ye._defaultFontSize=n;break;case X.FREETEXT_COLOR:ye._defaultColor=n;break}}updateParams(t,n){switch(t){case X.FREETEXT_SIZE:w(this,Be,Gm).call(this,n);break;case X.FREETEXT_COLOR:w(this,Be,qm).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[X.FREETEXT_SIZE,ye._defaultFontSize],[X.FREETEXT_COLOR,ye._defaultColor||ue._defaultLineColor]]}get propertiesToUpdate(){return[[X.FREETEXT_SIZE,l(this,Bt)],[X.FREETEXT_COLOR,l(this,wn)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ye._internalPadding*t,-(ye._internalPadding+l(this,Bt))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Z.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,wr,new AbortController);const t=this._uiManager.combinedSignal(l(this,wr));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Gl)),this._isDraggable=!0,(t=l(this,wr))==null||t.abort(),b(this,wr,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,$t),n=b(this,$t,w(this,Be,Xm).call(this).trimEnd());if(t===n)return;const s=i=>{if(b(this,$t,i),!i){this.remove();return}w(this,Be,Zc).call(this),this._uiManager.rebuild(this),w(this,Be,Jc).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),w(this,Be,Jc).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Gl)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Bt)}px * var(--scale-factor))`,s.color=l(this,wn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bh(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,u]=this.pageDimensions,[f,g]=this.pageTranslation;let m,y;switch(this.rotation){case 0:m=t+(o[0]-f)/d,y=n+this.height-(o[1]-g)/u;break;case 90:m=t+(o[0]-f)/d,y=n-(o[1]-g)/u,[c,h]=[h,-c];break;case 180:m=t-this.width+(o[0]-f)/d,y=n-(o[1]-g)/u,[c,h]=[-c,-h];break;case 270:m=t+(o[0]-f-this.height*u)/d,y=n+(o[1]-g-this.width*d)/u,[c,h]=[-h,c];break}this.setAt(m*i,y*a,c,h)}else this.setAt(t*i,n*a,this.width*i,this.height*a);w(this,Be,Zc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,y,A;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=w(m=ye,Fs,bu).call(m,n.getData("text")||"").replaceAll(Mc,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=o,d=[],u=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(u.push(c.nodeValue.slice(h).replaceAll(Mc,"")),v!==this.editorDiv){let S=d;for(const E of this.editorDiv.childNodes){if(E===v){S=u;continue}S.push(w(y=ye,Fs,Qc).call(y,E))}}d.push(c.nodeValue.slice(0,h).replaceAll(Mc,""))}else if(c===this.editorDiv){let v=d,S=0;for(const E of this.editorDiv.childNodes)S++===h&&(v=u),v.push(w(A=ye,Fs,Qc).call(A,E))}b(this,$t,`${d.join(`
`)}${i}${u.join(`
`)}`),w(this,Be,Zc).call(this);const f=new Range;let g=d.reduce((v,S)=>v+S.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const S=v.nodeValue.length;if(g<=S){f.setStart(v,g),f.setEnd(v,g);break}g-=S}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){var o;let i=null;if(t instanceof $m){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:u,id:f,popupRef:g},textContent:m,textPosition:y,parent:{page:{pageNumber:A}}}=t;if(!m||m.length===0)return null;i=t={annotationType:Z.FREETEXT,color:Array.from(h),fontSize:c,value:m.join(`
`),position:y,pageIndex:A-1,rect:d.slice(0),rotation:u,id:f,deleted:!1,popupRef:g}}const a=await super.deserialize(t,n,s);return b(a,Bt,t.fontSize),b(a,wn,z.makeHexColor(...t.color)),b(a,$t,w(o=ye,Fs,bu).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=i,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ye._internalPadding*this.parentScale,s=this.getRect(n,n),i=ue._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,wn)),a={annotationType:Z.FREETEXT,color:i,fontSize:l(this,Bt),value:w(this,Be,Ym).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!w(this,Be,Km).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${l(this,Bt)}px * var(--scale-factor))`,s.color=l(this,wn),n.replaceChildren();for(const a of l(this,$t).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}const i=ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:l(this,$t)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};wn=new WeakMap,$t=new WeakMap,Gl=new WeakMap,wr=new WeakMap,Bt=new WeakMap,Be=new WeakSet,Gm=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-l(this,Bt))*this.parentScale),b(this,Bt,i),w(this,Be,Jc).call(this)},s=l(this,Bt);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},qm=function(t){const n=i=>{b(this,wn,this.editorDiv.style.color=i)},s=l(this,wn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Xm=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(w(s=ye,Fs,Qc).call(s,i)),n=i);return t.join(`
`)},Jc=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},Fs=new WeakSet,Qc=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Mc,"")},Zc=function(){if(this.editorDiv.replaceChildren(),!!l(this,$t))for(const t of l(this,$t).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},Ym=function(){return l(this,$t).replaceAll(" "," ")},bu=function(t){return t.replaceAll(" "," ")},Km=function(t){const{value:n,fontSize:s,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==a},x(ye,Fs),q(ye,"_freeTextDefaultContent",""),q(ye,"_internalPadding",0),q(ye,"_defaultColor",null),q(ye,"_defaultFontSize",10),q(ye,"_type","freetext"),q(ye,"_editorType",Z.FREETEXT);let mu=ye;class Jm{toSVGPath(){xe("Abstract method `toSVGPath` must be implemented.")}get box(){xe("Abstract getter `box` must be implemented.")}serialize(e,t){xe("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){xe("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){xe("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Wt,vn,Wa,Ua,Vn,ne,vr,xr,ql,Xl,Va,Ga,ci,Yl,Nh,zh,Ke,Io,Qm,Zm,eb,tb,nb,sb;const os=class os{constructor({x:e,y:t},n,s,i,a,o=0){x(this,Ke);x(this,Wt);x(this,vn,[]);x(this,Wa);x(this,Ua);x(this,Vn,[]);x(this,ne,new Float64Array(18));x(this,vr);x(this,xr);x(this,ql);x(this,Xl);x(this,Va);x(this,Ga);x(this,ci,[]);b(this,Wt,n),b(this,Ga,i*s),b(this,Ua,a),l(this,ne).set([NaN,NaN,NaN,NaN,e,t],6),b(this,Wa,o),b(this,Xl,l(os,Yl)*s),b(this,ql,l(os,zh)*s),b(this,Va,s),l(this,ci).push(e,t)}isEmpty(){return isNaN(l(this,ne)[8])}add({x:e,y:t}){var M;b(this,vr,e),b(this,xr,t);const[n,s,i,a]=l(this,Wt);let[o,c,h,d]=l(this,ne).subarray(8,12);const u=e-h,f=t-d,g=Math.hypot(u,f);if(g<l(this,ql))return!1;const m=g-l(this,Xl),y=m/g,A=y*u,v=y*f;let S=o,E=c;o=h,c=d,h+=A,d+=v,(M=l(this,ci))==null||M.push(e,t);const _=-v/m,k=A/m,T=_*l(this,Ga),P=k*l(this,Ga);return l(this,ne).set(l(this,ne).subarray(2,8),0),l(this,ne).set([h+T,d+P],4),l(this,ne).set(l(this,ne).subarray(14,18),12),l(this,ne).set([h-T,d-P],16),isNaN(l(this,ne)[6])?(l(this,Vn).length===0&&(l(this,ne).set([o+T,c+P],2),l(this,Vn).push(NaN,NaN,NaN,NaN,(o+T-n)/i,(c+P-s)/a),l(this,ne).set([o-T,c-P],14),l(this,vn).push(NaN,NaN,NaN,NaN,(o-T-n)/i,(c-P-s)/a)),l(this,ne).set([S,E,o,c,h,d],6),!this.isEmpty()):(l(this,ne).set([S,E,o,c,h,d],6),Math.abs(Math.atan2(E-c,S-o)-Math.atan2(v,A))<Math.PI/2?([o,c,h,d]=l(this,ne).subarray(2,6),l(this,Vn).push(NaN,NaN,NaN,NaN,((o+h)/2-n)/i,((c+d)/2-s)/a),[o,c,S,E]=l(this,ne).subarray(14,18),l(this,vn).push(NaN,NaN,NaN,NaN,((S+o)/2-n)/i,((E+c)/2-s)/a),!0):([S,E,o,c,h,d]=l(this,ne).subarray(0,6),l(this,Vn).push(((S+5*o)/6-n)/i,((E+5*c)/6-s)/a,((5*o+h)/6-n)/i,((5*c+d)/6-s)/a,((o+h)/2-n)/i,((c+d)/2-s)/a),[h,d,o,c,S,E]=l(this,ne).subarray(12,18),l(this,vn).push(((S+5*o)/6-n)/i,((E+5*c)/6-s)/a,((5*o+h)/6-n)/i,((5*c+d)/6-s)/a,((o+h)/2-n)/i,((c+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Vn),t=l(this,vn);if(isNaN(l(this,ne)[6])&&!this.isEmpty())return w(this,Ke,Qm).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);w(this,Ke,eb).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return w(this,Ke,Zm).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,i,a){return new ib(e,t,n,s,i,a)}getOutlines(){var u;const e=l(this,Vn),t=l(this,vn),n=l(this,ne),[s,i,a,o]=l(this,Wt),c=new Float64Array((((u=l(this,ci))==null?void 0:u.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(l(this,ci)[f]-s)/a,c[f+1]=(l(this,ci)[f+1]-i)/o;if(c[c.length-2]=(l(this,vr)-s)/a,c[c.length-1]=(l(this,xr)-i)/o,isNaN(n[6])&&!this.isEmpty())return w(this,Ke,tb).call(this,c);const h=new Float64Array(l(this,Vn).length+24+l(this,vn).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){h[f]=h[f+1]=NaN;continue}h[f]=e[f],h[f+1]=e[f+1]}d=w(this,Ke,sb).call(this,h,d);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){h[d]=h[d+1]=NaN,d+=2;continue}h[d]=t[f+g],h[d+1]=t[f+g+1],d+=2}return w(this,Ke,nb).call(this,h,d),this.newFreeDrawOutline(h,c,l(this,Wt),l(this,Va),l(this,Wa),l(this,Ua))}};Wt=new WeakMap,vn=new WeakMap,Wa=new WeakMap,Ua=new WeakMap,Vn=new WeakMap,ne=new WeakMap,vr=new WeakMap,xr=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Va=new WeakMap,Ga=new WeakMap,ci=new WeakMap,Yl=new WeakMap,Nh=new WeakMap,zh=new WeakMap,Ke=new WeakSet,Io=function(){const e=l(this,ne).subarray(4,6),t=l(this,ne).subarray(16,18),[n,s,i,a]=l(this,Wt);return[(l(this,vr)+(e[0]-t[0])/2-n)/i,(l(this,xr)+(e[1]-t[1])/2-s)/a,(l(this,vr)+(t[0]-e[0])/2-n)/i,(l(this,xr)+(t[1]-e[1])/2-s)/a]},Qm=function(){const[e,t,n,s]=l(this,Wt),[i,a,o,c]=w(this,Ke,Io).call(this);return`M${(l(this,ne)[2]-e)/n} ${(l(this,ne)[3]-t)/s} L${(l(this,ne)[4]-e)/n} ${(l(this,ne)[5]-t)/s} L${i} ${a} L${o} ${c} L${(l(this,ne)[16]-e)/n} ${(l(this,ne)[17]-t)/s} L${(l(this,ne)[14]-e)/n} ${(l(this,ne)[15]-t)/s} Z`},Zm=function(e){const t=l(this,vn);e.push(`L${t[4]} ${t[5]} Z`)},eb=function(e){const[t,n,s,i]=l(this,Wt),a=l(this,ne).subarray(4,6),o=l(this,ne).subarray(16,18),[c,h,d,u]=w(this,Ke,Io).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-n)/i} L${c} ${h} L${d} ${u} L${(o[0]-t)/s} ${(o[1]-n)/i}`)},tb=function(e){const t=l(this,ne),[n,s,i,a]=l(this,Wt),[o,c,h,d]=w(this,Ke,Io).call(this),u=new Float64Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(u,e,l(this,Wt),l(this,Va),l(this,Wa),l(this,Ua))},nb=function(e,t){const n=l(this,vn);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},sb=function(e,t){const n=l(this,ne).subarray(4,6),s=l(this,ne).subarray(16,18),[i,a,o,c]=l(this,Wt),[h,d,u,f]=w(this,Ke,Io).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/o,(n[1]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/c],t),t+=24},x(os,Yl,8),x(os,Nh,2),x(os,zh,l(os,Yl)+l(os,Nh));let wh=os;var qa,Ar,As,Kl,Ut,Jl,Oe,Ot,jo,Fo,rb;class ib extends Jm{constructor(t,n,s,i,a,o){super();x(this,Ot);x(this,qa);x(this,Ar,null);x(this,As);x(this,Kl);x(this,Ut);x(this,Jl);x(this,Oe);b(this,Oe,t),b(this,Ut,n),b(this,qa,s),b(this,Jl,i),b(this,As,a),b(this,Kl,o),w(this,Ot,rb).call(this,o);const{x:c,y:h,width:d,height:u}=l(this,Ar);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-h)/u;for(let f=0,g=n.length;f<g;f+=2)n[f]=(n[f]-c)/d,n[f+1]=(n[f+1]-h)/u}toSVGPath(){const t=[`M${l(this,Oe)[4]} ${l(this,Oe)[5]}`];for(let n=6,s=l(this,Oe).length;n<s;n+=6){if(isNaN(l(this,Oe)[n])){t.push(`L${l(this,Oe)[n+4]} ${l(this,Oe)[n+5]}`);continue}t.push(`C${l(this,Oe)[n]} ${l(this,Oe)[n+1]} ${l(this,Oe)[n+2]} ${l(this,Oe)[n+3]} ${l(this,Oe)[n+4]} ${l(this,Oe)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,i],a){const o=s-t,c=i-n;let h,d;switch(a){case 0:h=w(this,Ot,jo).call(this,l(this,Oe),t,i,o,-c),d=w(this,Ot,jo).call(this,l(this,Ut),t,i,o,-c);break;case 90:h=w(this,Ot,Fo).call(this,l(this,Oe),t,n,o,c),d=w(this,Ot,Fo).call(this,l(this,Ut),t,n,o,c);break;case 180:h=w(this,Ot,jo).call(this,l(this,Oe),s,n,-o,c),d=w(this,Ot,jo).call(this,l(this,Ut),s,n,-o,c);break;case 270:h=w(this,Ot,Fo).call(this,l(this,Oe),s,i,-o,-c),d=w(this,Ot,Fo).call(this,l(this,Ut),s,i,-o,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return l(this,Ar)}newOutliner(t,n,s,i,a,o=0){return new wh(t,n,s,i,a,o)}getNewOutline(t,n){const{x:s,y:i,width:a,height:o}=l(this,Ar),[c,h,d,u]=l(this,qa),f=a*d,g=o*u,m=s*d+c,y=i*u+h,A=this.newOutliner({x:l(this,Ut)[0]*f+m,y:l(this,Ut)[1]*g+y},l(this,qa),l(this,Jl),t,l(this,Kl),n??l(this,As));for(let v=2;v<l(this,Ut).length;v+=2)A.add({x:l(this,Ut)[v]*f+m,y:l(this,Ut)[v+1]*g+y});return A.getOutlines()}get mustRemoveSelfIntersections(){return!0}}qa=new WeakMap,Ar=new WeakMap,As=new WeakMap,Kl=new WeakMap,Ut=new WeakMap,Jl=new WeakMap,Oe=new WeakMap,Ot=new WeakSet,jo=function(t,n,s,i,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c]*i,o[c+1]=s+t[c+1]*a;return o},Fo=function(t,n,s,i,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c+1]*i,o[c+1]=s+t[c]*a;return o},rb=function(t){const n=l(this,Oe);let s=n[4],i=n[5],a=s,o=i,c=s,h=i,d=s,u=i;const f=t?Math.max:Math.min;for(let v=6,S=n.length;v<S;v+=6){if(isNaN(n[v]))a=Math.min(a,n[v+4]),o=Math.min(o,n[v+5]),c=Math.max(c,n[v+4]),h=Math.max(h,n[v+5]),u<n[v+5]?(d=n[v+4],u=n[v+5]):u===n[v+5]&&(d=f(d,n[v+4]));else{const E=z.bezierBoundingBox(s,i,...n.slice(v,v+6));a=Math.min(a,E[0]),o=Math.min(o,E[1]),c=Math.max(c,E[2]),h=Math.max(h,E[3]),u<E[3]?(d=E[2],u=E[3]):u===E[3]&&(d=f(d,E[2]))}s=n[v+4],i=n[v+5]}const g=a-l(this,As),m=o-l(this,As),y=c-a+2*l(this,As),A=h-o+2*l(this,As);b(this,Ar,{x:g,y:m,width:y,height:A,lastPoint:[d,u]})};var Ql,hi,xn,Tt,ab,eh,ob,lb,yu;class Ag{constructor(e,t=0,n=0,s=!0){x(this,Tt);x(this,Ql);x(this,hi,[]);x(this,xn,[]);let i=1/0,a=-1/0,o=1/0,c=-1/0;const d=10**-4;for(const{x:v,y:S,width:E,height:_}of e){const k=Math.floor((v-t)/d)*d,T=Math.ceil((v+E+t)/d)*d,P=Math.floor((S-t)/d)*d,R=Math.ceil((S+_+t)/d)*d,M=[k,P,R,!0],L=[T,P,R,!1];l(this,hi).push(M,L),i=Math.min(i,k),a=Math.max(a,T),o=Math.min(o,P),c=Math.max(c,R)}const u=a-i+2*n,f=c-o+2*n,g=i-n,m=o-n,y=l(this,hi).at(s?-1:-2),A=[y[0],y[2]];for(const v of l(this,hi)){const[S,E,_]=v;v[0]=(S-g)/u,v[1]=(E-m)/f,v[2]=(_-m)/f}b(this,Ql,{x:g,y:m,width:u,height:f,lastPoint:A})}getOutlines(){l(this,hi).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of l(this,hi))t[3]?(e.push(...w(this,Tt,yu).call(this,t)),w(this,Tt,ob).call(this,t)):(w(this,Tt,lb).call(this,t),e.push(...w(this,Tt,yu).call(this,t)));return w(this,Tt,ab).call(this,e)}}Ql=new WeakMap,hi=new WeakMap,xn=new WeakMap,Tt=new WeakSet,ab=function(e){const t=[],n=new Set;for(const a of e){const[o,c,h]=a;t.push([o,c,a],[o,h,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],h=t[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let i;for(;n.size>0;){const a=n.values().next().value;let[o,c,h,d,u]=a;n.delete(a);let f=o,g=c;for(i=[o,h],s.push(i);;){let m;if(n.has(d))m=d;else if(n.has(u))m=u;else break;n.delete(m),[o,c,h,d,u]=m,f!==o&&(i.push(f,g,o,g===c?c:h),f=o),g=g===c?h:c}i.push(f,g)}return new JA(s,l(this,Ql))},eh=function(e){const t=l(this,xn);let n=0,s=t.length-1;for(;n<=s;){const i=n+s>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:s=i-1}return s+1},ob=function([,e,t]){const n=w(this,Tt,eh).call(this,e);l(this,xn).splice(n,0,[e,t])},lb=function([,e,t]){const n=w(this,Tt,eh).call(this,e);for(let s=n;s<l(this,xn).length;s++){const[i,a]=l(this,xn)[s];if(i!==e)break;if(i===e&&a===t){l(this,xn).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[i,a]=l(this,xn)[s];if(i!==e)break;if(i===e&&a===t){l(this,xn).splice(s,1);return}}},yu=function(e){const[t,n,s]=e,i=[[t,n,s]],a=w(this,Tt,eh).call(this,s);for(let o=0;o<a;o++){const[c,h]=l(this,xn)[o];for(let d=0,u=i.length;d<u;d++){const[,f,g]=i[d];if(!(h<=f||g<=c)){if(f>=c){if(g>h)i[d][1]=h;else{if(u===1)return[];i.splice(d,1),d--,u--}continue}i[d][2]=c,g>h&&i.push([t,h,g])}}}return i};var Zl,Xa;class JA extends Jm{constructor(t,n){super();x(this,Zl);x(this,Xa);b(this,Xa,t),b(this,Zl,n)}toSVGPath(){const t=[];for(const n of l(this,Xa)){let[s,i]=n;t.push(`M${s} ${i}`);for(let a=2;a<n.length;a+=2){const o=n[a],c=n[a+1];o===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,n,s,i],a){const o=[],c=s-t,h=i-n;for(const d of l(this,Xa)){const u=new Array(d.length);for(let f=0;f<d.length;f+=2)u[f]=t+d[f]*c,u[f+1]=i-d[f+1]*h;o.push(u)}return o}get box(){return l(this,Zl)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Zl=new WeakMap,Xa=new WeakMap;class wu extends wh{newFreeDrawOutline(e,t,n,s,i,a){return new QA(e,t,n,s,i,a)}get classNamesForDrawing(){return["highlight","free"]}}class QA extends ib{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,s,i,a=0){return new wu(e,t,n,s,i,a)}}var An,Sr,Ya,Ge,ec,Ka,tc,nc,di,Sn,Ja,sc,fe,vu,xu,Au,Li,cb,Ws;const Mt=class Mt{constructor({editor:e=null,uiManager:t=null}){x(this,fe);x(this,An,null);x(this,Sr,null);x(this,Ya);x(this,Ge,null);x(this,ec,!1);x(this,Ka,!1);x(this,tc,null);x(this,nc);x(this,di,null);x(this,Sn,null);x(this,Ja);var n;e?(b(this,Ka,!1),b(this,Ja,X.HIGHLIGHT_COLOR),b(this,tc,e)):(b(this,Ka,!0),b(this,Ja,X.HIGHLIGHT_DEFAULT_COLOR)),b(this,Sn,(e==null?void 0:e._uiManager)||t),b(this,nc,l(this,Sn)._eventBus),b(this,Ya,(e==null?void 0:e.color)||((n=l(this,Sn))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),l(Mt,sc)||b(Mt,sc,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ie(this,"_keyboardManager",new gc([[["Escape","mac+Escape"],Mt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mt.prototype._moveToPrevious],[["Home","mac+Home"],Mt.prototype._moveToBeginning],[["End","mac+End"],Mt.prototype._moveToEnd]]))}renderButton(){const e=b(this,An,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Sn)._signal;e.addEventListener("click",w(this,fe,Li).bind(this),{signal:t}),e.addEventListener("keydown",w(this,fe,Au).bind(this),{signal:t});const n=b(this,Sr,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=l(this,Ya),e.append(n),e}renderMainDropdown(){const e=b(this,Ge,w(this,fe,vu).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,An)){w(this,fe,Li).call(this,e);return}const t=e.target.getAttribute("data-color");t&&w(this,fe,xu).call(this,t,e)}_moveToNext(e){var t,n;if(!l(this,fe,Ws)){w(this,fe,Li).call(this,e);return}if(e.target===l(this,An)){(t=l(this,Ge).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=l(this,Ge))==null?void 0:t.firstChild)||e.target===l(this,An)){l(this,fe,Ws)&&this._hideDropdownFromKeyboard();return}l(this,fe,Ws)||w(this,fe,Li).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!l(this,fe,Ws)){w(this,fe,Li).call(this,e);return}(t=l(this,Ge).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,fe,Ws)){w(this,fe,Li).call(this,e);return}(t=l(this,Ge).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Ge))==null||e.classList.add("hidden"),(t=l(this,di))==null||t.abort(),b(this,di,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Ka)){if(!l(this,fe,Ws)){(e=l(this,tc))==null||e.unselect();return}this.hideDropdown(),l(this,An).focus({preventScroll:!0,focusVisible:l(this,ec)})}}updateColor(e){if(l(this,Sr)&&(l(this,Sr).style.backgroundColor=e),!l(this,Ge))return;const t=l(this,Sn).highlightColors.values();for(const n of l(this,Ge).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,An))==null||e.remove(),b(this,An,null),b(this,Sr,null),(t=l(this,Ge))==null||t.remove(),b(this,Ge,null)}};An=new WeakMap,Sr=new WeakMap,Ya=new WeakMap,Ge=new WeakMap,ec=new WeakMap,Ka=new WeakMap,tc=new WeakMap,nc=new WeakMap,di=new WeakMap,Sn=new WeakMap,Ja=new WeakMap,sc=new WeakMap,fe=new WeakSet,vu=function(){const e=document.createElement("div"),t=l(this,Sn)._signal;e.addEventListener("contextmenu",on,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of l(this,Sn).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=n,i.setAttribute("data-l10n-id",l(Mt,sc)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.setAttribute("aria-selected",s===l(this,Ya)),i.addEventListener("click",w(this,fe,xu).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",w(this,fe,Au).bind(this),{signal:t}),e},xu=function(e,t){t.stopPropagation(),l(this,nc).dispatch("switchannotationeditorparams",{source:this,type:l(this,Ja),value:e})},Au=function(e){Mt._keyboardManager.exec(this,e)},Li=function(e){if(l(this,fe,Ws)){this.hideDropdown();return}if(b(this,ec,e.detail===0),l(this,di)||(b(this,di,new AbortController),window.addEventListener("pointerdown",w(this,fe,cb).bind(this),{signal:l(this,Sn).combinedSignal(l(this,di))})),l(this,Ge)){l(this,Ge).classList.remove("hidden");return}const t=b(this,Ge,w(this,fe,vu).call(this));l(this,An).append(t)},cb=function(e){var t;(t=l(this,Ge))!=null&&t.contains(e.target)||this.hideDropdown()},Ws=function(){return l(this,Ge)&&!l(this,Ge).classList.contains("hidden")},x(Mt,sc,null);let vh=Mt;var Qa,ic,Ss,Er,Za,Zt,rc,ac,_r,En,pt,It,eo,Es,qe,to,en,oc,J,Su,th,hb,db,ub,Eu,Di,sn,ta,fb,nh,Oo,gb,pb,mb,bb,yb;const ae=class ae extends ue{constructor(t){super({...t,name:"highlightEditor"});x(this,J);x(this,Qa,null);x(this,ic,0);x(this,Ss);x(this,Er,null);x(this,Za,null);x(this,Zt,null);x(this,rc,null);x(this,ac,0);x(this,_r,null);x(this,En,null);x(this,pt,null);x(this,It,!1);x(this,eo,null);x(this,Es);x(this,qe,null);x(this,to,"");x(this,en);x(this,oc,"");this.color=t.color||ae._defaultColor,b(this,en,t.thickness||ae._defaultThickness),b(this,Es,t.opacity||ae._defaultOpacity),b(this,Ss,t.boxes||null),b(this,oc,t.methodOfCreation||""),b(this,to,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,It,!0),w(this,J,th).call(this,t),w(this,J,Di).call(this)):l(this,Ss)&&(b(this,Qa,t.anchorNode),b(this,ic,t.anchorOffset),b(this,rc,t.focusNode),b(this,ac,t.focusOffset),w(this,J,Su).call(this),w(this,J,Di).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ae.prototype;return ie(this,"_keyboardManager",new gc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,It)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,en),methodOfCreation:l(this,oc)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;ue.initialize(t,n),ae._defaultColor||(ae._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case X.HIGHLIGHT_DEFAULT_COLOR:ae._defaultColor=n;break;case X.HIGHLIGHT_THICKNESS:ae._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,eo)}updateParams(t,n){switch(t){case X.HIGHLIGHT_COLOR:w(this,J,hb).call(this,n);break;case X.HIGHLIGHT_THICKNESS:w(this,J,db).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[X.HIGHLIGHT_DEFAULT_COLOR,ae._defaultColor],[X.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[X.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[X.HIGHLIGHT_THICKNESS,l(this,en)||ae._defaultThickness],[X.HIGHLIGHT_FREE,l(this,It)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,Za,new vh({editor:this})),t.addColorPicker(l(this,Za))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,J,Oo).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,w(this,J,Oo).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){w(this,J,Eu).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,J,Di).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?w(this,J,Eu).call(this):t&&(w(this,J,Di).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,o;const{drawLayer:n}=this.parent;let s;l(this,It)?(t=(t-this.rotation+360)%360,s=w(i=ae,sn,ta).call(i,l(this,En).box,t)):s=w(a=ae,sn,ta).call(a,this,t),n.rotate(l(this,pt),t),n.rotate(l(this,qe),t),n.updateBox(l(this,pt),s),n.updateBox(l(this,qe),w(o=ae,sn,ta).call(o,l(this,Zt).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,to)&&(t.setAttribute("aria-label",l(this,to)),t.setAttribute("role","mark")),l(this,It)?t.classList.add("free"):this.div.addEventListener("keydown",w(this,J,fb).bind(this),{signal:this._uiManager._signal});const n=b(this,_r,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Er);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),bh(this,l(this,_r),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,qe),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,qe),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:w(this,J,nh).call(this,!0);break;case 1:case 3:w(this,J,nh).call(this,!1);break}}select(){var t,n;super.select(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(l(this,qe),"selected"))}unselect(){var t;super.unselect(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"selected"),l(this,It)||w(this,J,nh).call(this,!1))}get _mustFixPosition(){return!l(this,It)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,pt),t),this.parent.drawLayer.show(l(this,qe),t))}static startHighlighting(t,n,{target:s,x:i,y:a}){const{x:o,y:c,width:h,height:d}=s.getBoundingClientRect(),u=new AbortController,f=t.combinedSignal(u),g=y=>{y.preventDefault(),y.stopPropagation()},m=y=>{u.abort(),w(this,sn,bb).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",g,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",on,{signal:f}),s.addEventListener("pointermove",w(this,sn,mb).bind(this,t),{signal:f}),this._freeHighlight=new wu({x:i,y:a},[o,c,h,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,s){var y,A,v,S;let i=null;if(t instanceof Wm){const{data:{quadPoints:E,rect:_,rotation:k,id:T,color:P,opacity:R,popupRef:M},parent:{page:{pageNumber:L}}}=t;i=t={annotationType:Z.HIGHLIGHT,color:Array.from(P),opacity:R,quadPoints:E,boxes:null,pageIndex:L-1,rect:_.slice(0),rotation:k,id:T,deleted:!1,popupRef:M}}else if(t instanceof xf){const{data:{inkLists:E,rect:_,rotation:k,id:T,color:P,borderStyle:{rawWidth:R},popupRef:M},parent:{page:{pageNumber:L}}}=t;i=t={annotationType:Z.HIGHLIGHT,color:Array.from(P),thickness:R,inkLists:E,boxes:null,pageIndex:L-1,rect:_.slice(0),rotation:k,id:T,deleted:!1,popupRef:M}}const{color:a,quadPoints:o,inkLists:c,opacity:h}=t,d=await super.deserialize(t,n,s);d.color=z.makeHexColor(...a),b(d,Es,h||1),c&&b(d,en,t.thickness),d.annotationElementId=t.id||null,d._initialData=i;const[u,f]=d.pageDimensions,[g,m]=d.pageTranslation;if(o){const E=b(d,Ss,[]);for(let _=0;_<o.length;_+=8)E.push({x:(o[_]-g)/u,y:1-(o[_+1]-m)/f,width:(o[_+2]-o[_])/u,height:(o[_+1]-o[_+5])/f});w(y=d,J,Su).call(y),w(A=d,J,Di).call(A),d.rotate(d.rotation)}else if(c){b(d,It,!0);const E=c[0],_={x:E[0]-g,y:f-(E[1]-m)},k=new wu(_,[0,0,u,f],1,l(d,en)/2,!0,.001);for(let R=0,M=E.length;R<M;R+=2)_.x=E[R]-g,_.y=f-(E[R+1]-m),k.add(_);const{id:T,clipPathId:P}=n.drawLayer.draw(k,d.color,d._defaultOpacity,!0);w(v=d,J,th).call(v,{highlightOutlines:k.getOutlines(),highlightId:T,clipPathId:P}),w(S=d,J,Di).call(S)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=ue._colorManager.convert(this.color),i={annotationType:Z.HIGHLIGHT,color:s,opacity:l(this,Es),thickness:l(this,en),quadPoints:w(this,J,gb).call(this),outlines:w(this,J,pb).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:w(this,J,Oo).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,J,yb).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Qa=new WeakMap,ic=new WeakMap,Ss=new WeakMap,Er=new WeakMap,Za=new WeakMap,Zt=new WeakMap,rc=new WeakMap,ac=new WeakMap,_r=new WeakMap,En=new WeakMap,pt=new WeakMap,It=new WeakMap,eo=new WeakMap,Es=new WeakMap,qe=new WeakMap,to=new WeakMap,en=new WeakMap,oc=new WeakMap,J=new WeakSet,Su=function(){const t=new Ag(l(this,Ss),.001);b(this,En,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,En).box;const n=new Ag(l(this,Ss),.0025,.001,this._uiManager.direction==="ltr");b(this,Zt,n.getOutlines());const{lastPoint:s}=l(this,Zt).box;b(this,eo,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},th=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var u,f;if(b(this,En,t),b(this,Zt,t.getNewOutline(l(this,en)/2+1.5,.0025)),n>=0)b(this,pt,n),b(this,Er,s),this.parent.drawLayer.finalizeLine(n,t),b(this,qe,this.parent.drawLayer.drawOutline(l(this,Zt)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,pt),t),this.parent.drawLayer.updateBox(l(this,pt),w(u=ae,sn,ta).call(u,l(this,En).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,qe),l(this,Zt)),this.parent.drawLayer.updateBox(l(this,qe),w(f=ae,sn,ta).call(f,l(this,Zt).box,g))}const{x:a,y:o,width:c,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=h;break;case 90:{const[g,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*m/g,this.height=h*g/m;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=h;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*m/g,this.height=h*g/m;break}}const{lastPoint:d}=l(this,Zt).box;b(this,eo,[(d[0]-a)/c,(d[1]-o)/h])},hb=function(t){const n=(a,o)=>{var c,h,d;this.color=a,(c=this.parent)==null||c.drawLayer.changeColor(l(this,pt),a),(h=l(this,Za))==null||h.updateColor(a),b(this,Es,o),(d=this.parent)==null||d.drawLayer.changeOpacity(l(this,pt),o)},s=this.color,i=l(this,Es);this.addCommands({cmd:n.bind(this,t,ae._defaultOpacity),undo:n.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},db=function(t){const n=l(this,en),s=i=>{b(this,en,i),w(this,J,ub).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},ub=function(t){if(!l(this,It))return;w(this,J,th).call(this,{highlightOutlines:l(this,En).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Eu=function(){l(this,pt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,pt)),b(this,pt,null),this.parent.drawLayer.remove(l(this,qe)),b(this,qe,null))},Di=function(t=this.parent){l(this,pt)===null&&({id:xt(this,pt)._,clipPathId:xt(this,Er)._}=t.drawLayer.draw(l(this,En),this.color,l(this,Es)),b(this,qe,t.drawLayer.drawOutline(l(this,Zt))),l(this,_r)&&(l(this,_r).style.clipPath=l(this,Er)))},sn=new WeakSet,ta=function({x:t,y:n,width:s,height:i},a){switch(a){case 90:return{x:1-n-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-n-i,width:s,height:i};case 270:return{x:n,y:1-t-s,width:i,height:s}}return{x:t,y:n,width:s,height:i}},fb=function(t){ae._keyboardManager.exec(this,t)},nh=function(t){if(!l(this,Qa))return;const n=window.getSelection();t?n.setPosition(l(this,Qa),l(this,ic)):n.setPosition(l(this,rc),l(this,ac))},Oo=function(){return l(this,It)?this.rotation:0},gb=function(){if(l(this,It))return null;const[t,n]=this.pageDimensions,[s,i]=this.pageTranslation,a=l(this,Ss),o=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:u,height:f}of a){const g=h*t+s,m=(1-d-f)*n+i;o[c]=o[c+4]=g,o[c+1]=o[c+3]=m,o[c+2]=o[c+6]=g+u*t,o[c+5]=o[c+7]=m+f*n,c+=8}return o},pb=function(t){return l(this,En).serialize(t,w(this,J,Oo).call(this))},mb=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},bb=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},yb=function(t){const{color:n}=this._initialData;return t.color.some((s,i)=>s!==n[i])},x(ae,sn),q(ae,"_defaultColor",null),q(ae,"_defaultOpacity",1),q(ae,"_defaultThickness",12),q(ae,"_type","highlight"),q(ae,"_editorType",Z.HIGHLIGHT),q(ae,"_freeHighlightId",-1),q(ae,"_freeHighlight",null),q(ae,"_freeHighlightClipId","");let xh=ae;var Cr,kr,Gn,_s,tn,Tr,Pr,Rr,Cs,no,Mr,Lr,ui,I,wb,vb,xb,Ab,Cu,Sb,ku,Eb,_b,Cb,kb,Tb,Ii,Tu,Pu,Ru,sh,ih,na,Mu,rh,zs,Pb,Lu,Rb,Mb,Du,ah,No;const Pe=class Pe extends ue{constructor(t){super({...t,name:"inkEditor"});x(this,I);x(this,Cr,0);x(this,kr,0);x(this,Gn,null);x(this,_s,new Path2D);x(this,tn,!1);x(this,Tr,null);x(this,Pr,!1);x(this,Rr,!1);x(this,Cs,null);x(this,no,null);x(this,Mr,0);x(this,Lr,0);x(this,ui,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){ue.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case X.INK_THICKNESS:Pe._defaultThickness=n;break;case X.INK_COLOR:Pe._defaultColor=n;break;case X.INK_OPACITY:Pe._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case X.INK_THICKNESS:w(this,I,wb).call(this,n);break;case X.INK_COLOR:w(this,I,vb).call(this,n);break;case X.INK_OPACITY:w(this,I,xb).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[X.INK_THICKNESS,Pe._defaultThickness],[X.INK_COLOR,Pe._defaultColor||ue._defaultLineColor],[X.INK_OPACITY,Math.round(Pe._defaultOpacity*100)]]}get propertiesToUpdate(){return[[X.INK_THICKNESS,this.thickness||Pe._defaultThickness],[X.INK_COLOR,this.color||Pe._defaultColor||ue._defaultLineColor],[X.INK_OPACITY,Math.round(100*(this.opacity??Pe._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,I,sh).call(this),w(this,I,ih).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,I,na).call(this)),w(this,I,No).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,Gn)&&(clearTimeout(l(this,Gn)),b(this,Gn,null)),(t=l(this,Cs))==null||t.disconnect(),b(this,Cs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,i=this.height*n;this.setDimensions(s,i)}enableEditMode(){l(this,tn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,w(this,I,Tu).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),w(this,I,Pu).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,tn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),b(this,tn,!0),this.div.classList.add("disabled"),w(this,I,No).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,tn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),w(this,I,Sb).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),w(this,I,ku).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),w(this,I,Ru).call(this,t)}canvasPointerleave(t){w(this,I,Ru).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,tn)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,a,o]=w(this,I,Ab).call(this);if(this.setAt(s,i,0,0),this.setDims(a,o),w(this,I,sh).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(t*c,n*h,this.width*c,this.height*h),b(this,Rr,!0),w(this,I,na).call(this),this.setDims(this.width*c,this.height*h),w(this,I,Ii).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,I,ih).call(this),this.div}setDimensions(t,n){const s=Math.round(t),i=Math.round(n);if(l(this,Mr)===s&&l(this,Lr)===i)return;b(this,Mr,s),b(this,Lr,i),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=n/o,this.fixAndSetPosition(),l(this,tn)&&w(this,I,Mu).call(this,t,n),w(this,I,na).call(this),w(this,I,Ii).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,s){var A,v,S;if(t instanceof xf)return null;const i=await super.deserialize(t,n,s);i.thickness=t.thickness,i.color=z.makeHexColor(...t.color),i.opacity=t.opacity;const[a,o]=i.pageDimensions,c=i.width*a,h=i.height*o,d=i.parentScale,u=t.thickness/2;b(i,tn,!0),b(i,Mr,Math.round(c)),b(i,Lr,Math.round(h));const{paths:f,rect:g,rotation:m}=t;for(let{bezier:E}of f){E=w(A=Pe,zs,Rb).call(A,E,g,m);const _=[];i.paths.push(_);let k=d*(E[0]-u),T=d*(E[1]-u);for(let R=2,M=E.length;R<M;R+=6){const L=d*(E[R]-u),D=d*(E[R+1]-u),Q=d*(E[R+2]-u),U=d*(E[R+3]-u),$=d*(E[R+4]-u),V=d*(E[R+5]-u);_.push([[k,T],[L,D],[Q,U],[$,V]]),k=$,T=V}const P=w(this,zs,Pb).call(this,_);i.bezierPath2D.push(P)}const y=w(v=i,I,Du).call(v);return b(i,kr,Math.max(ue.MIN_SIZE,y[2]-y[0])),b(i,Cr,Math.max(ue.MIN_SIZE,y[3]-y[1])),w(S=i,I,Mu).call(S,c,h),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=ue._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Z.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:w(this,I,Mb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Cr=new WeakMap,kr=new WeakMap,Gn=new WeakMap,_s=new WeakMap,tn=new WeakMap,Tr=new WeakMap,Pr=new WeakMap,Rr=new WeakMap,Cs=new WeakMap,no=new WeakMap,Mr=new WeakMap,Lr=new WeakMap,ui=new WeakMap,I=new WeakSet,wb=function(t){const n=i=>{this.thickness=i,w(this,I,No).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},vb=function(t){const n=i=>{this.color=i,w(this,I,Ii).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xb=function(t){const n=i=>{this.opacity=i,w(this,I,Ii).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ab=function(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},Cu=function(){const{ctx:t,color:n,opacity:s,thickness:i,parentScale:a,scaleFactor:o}=this;t.lineWidth=i*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${vx(s)}`},Sb=function(t,n){this.canvas.addEventListener("contextmenu",on,{signal:this._uiManager._signal}),w(this,I,Pu).call(this),b(this,Tr,new AbortController);const s=this._uiManager.combinedSignal(l(this,Tr));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,Rr)||(b(this,Rr,!0),w(this,I,na).call(this),this.thickness||(this.thickness=Pe._defaultThickness),this.color||(this.color=Pe._defaultColor||ue._defaultLineColor),this.opacity??(this.opacity=Pe._defaultOpacity)),this.currentPath.push([t,n]),b(this,Pr,!1),w(this,I,Cu).call(this),b(this,ui,()=>{w(this,I,Cb).call(this),l(this,ui)&&window.requestAnimationFrame(l(this,ui))}),window.requestAnimationFrame(l(this,ui))},ku=function(t,n){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===i)return;const a=this.currentPath;let o=l(this,_s);if(a.push([t,n]),b(this,Pr,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,n);return}a.length===3&&(b(this,_s,o=new Path2D),o.moveTo(...a[0])),w(this,I,kb).call(this,o,...a.at(-3),...a.at(-2),t,n)},Eb=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,_s).lineTo(...t)},_b=function(t,n){b(this,ui,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),w(this,I,ku).call(this,t,n),w(this,I,Eb).call(this);let s;if(this.currentPath.length!==1)s=w(this,I,Tb).call(this);else{const h=[t,n];s=[[h,h.slice(),h.slice(),h]]}const i=l(this,_s),a=this.currentPath;this.currentPath=[],b(this,_s,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,I,sh).call(this),w(this,I,ih).call(this)),w(this,I,No).call(this))};this.addCommands({cmd:o,undo:c,mustExec:!0})},Cb=function(){if(!l(this,Pr))return;b(this,Pr,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(o=>o[0]),i=n.map(o=>o[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(l(this,_s)),a.restore()},kb=function(t,n,s,i,a,o,c){const h=(n+i)/2,d=(s+a)/2,u=(i+o)/2,f=(a+c)/2;t.bezierCurveTo(h+2*(i-h)/3,d+2*(a-d)/3,u+2*(i-u)/3,f+2*(a-f)/3,u,f)},Tb=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[i,a]=t[0];for(s=1;s<t.length-2;s++){const[g,m]=t[s],[y,A]=t[s+1],v=(g+y)/2,S=(m+A)/2,E=[i+2*(g-i)/3,a+2*(m-a)/3],_=[v+2*(g-v)/3,S+2*(m-S)/3];n.push([[i,a],E,_,[v,S]]),[i,a]=[v,S]}const[o,c]=t[s],[h,d]=t[s+1],u=[i+2*(o-i)/3,a+2*(c-a)/3],f=[h+2*(o-h)/3,d+2*(c-d)/3];return n.push([[i,a],u,f,[h,d]]),n},Ii=function(){if(this.isEmpty()){w(this,I,rh).call(this);return}w(this,I,Cu).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),w(this,I,rh).call(this);for(const s of this.bezierPath2D)n.stroke(s)},Tu=function(){if(l(this,no))return;b(this,no,new AbortController);const t=this._uiManager.combinedSignal(l(this,no));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},Pu=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},Ru=function(t){var n;(n=l(this,Tr))==null||n.abort(),b(this,Tr,null),w(this,I,Tu).call(this),l(this,Gn)&&clearTimeout(l(this,Gn)),b(this,Gn,setTimeout(()=>{b(this,Gn,null),this.canvas.removeEventListener("contextmenu",on)},10)),w(this,I,_b).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},sh=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ih=function(){b(this,Cs,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),l(this,Cs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Cs))==null||t.disconnect(),b(this,Cs,null)},{once:!0})},na=function(){if(!l(this,Rr))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),w(this,I,rh).call(this)},Mu=function(t,n){const s=w(this,I,ah).call(this),i=(t-s)/l(this,kr),a=(n-s)/l(this,Cr);this.scaleFactor=Math.min(i,a)},rh=function(){const t=w(this,I,ah).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},zs=new WeakSet,Pb=function(t){const n=new Path2D;for(let s=0,i=t.length;s<i;s++){const[a,o,c,h]=t[s];s===0&&n.moveTo(...a),n.bezierCurveTo(o[0],o[1],c[0],c[1],h[0],h[1])}return n},Lu=function(t,n,s){const[i,a,o,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]+=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]+i,t[h+1]=u+a}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]+=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=o-t[h+1],t[h+1]=c-u}break;default:throw new Error("Invalid rotation")}return t},Rb=function(t,n,s){const[i,a,o,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]-=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]-a,t[h+1]=u-i}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]-=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=c-t[h+1],t[h+1]=o-u}break;default:throw new Error("Invalid rotation")}return t},Mb=function(t,n,s,i){var d,u;const a=[],o=this.thickness/2,c=t*n+o,h=t*s+o;for(const f of this.paths){const g=[],m=[];for(let y=0,A=f.length;y<A;y++){const[v,S,E,_]=f[y];if(v[0]===_[0]&&v[1]===_[1]&&A===1){const U=t*v[0]+c,$=t*v[1]+h;g.push(U,$),m.push(U,$);break}const k=t*v[0]+c,T=t*v[1]+h,P=t*S[0]+c,R=t*S[1]+h,M=t*E[0]+c,L=t*E[1]+h,D=t*_[0]+c,Q=t*_[1]+h;y===0&&(g.push(k,T),m.push(k,T)),g.push(P,R,M,L,D,Q),m.push(P,R),y===A-1&&m.push(D,Q)}a.push({bezier:w(d=Pe,zs,Lu).call(d,g,i,this.rotation),points:w(u=Pe,zs,Lu).call(u,m,i,this.rotation)})}return a},Du=function(){let t=1/0,n=-1/0,s=1/0,i=-1/0;for(const a of this.paths)for(const[o,c,h,d]of a){const u=z.bezierBoundingBox(...o,...c,...h,...d);t=Math.min(t,u[0]),s=Math.min(s,u[1]),n=Math.max(n,u[2]),i=Math.max(i,u[3])}return[t,s,n,i]},ah=function(){return l(this,tn)?Math.ceil(this.thickness*this.parentScale):0},No=function(t=!1){if(this.isEmpty())return;if(!l(this,tn)){w(this,I,Ii).call(this);return}const n=w(this,I,Du).call(this),s=w(this,I,ah).call(this);b(this,kr,Math.max(ue.MIN_SIZE,n[2]-n[0])),b(this,Cr,Math.max(ue.MIN_SIZE,n[3]-n[1]));const i=Math.ceil(s+l(this,kr)*this.scaleFactor),a=Math.ceil(s+l(this,Cr)*this.scaleFactor),[o,c]=this.parentDimensions;this.width=i/o,this.height=a/c,this.setAspectRatio(i,a);const h=this.translationX,d=this.translationY;this.translationX=-n[0],this.translationY=-n[1],w(this,I,na).call(this),w(this,I,Ii).call(this),b(this,Mr,i),b(this,Lr,a),this.setDims(i,a);const u=t?s/this.scaleFactor/2:0;this.translate(h-this.translationX-u,d-this.translationY-u)},x(Pe,zs),q(Pe,"_defaultColor",null),q(Pe,"_defaultOpacity",1),q(Pe,"_defaultThickness",1),q(Pe,"_type","ink"),q(Pe,"_editorType",Z.INK);let _u=Pe;var Me,ot,fi,ks,gi,so,qn,Ts,Xn,Vt,io,se,zo,Ho,oh,ju,Lb,lh,Fu,ch,Db,Ib;const Uo=class Uo extends ue{constructor(t){super({...t,name:"stampEditor"});x(this,se);x(this,Me,null);x(this,ot,null);x(this,fi,null);x(this,ks,null);x(this,gi,null);x(this,so,"");x(this,qn,null);x(this,Ts,null);x(this,Xn,null);x(this,Vt,!1);x(this,io,!1);b(this,ks,t.bitmapUrl),b(this,gi,t.bitmapFile)}static initialize(t,n){ue.initialize(t,n)}static get supportedTypes(){return ie(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ie(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Z.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t,n;l(this,ot)&&(b(this,Me,null),this._uiManager.imageManager.deleteId(l(this,ot)),(t=l(this,qn))==null||t.remove(),b(this,qn,null),(n=l(this,Ts))==null||n.disconnect(),b(this,Ts,null),l(this,Xn)&&(clearTimeout(l(this,Xn)),b(this,Xn,null))),super.remove()}rebuild(){if(!this.parent){l(this,ot)&&w(this,se,oh).call(this);return}super.rebuild(),this.div!==null&&(l(this,ot)&&l(this,qn)===null&&w(this,se,oh).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,fi)||l(this,Me)||l(this,ks)||l(this,gi)||l(this,ot))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Me)?w(this,se,ju).call(this):w(this,se,oh).call(this),this.width&&!this.annotationElementId){const[s,i]=this.parentDimensions;this.setAt(t*s,n*i,this.width*s,this.height*i)}return this.div}copyCanvas(t,n,s=!1){var g;t||(t=224);const{width:i,height:a}=l(this,Me),o=new Rd;let c=l(this,Me),h=i,d=a,u=null;if(n){if(i>n||a>n){const R=Math.min(n/i,n/a);h=Math.floor(i*R),d=Math.floor(a*R)}u=document.createElement("canvas");const m=u.width=Math.ceil(h*o.sx),y=u.height=Math.ceil(d*o.sy);l(this,Vt)||(c=w(this,se,lh).call(this,m,y));const A=u.getContext("2d");A.filter=this._uiManager.hcmFilter;let v="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",S="#42414d");const E=15,_=E*o.sx,k=E*o.sy,T=new OffscreenCanvas(_*2,k*2),P=T.getContext("2d");P.fillStyle=v,P.fillRect(0,0,_*2,k*2),P.fillStyle=S,P.fillRect(0,0,_,k),P.fillRect(_,k,_,k),A.fillStyle=A.createPattern(T,"repeat"),A.fillRect(0,0,m,y),A.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(s){let m,y;if(o.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=l(this,Me),i>t||a>t){const S=Math.min(t/i,t/a);m=Math.floor(i*S),y=Math.floor(a*S),l(this,Vt)||(c=w(this,se,lh).call(this,m,y))}const v=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:v.getImageData(0,0,m,y).data}}return{canvas:u,width:h,height:d,imageData:f}}getImageForAltText(){return l(this,qn)}static async deserialize(t,n,s){var y;let i=null;if(t instanceof Um){const{data:{rect:A,rotation:v,id:S,structParent:E,popupRef:_},container:k,parent:{page:{pageNumber:T}}}=t,P=k.querySelector("canvas"),R=s.imageManager.getFromCanvas(k.id,P);P.remove();const M=((y=await n._structTree.getAriaAttributes(`${hf}${S}`))==null?void 0:y.get("aria-label"))||"";i=t={annotationType:Z.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:T-1,rect:A.slice(0),rotation:v,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:_}}const a=await super.deserialize(t,n,s),{rect:o,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:u,accessibilityData:f}=t;d&&s.imageManager.isValidId(d)?(b(a,ot,d),c&&b(a,Me,c)):b(a,ks,h),b(a,Vt,u);const[g,m]=a.pageDimensions;return a.width=(o[2]-o[0])/g,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=i,b(a,io,!!i),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Z.STAMP,bitmapId:l(this,ot),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Vt),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=w(this,se,ch).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=w(this,se,Ib).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const o=l(this,Vt)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(l(this,ot)))n.stamps.set(l(this,ot),{area:o,serialized:s}),s.bitmap=w(this,se,ch).call(this,!1);else if(l(this,Vt)){const c=n.stamps.get(l(this,ot));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=w(this,se,ch).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Me=new WeakMap,ot=new WeakMap,fi=new WeakMap,ks=new WeakMap,gi=new WeakMap,so=new WeakMap,qn=new WeakMap,Ts=new WeakMap,Xn=new WeakMap,Vt=new WeakMap,io=new WeakMap,se=new WeakSet,zo=function(t,n=!1){if(!t){this.remove();return}b(this,Me,t.bitmap),n||(b(this,ot,t.id),b(this,Vt,t.isSvg)),t.file&&b(this,so,t.file.name),w(this,se,ju).call(this)},Ho=function(){if(b(this,fi,null),this._uiManager.enableWaiting(!1),!!l(this,qn)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Me)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Me)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},oh=function(){if(l(this,ot)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,ot)).then(s=>w(this,se,zo).call(this,s,!0)).finally(()=>w(this,se,Ho).call(this));return}if(l(this,ks)){const s=l(this,ks);b(this,ks,null),this._uiManager.enableWaiting(!0),b(this,fi,this._uiManager.imageManager.getFromUrl(s).then(i=>w(this,se,zo).call(this,i)).finally(()=>w(this,se,Ho).call(this)));return}if(l(this,gi)){const s=l(this,gi);b(this,gi,null),this._uiManager.enableWaiting(!0),b(this,fi,this._uiManager.imageManager.getFromFile(s).then(i=>w(this,se,zo).call(this,i)).finally(()=>w(this,se,Ho).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Uo.supportedTypesStr;const n=this._uiManager._signal;b(this,fi,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,se,zo).call(this,i)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>w(this,se,Ho).call(this))),t.click()},ju=function(){const{div:t}=this;let{width:n,height:s}=l(this,Me);const[i,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*i,s=this.height*a;else if(n>o*i||s>o*a){const u=Math.min(o*i/n,o*a/s);n*=u,s*=u}const[c,h]=this.parentDimensions;this.setDims(n*c/i,s*h/a),this._uiManager.enableWaiting(!1);const d=b(this,qn,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),w(this,se,Fu).call(this,n,s),w(this,se,Db).call(this),l(this,io)||(this.parent.addUndoableEditor(this),b(this,io,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,so)&&d.setAttribute("aria-label",l(this,so))},Lb=function(t,n){var o;const[s,i]=this.parentDimensions;this.width=t/s,this.height=n/i,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,Xn)!==null&&clearTimeout(l(this,Xn)),b(this,Xn,setTimeout(()=>{b(this,Xn,null),w(this,se,Fu).call(this,t,n)},200))},lh=function(t,n){const{width:s,height:i}=l(this,Me);let a=s,o=i,c=l(this,Me);for(;a>2*t||o>2*n;){const h=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(a,o);u.getContext("2d").drawImage(c,0,0,h,d,0,0,a,o),c=u.transferToImageBitmap()}return c},Fu=function(t,n){const s=new Rd,i=Math.ceil(t*s.sx),a=Math.ceil(n*s.sy),o=l(this,qn);if(!o||o.width===i&&o.height===a)return;o.width=i,o.height=a;const c=l(this,Vt)?l(this,Me):w(this,se,lh).call(this,i,a),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,i,a)},ch=function(t){if(t){if(l(this,Vt)){const i=this._uiManager.imageManager.getSvgUrl(l(this,ot));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Me),n.getContext("2d").drawImage(l(this,Me),0,0),n.toDataURL()}if(l(this,Vt)){const[n,s]=this.pageDimensions,i=Math.round(this.width*n*Ai.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Ai.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(l(this,Me),0,0,l(this,Me).width,l(this,Me).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(l(this,Me))},Db=function(){this._uiManager._signal&&(b(this,Ts,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&w(this,se,Lb).call(this,n.width,n.height)})),l(this,Ts).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Ts))==null||t.disconnect(),b(this,Ts,null)},{once:!0}))},Ib=function(t){var h;const{rect:n,pageIndex:s,accessibilityData:{altText:i}}=this._initialData,a=t.rect.every((d,u)=>Math.abs(d-n[u])<1),o=t.pageIndex===s,c=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===i;return{isSame:a&&o&&c,isSameAltText:c}},q(Uo,"_type","stamp"),q(Uo,"_editorType",Z.STAMP);let Iu=Uo;var Dr,ro,Yn,pi,Ps,Gt,mi,ao,oo,mt,Rs,B,bi,ct,jb,Nu,zu,Hu,hh;const hn=class hn{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:c,viewport:h,l10n:d}){x(this,ct);x(this,Dr);x(this,ro,!1);x(this,Yn,null);x(this,pi,null);x(this,Ps,null);x(this,Gt,new Map);x(this,mi,!1);x(this,ao,!1);x(this,oo,!1);x(this,mt,null);x(this,Rs,null);x(this,B);const u=[...l(hn,bi).values()];if(!hn._initialized){hn._initialized=!0;for(const f of u)f.initialize(d,e)}e.registerEditorTypes(u),b(this,B,e),this.pageIndex=t,this.div=n,b(this,Dr,i),b(this,Yn,a),this.viewport=h,b(this,mt,c),this.drawLayer=o,this._structTree=s,l(this,B).addLayer(this)}get isEmpty(){return l(this,Gt).size===0}get isInvisible(){return this.isEmpty&&l(this,B).getMode()===Z.NONE}updateToolbar(e){l(this,B).updateToolbar(e)}updateMode(e=l(this,B).getMode()){switch(w(this,ct,hh).call(this),e){case Z.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of l(hn,bi).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,mt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,B).getMode()!==Z.INK)return;if(!e){for(const n of l(this,Gt).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,B).setEditingState(e)}addCommands(e){l(this,B).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Yn))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of l(this,Gt).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,B).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!l(this,Yn))return;const t=l(this,Yn).getEditableAnnotations();for(const n of t){if(n.hide(),l(this,B).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;b(this,oo,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of l(this,Gt).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(l(this,Yn)){const i=l(this,Yn).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(l(this,B).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,B).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}w(this,ct,hh).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of l(hn,bi).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,oo,!1)}getEditableAnnotation(e){var t;return((t=l(this,Yn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,B).getActive()!==e&&l(this,B).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,mt))!=null&&e.div&&!l(this,Rs)){b(this,Rs,new AbortController);const t=l(this,B).combinedSignal(l(this,Rs));l(this,mt).div.addEventListener("pointerdown",w(this,ct,jb).bind(this),{signal:t}),l(this,mt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,mt))!=null&&e.div&&l(this,Rs)&&(l(this,Rs).abort(),b(this,Rs,null),l(this,mt).div.classList.remove("highlighting"))}enableClick(){if(l(this,pi))return;b(this,pi,new AbortController);const e=l(this,B).combinedSignal(l(this,pi));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,pi))==null||e.abort(),b(this,pi,null)}attach(e){l(this,Gt).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,B).isDeletedAnnotationElement(t)&&l(this,B).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Gt).delete(e.id),(t=l(this,Dr))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,oo)&&e.annotationElementId&&l(this,B).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,B).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,ao)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,B).addDeletedAnnotationElement(e.annotationElementId),ue.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,B).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,B).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Ps)&&(e._focusEventsAllowed=!1,b(this,Ps,setTimeout(()=>{b(this,Ps,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,B)._signal}),t.focus())},0))),e._structTreeParentId=(n=l(this,Dr))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return l(this,B).getId()}combinedSignal(e){return l(this,B).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,ct,Nu))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,B).updateToolbar(e),l(this,B).updateMode(e);const{offsetX:n,offsetY:s}=w(this,ct,Hu).call(this),i=this.getNextId(),a=w(this,ct,zu).call(this,{parent:this,id:i,x:n,y:s,uiManager:l(this,B),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l(hn,bi).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,B)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),i=w(this,ct,zu).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,B),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(w(this,ct,Hu).call(this),!0)}setSelected(e){l(this,B).setSelected(e)}toggleSelected(e){l(this,B).toggleSelected(e)}unselect(e){l(this,B).unselect(e)}pointerup(e){const{isMac:t}=Ct.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,mi)){if(b(this,mi,!1),!l(this,ro)){b(this,ro,!0);return}if(l(this,B).getMode()===Z.STAMP){l(this,B).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,B).getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),l(this,mi)){b(this,mi,!1);return}const{isMac:t}=Ct.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;b(this,mi,!0);const n=l(this,B).getActive();b(this,ro,!n||n.isEmpty())}findNewParent(e,t,n){const s=l(this,B).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,B).getActive())==null?void 0:e.parent)===this&&(l(this,B).commitOrRemove(),l(this,B).setActiveEditor(null)),l(this,Ps)&&(clearTimeout(l(this,Ps)),b(this,Ps,null));for(const n of l(this,Gt).values())(t=l(this,Dr))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,Gt).clear(),l(this,B).removeLayer(this)}render({viewport:e}){this.viewport=e,Ir(this.div,e);for(const t of l(this,B).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,B).commitOrRemove(),w(this,ct,hh).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ir(this.div,{rotation:n}),t!==n)for(const s of l(this,Gt).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,B).viewParameters.realScale}};Dr=new WeakMap,ro=new WeakMap,Yn=new WeakMap,pi=new WeakMap,Ps=new WeakMap,Gt=new WeakMap,mi=new WeakMap,ao=new WeakMap,oo=new WeakMap,mt=new WeakMap,Rs=new WeakMap,B=new WeakMap,bi=new WeakMap,ct=new WeakSet,jb=function(e){l(this,B).unselectAll();const{target:t}=e;if(t===l(this,mt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,mt).div.contains(t)){const{isMac:n}=Ct.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,B).showAllEditors("highlight",!0,!0),l(this,mt).div.classList.add("free"),this.toggleDrawing(),xh.startHighlighting(this,l(this,B).direction==="ltr",{target:l(this,mt).div,x:e.x,y:e.y}),l(this,mt).div.addEventListener("pointerup",()=>{l(this,mt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,B)._signal}),e.preventDefault()}},Nu=function(){return l(hn,bi).get(l(this,B).getMode())},zu=function(e){const t=l(this,ct,Nu);return t?new t.prototype.constructor(e):null},Hu=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),h=(i+o)/2-e,d=(a+c)/2-t,[u,f]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:u,offsetY:f}},hh=function(){b(this,ao,!0);for(const e of l(this,Gt).values())e.isEmpty()&&e.remove();b(this,ao,!1)},q(hn,"_initialized",!1),x(hn,bi,new Map([mu,_u,Iu,xh].map(e=>[e._editorType,e])));let Ou=hn;var Kn,lc,$e,Ms,cc,Bu,zr,Wu,Fb;const it=class it{constructor({pageIndex:e}){x(this,zr);x(this,Kn,null);x(this,lc,0);x(this,$e,new Map);x(this,Ms,new Map);this.pageIndex=e}setParent(e){if(!l(this,Kn)){b(this,Kn,e);return}if(l(this,Kn)!==e){if(l(this,$e).size>0)for(const t of l(this,$e).values())t.remove(),e.append(t);b(this,Kn,e)}}static get _svgFactory(){return ie(this,"_svgFactory",new vf)}draw(e,t,n,s=!1){const i=xt(this,lc)._++,a=w(this,zr,Wu).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const o=it._svgFactory.createElement("defs");a.append(o);const c=it._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("d",e.toSVGPath()),s&&l(this,Ms).set(i,c);const d=w(this,zr,Fb).call(this,o,h),u=it._svgFactory.createElement("use");return a.append(u),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),u.setAttribute("href",`#${h}`),l(this,$e).set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e){const t=xt(this,lc)._++,n=w(this,zr,Wu).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const s=it._svgFactory.createElement("defs");n.append(s);const i=it._svgFactory.createElement("path");s.append(i);const a=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",a),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const d=it._svgFactory.createElement("mask");s.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const u=it._svgFactory.createElement("rect");d.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const f=it._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=it._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const h=c.cloneNode();return n.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),l(this,$e).set(t,n),t}finalizeLine(e,t){const n=l(this,Ms).get(e);l(this,Ms).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,$e).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,Ms).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;w(n=it,cc,Bu).call(n,l(this,$e).get(e),t)}show(e,t){l(this,$e).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,$e).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,$e).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,$e).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,$e).get(e).classList.add(t)}removeClass(e,t){l(this,$e).get(e).classList.remove(t)}getSVGRoot(e){return l(this,$e).get(e)}remove(e){l(this,Ms).delete(e),l(this,Kn)!==null&&(l(this,$e).get(e).remove(),l(this,$e).delete(e))}destroy(){b(this,Kn,null);for(const e of l(this,$e).values())e.remove();l(this,$e).clear(),l(this,Ms).clear()}};Kn=new WeakMap,lc=new WeakMap,$e=new WeakMap,Ms=new WeakMap,cc=new WeakSet,Bu=function(e,{x:t=0,y:n=0,width:s=1,height:i=1}={}){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},zr=new WeakSet,Wu=function(e){var n;const t=it._svgFactory.create(1,1,!0);return l(this,Kn).append(t),t.setAttribute("aria-hidden",!0),w(n=it,cc,Bu).call(n,t,e),t},Fb=function(e,t){const n=it._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=it._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},x(it,cc);let $u=it;var ZA=K.AbortException,eS=K.AnnotationEditorLayer,tS=K.AnnotationEditorParamsType,nS=K.AnnotationEditorType,sS=K.AnnotationEditorUIManager,Ob=K.AnnotationLayer,Nb=K.AnnotationMode,iS=K.ColorPicker,rS=K.DOMSVGFactory,aS=K.DrawLayer,oS=K.FeatureTest,Af=K.GlobalWorkerOptions,lS=K.ImageKind,cS=K.InvalidPDFException,hS=K.MissingPDFException,dS=K.OPS,uS=K.OutputScale,fS=K.PDFDataRangeTransport,gS=K.PDFDateString,pS=K.PDFWorker,mS=K.PasswordResponses,bS=K.PermissionFlag,yS=K.PixelsPerInch,wS=K.RenderingCancelledException,zb=K.TextLayer,vS=K.UnexpectedResponseException,xS=K.Util,AS=K.VerbosityLevel,SS=K.XfaLayer,ES=K.build,_S=K.createValidAbsoluteUrl,CS=K.fetchData,Hb=K.getDocument,kS=K.getFilenameFromUrl,TS=K.getPdfFilenameFromUrl,PS=K.getXfaPageViewport,RS=K.isDataScheme,MS=K.isPdfFile,LS=K.noContextMenu,DS=K.normalizeUnicode,IS=K.setLayerDimensions,jS=K.shadow,$b=K.version;const FS=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ZA,AnnotationEditorLayer:eS,AnnotationEditorParamsType:tS,AnnotationEditorType:nS,AnnotationEditorUIManager:sS,AnnotationLayer:Ob,AnnotationMode:Nb,ColorPicker:iS,DOMSVGFactory:rS,DrawLayer:aS,FeatureTest:oS,GlobalWorkerOptions:Af,ImageKind:lS,InvalidPDFException:cS,MissingPDFException:hS,OPS:dS,OutputScale:uS,PDFDataRangeTransport:fS,PDFDateString:gS,PDFWorker:pS,PasswordResponses:mS,PermissionFlag:bS,PixelsPerInch:yS,RenderingCancelledException:wS,TextLayer:zb,UnexpectedResponseException:vS,Util:xS,VerbosityLevel:AS,XfaLayer:SS,build:ES,createValidAbsoluteUrl:_S,fetchData:CS,getDocument:Hb,getFilenameFromUrl:kS,getPdfFilenameFromUrl:TS,getXfaPageViewport:PS,isDataScheme:RS,isPdfFile:MS,noContextMenu:LS,normalizeUnicode:DS,setLayerDimensions:IS,shadow:jS,version:$b},Symbol.toStringTag,{value:"Module"}));var Qe=function(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},OS=["onCopy","onCut","onPaste"],NS=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],zS=["onFocus","onBlur"],HS=["onInput","onInvalid","onReset","onSubmit"],$S=["onLoad","onError"],BS=["onKeyDown","onKeyPress","onKeyUp"],WS=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],US=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],VS=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],GS=["onSelect"],qS=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],XS=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],YS=["onScroll"],KS=["onWheel"],JS=["onAnimationStart","onAnimationEnd","onAnimationIteration"],QS=["onTransitionEnd"],ZS=["onToggle"],e1=["onChange"],t1=Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe([],OS,!0),NS,!0),zS,!0),HS,!0),$S,!0),BS,!0),WS,!0),US,!0),VS,!0),GS,!0),qS,!0),XS,!0),YS,!0),KS,!0),JS,!0),QS,!0),e1,!0),ZS,!0);function Bb(r,e){var t={};return t1.forEach(function(n){var s=r[n];s&&(e?t[n]=function(i){return s(i,e(n))}:t[n]=s)}),t}function mc(r){var e=!1,t=new Promise(function(n,s){r.then(function(i){return!e&&n(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function Wb(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Wb(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function ed(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Wb(r))&&(n&&(n+=" "),n+=e);return n}var n1="Invariant failed";function pe(r,e){if(!r)throw new Error(n1)}var md,Sg;function s1(){if(Sg)return md;Sg=1;var r=function(){};return md=r,md}var i1=s1();const bt=op(i1);var Eg=Object.prototype.hasOwnProperty;function _g(r,e,t){for(t of r.keys())if(oa(t,e))return t}function oa(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&oa(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=_g(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=_g(e,s),!s)||!oa(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(Eg.call(r,t)&&++n&&!Eg.call(e,t)||!(t in e)||!oa(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}const Ub=C.createContext(null);function la({children:r,type:e}){return p.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const r1="noopener noreferrer nofollow";class a1{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){pe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{pe(this.pdfDocument),pe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pe(Array.isArray(t));const n=t[0];new Promise(s=>{pe(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(i=>{s(i)}).catch(()=>{pe(!1)}):typeof n=="number"?s(n):pe(!1)}).then(s=>{const i=s+1;pe(this.pdfViewer),pe(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;pe(this.pdfViewer),pe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||r1,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Cg={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},td=typeof window<"u",Vb=td&&window.location.protocol==="file:";function o1(r){return typeof r<"u"}function Ri(r){return o1(r)&&r!==null}function l1(r){return typeof r=="string"}function c1(r){return r instanceof ArrayBuffer}function h1(r){return pe(td),r instanceof Blob}function Uu(r){return l1(r)&&/^data:/.test(r)}function kg(r){pe(Uu(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function d1(){return td&&window.devicePixelRatio||1}const Gb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Tg(){bt(!Vb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Gb}`)}function u1(){bt(!Vb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Gb}`)}function Or(r){r!=null&&r.cancel&&r.cancel()}function Vu(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function f1(r){return r.name==="RenderingCancelledException"}function g1(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}function p1(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function lo(){return C.useReducer(p1,{value:void 0,error:void 0})}var m1=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{h(n.next(d))}catch(u){a(u)}}function c(d){try{h(n.throw(d))}catch(u){a(u)}}function h(d){d.done?i(d.value):s(d.value).then(o,c)}h((n=n.apply(r,e||[])).next())})},Pg=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const{PDFDataRangeTransport:b1}=FS,y1=(r,e)=>{switch(e){case Cg.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case Cg.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function Rg(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const w1=C.forwardRef(function(e,t){var{children:n,className:s,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:c,inputRef:h,imageResourcesPath:d,loading:u="Loading PDF…",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:y,onLoadSuccess:A,onPassword:v=y1,onSourceError:S,onSourceSuccess:E,options:_,renderMode:k,rotate:T}=e,P=Pg(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[R,M]=lo(),{value:L,error:D}=R,[Q,U]=lo(),{value:$,error:V}=Q,G=C.useRef(new a1),O=C.useRef([]),N=C.useRef(void 0),Ee=C.useRef(void 0);c&&c!==N.current&&Rg(c)&&(bt(!oa(c,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=c),_&&_!==Ee.current&&(bt(!oa(_,Ee.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ee.current=_);const je=C.useRef({scrollPageIntoView:be=>{const{dest:ze,pageNumber:ht,pageIndex:Je=ht-1}=be;if(g){g({dest:ze,pageIndex:Je,pageNumber:ht});return}const Ur=O.current[Je];if(Ur){Ur.scrollIntoView();return}bt(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});C.useImperativeHandle(t,()=>({linkService:G,pages:O,viewer:je}),[]);function We(){E&&E()}function we(){D&&(bt(!1,D.toString()),S&&S(D))}function ve(){M({type:"RESET"})}C.useEffect(ve,[c,M]);const Pt=C.useCallback(()=>m1(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return Uu(c)?{data:kg(c)}:(Tg(),{url:c});if(c instanceof b1)return{range:c};if(c1(c))return{data:c};if(td&&h1(c))return{data:yield g1(c)};if(pe(typeof c=="object"),pe(Rg(c)),"url"in c&&typeof c.url=="string"){if(Uu(c.url)){const{url:be}=c,ze=Pg(c,["url"]),ht=kg(be);return Object.assign({data:ht},ze)}Tg()}return c}),[c]);C.useEffect(()=>{const be=mc(Pt());return be.promise.then(ze=>{M({type:"RESOLVE",value:ze})}).catch(ze=>{M({type:"REJECT",error:ze})}),()=>{Or(be)}},[Pt,M]),C.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){we();return}We()}},[L]);function ln(){$&&(A&&A($),O.current=new Array($.numPages),G.current.setDocument($))}function Fe(){V&&(bt(!1,V.toString()),m&&m(V))}C.useEffect(function(){U({type:"RESET"})},[U,L]),C.useEffect(function(){if(!L)return;const ze=_?Object.assign(Object.assign({},L),_):L,ht=Hb(ze);y&&(ht.onProgress=y),v&&(ht.onPassword=v);const Je=ht,Ur=Je.promise.then(yo=>{U({type:"RESOLVE",value:yo})}).catch(yo=>{Je.destroyed||U({type:"REJECT",error:yo})});return()=>{Ur.finally(()=>Je.destroy())}},[_,U,L]),C.useEffect(()=>{if(!(typeof $>"u")){if($===!1){Fe();return}ln()}},[$]),C.useEffect(function(){G.current.setViewer(je.current),G.current.setExternalLinkRel(a),G.current.setExternalLinkTarget(o)},[a,o]);const oe=C.useCallback((be,ze)=>{O.current[be]=ze},[]),Rn=C.useCallback(be=>{delete O.current[be]},[]),cn=C.useMemo(()=>({imageResourcesPath:d,linkService:G.current,onItemClick:g,pdf:$,registerPage:oe,renderMode:k,rotate:T,unregisterPage:Rn}),[d,g,$,oe,k,T,Rn]),_e=C.useMemo(()=>Bb(P,()=>$),[P,$]);function mo(){return p.jsx(Ub.Provider,{value:cn,children:n})}function bo(){return c?$==null?p.jsx(la,{type:"loading",children:typeof u=="function"?u():u}):$===!1?p.jsx(la,{type:"error",children:typeof i=="function"?i():i}):mo():p.jsx(la,{type:"no-data",children:typeof f=="function"?f():f})}return p.jsx("div",Object.assign({className:ed("react-pdf__Document",s),ref:h,style:{"--scale-factor":"1"}},_e,{children:bo()}))});function qb(){return C.useContext(Ub)}function Xb(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(i){t.forEach(function(a){typeof a=="function"?a(i):a&&(a.current=i)})}}const Yb=C.createContext(null),Kb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},v1=/^H(\d+)$/;function x1(r){return r in Kb}function nd(r){return"children"in r}function Jb(r){return nd(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function A1(r){const e={};if(nd(r)){const{role:t}=r,n=t.match(v1);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(x1(t)){const s=Kb[t];s&&(e.role=s)}}return e}function Qb(r){const e={};if(nd(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),Jb(r)){const[t]=r.children;if(t){const n=Qb(t);return Object.assign(Object.assign({},e),n)}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function S1(r){return r?Object.assign(Object.assign({},A1(r)),Qb(r)):null}function Zb({className:r,node:e}){const t=C.useMemo(()=>S1(e),[e]),n=C.useMemo(()=>!nd(e)||Jb(e)?null:e.children.map((s,i)=>p.jsx(Zb,{node:s},i)),[e]);return p.jsx("span",Object.assign({className:r},t,{children:n}))}function sd(){return C.useContext(Yb)}function E1(){const r=sd();pe(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[n,s]=lo(),{value:i,error:a}=n,{customTextRenderer:o,page:c}=r;function h(){i&&t&&t(i)}function d(){a&&(bt(!1,a.toString()),e&&e(a))}return C.useEffect(function(){s({type:"RESET"})},[s,c]),C.useEffect(function(){if(o||!c)return;const f=mc(c.getStructTree()),g=f;return f.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>Or(g)},[o,c,s]),C.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}h()}},[i]),i?p.jsx(Zb,{className:"react-pdf__Page__structTree structTree",node:i}):null}const Mg=Nb;function _1(r){const e=sd();pe(e);const t=Object.assign(Object.assign({},e),r),{_className:n,canvasBackground:s,devicePixelRatio:i=d1(),onRenderError:a,onRenderSuccess:o,page:c,renderForms:h,renderTextLayer:d,rotate:u,scale:f}=t,{canvasRef:g}=r;pe(c);const m=C.useRef(null);function y(){c&&o&&o(Vu(c,f))}function A(_){f1(_)||(bt(!1,_.toString()),a&&a(_))}const v=C.useMemo(()=>c.getViewport({scale:f*i,rotation:u}),[i,c,u,f]),S=C.useMemo(()=>c.getViewport({scale:f,rotation:u}),[c,u,f]);C.useEffect(function(){if(!c)return;c.cleanup();const{current:k}=m;if(!k)return;k.width=v.width,k.height=v.height,k.style.width=`${Math.floor(S.width)}px`,k.style.height=`${Math.floor(S.height)}px`,k.style.visibility="hidden";const T={annotationMode:h?Mg.ENABLE_FORMS:Mg.ENABLE,canvasContext:k.getContext("2d",{alpha:!1}),viewport:v};s&&(T.background=s);const P=c.render(T),R=P;return P.promise.then(()=>{k.style.visibility="",y()}).catch(A),()=>Or(R)},[s,c,h,v,S]);const E=C.useCallback(()=>{const{current:_}=m;_&&(_.width=0,_.height=0)},[]);return C.useEffect(()=>E,[E]),p.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Xb(g,m),style:{display:"block",userSelect:"none"},children:d?p.jsx(E1,{}):null})}function C1(r){return"str"in r}function k1(){const r=sd();pe(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:a,pageIndex:o,pageNumber:c,rotate:h,scale:d}=r;pe(a);const[u,f]=lo(),{value:g,error:m}=u,y=C.useRef(null);bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){g&&n&&n(g)}function v(){m&&(bt(!1,m.toString()),t&&t(m))}C.useEffect(function(){f({type:"RESET"})},[a,f]),C.useEffect(function(){if(!a)return;const R=mc(a.getTextContent()),M=R;return R.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>Or(M)},[a,f]),C.useEffect(()=>{if(g!==void 0){if(g===!1){v();return}A()}},[g]);const S=C.useCallback(()=>{i&&i()},[i]),E=C.useCallback(P=>{bt(!1,P.toString()),s&&s(P)},[s]);function _(){const P=y.current;P&&P.classList.add("selecting")}function k(){const P=y.current;P&&P.classList.remove("selecting")}const T=C.useMemo(()=>a.getViewport({scale:d,rotation:h}),[a,h,d]);return C.useLayoutEffect(function(){if(!a||!g)return;const{current:R}=y;if(!R)return;R.innerHTML="";const M=a.streamTextContent({includeMarkedContent:!0}),L={container:R,textContentSource:M,viewport:T},D=new zb(L),Q=D;return D.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",R.append(U);const $=R.querySelectorAll('[role="presentation"]');if(e){let V=0;g.items.forEach((G,O)=>{if(!C1(G))return;const N=$[V];if(!N)return;const Ee=e(Object.assign({pageIndex:o,pageNumber:c,itemIndex:O},G));N.innerHTML=Ee,V+=G.str&&G.hasEOL?2:1})}S()}).catch(E),()=>Or(Q)},[e,E,S,a,o,c,g,T]),p.jsx("div",{className:ed("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:_,ref:y})}function T1(){const r=qb(),e=sd();pe(e);const t=Object.assign(Object.assign({},r),e),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:c,page:h,pdf:d,renderForms:u,rotate:f,scale:g=1}=t;pe(d),pe(h),pe(s);const[m,y]=lo(),{value:A,error:v}=m,S=C.useRef(null);bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){A&&a&&a(A)}function _(){v&&(bt(!1,v.toString()),i&&i(v))}C.useEffect(function(){y({type:"RESET"})},[y,h]),C.useEffect(function(){if(!h)return;const M=mc(h.getAnnotations()),L=M;return M.promise.then(D=>{y({type:"RESOLVE",value:D})}).catch(D=>{y({type:"REJECT",error:D})}),()=>{Or(L)}},[y,h]),C.useEffect(()=>{if(A!==void 0){if(A===!1){_();return}E()}},[A]);function k(){c&&c()}function T(R){bt(!1,`${R}`),o&&o(R)}const P=C.useMemo(()=>h.getViewport({scale:g,rotation:f}),[h,f,g]);return C.useEffect(function(){if(!d||!h||!s||!A)return;const{current:M}=S;if(!M)return;const L=P.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:M,l10n:null,page:h,structTreeLayer:null,viewport:L},Q={annotations:A,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:n,linkService:s,page:h,renderForms:u,viewport:L};M.innerHTML="";try{new Ob(D).render(Q),k()}catch(U){T(U)}return()=>{}},[A,n,s,h,d,u,P]),p.jsx("div",{className:ed("react-pdf__Page__annotations","annotationLayer"),ref:S})}var P1=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Lg=1;function R1(r){const e=qb(),t=Object.assign(Object.assign({},e),r),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:a,children:o,className:c,customRenderer:h,customTextRenderer:d,devicePixelRatio:u,error:f="Failed to load the page.",height:g,inputRef:m,loading:y="Loading page…",noData:A="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:R,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:D,onRenderSuccess:Q,onRenderTextLayerError:U,onRenderTextLayerSuccess:$,pageIndex:V,pageNumber:G,pdf:O,registerPage:N,renderAnnotationLayer:Ee=!0,renderForms:je=!1,renderMode:We="canvas",renderTextLayer:we=!0,rotate:ve,scale:Pt=Lg,unregisterPage:ln,width:Fe}=t,oe=P1(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Rn,cn]=lo(),{value:_e,error:mo}=Rn,bo=C.useRef(null);pe(O);const be=Ri(G)?G-1:V??null,ze=G??(Ri(V)?V+1:null),ht=ve??(_e?_e.rotate:null),Je=C.useMemo(()=>{if(!_e)return null;let Vr=1;const wc=Pt??Lg;if(Fe||g){const vc=_e.getViewport({scale:1,rotation:ht});Fe?Vr=Fe/vc.width:g&&(Vr=g/vc.height)}return wc*Vr},[g,_e,ht,Pt,Fe]);C.useEffect(function(){return()=>{Ri(be)&&s&&ln&&ln(be)}},[s,O,be,ln]);function Ur(){if(R){if(!_e||!Je)return;R(Vu(_e,Je))}if(s&&N){if(!Ri(be)||!bo.current)return;N(be,bo.current)}}function yo(){mo&&(bt(!1,mo.toString()),P&&P(mo))}C.useEffect(function(){cn({type:"RESET"})},[cn,O,be]),C.useEffect(function(){if(!O||!ze)return;const wc=mc(O.getPage(ze)),vc=wc;return wc.promise.then(rd=>{cn({type:"RESOLVE",value:rd})}).catch(rd=>{cn({type:"REJECT",error:rd})}),()=>Or(vc)},[cn,O,ze]),C.useEffect(()=>{if(_e!==void 0){if(_e===!1){yo();return}Ur()}},[_e,Je]);const A0=C.useMemo(()=>_e&&Ri(be)&&ze&&Ri(ht)&&Ri(Je)?{_className:n,canvasBackground:i,customTextRenderer:d,devicePixelRatio:u,onGetAnnotationsError:v,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:T,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:D,onRenderSuccess:Q,onRenderTextLayerError:U,onRenderTextLayerSuccess:$,page:_e,pageIndex:be,pageNumber:ze,renderForms:je,renderTextLayer:we,rotate:ht,scale:Je}:null,[n,i,d,u,v,S,E,_,k,T,M,L,D,Q,U,$,_e,be,ze,je,we,ht,Je]),S0=C.useMemo(()=>Bb(oe,()=>_e&&(Je?Vu(_e,Je):void 0)),[oe,_e,Je]),yc=`${be}@${Je}/${ht}`;function E0(){switch(We){case"custom":return pe(h),p.jsx(h,{},`${yc}_custom`);case"none":return null;case"canvas":default:return p.jsx(_1,{canvasRef:a},`${yc}_canvas`)}}function _0(){return we?p.jsx(k1,{},`${yc}_text`):null}function C0(){return Ee?p.jsx(T1,{},`${yc}_annotations`):null}function k0(){return p.jsxs(Yb.Provider,{value:A0,children:[E0(),_0(),C0(),o]})}function T0(){return ze?O===null||_e===void 0||_e===null?p.jsx(la,{type:"loading",children:typeof y=="function"?y():y}):O===!1||_e===!1?p.jsx(la,{type:"error",children:typeof f=="function"?f():f}):k0():p.jsx(la,{type:"no-data",children:typeof A=="function"?A():A})}return p.jsx("div",Object.assign({className:ed(n,c),"data-page-number":ze,ref:Xb(m,bo),style:{"--scale-factor":`${Je}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},S0,{children:T0()}))}u1();Af.workerSrc="pdf.worker.mjs";function bd(r){if(r){const e=r.offsetWidth,t=r.offsetHeight;return{width:e,height:t}}return{width:0,height:0}}function M1(r){const[e,t]=C.useState(bd(r));return C.useLayoutEffect(()=>{t(bd(r));function n(){t(bd(r))}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[r]),e}Af.workerSrc=`//unpkg.com/pdfjs-dist@${$b}/legacy/build/pdf.worker.min.js`;const L1=({type:r,url:e,fileName:t})=>{const{t:n}=Se(),s=C.useRef(null),i=M1(s.current),a=()=>{const c=document.createElement("a");document.body.appendChild(c),c.download=t.toString(),c.href=e.toString(),c.click(),document.body.removeChild(c)},o=()=>p.jsx(wi,{width:"full",children:p.jsxs(Yg,{onClick:()=>a(),_hover:{cursor:"pointer"},children:[p.jsx(Kg,{ref:s,children:p.jsx(w1,{file:e,children:p.jsx(R1,{pageNumber:1,width:i.width,loading:"Laden"})})}),p.jsx(I0,{width:"full",padding:2,children:p.jsxs(Ye,{width:"full",justifyContent:"space-between",children:[p.jsxs(W,{fontSize:"sm",children:[t,".pdf"]}),p.jsx(Os,{label:n("chatbot.showCV.download"),hasArrow:!0,openDelay:300,children:p.jsx(Cn,{onClick:()=>a(),"aria-label":"Download",icon:p.jsx(Ae,{as:sy}),variant:"ghost",colorScheme:"gray"})})]})})]})});return p.jsx(p.Fragment,{children:r==="pdf"?o():null})},D1=({url:r})=>p.jsx(yp,{to:r}),I1=({children:r,owner:e})=>p.jsx(j0,{in:!0,style:{width:"100%"},children:p.jsx(wi,{width:"full",justifyContent:e==="bot"?"start":"end",children:p.jsx(W,{minHeight:6,width:"fit-content",maxWidth:"80%",boxShadow:"0 0 2rem rgba(black, 0.075), 0rem 1rem 1rem -1rem rgba(black, 0.1)",backgroundColor:e==="bot"?"gray.200":"black",color:e==="bot"?"black":"white",borderRadius:e==="bot"?"1.125rem 1.125rem 1.125rem 0":"1.125rem 1.125rem 0 1.125rem",paddingX:4,paddingY:2,style:{hyphens:"auto",wordWrap:"break-word"},children:r})})}),j1=()=>{const{t:r}=Se(),[e,t]=C.useState(Vv),[n,s]=C.useState(Gv),i=C.useRef(null);C.useEffect(()=>{h()},[e,n]);const a=()=>e.map((d,u)=>qv(d)?p.jsx(I1,{owner:d.owner,children:r(d.message)},u):Xv(d)?p.jsx(L1,{owner:d.owner,type:d.type,fileName:d.fileName,url:d.url},u):Yv(d)?p.jsx(D1,{url:d.url},u):null),o=d=>{const u=[];return d.forEach(f=>{const g=Vh.get(f);g&&u.push(g)}),u},c=async d=>{s([]);const f=d.messges.map((g,m)=>new Promise(y=>{setTimeout(()=>{t(A=>[...A,g]),y()},m*1e3)}));await Promise.all(f),s(d.furtherActions?o(d.furtherActions):[])},h=()=>{var d;(d=i==null?void 0:i.current)==null||d.scrollIntoView({behavior:"smooth"})};return p.jsxs(H,{spacing:6,children:[p.jsx(H,{width:"full",spacing:3,children:a()}),p.jsx(an,{direction:{base:"column",lg:"row"},width:"full",flexWrap:"wrap",children:n.map((d,u)=>p.jsx(Kv,{handleAction:()=>c(d),children:r(d.actionText)},u))}),p.jsx("div",{ref:i})]})},F1=({onClick:r})=>p.jsxs(Yg,{position:"fixed",bottom:{base:0,lg:"5%"},right:{base:0,lg:"5%"},height:{base:"full",lg:"auto"},maxWidth:{base:"full",lg:"25vw"},maxHeight:{base:"full",lg:"65vh"},zIndex:3,children:[p.jsx(Uv,{onClick:r}),p.jsx(Kg,{overflowY:"auto",children:p.jsx(j1,{})})]}),O1=({onClick:r})=>{const{t:e}=Se();return p.jsx(Os,{label:e("chatbot.tooltip"),hasArrow:!0,openDelay:300,children:p.jsx(Cn,{"aria-label":"Chatbot",icon:p.jsx(Ae,{as:iy,boxSize:8}),position:"fixed",bottom:"5%",right:"5%",size:"lg",variant:{base:"solid",lg:"outline"},colorScheme:"gray",onClick:r})})},N1=()=>{const[r,e]=C.useState(!1);return r?p.jsx(F1,{onClick:()=>e(!1)}):p.jsx(O1,{onClick:()=>e(!0)})},z1=r=>p.jsxs(wt,{as:"svg",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",display:"inline",...r,children:[p.jsx("rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}),p.jsx("rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}),p.jsx("path",{d:"M6 20h4"}),p.jsx("path",{d:"M14 10h4"}),p.jsx("path",{d:"M6 14h2v6"}),p.jsx("path",{d:"M14 4h2v6"})]}),Gu=r=>{const{t:e}=Se(),{colorMode:t,toggleColorMode:n}=Jg();return p.jsx(Os,{label:e(t==="light"?"navigation.themeSwitch.dark":"navigation.themeSwitch.light"),"aria-label":"Dark mode switch",hasArrow:!0,openDelay:300,children:p.jsx(Cn,{icon:p.jsx(Ae,{as:t==="light"?ry:ay,boxSize:{base:6,lg:5}}),variant:"outline",colorScheme:"gray",onClick:n,...r,"aria-label":"Dark mode switch"})})},H1=()=>{const{t:r}=Se(),[e]=co("(max-width: 62em)");return p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",marginTop:6,children:[p.jsxs(W,{fontSize:"sm",display:"flex",flexDirection:{base:"column",lg:"row"},alignItems:{base:"center",lg:"start"},gap:1,flex:1,children:[p.jsx(W,{as:"span",children:"© 2024"})," ",r("footer.text")," ",p.jsx(z1,{color:"brand.500"})]}),e?p.jsxs(Ye,{spacing:4,width:"full",justifyContent:"center",children:[p.jsx(ke,{"aria-label":"Github",isExternal:!0,href:"https://github.com/fredericbahr",children:p.jsx(Ae,{as:ki,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})}),p.jsx(ke,{"aria-label":"Linkedin",isExternal:!0,href:"https://www.linkedin.com/in/frederic-bahr-446925251/",children:p.jsx(Ae,{as:lp,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})}),p.jsx(Gu,{variant:"ghost",justifySelf:"end"})]}):p.jsx(Gu,{variant:"ghost",justifySelf:"end"})]})},$1=({...r})=>{const[e]=Ju("colors",["brand.500"]);return p.jsxs(wt,{as:"svg",id:"e76RbDrnTZM1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 226.304018 200.378",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",...r,children:[p.jsx("path",{id:"e76RbDrnTZM2",d:"M75.000003,20.999997L75.000003,43.003079L152.325119,43.003079L152.325119,20.999997L75.000003,20.999997Z",fill:e,stroke:e,strokeWidth:"0.452608"}),p.jsx("path",{id:"e76RbDrnTZM3",d:"M75.000003,72.550075L75.000003,156.999998L97.841297,156.999997L97.841297,94.972261L152.325119,94.97226L152.325119,72.550072L75.000003,72.550075Z",transform:"matrix(1 0 0 1 0 0.000003)",fill:e,stroke:e,strokeWidth:"0.452608"})]})},Sf={initialColorMode:localStorage.getItem("chakra-ui-color-mode")??"light",useSystemColorMode:!1},Ef={Heading:{baseStyle:{fontFamily:"'Orbitron', sans-serif"}}},e0=Qu({config:Sf,components:Ef,colors:{brand:{50:"#FFB7B1",100:"#FF9E98",200:"#FF3E30",300:"#FB1100",400:"#C80D00",500:"#930A00",600:"#890900",700:"#7F0800",800:"#740800",900:"#6A0700"}}},Zu({colorScheme:"brand"})),t0=Qu({config:Sf,components:Ef,colors:{brand:{50:"#9ad1a1",100:"#86c88e",200:"#72bf7b",300:"#5db568",400:"#49ac55",500:"#35a342",600:"#30933b",700:"#2a8235",800:"#25722e",900:"#1b5221"}}},Zu({colorScheme:"brand"})),B1=Qu({config:Sf,components:Ef,colors:{brand:{50:"#99f0c5",100:"#85ecb9",200:"#70e9ad",300:"#5ce6a1",400:"#47e396",500:"#33e08a",600:"#2eca7c",700:"#29b36e",800:"#249d61",900:"#1f8653"}}},Zu({colorScheme:"brand"})),Dg=new Map([["bordeaux",e0],["green",t0],["lime",B1]]),n0=C.createContext({colorScheme:e0}),W1=({children:r})=>{const e=()=>{const i=localStorage.getItem("colorScheme");if(i){const a=JSON.parse(i);return Dg.get(a)}return t0},[t,n]=C.useState(e()),s=i=>{localStorage.setItem("colorScheme",JSON.stringify(i)),n(Dg.get(i))};return p.jsx(n0.Provider,{value:{colorScheme:t,setColorScheme:i=>s(i)},children:r})},s0=()=>C.useContext(n0);var i0=(r=>(r.Bordeaux="#930A00",r.Green="#35a342",r.Lime="#33e08a",r))(i0||{}),r0=(r=>(r.Bordeaux="bordeaux",r.Green="green",r.Lime="lime",r))(r0||{}),qu=(r=>(r.Bordeaux="bordeaux",r.Green="green",r.Lime="lime",r))(qu||{});const a0=()=>{const{t:r}=Se(),{setColorScheme:e}=s0(),t=n=>{e(n)};return p.jsxs(Qg,{placement:"bottom-end",closeOnEsc:!0,children:[p.jsx(Zg,{children:p.jsx(Cn,{"aria-label":"Change color theme",icon:p.jsx(Ae,{as:oy}),variant:"outline",colorScheme:"gray"})}),p.jsx(ep,{children:p.jsxs(tp,{children:[p.jsx(np,{}),p.jsxs(sp,{display:"flex",alignItems:"center",children:[p.jsx(W,{as:"span",children:r("navigation.themeSwitch.title")})," ",p.jsx(ip,{})]}),p.jsx(rp,{children:p.jsxs(Ye,{alignItems:"center",gap:4,wrap:"wrap",width:"full",justifyContent:"space-evenly",children:[p.jsx(Gu,{}),Object.entries(r0).map(([n,s])=>p.jsx(Os,{label:r(`navigation.themeSwitch.${qu[n]}`),"aria-label":qu[n],hasArrow:!0,children:p.jsx(wt,{backgroundColor:i0[n],minWidth:"2rem",minHeight:"2rem",borderRadius:"full",ms:"0 !important",_hover:{cursor:"pointer"},onClick:()=>t(s)})},s))]})})]})})]})},o0=()=>{const{t:r,i18n:e}=Se(),t=Ft("gray.100","gray.800"),{isOpen:n,onOpen:s,onClose:i}=ap(),a=o=>{e.changeLanguage(o),i()};return p.jsxs(Qg,{placement:"bottom-end",closeOnEsc:!0,onClose:i,onOpen:s,isOpen:n,children:[p.jsx(Zg,{children:p.jsx(Cn,{"aria-label":"Change language",icon:p.jsx(Ae,{as:ly}),variant:"outline",colorScheme:"gray"})}),p.jsx(ep,{children:p.jsxs(tp,{children:[p.jsx(np,{}),p.jsx(sp,{display:"flex",alignItems:"center",children:r("navigation.languageSwitch.title")}),p.jsxs(rp,{padding:0,children:[p.jsxs(hc,{spacing:2,children:[p.jsx(_t,{width:"full",_hover:{backgroundColor:t,cursor:"pointer"},onClick:()=>a("de"),children:p.jsx(W,{paddingY:2,paddingX:4,children:r("navigation.languageSwitch.german")})}),p.jsx(_t,{_hover:{backgroundColor:t,cursor:"pointer"},onClick:()=>a("en"),children:p.jsx(W,{paddingY:2,paddingX:4,children:r("navigation.languageSwitch.english")})})]}),p.jsx(ip,{})]})]})})]})},U1=()=>{const{t:r}=Se(),e=Ft("gray.500","gray.400"),t=Hr(),n=()=>{t("/contact")};return p.jsxs(H,{spacing:3,children:[p.jsxs(hc,{alignSelf:"start",spacing:3,fontSize:"large",children:[p.jsx(_t,{style:{counterIncrement:"navitem 1"},children:p.jsx(ke,{href:"/#about",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.about")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},children:p.jsx(ke,{href:"/#experience",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.experience")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},children:p.jsx(ke,{href:"/#projects",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.projects")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},children:p.jsx(ke,{onClick:n,_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.contact")})})]}),p.jsx(ef,{borderColor:e}),p.jsxs(Ye,{spacing:8,children:[p.jsx(a0,{}),p.jsx(o0,{})]})]})},V1=()=>{const{t:r}=Se(),e=Hr(),t=()=>{e("/contact")};return p.jsxs(wt,{as:"nav",flex:1,display:"flex",justifyContent:"end",alignItems:"center",marginRight:8,gap:8,children:[p.jsxs(F0,{display:"flex",flexDirection:"row",gap:8,style:{counterReset:"navitem 0"},children:[p.jsx(_t,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:p.jsx(ke,{href:"/#about",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.about")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:p.jsx(ke,{href:"/#experience",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.experience")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:p.jsx(ke,{href:"/#projects",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.projects")})}),p.jsx(_t,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:p.jsx(ke,{onClick:t,_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.contact")})})]}),p.jsx(a0,{}),p.jsx(o0,{})]})},G1=()=>{const[r]=co("(max-width: 62em)"),{isOpen:e,onToggle:t}=ap(),n=Hr();return p.jsxs(p.Fragment,{children:[p.jsxs(wi,{as:"header",flexDirection:"row",width:"full",padding:2,marginBottom:{base:0,lg:2},justifyContent:{base:"space-between",lg:"unset"},children:[p.jsx(Cn,{icon:p.jsx($1,{maxH:12}),"aria-label":"Logo",variant:"ghost",marginLeft:6,onClick:()=>n("/")}),r&&p.jsx(Cn,{"aria-label":"Open Menu",icon:e?p.jsx(Ae,{as:cy}):p.jsx(Ae,{as:hy}),onClick:t,variant:"ghost",colorScheme:"gray"}),!r&&p.jsx(V1,{})]}),r&&p.jsx(wi,{justifyContent:"center",width:"full",margin:"0 auto",marginTop:-3,children:p.jsx(O0,{in:e,animateOpacity:!0,children:p.jsx(U1,{})})})]})},q1=()=>{const{t:r}=Se(),e=Ft("gray.600","gray.200");return p.jsx(wt,{position:"fixed",bottom:"0px",left:"5%",children:p.jsxs(hc,{spacing:4,display:"flex",flexDirection:"column",alignItems:"center",_after:{content:"''",display:"block",height:"90px",width:"1px",backgroundColor:e,marginTop:"4"},children:[p.jsx(_t,{children:p.jsx(Os,{label:r("socials.github"),hasArrow:!0,openDelay:300,children:p.jsx(ke,{"aria-label":"Github",isExternal:!0,href:"https://github.com/fredericbahr",children:p.jsx(Ae,{as:ki,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})})})}),p.jsx(_t,{children:p.jsx(Os,{label:r("socials.linkedin"),hasArrow:!0,openDelay:300,children:p.jsx(ke,{"aria-label":"Linkedin",isExternal:!0,href:"https://www.linkedin.com/in/frederic-bahr-446925251/",children:p.jsx(Ae,{as:lp,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})})})})]})})},Hs=({children:r})=>{const[e]=co("(max-width: 62em)");return p.jsxs(H,{minHeight:"100vh",marginBottom:10,children:[p.jsx(G1,{}),p.jsx(N0,{maxWidth:{base:"full",lg:"80%"},style:{counterReset:"heading 0"},children:p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:8,lg:16},children:[r,p.jsx(H1,{})]})}),!e&&p.jsx(q1,{}),p.jsx(N1,{})]})};function X1({...r}){const[e]=Ju("colors",["brand.500"]),t=xc`
    from {
      stroke-dashoffset: 200.65640258789062px;
      stroke-dasharray: 200.65640258789062px;
    }

    to {
      stroke-dashoffset: 0;
      stroke-dasharray: 200.65640258789062px;
    }`,n=xc`
    from {
      stroke-dashoffset: 325.55010986328125px;
      stroke-dasharray: 325.55010986328125px;
    }
  
    to {
      stroke-dashoffset: 0;
      stroke-dasharray: 325.55010986328125px;
    }
  `,s=xc` 
    from {
      fill: transparent;
    }
  
    to {
      fill: ${e};
    }
  `,i=xc` 
    from {
      opacity: 1;
    }
  
    to {
      opacity: 0;
    }
  `;return p.jsxs("svg",{id:"e76RbDrnTZM1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 226.304018 200.378",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",...r,children:[p.jsx(wt,{as:"path",id:"e76RbDrnTZM2",d:"M75.000003,20.999997L75.000003,43.003079L152.325119,43.003079L152.325119,20.999997L75.000003,20.999997Z",fill:e,stroke:e,strokeWidth:"0.452608",animation:`${t} 1.2s ease 0s both, ${s} 0.5s ease-in 1.2s both,
          ${i} 0.5s ease-in 2s both`}),p.jsx(wt,{as:"path",id:"e76RbDrnTZM3",d:"M75.000003,72.550075L75.000003,156.999998L97.841297,156.999997L97.841297,94.972261L152.325119,94.97226L152.325119,72.550072L75.000003,72.550075Z",transform:"matrix(1 0 0 1 0 0.000003)",fill:e,stroke:e,strokeWidth:"0.452608",animation:`${n} 1.2s ease 0.1s both, ${s} 0.5s ease-in 1.2s both,
        ${i} 0.5s ease-in 2s both`})]})}const _f=({children:r,id:e})=>p.jsx(re,{id:e,as:"h2",fontSize:{base:"3xl",lg:"4xl"},display:"flex",alignItems:"center",justifyContent:"center",width:"full",marginTop:{base:4,lg:12},style:{counterIncrement:"heading 1"},_before:{content:"'0' counter(heading) '.'",marginRight:3,color:"brand.500",fontSize:"lg",alignSelf:"flex-end",marginBottom:1.5},_after:{content:"''",display:{base:"none",lg:"block"},width:"100%",height:.25,backgroundColor:"gray.300",marginLeft:{base:4,lg:8},marginTop:3,minWidth:{base:"unset",lg:"lg"}},children:p.jsx(W,{as:"span",style:{textWrap:"nowrap"},children:r})}),Y1=["TypeScript","Jest","React","Playwright","Lit","Node.js","ChakraUI","Express"],K1=()=>{const{t:r}=Se();return p.jsxs(H,{width:"full",alignItems:"start",spacing:8,children:[p.jsx(_f,{id:"about",children:r("about.title")}),p.jsxs(Hh,{gap:8,width:"full",gridTemplateColumns:{base:"1fr",lg:"1fr auto"},alignItems:"center",children:[p.jsxs(H,{spacing:4,children:[p.jsx(W,{children:r("about.introduction")}),p.jsx(W,{children:r("about.main")}),p.jsx(W,{children:r("about.volunteering")}),p.jsx(W,{children:r("about.technologies")}),p.jsx(hc,{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",columnGap:8,rowGap:.5,alignSelf:"start",children:Y1.map((e,t)=>p.jsxs(_t,{display:"flex",alignItems:"center",children:[p.jsx(yd,{as:wd,color:"green.500"}),p.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:e})]},`${e}-${t}`))})]}),p.jsx(wt,{display:"flex",justifyContent:"center"})]})]})};class bc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const J1=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},lt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:J1()},Cf=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},Q1=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=Cf(r);lt.publicKey=t.publicKey,lt.blockHeadless=t.blockHeadless,lt.storageProvider=t.storageProvider,lt.blockList=t.blockList,lt.limitRate=t.limitRate,lt.origin=t.origin||e},l0=async(r,e,t={})=>{const n=await fetch(lt.origin+r,{method:"POST",headers:t,body:e}),s=await n.text(),i=new bc(n.status,s);if(n.ok)return i;throw i},c0=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Z1=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},h0=r=>r.webdriver||!r.languages||r.languages.length===0,d0=()=>new bc(451,"Unavailable For Headless Browser"),eE=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},tE=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},nE=(r,e)=>r instanceof FormData?r.get(e):r[e],u0=(r,e)=>{if(tE(r))return!1;eE(r.list,r.watchVariable);const t=nE(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},f0=()=>new bc(403,"Forbidden"),sE=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},iE=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},g0=async(r,e,t)=>{if(!e.throttle||!t)return!1;sE(e.throttle,e.id);const n=e.id||r;return await iE(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},p0=()=>new bc(429,"Too Many Requests"),rE=async(r,e,t,n)=>{const s=Cf(n),i=s.publicKey||lt.publicKey,a=s.blockHeadless||lt.blockHeadless,o=s.storageProvider||lt.storageProvider,c={...lt.blockList,...s.blockList},h={...lt.limitRate,...s.limitRate};return a&&h0(navigator)?Promise.reject(d0()):(c0(i,r,e),Z1(t),t&&u0(c,t)?Promise.reject(f0()):await g0(location.pathname,h,o)?Promise.reject(p0()):l0("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},aE=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},oE=r=>typeof r=="string"?document.querySelector(r):r,lE=async(r,e,t,n)=>{const s=Cf(n),i=s.publicKey||lt.publicKey,a=s.blockHeadless||lt.blockHeadless,o=lt.storageProvider||s.storageProvider,c={...lt.blockList,...s.blockList},h={...lt.limitRate,...s.limitRate};if(a&&h0(navigator))return Promise.reject(d0());const d=oE(t);c0(i,r,e),aE(d);const u=new FormData(d);return u0(c,u)?Promise.reject(f0()):await g0(location.pathname,h,o)?Promise.reject(p0()):(u.append("lib_version","4.4.1"),u.append("service_id",r),u.append("template_id",e),u.append("user_id",i),l0("/api/v1.0/email/send-form",u))},cE={init:Q1,send:rE,sendForm:lE,EmailJSResponseStatus:bc},hE={chars:"-./^*!}<~$012345abcdef",interval:50},dE=r=>r[Math.floor(Math.random()*r.length)],uE=(r,e,t,n,s,i)=>e>r?n[e]:r>=t&&e<r-t?s[e]:dE(i),fE=r=>{const{chars:e,interval:t,callback:n,initialValue:s}={...hE,...r};let i,a;s&&(i=s,n(i));function*o(c,h=""){const d=c.length,u=h.length,f=Math.max(d,u),g=2*f;let m=0;for(yield h;m<g;)yield[...new Array(f)].map((y,A)=>uE(m,A,f,h,c,e)).join(""),m++;yield c}return c=>{clearInterval(a);const h=o(c,i);return new Promise(d=>{a=setInterval(()=>{var u=h.next();u.done?(clearInterval(a),d(i)):(i=u.value,n(i))},t)})}};function m0(r,e){let t="",n={};typeof r=="object"?n=r:typeof r=="string"&&(t=r,n={});const[s,i]=dh.useState(),[a,o]=dh.useState(()=>fE({...n,initialValue:t,callback:i}));return[s,a]}const kf=({label:r,...e})=>{const t=Ft("white","gray.800"),n=Ft("gray.800","white"),s=Ft("white","gray.800"),[i,a]=m0(r);return C.useEffect(()=>{a(r)},[r,a]),p.jsxs(Ku,{colorScheme:"brand",size:"lg",position:"relative",borderRadius:"none",overflow:"hidden",backgroundColor:"brand.500",_before:{content:"''",width:"20px",height:"20px",position:"absolute",transform:"rotate(45deg)",borderWidth:2,backgroundColor:t,bottom:"-10px",left:"-10px",overflow:"hidden",zIndex:1},_after:{content:"''",width:"20px",height:"20px",position:"absolute",transform:"rotate(45deg)",borderWidth:2,backgroundColor:t,top:"-10px",right:"-10px",overflow:"hidden",zIndex:1},_hover:{color:s},sx:{"&:hover > div":{left:0}},onMouseEnter:()=>a(r),onMouseLeave:()=>a(r),...e,children:[p.jsx(W,{as:"span",zIndex:"1",children:i}),p.jsx(wt,{className:"btn-slide-effect",position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:n,transition:"all 0.3s"})]})},Ig=r=>p.jsx(z0,{focusBorderColor:"brand.500",size:"lg",_placeholder:{fontSize:"sm"},...r}),gE=r=>p.jsx(H0,{focusBorderColor:"brand.500",size:"lg",_placeholder:{fontSize:"sm"},...r}),pE=()=>{const{t:r}=Se(),[e,t]=C.useState(""),[n,s]=C.useState(""),[i,a]=C.useState(""),[o,c]=C.useState(!1),h=m=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(m),d=m=>{t(m.target.value)},u=m=>{s(m.target.value)},f=m=>{a(m.target.value)},g=async m=>{m.preventDefault(),m.stopPropagation();const y={from_completeName:e,from_emailcontact:n,message:i};if(!h(n)){c(!0);return}try{await cE.send(void 0,void 0,y),c(!1)}catch(A){console.error("Failed to send email",A)}};return p.jsxs(H,{spacing:12,align:"start",width:"full",marginTop:{base:8,lg:16},children:[p.jsx(re,{children:r("contact.headline")}),p.jsx(wi,{width:"full",children:p.jsx(W,{width:{base:"full",lg:"65%"},textAlign:"start",children:r("contact.subtext")})}),p.jsxs(Ye,{spacing:6,width:"full",children:[p.jsx(Ae,{as:dy,width:6,height:6}),p.jsx(ke,{href:"mailto:fredericbahr1@gmail.com",children:"fredericbahr1@gmail.com"})]}),p.jsxs(H,{spacing:4,width:"full",children:[p.jsx(W,{width:"full",textAlign:"start",children:r("contact.form.headline")}),p.jsxs(Hh,{gridTemplateColumns:{base:"1fr",lg:"1fr 1fr"},gridTemplateRows:{base:"auto auto 1fr",lg:"1fr 1fr"},columnGap:6,rowGap:4,width:"full",children:[p.jsx(Ig,{placeholder:r("contact.form.name"),gridColumn:"1",gridRow:"1",value:e,onChange:d}),p.jsxs($0,{isInvalid:o,gridColumn:"1",gridRow:"2",children:[p.jsx(Ig,{placeholder:r("contact.form.email"),value:n,onChange:u}),o&&p.jsx(B0,{children:r("contact.form.emailError")})]}),p.jsx(gE,{placeholder:r("contact.form.message"),height:"full",gridRow:{base:"auto",lg:"1 / span 2"},value:i,onChange:f})]}),p.jsx(kf,{label:r("contact.form.submit"),alignSelf:{base:"center",lg:"end"},onClick:g})]})]})},b0=6048e5,mE=864e5,jg=Symbol.for("constructDateFrom");function Ei(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&jg in r?r[jg](e):r instanceof Date?new r.constructor(e):new Date(e)}function Pn(r,e){return Ei(e||r,r)}let bE={};function id(){return bE}function Xo(r,e){var o,c,h,d;const t=id(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(h=t.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,s=Pn(r,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ah(r,e){return Xo(r,{...e,weekStartsOn:1})}function y0(r,e){const t=Pn(r,e==null?void 0:e.in),n=t.getFullYear(),s=Ei(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Ah(s),a=Ei(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Ah(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Fg(r){const e=Pn(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function yE(r,...e){const t=Ei.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Og(r,e){const t=Pn(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function wE(r,e,t){const[n,s]=yE(t==null?void 0:t.in,r,e),i=Og(n),a=Og(s),o=+i-Fg(i),c=+a-Fg(a);return Math.round((o-c)/mE)}function vE(r,e){const t=y0(r,e),n=Ei(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ah(n)}function xE(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function AE(r){return!(!xE(r)&&typeof r!="number"||isNaN(+Pn(r)))}function SE(r,e){const t=Pn(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const EE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_E=(r,e,t)=>{let n;const s=EE[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function ca(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const CE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PE={date:ca({formats:CE,defaultWidth:"full"}),time:ca({formats:kE,defaultWidth:"full"}),dateTime:ca({formats:TE,defaultWidth:"full"})},RE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ME=(r,e,t,n)=>RE[r];function Jn(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const LE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},DE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NE=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},zE={ordinalNumber:NE,era:Jn({values:LE,defaultWidth:"wide"}),quarter:Jn({values:DE,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Jn({values:IE,defaultWidth:"wide"}),day:Jn({values:jE,defaultWidth:"wide"}),dayPeriod:Jn({values:FE,defaultWidth:"wide",formattingValues:OE,defaultFormattingWidth:"wide"})};function Qn(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?$E(o,u=>u.test(a)):HE(o,u=>u.test(a));let h;h=r.valueCallback?r.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;const d=e.slice(a.length);return{value:h,rest:d}}}function HE(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function $E(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function w0(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const BE=/^(\d+)(th|st|nd|rd)?/i,WE=/\d+/i,UE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VE={any:[/^b/i,/^(a|c)/i]},GE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qE={any:[/1/i,/2/i,/3/i,/4/i]},XE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},e_={ordinalNumber:w0({matchPattern:BE,parsePattern:WE,valueCallback:r=>parseInt(r,10)}),era:Qn({matchPatterns:UE,defaultMatchWidth:"wide",parsePatterns:VE,defaultParseWidth:"any"}),quarter:Qn({matchPatterns:GE,defaultMatchWidth:"wide",parsePatterns:qE,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Qn({matchPatterns:XE,defaultMatchWidth:"wide",parsePatterns:YE,defaultParseWidth:"any"}),day:Qn({matchPatterns:KE,defaultMatchWidth:"wide",parsePatterns:JE,defaultParseWidth:"any"}),dayPeriod:Qn({matchPatterns:QE,defaultMatchWidth:"any",parsePatterns:ZE,defaultParseWidth:"any"})},t_={code:"en-US",formatDistance:_E,formatLong:PE,formatRelative:ME,localize:zE,match:e_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function n_(r,e){const t=Pn(r,e==null?void 0:e.in);return wE(t,SE(t))+1}function s_(r,e){const t=Pn(r,e==null?void 0:e.in),n=+Ah(t)-+vE(t);return Math.round(n/b0)+1}function v0(r,e){var d,u,f,g;const t=Pn(r,e==null?void 0:e.in),n=t.getFullYear(),s=id(),i=(e==null?void 0:e.firstWeekContainsDate)??((u=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(f=s.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,a=Ei((e==null?void 0:e.in)||r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=Xo(a,e),c=Ei((e==null?void 0:e.in)||r,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const h=Xo(c,e);return+t>=+o?n+1:+t>=+h?n:n-1}function i_(r,e){var o,c,h,d;const t=id(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(h=t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,s=v0(r,e),i=Ei((e==null?void 0:e.in)||r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Xo(i,e)}function r_(r,e){const t=Pn(r,e==null?void 0:e.in),n=+Xo(t,e)-+i_(t,e);return Math.round(n/b0)+1}function de(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const $s={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return de(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):de(t+1,2)},d(r,e){return de(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return de(r.getHours()%12||12,e.length)},H(r,e){return de(r.getHours(),e.length)},m(r,e){return de(r.getMinutes(),e.length)},s(r,e){return de(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return de(s,e.length)}},Xr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ng={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return $s.y(r,e)},Y:function(r,e,t,n){const s=v0(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return de(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):de(i,e.length)},R:function(r,e){const t=y0(r);return de(t,e.length)},u:function(r,e){const t=r.getFullYear();return de(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return de(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return de(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return $s.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return de(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=r_(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):de(s,e.length)},I:function(r,e,t){const n=s_(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):de(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):$s.d(r,e)},D:function(r,e,t){const n=n_(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):de(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return de(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return de(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return de(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=Xr.noon:n===0?s=Xr.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=Xr.evening:n>=12?s=Xr.afternoon:n>=4?s=Xr.morning:s=Xr.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return $s.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):$s.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):de(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):de(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):$s.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):$s.s(r,e)},S:function(r,e){return $s.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Hg(n);case"XXXX":case"XX":return ji(n);case"XXXXX":case"XXX":default:return ji(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Hg(n);case"xxxx":case"xx":return ji(n);case"xxxxx":case"xxx":default:return ji(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zg(n,":");case"OOOO":default:return"GMT"+ji(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zg(n,":");case"zzzz":default:return"GMT"+ji(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return de(n,e.length)},T:function(r,e,t){return de(+r,e.length)}};function zg(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+de(i,2)}function Hg(r,e){return r%60===0?(r>0?"-":"+")+de(Math.abs(r)/60,2):ji(r,e)}function ji(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=de(Math.trunc(n/60),2),i=de(n%60,2);return t+s+e+i}const $g=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},x0=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},a_=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return $g(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",$g(n,e)).replace("{{time}}",x0(s,e))},o_={p:x0,P:a_},l_=/^D+$/,c_=/^Y+$/,h_=["D","DD","YY","YYYY"];function d_(r){return l_.test(r)}function u_(r){return c_.test(r)}function f_(r,e,t){const n=g_(r,e,t);if(console.warn(n),h_.includes(r))throw new RangeError(n)}function g_(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const p_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b_=/^'([^]*?)'?$/,y_=/''/g,w_=/[a-zA-Z]/;function es(r,e,t){var d,u,f,g,m,y,A,v;const n=id(),s=(t==null?void 0:t.locale)??n.locale??t_,i=(t==null?void 0:t.firstWeekContainsDate)??((u=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((v=(A=n.locale)==null?void 0:A.options)==null?void 0:v.weekStartsOn)??0,o=Pn(r,t==null?void 0:t.in);if(!AE(o))throw new RangeError("Invalid time value");let c=e.match(m_).map(S=>{const E=S[0];if(E==="p"||E==="P"){const _=o_[E];return _(S,s.formatLong)}return S}).join("").match(p_).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const E=S[0];if(E==="'")return{isToken:!1,value:v_(S)};if(Ng[E])return{isToken:!0,value:S};if(E.match(w_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(S=>{if(!S.isToken)return S.value;const E=S.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&u_(E)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&d_(E))&&f_(E,e,String(r));const _=Ng[E[0]];return _(o,E,s.localize,h)}).join("")}function v_(r){const e=r.match(b_);return e?e[1].replace(y_,"'"):r}const Bg={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},x_=(r,e,t)=>{let n;const s=t!=null&&t.addSuffix?Bg[r].withPreposition:Bg[r].standalone;return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:"vor "+n:n},A_={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},S_={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},E_={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},__={date:ca({formats:A_,defaultWidth:"full"}),time:ca({formats:S_,defaultWidth:"full"}),dateTime:ca({formats:E_,defaultWidth:"full"})},C_={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},k_=(r,e,t,n)=>C_[r],T_={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},P_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},Xu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},R_={narrow:Xu.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:Xu.wide},M_={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},L_={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},D_={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},I_=r=>Number(r)+".",j_={ordinalNumber:I_,era:Jn({values:T_,defaultWidth:"wide"}),quarter:Jn({values:P_,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Jn({values:Xu,formattingValues:R_,defaultWidth:"wide"}),day:Jn({values:M_,defaultWidth:"wide"}),dayPeriod:Jn({values:L_,defaultWidth:"wide",formattingValues:D_,defaultFormattingWidth:"wide"})},F_=/^(\d+)(\.)?/i,O_=/\d+/i,N_={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},z_={any:[/^v/i,/^n/i]},H_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},$_={any:[/1/i,/2/i,/3/i,/4/i]},B_={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},W_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U_={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},V_={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},G_={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},q_={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},X_={ordinalNumber:w0({matchPattern:F_,parsePattern:O_,valueCallback:r=>parseInt(r)}),era:Qn({matchPatterns:N_,defaultMatchWidth:"wide",parsePatterns:z_,defaultParseWidth:"any"}),quarter:Qn({matchPatterns:H_,defaultMatchWidth:"wide",parsePatterns:$_,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Qn({matchPatterns:B_,defaultMatchWidth:"wide",parsePatterns:W_,defaultParseWidth:"any"}),day:Qn({matchPatterns:U_,defaultMatchWidth:"wide",parsePatterns:V_,defaultParseWidth:"any"}),dayPeriod:Qn({matchPatterns:G_,defaultMatchWidth:"wide",parsePatterns:q_,defaultParseWidth:"any"})},ts={code:"de",formatDistance:x_,formatLong:__,formatRelative:k_,localize:j_,match:X_,options:{weekStartsOn:1,firstWeekContainsDate:4}},Y_=[{title:"softwareDeveloper",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2024-12-01",endDate:"present",location:"Leipzig, Deutschland",description:["experience.experiences.softwareDeveloperIpoque.description.first","experience.experiences.softwareDeveloperIpoque.description.second","experience.experiences.softwareDeveloperIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"juniorSoftwareDeveloper",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2024-02-01",endDate:"2024-11-31",location:"Leipzig, Deutschland",description:["experience.experiences.juniorSoftwareDeveloperIpoque.description.first","experience.experiences.juniorSoftwareDeveloperIpoque.description.second","experience.experiences.juniorSoftwareDeveloperIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"workingStudent",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-01-01",endDate:"2023-12-31",location:"Leipzig, Deutschland",description:["experience.experiences.workingStudentIpoque.description.first","experience.experiences.workingStudentIpoque.description.second","experience.experiences.workingStudentIpoque.description.third","experience.experiences.workingStudentIpoque.description.fourth","experience.experiences.workingStudentIpoque.description.fifth","experience.experiences.workingStudentIpoque.description.sixth"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"master",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2023-05-15",endDate:"2023-11-15",location:"Leipzig, Deutschland",description:["experience.experiences.masterIpoque.description.first","experience.experiences.masterIpoque.description.second","experience.experiences.masterIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular","DOM-Spezifikation"]},{title:"bachelor",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-07-01",endDate:"2021-09-31",location:"Leipzig, Deutschland",description:["experience.experiences.bachelorIpoque.description.first","experience.experiences.bachelorIpoque.description.second","experience.experiences.bachelorIpoque.description.third"],skills:["TypeScript","Angular","Compilerbau","DSL"]},{title:"intern",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-01-01",endDate:"2021-02-28",location:"Leipzig, Deutschland",description:["experience.experiences.internIpoque.description.first","experience.experiences.internIpoque.description.second","experience.experiences.internIpoque.description.third"],skills:["TypeScript","Angular","RxJS"]},{title:"workingStudent",company:"GDMcom GmbH",companyUrl:"https://gdmcom.de/",startDate:"2019-06-01",endDate:"2020-12-01",location:"Leipzig, Deutschland",description:["experience.experiences.workingStudentGDM.description.first","experience.experiences.workingStudentGDM.description.second","experience.experiences.workingStudentGDM.description.third"],skills:["Shell-Scription","VBA","Microsoft Office"]}],K_=r=>typeof r=="string",J_=()=>{const{t:r,i18n:e}=Se(),t=Ft("gray.800","gray.200"),n=Ft("gray.500","gray.400"),s=()=>{const i=document.createElement("a");i.href=Pp,i.download="Lebenslauf_Frederic_Bahr.pdf",i.click()};return p.jsxs(H,{width:"full",alignItems:"start",spacing:8,children:[p.jsx(_f,{id:"experience",children:r("experience.title")}),p.jsxs(H,{width:"full",spacing:12,children:[p.jsx(re,{as:"h3",width:"full",textAlign:"center",fontSize:"xl",children:r("experience.subtitle")}),p.jsx(W0,{allowMultiple:!0,width:"full",display:"flex",flexDirection:"column",gap:6,children:Y_.map((i,a)=>p.jsx(U0,{border:"1px solid",borderColor:t,children:({isExpanded:o})=>p.jsxs(p.Fragment,{children:[p.jsx(re,{as:"h4",fontSize:{base:"md",lg:"lg"},children:p.jsxs(V0,{paddingX:4,paddingY:3,children:[p.jsxs(Ye,{width:"full",justifyContent:"space-between",marginRight:4,children:[p.jsxs(Ye,{spacing:1,children:[p.jsx(W,{as:"span",fontSize:{base:"sm",lg:"lg"},children:r(`experience.jobTitles.${i.title}`)}),p.jsx(W,{as:"span",color:"brand.500",children:"@"}),p.jsx(ke,{href:i.companyUrl,isExternal:!0,fontSize:{base:"sm",lg:"lg"},children:i.company})]}),p.jsxs(W,{as:"span",fontSize:{base:"2xs",lg:"md"},children:[es(new Date(i.startDate),"MMM yyyy",{locale:e.language==="de"?ts:void 0})," ","-"," ",i.endDate==="present"?r("experience.present"):es(new Date(i.endDate),"MMM yyyy",{locale:e.language==="de"?ts:void 0})]})]}),p.jsx(G0,{as:uy})]})}),o&&p.jsx(ef,{width:"98%",margin:"auto",borderColor:n}),p.jsx(q0,{paddingBottom:4,paddingX:4,fontSize:"md",marginTop:2,children:p.jsxs(H,{width:"full",alignItems:"start",spacing:6,children:[p.jsxs(an,{direction:{base:"column",lg:"row"},spacing:6,children:[p.jsxs(Ye,{spacing:1,children:[p.jsx(Ae,{as:fy}),p.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:i.location})]}),p.jsxs(Ye,{spacing:1,children:[p.jsx(Ae,{as:$h}),p.jsx(ke,{href:i.companyUrl,isExternal:!0,fontSize:{base:"sm",lg:"lg"},children:i.companyUrl})]})]}),p.jsx(hc,{marginLeft:2,spacing:2,children:K_(i.description)?p.jsxs(_t,{children:[p.jsx(yd,{as:wd,color:"green.500"}),p.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:r(i.description)})]}):p.jsx(p.Fragment,{children:i.description.map(c=>p.jsxs(_t,{display:"flex",children:[p.jsx(yd,{as:wd,color:"green.500"}),p.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:r(c)})]},`experience-${i.title}-${a}-${c}`))})}),p.jsx(an,{direction:{base:"column",lg:"row"},spacing:2,width:"full",children:i.skills.map(c=>p.jsx(me,{colorScheme:"gray",justifyContent:"center",children:c},`experience-${i.title}-${a}-${c}`))})]})})]})},`experience-${i.title}-${a}`))}),p.jsx(wi,{width:"full",justifyContent:"center",children:p.jsx(kf,{size:{base:"md",lg:"lg"},label:r("experience.cv"),onClick:s})})]})]})},Q_=({fill:r})=>p.jsxs(wt,{as:"svg",className:"spotlight",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3787 2842",fill:"none",pointerEvents:"none",position:"absolute",top:-120,left:-250,maxHeight:"100vh",children:[p.jsx("g",{filter:"url(#filter)",children:p.jsx("ellipse",{cx:"2574.71",cy:"273.501",rx:"1424.71",ry:"353.501",transform:"matrix(-0.822377 -0.768943 -0.568943 0.822377 3831.88 2291.09)",fill:r||"white",fillOpacity:"0.27"})}),p.jsx("defs",{children:p.jsxs("filter",{id:"filter",x:"0.860352",y:"0.838989",width:"3785.16",height:"2840.26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[p.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),p.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),p.jsx("feGaussianBlur",{stdDeviation:"151",result:"effect1_foregroundBlur_1065_8"})]})})]}),Wg=["Software Developer","Web Enthusiast","Frederic Bahr"],Z_=()=>{const[r,e]=m0("Frederic Bahr"),[t]=co("(max-width: 62em)");return C.useEffect(()=>{let n=0;const s=setInterval(()=>{e(Wg[n]),n=n===Wg.length-1?0:n+1},4e3);return()=>clearInterval(s)},[]),t?"Frederic Bahr":r},eC=()=>{const{t:r}=Se(),e=Hr(),{colorMode:t}=Jg(),n=Z_(),s=()=>{e("/contact")};return p.jsxs(Ye,{width:"full",children:[p.jsxs(H,{alignItems:"start",marginTop:{base:8,lg:32},spacing:8,children:[p.jsxs(H,{alignItems:"start",spacing:2,children:[p.jsx(W,{fontSize:{base:"sm",lg:"xl"},children:r("hero.intro")}),p.jsx(re,{as:"h1",fontSize:{base:"4xl",lg:"7xl"},color:"brand.500",wordBreak:"break-word",children:n})]}),p.jsx(W,{fontSize:{base:"md",lg:"xl"},maxWidth:{base:"full",lg:"50%"},children:r("hero.subtitle")}),p.jsx(kf,{size:{base:"md",lg:"lg"},alignSelf:{base:"center",lg:"start"},label:r("hero.contact"),onClick:s})]}),t==="dark"&&p.jsx(Q_,{})]})},tC="/portfolio/assets/flow-shop-hero-CY9liu4E.jpg",nC="/portfolio/assets/screenshot-1-sPvSOtkf.png",go=()=>(C.useEffect(()=>{window.scrollTo(0,0)},[]),null),po=({focus:r,period:e,subtitle:t,title:n})=>{const{t:s}=Se();return p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",justifyContent:"space-between",alignItems:"start",children:[p.jsxs(H,{width:"full",maxWidth:{base:"full",lg:"65%"},alignItems:"start",spacing:{base:6,lg:4},children:[p.jsx(re,{as:"h1",color:"brand.500",fontSize:{base:"3xl",lg:"5xl"},children:n}),p.jsx(re,{as:"h2",fontSize:{base:"md",lg:"lg"},fontWeight:400,children:t}),p.jsx(ef,{borderTopWidth:{base:"2px",lg:"3px"},width:{base:"full",lg:"10%"},borderColor:"brand.500"})]}),p.jsxs(an,{direction:{base:"column",lg:"row"},spacing:{base:4,lg:16},whiteSpace:"nowrap",marginTop:{base:4,lg:0},children:[p.jsxs(Df,{children:[p.jsx(If,{children:s("projects.details.period")}),p.jsx(jf,{margin:0,style:{textWrap:"wrap"},children:e})]}),p.jsxs(Df,{children:[p.jsx(If,{children:s("projects.details.focus")}),p.jsx(jf,{margin:0,style:{textWrap:"wrap"},children:r})]})]})]})},sC=()=>{const{t:r,i18n:e}=Se();return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.eaFlowShop.focus"),period:es(new Date("2022-06-01"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0})+" - "+es(new Date("2022-07-31"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0}),title:r("projects.projectTitles.eaFlowShop"),subtitle:r("projects.details.eaFlowShop.subtitle")}),p.jsx(vi,{src:tC,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),p.jsx(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:p.jsxs(ke,{href:"https://github.com/fredericbahr/ea-flow-shop",display:"flex",gap:2,children:[p.jsx(Ae,{as:ki,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Github"})]})}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.eaFlowShop.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.eaFlowShop.implementation")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsx(an,{direction:{base:"column",lg:"row"},width:"full",children:p.jsx(me,{justifyContent:"center",children:"TypeScript"})})]}),p.jsx(H,{width:"full",alignItems:"start",spacing:4,children:p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")})}),p.jsx(vi,{src:nC,width:"full",maxHeight:"50vh",objectFit:"contain"})]})]})]})},iC="/portfolio/assets/appointments-dark-bordeaux-C3PeAb01.jpg",rC="/portfolio/assets/appointments-light-bordeaux-8GdUm38b.jpg",aC="/portfolio/assets/hero-dark-bordeaux-DcvnTf-G.jpg",oC="/portfolio/assets/hero-light-bordeaux-v2m2GUFd.jpg",lC="/portfolio/assets/heroImage-DBfcuPuh.png",cC="/portfolio/assets/photos-dark-bordeaux-Bdch-8Zw.jpg",hC="/portfolio/assets/photos-light-bordeaux-D72iiGaR.jpg",dC="/portfolio/assets/surveys-dark-bordeaux-DMrF2xmB.jpg",uC="/portfolio/assets/surveys-light-bordeaux-aNhYc9F7.jpg",fC="Left",gC="Right",pC="Up",mC="Down",sa={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Yu={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Ug="mousemove",Vg="mouseup",bC="touchend",yC="touchmove",wC="touchstart";function vC(r,e,t,n){return r>e?t>0?gC:fC:n>0?mC:pC}function Gg(r,e){if(e===0)return r;const t=Math.PI/180*e,n=r[0]*Math.cos(t)+r[1]*Math.sin(t),s=r[1]*Math.cos(t)-r[0]*Math.sin(t);return[n,s]}function xC(r,e){const t=d=>{const u="touches"in d;u&&d.touches.length>1||r((f,g)=>{g.trackMouse&&!u&&(document.addEventListener(Ug,n),document.addEventListener(Vg,a));const{clientX:m,clientY:y}=u?d.touches[0]:d,A=Gg([m,y],g.rotationAngle);return g.onTouchStartOrOnMouseDown&&g.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},f),Yu),{initial:A.slice(),xy:A,start:d.timeStamp||0})})},n=d=>{r((u,f)=>{const g="touches"in d;if(g&&d.touches.length>1)return u;if(d.timeStamp-u.start>f.swipeDuration)return u.swiping?Object.assign(Object.assign({},u),{swiping:!1}):u;const{clientX:m,clientY:y}=g?d.touches[0]:d,[A,v]=Gg([m,y],f.rotationAngle),S=A-u.xy[0],E=v-u.xy[1],_=Math.abs(S),k=Math.abs(E),T=(d.timeStamp||0)-u.start,P=Math.sqrt(_*_+k*k)/(T||1),R=[S/(T||1),E/(T||1)],M=vC(_,k,S,E),L=typeof f.delta=="number"?f.delta:f.delta[M.toLowerCase()]||sa.delta;if(_<L&&k<L&&!u.swiping)return u;const D={absX:_,absY:k,deltaX:S,deltaY:E,dir:M,event:d,first:u.first,initial:u.initial,velocity:P,vxvy:R};D.first&&f.onSwipeStart&&f.onSwipeStart(D),f.onSwiping&&f.onSwiping(D);let Q=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${M}`])&&(Q=!0),Q&&f.preventScrollOnSwipe&&f.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},u),{first:!1,eventData:D,swiping:!0})})},s=d=>{r((u,f)=>{let g;if(u.swiping&&u.eventData){if(d.timeStamp-u.start<f.swipeDuration){g=Object.assign(Object.assign({},u.eventData),{event:d}),f.onSwiped&&f.onSwiped(g);const m=f[`onSwiped${g.dir}`];m&&m(g)}}else f.onTap&&f.onTap({event:d});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},u),Yu),{eventData:g})})},i=()=>{document.removeEventListener(Ug,n),document.removeEventListener(Vg,a)},a=d=>{i(),s(d)},o=(d,u)=>{let f=()=>{};if(d&&d.addEventListener){const g=Object.assign(Object.assign({},sa.touchEventOptions),u.touchEventOptions),m=[[wC,t,g],[yC,n,Object.assign(Object.assign({},g),u.preventScrollOnSwipe?{passive:!1}:{})],[bC,s,g]];m.forEach(([y,A,v])=>d.addEventListener(y,A,v)),f=()=>m.forEach(([y,A])=>d.removeEventListener(y,A))}return f},h={ref:d=>{d!==null&&r((u,f)=>{if(u.el===d)return u;const g={};return u.el&&u.el!==d&&u.cleanUpTouch&&(u.cleanUpTouch(),g.cleanUpTouch=void 0),f.trackTouch&&d&&(g.cleanUpTouch=o(d,f)),Object.assign(Object.assign(Object.assign({},u),{el:d}),g)})}};return e.trackMouse&&(h.onMouseDown=t),[h,o]}function AC(r,e,t,n){return!e.trackTouch||!r.el?(r.cleanUpTouch&&r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:void 0})):r.cleanUpTouch?e.preventScrollOnSwipe!==t.preventScrollOnSwipe||e.touchEventOptions.passive!==t.touchEventOptions.passive?(r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})):r:Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})}function SC(r){const{trackMouse:e}=r,t=C.useRef(Object.assign({},Yu)),n=C.useRef(Object.assign({},sa)),s=C.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},sa),r);let i;for(i in sa)n.current[i]===void 0&&(n.current[i]=sa[i]);const[a,o]=C.useMemo(()=>xC(c=>t.current=c(t.current,n.current),{trackMouse:e}),[e]);return t.current=AC(t.current,n.current,s.current,o),a}const Tf=({images:r,index:e=0,imageProps:t,onIndexChange:n})=>{const s=C.useRef(null),i=()=>{s.current&&s.current.requestFullscreen()},a=SC({onSwipedRight:()=>n(o(e+1,r.length)),onSwipedLeft:()=>n(o(e-1,r.length)),onTouchEndOrOnMouseUp:i,trackMouse:!0}),o=(c,h)=>(c%h+h)%h;return p.jsxs(H,{width:"full",children:[p.jsxs(Hh,{gridTemplateColumns:"auto 1fr auto",placeItems:"center",width:"full",gap:12,children:[p.jsx(Cn,{"aria-label":"Previous",icon:p.jsx(Ae,{as:gy}),onClick:()=>n(o(e-1,r.length)),size:{base:"xs",lg:"md"}}),p.jsx(vi,{src:r[e],objectFit:"contain",maxWidth:{base:"full",lg:"min(400px, 70%)"},draggable:!0,onClick:i,...a,ref:s,_hover:{cursor:"pointer"},...t}),p.jsx(Cn,{"aria-label":"Next",icon:p.jsx(Ae,{as:py}),onClick:()=>n(o(e+1,r.length)),size:{base:"xs",lg:"md"}})]}),p.jsx(H,{gap:4,children:p.jsx(Ye,{gap:4,children:Array.from({length:r.length}).map((c,h)=>p.jsx(wt,{minWidth:4,minHeight:1,backgroundColor:e===h?"brand.500":"brand.900",_hover:{cursor:"pointer",transform:"scale(1.2)"},transition:"all 0.2s ease-in-out",onClick:()=>n(h)},h))})})]})},EC=()=>{const{t:r,i18n:e}=Se(),[t,n]=C.useState(0),s=i=>{n(i)};return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.kirmize.focus"),period:es(new Date("2022-04-01"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0})+" - "+r("projects.details.present"),title:r("projects.projectTitles.kirmize"),subtitle:r("projects.details.kirmize.subtitle")}),p.jsx(vi,{src:lC,width:"full",maxHeight:"35vh",objectFit:"contain",marginTop:{base:4,lg:0}}),p.jsx(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:p.jsxs(ke,{href:"https://kirmize.netlify.app",display:"flex",gap:2,children:[p.jsx(Ae,{as:$h,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Website"})]})}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.kirmize.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.kirmize.implementation")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",children:[p.jsx(me,{justifyContent:"center",children:"TypeScript"}),p.jsx(me,{justifyContent:"center",children:"React"}),p.jsx(me,{justifyContent:"center",children:"Chakra UI"}),p.jsx(me,{justifyContent:"center",children:"Express"}),p.jsx(me,{justifyContent:"center",children:"Prisma"}),p.jsx(me,{justifyContent:"center",children:"Mongo DB"})]})]})]}),p.jsxs(H,{width:"full",alignItems:"start",children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),p.jsx(wt,{alignSelf:"center",width:"full",children:p.jsx(Tf,{images:[aC,oC,iC,rC,cC,hC,dC,uC],index:t,imageProps:{maxWidth:{base:"80%",lg:"250px"}},onIndexChange:s})})]})]})]})},_C="/portfolio/assets/mmdb-veteran-hero-socJzde0.jpg",CC="/portfolio/assets/screenshot-1-WwQfIWaT.png",kC="/portfolio/assets/screenshot-2-C8c0nTcp.png",TC="/portfolio/assets/screenshot-3-zPyw2luP.png",PC="/portfolio/assets/screenshot-4-BqhILdl0.png",RC="/portfolio/assets/screenshot-5-BK9kGBkn.png",MC="/portfolio/assets/screenshot-6-B08BqXBd.png",LC=()=>{const{t:r,i18n:e}=Se(),[t,n]=C.useState(0),s=i=>{n(i)};return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.multimediaDB.focus"),period:es(new Date("2022-05-31"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0})+" - "+es(new Date("2022-07-27"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0}),title:r("projects.projectTitles.multimediaDB"),subtitle:r("projects.details.multimediaDB.subtitle")}),p.jsx(vi,{src:_C,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),p.jsx(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:p.jsxs(ke,{href:"https://github.com/fredericbahr/mmdba_tierarztpraxis",display:"flex",gap:2,children:[p.jsx(Ae,{as:ki,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Github"})]})}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.multimediaDB.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.multimediaDB.implementation")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",children:[p.jsx(me,{justifyContent:"center",children:"TypeScript"}),p.jsx(me,{justifyContent:"center",children:"React"}),p.jsx(me,{justifyContent:"center",children:"Chakra UI"}),p.jsx(me,{justifyContent:"center",children:"Express"}),p.jsx(me,{justifyContent:"center",children:"Prisma"}),p.jsx(me,{justifyContent:"center",children:"Postgres"})]})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),p.jsx(wt,{alignSelf:"center",width:"full",children:p.jsx(Tf,{images:[CC,kC,TC,PC,RC,MC],index:t,imageProps:{maxWidth:{base:"full",lg:"600px"}},onIndexChange:s})})]})]})]})]})},DC="/portfolio/assets/portfolio-hero-Ur1G_Pbq.jpg",IC=()=>{const{t:r,i18n:e}=Se();return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.portfolio.focus"),period:es(new Date("2024-03-01"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0})+" - "+r("projects.details.present"),title:r("projects.projectTitles.portfolio"),subtitle:r("projects.details.portfolio.subtitle")}),p.jsx(vi,{src:DC,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),p.jsxs(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:[p.jsxs(ke,{href:"https://fredericbahr.github.io/portfolio/",display:"flex",gap:2,children:[p.jsx(Ae,{as:$h,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Website"})]}),p.jsxs(ke,{href:"https://github.com/fredericbahr/portfolio",display:"flex",gap:2,children:[p.jsx(Ae,{as:ki,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Github"})]})]}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.portfolio.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.portfolio.implementation")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",children:[p.jsx(me,{justifyContent:"center",children:"TypeScript"}),p.jsx(me,{justifyContent:"center",children:"React"}),p.jsx(me,{justifyContent:"center",children:"Chakra UI"}),p.jsx(me,{justifyContent:"center",children:"Framer Motion"})]})]})]})]})]})},jC=()=>{const{t:r,i18n:e}=Se();return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.chatbot.focus"),period:es(new Date("2023-01-10"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0})+" - "+es(new Date("2023-03-21"),"MMM. yy",{locale:e.language==="de-DE"?ts:void 0}),title:r("projects.projectTitles.chatbot"),subtitle:r("projects.details.chatbot.subtitle")}),p.jsx(vi,{src:"https://s3-ap-south-1.amazonaws.com/static.awfis.com/wp-content/uploads/2017/07/07184649/ProjectManagement.jpg",width:"full",maxHeight:"35vh",objectFit:"contain",marginTop:{base:4,lg:0}}),p.jsx(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:p.jsxs(ke,{href:"https://github.com/fredericbahr/quatsch-project-22",display:"flex",gap:2,children:[p.jsx(Ae,{as:ki,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Github"})]})}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.chatbot.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.chatbot.implementation")}),p.jsxs(H,{width:"full",alignItems:"start",children:[p.jsxs(W,{children:["* ",r("projects.details.chatbot.rasa-detail")," ",p.jsx(ke,{href:"https://rasa.com/",isExternal:!0,color:"brand.500",children:"Rasa"})]}),p.jsxs(W,{children:["** ",r("projects.details.chatbot.qanary-detail")," ",p.jsx(ke,{href:"https://github.com/WDAqua/Qanary",isExternal:!0,color:"brand.500",children:"Qanary"})]})]})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",children:[p.jsx(me,{justifyContent:"center",children:"TypeScript"}),p.jsx(me,{justifyContent:"center",children:"Qanary"}),p.jsx(me,{justifyContent:"center",children:"Rasa"}),p.jsx(me,{justifyContent:"center",children:"RDF"}),p.jsx(me,{justifyContent:"center",children:"Docker"})]})]}),p.jsx(H,{width:"full",alignItems:"start",spacing:4,children:p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")})})]})]})]})},FC="/portfolio/assets/screenshot-1-CLYFZTYh.png",OC="/portfolio/assets/screenshot-2-D3zWgeMl.png",NC="/portfolio/assets/screenshot-3-C2J4p0uX.png",zC="/portfolio/assets/weather-data-hero-nOFHWKIP.jpg",HC=()=>{const{t:r}=Se(),[e,t]=C.useState(0),n=s=>{t(s)};return p.jsxs(p.Fragment,{children:[p.jsx(go,{}),p.jsxs(H,{width:"full",alignItems:"start",spacing:{base:2,lg:8},marginTop:{base:4,lg:16},children:[p.jsx(po,{focus:r("projects.details.weatherData.focus"),period:"-",title:r("projects.projectTitles.weatherData"),subtitle:r("projects.details.weatherData.subtitle")}),p.jsx(vi,{src:zC,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),p.jsx(Ye,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:p.jsxs(ke,{href:"https://github.com/fredericbahr/dbs_weatherdata",display:"flex",gap:2,children:[p.jsx(Ae,{as:ki,boxSize:{base:5,lg:6}}),p.jsx(W,{as:"span",children:"Github"})]})}),p.jsxs(H,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),p.jsx(W,{children:r("projects.details.weatherData.goal")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),p.jsx(W,{children:r("projects.details.weatherData.implementation")})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),p.jsxs(an,{direction:{base:"column",lg:"row"},width:"full",children:[p.jsx(me,{justifyContent:"center",children:"XML"}),p.jsx(me,{justifyContent:"center",children:"XML Schema Definiton"}),p.jsx(me,{justifyContent:"center",children:"XSL Transformation"}),p.jsx(me,{justifyContent:"center",children:"D3.js"})]})]}),p.jsxs(H,{width:"full",alignItems:"start",spacing:4,children:[p.jsx(re,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),p.jsx(wt,{alignSelf:"center",width:"full",children:p.jsx(Tf,{images:[FC,OC,NC],index:e,onIndexChange:n})})]})]})]})]})},$C=[{title:"kirmize",url:"/kirmize",backgroundType:"lines",links:{website:"https://kirmize.netlify.app"}},{title:"portfolio",url:"/personal-portfolio",backgroundType:"none",links:{github:"https://github.com/fredericbahr/portfolio"}},{title:"chatbot",url:"/quatsch-chatbot-2022",backgroundType:"lines",links:{github:"https://github.com/fredericbahr/quatsch-project-22"}},{title:"multimediaDB",url:"/multimedia-database-veterinary-practice",backgroundType:"contour",links:{github:"https://github.com/fredericbahr/mmdba_tierarztpraxis"}},null,{title:"eaFlowShop",url:"/ea-flow-shop-optimizer",backgroundType:"contour",links:{github:"https://github.com/fredericbahr/ea-flow-shop"}},{title:"weatherData",url:"/xml-weather-visualization",backgroundType:"none",links:{github:"https://github.com/fredericbahr/dbs_weatherdata"}},null],Lc=dh.forwardRef((r,e)=>{const t=X0({...r,ref:e}),n=!!t["aria-selected"],s=Y0("Tabs",t),i=Ft("gray.300","gray.400");return p.jsx(Ku,{__css:s.tab,...t,textTransform:"uppercase",paddingX:3,paddingY:1,minWidth:16,borderBottom:"2px solid",borderColor:n?"brand.300":i,pointerEvents:"none",fontSize:"sm",children:p.jsx(W,{as:"span",visibility:n?"visible":"hidden",children:t.children})})}),BC=({children:r})=>{const{t:e}=Se();return p.jsxs(K0,{defaultIndex:1,children:[p.jsxs(J0,{border:"none",gap:4,children:[p.jsx(Lc,{}),p.jsx(Lc,{children:e("projects.tab")}),p.jsx(Lc,{}),p.jsx(Lc,{})]}),p.jsxs(Q0,{children:[p.jsx(Ac,{children:r&&r[0]}),p.jsx(Ac,{children:r&&r[1]}),p.jsx(Ac,{children:r&&r[2]}),p.jsx(Ac,{children:r&&r[3]})]})]})},WC=({title:r,url:e,backgroundType:t="none",links:n,...s})=>{const i=Hr(),{t:a}=Se(),[o]=co("(max-width: 62em)"),[c,h]=Ju("colors",["gray.200","gray.700"]).map(S=>S.replace("#","%23").toLowerCase()),d=Ft("white","gray.800"),u=Ft("gray.300","gray.600"),f=Ft("gray.100","gray.700"),g=Ft(c,h),m=Ft("blackAlpha.800","whiteAlpha.800"),y=()=>t==="none"?{backgroundColor:d}:t==="lines"?{backgroundImage:`repeating-linear-gradient(-45deg, ${f} 0, ${f} 1.5px, transparent 0, transparent 50%);`,backgroundSize:"12px 12px",backgroundColor:d}:t==="contour"?{backgroundImage:`url(
                "data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.dev/svgjs' width='500' height='400' preserveAspectRatio='none' viewBox='0 0 500 400'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1104%26quot%3b)' fill='none'%3e%3cuse xlink:href='%23SvgjsPath1105' x='30' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='30' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='30' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='30' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='90' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='90' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='90' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='90' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='150' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='150' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='150' y='150' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='150' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='150' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='150' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='150' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='210' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='210' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='210' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='210' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='270' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='270' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='270' y='150' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='270' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='270' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='270' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='270' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='330' y='30' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='330' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='330' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='330' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='390' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='390' y='210' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='390' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='390' y='390' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='450' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='450' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='450' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='270' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='450' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='390' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='510' y='30' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='510' y='90' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='510' y='150' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='510' y='210' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='510' y='270' stroke='${g}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='510' y='330' stroke='${g}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='510' y='390' stroke='${g}'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1104'%3e%3crect width='500' height='400' fill='white'%3e%3c/rect%3e%3c/mask%3e%3cpath d='M-1 0 a1 1 0 1 0 2 0 a1 1 0 1 0 -2 0z' id='SvgjsPath1105'%3e%3c/path%3e%3cpath d='M-3 0 a3 3 0 1 0 6 0 a3 3 0 1 0 -6 0z' id='SvgjsPath1110'%3e%3c/path%3e%3cpath d='M-5 0 a5 5 0 1 0 10 0 a5 5 0 1 0 -10 0z' id='SvgjsPath1107'%3e%3c/path%3e%3cpath d='M2 -2 L-2 2z' id='SvgjsPath1108'%3e%3c/path%3e%3cpath d='M6 -6 L-6 6z' id='SvgjsPath1106'%3e%3c/path%3e%3cpath d='M30 -30 L-30 30z' id='SvgjsPath1109'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e"
            )`,backgroundColor:d}:{},A=()=>{i(e||"/")},v=(S,E)=>{S.stopPropagation(),window.open(E,"_blank")};return p.jsx(Z0,{className:"project-tile",border:"2px solid",borderColor:u,paddingX:6,paddingY:1,display:"flex",justifyContent:{base:"start",lg:"center"},alignItems:"center",minHeight:"2xs",minWidth:"3xs",transitionProperty:"border-color, transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out",style:{counterIncrement:r&&"projects 1"},sx:{"&:has(+ .project-tile)":{borderLeft:o?"2px solid":"none",borderBottom:o?"none":"2px solid",borderColor:u},"&:has(+ .project-tile-placeholder)":{borderLeft:"none"},"&:nth-child(n+5):not(:hover)":{borderTop:"none"},"&:nth-child(1):not(:hover)":{borderLeft:"2px solid",borderColor:u},"&:nth-child(6):not(:hover)":{borderLeft:"2px solid",borderColor:u},"& .project-tile-placeholder":{marginRight:"-2px"},"&:nth-child(4):not(:hover)":{borderLeft:o?"2px solid":"none",borderColor:u},"&:nth-child(7):not(:hover)":{borderTop:o?"2px solid":"none",borderLeft:o?"2px solid":"none",borderColor:u},"&:hover":{border:"2px solid",borderColor:"brand.500"},"&:hover .project-counter:before":{color:"brand.500"},"&:hover .project-links":{display:"flex"}},_hover:{border:"all",borderColor:"brand.500",borderWidth:4,transform:"scale(1.05)",cursor:"pointer",zIndex:1},...y(),onClick:A,...s,children:p.jsxs(H,{spacing:3,width:"full",children:[r&&p.jsxs(H,{spacing:0,width:"full",alignItems:"start",children:[p.jsx(W,{as:"span",className:"project-counter",alignSelf:"start",_before:{content:"'0' counter(projects) '.'",color:"gray.500",fontSize:"sm",display:"block"}}),p.jsx(re,{as:"h3",color:m,fontSize:{base:"2xl",lg:"3xl"},wordBreak:"break-word",children:r})]}),p.jsxs(Ye,{className:"project-links",display:{base:"block",lg:"none"},justifyContent:"start",width:{base:"full",lg:"auto"},children:[(n==null?void 0:n.website)&&p.jsx(Os,{label:a("projects.website"),hasArrow:!0,openDelay:300,children:p.jsx(Cn,{icon:p.jsx(Ae,{as:$h}),"aria-label":"website",variant:"ghost",colorScheme:"gray",onClick:S=>v(S,n.website||"/")})}),(n==null?void 0:n.github)&&p.jsx(Os,{label:a("projects.github"),hasArrow:!0,openDelay:300,children:p.jsx(Cn,{icon:p.jsx(Ae,{as:ki}),"aria-label":"github",variant:"ghost",colorScheme:"gray",onClick:S=>v(S,n.github||"/")})})]})]})})},UC=()=>{const{t:r}=Se(),[e]=co("(max-width: 62em)");return p.jsxs(H,{width:"full",alignItems:"start",spacing:4,style:{counterReset:"projects 0"},children:[p.jsx(_f,{id:"projects",children:r("projects.title")}),p.jsx(wi,{width:"full",justifyContent:"center",children:p.jsx(BC,{})}),p.jsx(Hh,{width:"full",gridTemplateColumns:{base:"1fr",lg:"repeat(4, 1fr)"},gridTemplateRows:{base:"repeat(6, 1fr)",lg:"repeat(2, 1fr)"},children:$C.map((t,n)=>p.jsx(wt,{className:`project-tile-wrapper-${n}`,display:e&&!t?"none":"block",children:t?p.jsx(WC,{title:r(`projects.projectTitles.${t.title}`),backgroundType:t.backgroundType,links:t.links,url:t.url},`project-tile-${t.title}-${n}`):p.jsx(wt,{className:"project-tile-placeholder",display:{base:"none",lg:"block"}},`project-tile-placeholder-${n}`)},`project-tile-wrapper-${n}`))})]})};function VC(){const{colorScheme:r}=s0(),[e,t]=C.useState(!0);return C.useEffect(()=>{setTimeout(()=>{t(!1)},2800)},[]),p.jsx(ey,{theme:r,children:p.jsxs(lw,{children:[p.jsx(Ln,{path:"/",element:e?p.jsx(wi,{justifyContent:"center",alignItems:"center",height:"100vh",children:p.jsx(X1,{height:"30vh"})}):p.jsxs(Hs,{children:[p.jsx(eC,{}),p.jsx(K1,{}),p.jsx(J_,{}),p.jsx(UC,{})]})}),p.jsx(Ln,{path:"/kirmize",element:p.jsx(Hs,{children:p.jsx(EC,{})})}),p.jsx(Ln,{path:"/personal-portfolio",element:p.jsx(Hs,{children:p.jsx(IC,{})})}),p.jsx(Ln,{path:"/quatsch-chatbot-2022",element:p.jsx(Hs,{children:p.jsx(jC,{})})}),p.jsx(Ln,{path:"/multimedia-database-veterinary-practice",element:p.jsx(Hs,{children:p.jsx(LC,{})})}),p.jsx(Ln,{path:"/ea-flow-shop-optimizer",element:p.jsx(Hs,{children:p.jsx(sC,{})})}),p.jsx(Ln,{path:"/xml-weather-visualization",element:p.jsx(Hs,{children:p.jsx(HC,{})})}),p.jsx(Ln,{path:"contact",element:p.jsx(Hs,{children:p.jsx(pE,{})})}),p.jsx(Ln,{path:"*",element:p.jsx(yp,{to:"/"})})]})})}yy.createRoot(document.getElementById("root")).render(p.jsxs(dh.StrictMode,{children:[p.jsx(ty,{initialColorMode:"dark"}),p.jsx(Lw,{children:p.jsx(W1,{children:p.jsx(VC,{})})})]}));
