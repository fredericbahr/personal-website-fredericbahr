var g0=Object.defineProperty;var Tf=r=>{throw TypeError(r)};var m0=(r,e,t)=>e in r?g0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var G=(r,e,t)=>m0(r,typeof e!="symbol"?e+"":e,t),au=(r,e,t)=>e.has(r)||Tf("Cannot "+t);var l=(r,e,t)=>(au(r,e,"read from private field"),t?t.call(r):e.get(r)),S=(r,e,t)=>e.has(r)?Tf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),y=(r,e,t,n)=>(au(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),v=(r,e,t)=>(au(r,e,"access private method"),t);var Rt=(r,e,t,n)=>({set _(s){y(r,e,s,t)},get _(){return l(r,e,n)}});import{r as _,j as g,C as b0,V as $,H as We,A as y0,a as ie,T as Ps,b as v0,B as Xd,c as W,F as ai,d as Up,e as Vp,f as w0,I as mn,g as we,h as x0,S as Qt,i as ut,u as qp,k as Wa,L as Ae,l as Kd,m as Yd,w as Jd,P as Gp,n as Xp,o as Kp,p as Yp,q as Jp,s as Qp,t as Zp,v as eg,x as kt,y as tg,z as ac,D as yt,E as Qd,O as S0,G as A0,J as E0,K as yc,M as Nh,N as yu,R as ih,Q as _0,U as k0,W as C0,X as T0,Y as P0,Z as L0,_ as R0,$ as M0,a0 as D0,a1 as me,a2 as Pf,a3 as Lf,a4 as Rf,a5 as oi,a6 as I0,a7 as j0,a8 as F0,a9 as O0,aa as N0,ab as vc,ac as z0,ad as $0,ae as H0}from"./chakra-ui-wWhaFj-1.js";import{a as B0,g as ng}from"./react-18Fyy8LS.js";import{I as W0,C as U0,M as V0,a as q0,l as fi,b as sg,P as G0,R as X0,c as K0,L as Y0,d as vu,w as J0,D as Q0,e as Z0,f as zh,g as ey,h as ty}from"./phosphor-icons-C0PpVwZx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var wc={},Mf;function ny(){if(Mf)return wc;Mf=1;var r=B0();return wc.createRoot=r.createRoot,wc.hydrateRoot=r.hydrateRoot,wc}var sy=ny();const iy=ng(sy);var Qa={},Df;function ry(){if(Df)return Qa;Df=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.parse=a,Qa.serialize=h;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function a(f,p){const m=new i,b=f.length;if(b<2)return m;const w=(p==null?void 0:p.decode)||u;let x=0;do{const A=f.indexOf("=",x);if(A===-1)break;const E=f.indexOf(";",x),k=E===-1?b:E;if(A>k){x=f.lastIndexOf(";",A-1)+1;continue}const C=o(f,x,A),T=c(f,A,C),P=f.slice(C,T);if(m[P]===void 0){let L=o(f,A+1,k),R=c(f,k,L);const D=w(f.slice(L,R));m[P]=D}x=k+1}while(x<b);return m}function o(f,p,m){do{const b=f.charCodeAt(p);if(b!==32&&b!==9)return p}while(++p<m);return m}function c(f,p,m){for(;p>m;){const b=f.charCodeAt(--p);if(b!==32&&b!==9)return p+1}return m}function h(f,p,m){const b=(m==null?void 0:m.encode)||encodeURIComponent;if(!r.test(f))throw new TypeError(`argument name is invalid: ${f}`);const w=b(p);if(!e.test(w))throw new TypeError(`argument val is invalid: ${p}`);let x=f+"="+w;if(!m)return x;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);x+="; Max-Age="+m.maxAge}if(m.domain){if(!t.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);x+="; Domain="+m.domain}if(m.path){if(!n.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);x+="; Path="+m.path}if(m.expires){if(!d(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);x+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(x+="; HttpOnly"),m.secure&&(x+="; Secure"),m.partitioned&&(x+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return x}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return s.call(f)==="[object Date]"}return Qa}ry();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var If="popstate";function ay(r={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return wu("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Eo(s)}return ly(e,t,null,r)}function Ee(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ms(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oy(){return Math.random().toString(36).substring(2,10)}function jf(r,e){return{usr:r.state,key:r.key,idx:e}}function wu(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ua(e):e,state:t,key:e&&e.key||n||oy()}}function Eo({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ua(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function ly(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",c=null,h=u();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let w=u(),x=w==null?null:w-h;h=w,c&&c({action:o,location:b.location,delta:x})}function f(w,x){o="PUSH";let A=wu(b.location,w,x);h=u()+1;let E=jf(A,h),k=b.createHref(A);try{a.pushState(E,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(k)}i&&c&&c({action:o,location:b.location,delta:1})}function p(w,x){o="REPLACE";let A=wu(b.location,w,x);h=u();let E=jf(A,h),k=b.createHref(A);a.replaceState(E,"",k),i&&c&&c({action:o,location:b.location,delta:0})}function m(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof w=="string"?w:Eo(w);return A=A.replace(/ $/,"%20"),Ee(x,`No window.location.(origin|href) available to create URL for href: ${A}`),new URL(A,x)}let b={get action(){return o},get location(){return r(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(If,d),c=w,()=>{s.removeEventListener(If,d),c=null}},createHref(w){return e(s,w)},createURL:m,encodeLocation(w){let x=m(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(w){return a.go(w)}};return b}function ig(r,e,t="/"){return cy(r,e,t,!1)}function cy(r,e,t,n){let s=typeof e=="string"?Ua(e):e,i=li(s.pathname||"/",t);if(i==null)return null;let a=rg(r);hy(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let h=xy(i);o=vy(a[c],h,n)}return o}function rg(r,e=[],t=[],n=""){let s=(i,a,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Ee(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let h=Es([n,c.relativePath]),u=t.concat(c);i.children&&i.children.length>0&&(Ee(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),rg(i.children,e,u,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:by(h,i.index),routesMeta:u})};return r.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let c of ag(i.path))s(i,a,c)}),e}function ag(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=ag(n.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function hy(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:yy(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var uy=/^:[\w-]+$/,dy=3,fy=2,py=1,gy=10,my=-2,Ff=r=>r==="*";function by(r,e){let t=r.split("/"),n=t.length;return t.some(Ff)&&(n+=my),e&&(n+=fy),t.filter(s=>!Ff(s)).reduce((s,i)=>s+(uy.test(i)?dy:i===""?py:gy),n)}function yy(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function vy(r,e,t=!1){let{routesMeta:n}=r,s={},i="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],h=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=rh({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},u),f=c.route;if(!d&&h&&t&&!n[n.length-1].route.index&&(d=rh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Es([i,d.pathname]),pathnameBase:_y(Es([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Es([i,d.pathnameBase]))}return a}function rh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=wy(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((h,{paramName:u,isOptional:d},f)=>{if(u==="*"){let m=o[f]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?h[u]=void 0:h[u]=(p||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:r}}function wy(r,e=!1,t=!0){Ms(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function xy(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ms(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function li(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Sy(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Ua(r):r;return{pathname:t?t.startsWith("/")?t:Ay(t,e):e,search:ky(n),hash:Cy(s)}}function Ay(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ou(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ey(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zd(r){let e=Ey(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function ef(r,e,t,n=!1){let s;typeof r=="string"?s=Ua(r):(s={...r},Ee(!s.pathname||!s.pathname.includes("?"),ou("?","pathname","search",s)),Ee(!s.pathname||!s.pathname.includes("#"),ou("#","pathname","hash",s)),Ee(!s.search||!s.search.includes("#"),ou("#","search","hash",s)));let i=r===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}o=d>=0?e[d]:"/"}let c=Sy(s,o),h=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||u)&&(c.pathname+="/"),c}var Es=r=>r.join("/").replace(/\/\/+/g,"/"),_y=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ky=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Cy=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ty(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var og=["POST","PUT","PATCH","DELETE"];new Set(og);var Py=["GET",...og];new Set(Py);var Va=_.createContext(null);Va.displayName="DataRouter";var $h=_.createContext(null);$h.displayName="DataRouterState";var lg=_.createContext({isTransitioning:!1});lg.displayName="ViewTransition";var Ly=_.createContext(new Map);Ly.displayName="Fetchers";var Ry=_.createContext(null);Ry.displayName="Await";var bn=_.createContext(null);bn.displayName="Navigation";var oc=_.createContext(null);oc.displayName="Location";var qn=_.createContext({outlet:null,matches:[],isDataRoute:!1});qn.displayName="Route";var tf=_.createContext(null);tf.displayName="RouteError";function My(r,{relative:e}={}){Ee(qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=_.useContext(bn),{hash:s,pathname:i,search:a}=lc(r,{relative:e}),o=i;return t!=="/"&&(o=i==="/"?t:Es([t,i])),n.createHref({pathname:o,search:a,hash:s})}function qa(){return _.useContext(oc)!=null}function pi(){return Ee(qa(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(oc).location}var cg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hg(r){_.useContext(bn).static||_.useLayoutEffect(r)}function _r(){let{isDataRoute:r}=_.useContext(qn);return r?Vy():Dy()}function Dy(){Ee(qa(),"useNavigate() may be used only in the context of a <Router> component.");let r=_.useContext(Va),{basename:e,navigator:t}=_.useContext(bn),{matches:n}=_.useContext(qn),{pathname:s}=pi(),i=JSON.stringify(Zd(n)),a=_.useRef(!1);return hg(()=>{a.current=!0}),_.useCallback((c,h={})=>{if(Ms(a.current,cg),!a.current)return;if(typeof c=="number"){t.go(c);return}let u=ef(c,JSON.parse(i),s,h.relative==="path");r==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Es([e,u.pathname])),(h.replace?t.replace:t.push)(u,h.state,h)},[e,t,i,s,r])}_.createContext(null);function lc(r,{relative:e}={}){let{matches:t}=_.useContext(qn),{pathname:n}=pi(),s=JSON.stringify(Zd(t));return _.useMemo(()=>ef(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function Iy(r,e){return ug(r,e)}function ug(r,e,t,n){var b;Ee(qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=_.useContext(bn),{matches:i}=_.useContext(qn),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=pi(),u;if(e){let w=typeof e=="string"?Ua(e):e;Ee(c==="/"||((b=w.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),u=w}else u=h;let d=u.pathname||"/",f=d;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=ig(r,{pathname:f}),m=zy(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Es([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Es([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,n);return e&&m?_.createElement(oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...u},navigationType:"POP"}},m):m}function jy(){let r=Uy(),e=Ty(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}var Fy=_.createElement(jy,null),Oy=class extends _.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?_.createElement(qn.Provider,{value:this.props.routeContext},_.createElement(tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ny({routeContext:r,match:e,children:t}){let n=_.useContext(Va);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(qn.Provider,{value:r},t)}function zy(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,i=t==null?void 0:t.errors;if(i!=null){let c=s.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);Ee(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,o=-1;if(t)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(o=c),h.route.id){let{loaderData:u,errors:d}=t,f=h.route.loader&&!u.hasOwnProperty(h.route.id)&&(!d||d[h.route.id]===void 0);if(h.route.lazy||f){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((c,h,u)=>{let d,f=!1,p=null,m=null;t&&(d=i&&h.route.id?i[h.route.id]:void 0,p=h.route.errorElement||Fy,a&&(o<0&&u===0?(qy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):o===u&&(f=!0,m=h.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,u+1)),w=()=>{let x;return d?x=p:f?x=m:h.route.Component?x=_.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=c,_.createElement(Ny,{match:h,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:x})};return t&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?_.createElement(Oy,{location:t.location,revalidation:t.revalidation,component:p,error:d,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function nf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $y(r){let e=_.useContext(Va);return Ee(e,nf(r)),e}function Hy(r){let e=_.useContext($h);return Ee(e,nf(r)),e}function By(r){let e=_.useContext(qn);return Ee(e,nf(r)),e}function sf(r){let e=By(r),t=e.matches[e.matches.length-1];return Ee(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Wy(){return sf("useRouteId")}function Uy(){var n;let r=_.useContext(tf),e=Hy("useRouteError"),t=sf("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function Vy(){let{router:r}=$y("useNavigate"),e=sf("useNavigate"),t=_.useRef(!1);return hg(()=>{t.current=!0}),_.useCallback(async(s,i={})=>{Ms(t.current,cg),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...i}))},[r,e])}var Of={};function qy(r,e,t){Of[r]||(Of[r]=!0,Ms(!1,t))}_.memo(Gy);function Gy({routes:r,future:e,state:t}){return ug(r,void 0,t,e)}function dg({to:r,replace:e,state:t,relative:n}){Ee(qa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=_.useContext(bn);Ms(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=_.useContext(qn),{pathname:a}=pi(),o=_r(),c=ef(r,Zd(i),a,n==="path"),h=JSON.stringify(c);return _.useEffect(()=>{o(JSON.parse(h),{replace:e,state:t,relative:n})},[o,h,n,e,t]),null}function xn(r){Ee(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xy({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:i=!1}){Ee(!qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=_.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof t=="string"&&(t=Ua(t));let{pathname:c="/",search:h="",hash:u="",state:d=null,key:f="default"}=t,p=_.useMemo(()=>{let m=li(c,a);return m==null?null:{location:{pathname:m,search:h,hash:u,state:d,key:f},navigationType:n}},[a,c,h,u,d,f,n]);return Ms(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:_.createElement(bn.Provider,{value:o},_.createElement(oc.Provider,{children:e,value:p}))}function Ky({children:r,location:e}){return Iy(xu(r),e)}function xu(r,e=[]){let t=[];return _.Children.forEach(r,(n,s)=>{if(!_.isValidElement(n))return;let i=[...e,s];if(n.type===_.Fragment){t.push.apply(t,xu(n.props.children,i));return}Ee(n.type===xn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ee(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=xu(n.props.children,i)),t.push(a)}),t}var Lc="get",Rc="application/x-www-form-urlencoded";function Hh(r){return r!=null&&typeof r.tagName=="string"}function Yy(r){return Hh(r)&&r.tagName.toLowerCase()==="button"}function Jy(r){return Hh(r)&&r.tagName.toLowerCase()==="form"}function Qy(r){return Hh(r)&&r.tagName.toLowerCase()==="input"}function Zy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ev(r,e){return r.button===0&&(!e||e==="_self")&&!Zy(r)}var xc=null;function tv(){if(xc===null)try{new FormData(document.createElement("form"),0),xc=!1}catch{xc=!0}return xc}var nv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lu(r){return r!=null&&!nv.has(r)?(Ms(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rc}"`),null):r}function sv(r,e){let t,n,s,i,a;if(Jy(r)){let o=r.getAttribute("action");n=o?li(o,e):null,t=r.getAttribute("method")||Lc,s=lu(r.getAttribute("enctype"))||Rc,i=new FormData(r)}else if(Yy(r)||Qy(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||o.getAttribute("action");if(n=c?li(c,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Lc,s=lu(r.getAttribute("formenctype"))||lu(o.getAttribute("enctype"))||Rc,i=new FormData(o,r),!tv()){let{name:h,type:u,value:d}=r;if(u==="image"){let f=h?`${h}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else h&&i.append(h,d)}}else{if(Hh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Lc,n=null,s=Rc,a=r}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:i,body:a}}function rf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function iv(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rv(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function av(r,e,t){let n=await Promise.all(r.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await iv(i,t);return a.links?a.links():[]}return[]}));return hv(n.flat(1).filter(rv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Nf(r,e,t,n,s,i){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,o=(c,h)=>{var u;return t[h].pathname!==c.pathname||((u=t[h].route.path)==null?void 0:u.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,h)=>a(c,h)||o(c,h)):i==="data"?e.filter((c,h)=>{var d;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(a(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function ov(r,e){return lv(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function lv(r){return[...new Set(r)]}function cv(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function hv(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let i=JSON.stringify(cv(s));return t.has(i)||(t.add(i),n.push({key:i,link:s})),n},[])}function uv(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function dv(){let r=_.useContext(Va);return rf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function fv(){let r=_.useContext($h);return rf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var af=_.createContext(void 0);af.displayName="FrameworkContext";function fg(){let r=_.useContext(af);return rf(r,"You must render this element inside a <HydratedRouter> element"),r}function pv(r,e){let t=_.useContext(af),[n,s]=_.useState(!1),[i,a]=_.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:u,onTouchStart:d}=e,f=_.useRef(null);_.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let b=x=>{x.forEach(A=>{a(A.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[r]),_.useEffect(()=>{if(n){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[n]);let p=()=>{s(!0)},m=()=>{s(!1),a(!1)};return t?r!=="intent"?[i,f,{}]:[i,f,{onFocus:Za(o,p),onBlur:Za(c,m),onMouseEnter:Za(h,p),onMouseLeave:Za(u,m),onTouchStart:Za(d,p)}]:[!1,f,{}]}function Za(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function gv({page:r,...e}){let{router:t}=dv(),n=_.useMemo(()=>ig(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?_.createElement(bv,{page:r,matches:n,...e}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function mv(r){let{manifest:e,routeModules:t}=fg(),[n,s]=_.useState([]);return _.useEffect(()=>{let i=!1;return av(r,e,t).then(a=>{i||s(a)}),()=>{i=!0}},[r,e,t]),n}function bv({page:r,matches:e,...t}){let n=pi(),{manifest:s,routeModules:i}=fg(),{loaderData:a,matches:o}=fv(),c=_.useMemo(()=>Nf(r,e,o,s,n,"data"),[r,e,o,s,n]),h=_.useMemo(()=>Nf(r,e,o,s,n,"assets"),[r,e,o,s,n]),u=_.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let p=new Set,m=!1;if(e.forEach(w=>{var A;let x=s.routes[w.route.id];!x||!x.hasLoader||(!c.some(E=>E.route.id===w.route.id)&&w.route.id in a&&((A=i[w.route.id])!=null&&A.shouldRevalidate)||x.hasClientLoader?m=!0:p.add(w.route.id))}),p.size===0)return[];let b=uv(r);return m&&p.size>0&&b.searchParams.set("_routes",e.filter(w=>p.has(w.route.id)).map(w=>w.route.id).join(",")),[b.pathname+b.search]},[a,n,s,c,e,r,i]),d=_.useMemo(()=>ov(h,s),[h,s]),f=mv(h);return _.createElement(_.Fragment,null,u.map(p=>_.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),d.map(p=>_.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),f.map(({key:p,link:m})=>_.createElement("link",{key:p,...m})))}function yv(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pg&&(window.__reactRouterVersion="7.0.1")}catch{}function vv({basename:r,children:e,window:t}){let n=_.useRef();n.current==null&&(n.current=ay({window:t,v5Compat:!0}));let s=n.current,[i,a]=_.useState({action:s.action,location:s.location}),o=_.useCallback(c=>{_.startTransition(()=>a(c))},[a]);return _.useLayoutEffect(()=>s.listen(o),[s,o]),_.createElement(Xy,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:s})}var gg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mg=_.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:c,to:h,preventScrollReset:u,viewTransition:d,...f},p){let{basename:m}=_.useContext(bn),b=typeof h=="string"&&gg.test(h),w,x=!1;if(typeof h=="string"&&b&&(w=h,pg))try{let R=new URL(window.location.href),D=h.startsWith("//")?new URL(R.protocol+h):new URL(h),M=li(D.pathname,m);D.origin===R.origin&&M!=null?h=M+D.search+D.hash:x=!0}catch{Ms(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=My(h,{relative:s}),[E,k,C]=pv(n,f),T=Av(h,{replace:a,state:o,target:c,preventScrollReset:u,relative:s,viewTransition:d});function P(R){e&&e(R),R.defaultPrevented||T(R)}let L=_.createElement("a",{...f,...C,href:w||A,onClick:x||i?e:P,ref:yv(p,k),target:c,"data-discover":!b&&t==="render"?"true":void 0});return E&&!b?_.createElement(_.Fragment,null,L,_.createElement(gv,{page:A})):L});mg.displayName="Link";var wv=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:c,...h},u){let d=lc(a,{relative:h.relative}),f=pi(),p=_.useContext($h),{navigator:m,basename:b}=_.useContext(bn),w=p!=null&&Tv(d)&&o===!0,x=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,A=f.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(A=A.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&b&&(E=li(E,b)||E);const k=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=A===x||!s&&A.startsWith(x)&&A.charAt(k)==="/",T=E!=null&&(E===x||!s&&E.startsWith(x)&&E.charAt(x.length)==="/"),P={isActive:C,isPending:T,isTransitioning:w},L=C?e:void 0,R;typeof n=="function"?R=n(P):R=[n,C?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(P):i;return _.createElement(mg,{...h,"aria-current":L,className:R,ref:u,style:D,to:a,viewTransition:o},typeof c=="function"?c(P):c)});wv.displayName="NavLink";var xv=_.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:i,method:a=Lc,action:o,onSubmit:c,relative:h,preventScrollReset:u,viewTransition:d,...f},p)=>{let m=kv(),b=Cv(o,{relative:h}),w=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&gg.test(o),A=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let k=E.nativeEvent.submitter,C=(k==null?void 0:k.getAttribute("formmethod"))||a;m(k||E.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:s,state:i,relative:h,preventScrollReset:u,viewTransition:d})};return _.createElement("form",{ref:p,method:w,action:b,onSubmit:n?c:A,...f,"data-discover":!x&&r==="render"?"true":void 0})});xv.displayName="Form";function Sv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bg(r){let e=_.useContext(Va);return Ee(e,Sv(r)),e}function Av(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=_r(),c=pi(),h=lc(r,{relative:i});return _.useCallback(u=>{if(ev(u,e)){u.preventDefault();let d=t!==void 0?t:Eo(c)===Eo(h);o(r,{replace:d,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,h,t,n,e,r,s,i,a])}var Ev=0,_v=()=>`__${String(++Ev)}__`;function kv(){let{router:r}=bg("useSubmit"),{basename:e}=_.useContext(bn),t=Wy();return _.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:c,body:h}=sv(n,e);if(s.navigate===!1){let u=s.fetcherKey||_v();await r.fetch(u,t,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await r.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function Cv(r,{relative:e}={}){let{basename:t}=_.useContext(bn),n=_.useContext(qn);Ee(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...lc(r||".",{relative:e})},a=pi();if(r==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let u=o.toString();i.search=u?`?${u}`:""}}return(!r||r===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Es([t,i.pathname])),Eo(i)}function Tv(r,e={}){let t=_.useContext(lg);Ee(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bg("useViewTransitionState"),s=lc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let i=li(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=li(t.nextLocation.pathname,n)||t.nextLocation.pathname;return rh(s.pathname,a)!=null||rh(s.pathname,i)!=null}new TextEncoder;const q=r=>typeof r=="string",eo=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},zf=r=>r==null?"":""+r,Pv=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Lv=/###/g,$f=r=>r&&r.indexOf("###")>-1?r.replace(Lv,"."):r,Hf=r=>!r||q(r),wo=(r,e,t)=>{const n=q(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Hf(r))return{};const i=$f(n[s]);!r[i]&&t&&(r[i]=new t),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={},++s}return Hf(r)?{}:{obj:r,k:$f(n[s])}},Bf=(r,e,t)=>{const{obj:n,k:s}=wo(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=wo(r,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=wo(r,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=t},Rv=(r,e,t,n)=>{const{obj:s,k:i}=wo(r,e,Object);s[i]=s[i]||[],s[i].push(t)},ah=(r,e)=>{const{obj:t,k:n}=wo(r,e);if(t)return t[n]},Mv=(r,e,t)=>{const n=ah(r,t);return n!==void 0?n:ah(e,t)},yg=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?q(r[n])||r[n]instanceof String||q(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):yg(r[n],e[n],t):r[n]=e[n]);return r},Rr=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Dv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Iv=r=>q(r)?r.replace(/[&<>"'\/]/g,e=>Dv[e]):r;class jv{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Fv=[" ",",","?","!",";"],Ov=new jv(20),Nv=(r,e,t)=>{e=e||"",t=t||"";const n=Fv.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const s=Ov.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(r);if(!i){const a=r.indexOf(t);a>0&&!s.test(r.substring(0,a))&&(i=!0)}return i},Su=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const n=e.split(t);let s=r;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let a,o="";for(let c=i;c<n.length;++c)if(c!==i&&(o+=t),o+=n[c],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<n.length-1)continue;i+=c-i+1;break}s=a}return s},oh=r=>r==null?void 0:r.replace("_","-"),zv={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){var t,n;(n=(t=console==null?void 0:console[r])==null?void 0:t.apply)==null||n.call(t,console,e)}};class lh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||zv,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(q(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new lh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new lh(this.logger,e)}}var $n=new lh;class Bh{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,c]=a;for(let h=0;h<c;h++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,c]=a;for(let h=0;h<c;h++)o.apply(o,[e,...n])})}}class Wf extends Bh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var h,u;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):q(n)&&i?o.push(...n.split(i)):o.push(n)));const c=ah(this.data,o);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),c||!a||!q(n)?c:Su((u=(h=this.data)==null?void 0:h[e])==null?void 0:u[t],n,i)}addResource(e,t,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),Bf(this.data,o,s),i.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(q(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=n,n=t,t=o[1]),this.addNamespaces(t);let c=ah(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?yg(c,n,i):c={...c,...n},Bf(this.data,o,c),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var vg={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(i=>{var a;e=((a=this.processors[i])==null?void 0:a.process(e,t,n,s))??e}),e}};const Uf={};class ch extends Bh{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Pv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$n.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Nv(e,n,s);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:q(i)?[i]:i};const h=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),e=h.join(s)}return{key:e,namespaces:q(i)?[i]:i}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),c=o[o.length-1],h=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode"){if(u){const k=t.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${k}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${k}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:a}const d=this.resolve(e,t);let f=d==null?void 0:d.res;const p=(d==null?void 0:d.usedKey)||a,m=(d==null?void 0:d.exactUsedKey)||a,b=Object.prototype.toString.apply(f),w=["[object Number]","[object Function]","[object RegExp]"],x=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,E=!q(f)&&typeof f!="boolean"&&typeof f!="number";if(A&&f&&E&&w.indexOf(b)<0&&!(q(x)&&Array.isArray(f))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,f,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(d.res=k,d.usedParams=this.getUsedParamsDetails(t),d):k}if(i){const k=Array.isArray(f),C=k?[]:{},T=k?m:p;for(const P in f)if(Object.prototype.hasOwnProperty.call(f,P)){const L=`${T}${i}${P}`;C[P]=this.translate(L,{...t,joinArrays:!1,ns:o}),C[P]===L&&(C[P]=f[P])}f=C}}else if(A&&q(x)&&Array.isArray(f))f=f.join(x),f&&(f=this.extendTranslation(f,e,t,n));else{let k=!1,C=!1;const T=t.count!==void 0&&!q(t.count),P=ch.hasDefaultValue(t),L=T?this.pluralResolver.getSuffix(h,t.count,t):"",R=t.ordinal&&T?this.pluralResolver.getSuffix(h,t.count,{ordinal:!1}):"",D=T&&!t.ordinal&&t.count===0,M=D&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${L}`]||t[`defaultValue${R}`]||t.defaultValue;!this.isValidLookup(f)&&P&&(k=!0,f=M),this.isValidLookup(f)||(C=!0,f=a);const X=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:f,B=P&&M!==f&&this.options.updateMissing;if(C||k||B){if(this.logger.log(B?"updateKey":"missingKey",h,c,a,B?M:f),i){const O=this.resolve(a,{...t,keySeparator:!1});O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let O=0;O<Q.length;O++)K.push(Q[O]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(t.lng||this.language):K.push(t.lng||this.language);const F=(O,Le,Ue)=>{var Se;const Zt=P&&Ue!==f?Ue:X;this.options.missingKeyHandler?this.options.missingKeyHandler(O,c,Le,Zt,B,t):(Se=this.backendConnector)!=null&&Se.saveMissing&&this.backendConnector.saveMissing(O,c,Le,Zt,B,t),this.emit("missingKey",O,c,Le,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?K.forEach(O=>{const Le=this.pluralResolver.getSuffixes(O,t);D&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Le.indexOf(`${this.options.pluralSeparator}zero`)<0&&Le.push(`${this.options.pluralSeparator}zero`),Le.forEach(Ue=>{F([O],a+Ue,t[`defaultValue${Ue}`]||M)})}):F(K,a,M))}f=this.extendTranslation(f,e,t,d,n),C&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${a}`),(C||k)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,k?f:void 0))}return s?(d.res=f,d.usedParams=this.getUsedParamsDetails(t),d):f}extendTranslation(e,t,n,s,i){var h,u;var a=this;if((h=this.i18nFormat)!=null&&h.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=q(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const m=e.match(this.interpolator.nestingRegexp);f=m&&m.length}let p=n.replace&&!q(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||s.usedLng,n),d){const m=e.match(this.interpolator.nestingRegexp),b=m&&m.length;f<b&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,b=new Array(m),w=0;w<m;w++)b[w]=arguments[w];return(i==null?void 0:i[0])===b[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${t[0]}`),null):a.translate(...b,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,c=q(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&n.applyPostProcessor!==!1&&(e=vg.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,i,a,o;return q(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(c,t),u=h.key;s=u;let d=h.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=t.count!==void 0&&!q(t.count),p=f&&!t.ordinal&&t.count===0,m=t.context!==void 0&&(q(t.context)||typeof t.context=="number")&&t.context!=="",b=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(w=>{var x,A;this.isValidLookup(n)||(o=w,!Uf[`${b[0]}-${w}`]&&((x=this.utils)!=null&&x.hasLoadedNamespace)&&!((A=this.utils)!=null&&A.hasLoadedNamespace(o))&&(Uf[`${b[0]}-${w}`]=!0,this.logger.warn(`key "${s}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(E=>{var T;if(this.isValidLookup(n))return;a=E;const k=[u];if((T=this.i18nFormat)!=null&&T.addLookupKeys)this.i18nFormat.addLookupKeys(k,u,E,w,t);else{let P;f&&(P=this.pluralResolver.getSuffix(E,t.count,t));const L=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(k.push(u+P),t.ordinal&&P.indexOf(R)===0&&k.push(u+P.replace(R,this.options.pluralSeparator)),p&&k.push(u+L)),m){const D=`${u}${this.options.contextSeparator}${t.context}`;k.push(D),f&&(k.push(D+P),t.ordinal&&P.indexOf(R)===0&&k.push(D+P.replace(R,this.options.pluralSeparator)),p&&k.push(D+L))}}let C;for(;C=k.pop();)this.isValidLookup(n)||(i=C,n=this.getResource(E,w,C,t))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){var i;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!q(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of t)delete s[i]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Vf{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$n.create("languageUtils")}getScriptPartFromCode(e){if(e=oh(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=oh(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(q(e)&&e.indexOf("-")>-1){let t=Intl.getCanonicalLocales(e)[0];return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),q(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return q(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):q(e)&&i(this.formatLanguageCode(e)),n.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}const qf={zero:0,one:1,two:2,few:3,many:4,other:5},Gf={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class $v{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=$n.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=oh(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Gf;if(!e.match(/-|_/))return Gf;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,i)=>qf[s]-qf[i]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Xf=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Mv(r,e,t);return!i&&s&&q(t)&&(i=Su(r,t,n),i===void 0&&(i=Su(e,t,n))),i},cu=r=>r.replace(/\$/g,"$$$$");class Hv{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=$n.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:h,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:b,nestingOptionsSeparator:w,maxReplaces:x,alwaysFormat:A}=e.interpolation;this.escape=t!==void 0?t:Iv,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Rr(i):a||"{{",this.suffix=o?Rr(o):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Rr(f):p||Rr("$t("),this.nestingSuffix=m?Rr(m):b||Rr(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=x||1e3,this.alwaysFormat=A!==void 0?A:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>(t==null?void 0:t.source)===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){var p;let i,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=m=>{if(m.indexOf(this.formatSeparator)<0){const A=Xf(t,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(A,void 0,n,{...s,...t,interpolationkey:m}):A}const b=m.split(this.formatSeparator),w=b.shift().trim(),x=b.join(this.formatSeparator).trim();return this.format(Xf(t,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),x,n,{...s,...t,interpolationkey:w})};this.resetRegExp();const u=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>cu(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?cu(this.escape(m)):cu(m)}].forEach(m=>{for(o=0;i=m.regex.exec(e);){const b=i[1].trim();if(a=h(b),a===void 0)if(typeof u=="function"){const x=u(e,i,s);a=q(x)?x:""}else if(s&&Object.prototype.hasOwnProperty.call(s,b))a="";else if(d){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${e}`),a="";else!q(a)&&!this.useRawValueToEscape&&(a=zf(a));const w=m.safeValue(a);if(e=e.replace(i[0],w),d?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,a;const o=(c,h)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const d=c.split(new RegExp(`${u}[ ]*{`));let f=`{${d[1]}`;c=d[0],f=this.interpolate(f,a);const p=f.match(/'/g),m=f.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),h&&(a={...h,...a})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${u}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];a={...n},a=a.replace&&!q(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const u=s[1].split(this.formatSeparator).map(d=>d.trim());s[1]=u.shift(),c=u,h=!0}if(i=t(o.call(this,s[1].trim(),a),a),i&&s[0]===e&&!q(i))return i;q(i)||(i=zf(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),h&&(i=c.reduce((u,d)=>this.format(u,d,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const Bv=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();t[u]||(t[u]=h),h==="false"&&(t[u]=!1),h==="true"&&(t[u]=!0),isNaN(h)||(t[u]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},Mr=r=>{const e={};return(t,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=n+JSON.stringify(i);let o=e[a];return o||(o=r(oh(n),s),e[a]=o),o(t)}};class Wv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=$n.create("formatter"),this.options=e,this.formats={number:Mr((t,n)=>{const s=new Intl.NumberFormat(t,{...n});return i=>s.format(i)}),currency:Mr((t,n)=>{const s=new Intl.NumberFormat(t,{...n,style:"currency"});return i=>s.format(i)}),datetime:Mr((t,n)=>{const s=new Intl.DateTimeFormat(t,{...n});return i=>s.format(i)}),relativetime:Mr((t,n)=>{const s=new Intl.RelativeTimeFormat(t,{...n});return i=>s.format(i,n.range||"day")}),list:Mr((t,n)=>{const s=new Intl.ListFormat(t,{...n});return i=>s.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Mr(t)}format(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var d;const{formatName:h,formatOptions:u}=Bv(c);if(this.formats[h]){let f=o;try{const p=((d=s==null?void 0:s.formatParams)==null?void 0:d[s.interpolationkey])||{},m=p.locale||p.lng||s.locale||s.lng||n;f=this.formats[h](o,m,{...u,...s,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${h}`);return o},e)}}const Uv=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class Vv extends Bh{constructor(e,t,n){var i,a;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=$n.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(a=(i=this.backend)==null?void 0:i.init)==null||a.call(i,n,s.backend,s)}queueLoad(e,t,n,s){const i={},a={},o={},c={};return e.forEach(h=>{let u=!0;t.forEach(d=>{const f=`${h}|${d}`;!n.reload&&this.store.hasResourceBundle(h,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,u=!1,a[f]===void 0&&(a[f]=!0),i[f]===void 0&&(i[f]=!0),c[d]===void 0&&(c[d]=!0)))}),u||(o[h]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,n){const s=e.split("|"),i=s[0],a=s[1];t&&this.emit("failedLoading",i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(c=>{Rv(c.loaded,[i],a),Uv(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{o[h]||(o[h]={});const u=c.loaded[h];u.length&&u.forEach(d=>{o[h][d]===void 0&&(o[h][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:i,callback:a});return}this.readingCalls++;const o=(h,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(h&&u&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,i*2,a)},i);return}a(h,u)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(u=>o(null,u)).catch(o):o(null,h)}catch(h){o(h)}return}return c(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();q(e)&&(e=this.languageUtils.toResolveHierarchy(e)),q(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,s,i){var c,h,u,d,f;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace&&!((d=(u=this.services)==null?void 0:u.utils)!=null&&d.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((f=this.backend)!=null&&f.create){const p={...a,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let b;m.length===5?b=m(e,t,n,s,p):b=m(e,t,n,s),b&&typeof b.then=="function"?b.then(w=>o(null,w)).catch(o):o(null,b)}catch(b){o(b)}else m(e,t,n,s,o,p)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Kf=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),q(r[1])&&(e.defaultValue=r[1]),q(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Yf=r=>{var e,t;return q(r.ns)&&(r.ns=[r.ns]),q(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),q(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((t=(e=r.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},Sc=()=>{},qv=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class _o extends Bh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Yf(e),this.services={},this.logger=$n,this.modules={external:[]},qv(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(q(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Kf();this.options={...s,...this.options,...Yf(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?$n.init(i(this.modules.logger),this.options):$n.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Wv;const d=new Vf(this.options);this.store=new Wf(this.options.resources,this.options);const f=this.services;f.logger=$n,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new $v(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=i(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Hv(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Vv(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(p){for(var m=arguments.length,b=new Array(m>1?m-1:0),w=1;w<m;w++)b[w-1]=arguments[w];e.emit(p,...b)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new ch(this.services,this.options),this.translator.on("*",function(p){for(var m=arguments.length,b=new Array(m>1?m-1:0),w=1;w<m;w++)b[w-1]=arguments[w];e.emit(p,...b)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Sc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=eo(),h=()=>{const u=(d,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),n(d,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),c}loadResources(e){var i,a;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc;const s=q(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>c(u)),(a=(i=this.options.preload)==null?void 0:i.forEach)==null||a.call(i,h=>c(h)),this.services.backendConnector.load(o,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(h)})}else n(null)}reloadResources(e,t,n){const s=eo();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Sc),this.services.backendConnector.reload(e,t,i=>{s.resolve(),n(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&vg.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=eo();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,h)=>{h?(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(c,function(){return n.t(...arguments)})},o=c=>{var u,d;!e&&!c&&this.services.languageDetector&&(c=[]);const h=q(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(d=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||d.call(u,h)),this.loadResources(h,f=>{a(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,n){var s=this;const i=function(a,o){let c;if(typeof o!="object"){for(var h=arguments.length,u=new Array(h>2?h-2:0),d=2;d<h;d++)u[d-2]=arguments[d];c=s.options.overloadTranslationOptionHandler([a,o].concat(u))}else c={...o};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const f=s.options.keySeparator||".";let p;return c.keyPrefix&&Array.isArray(a)?p=a.map(m=>`${c.keyPrefix}${f}${m}`):p=c.keyPrefix?`${c.keyPrefix}${f}${a}`:a,s.t(p,c)};return q(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.translate(...t)}exists(){var s;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=this.translator)==null?void 0:s.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const h=this.services.backendConnector.state[`${o}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!s||a(i,e)))}loadNamespaces(e,t){const n=eo();return this.options.ns?(q(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=eo();q(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((i=this.services)==null?void 0:i.languageUtils)||new Vf(Kf());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new _o(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new _o(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new Wf(this.store.data,s),i.services.resourceStore=i.store),i.translator=new ch(i.services,s),i.translator.on("*",function(o){for(var c=arguments.length,h=new Array(c>1?c-1:0),u=1;u<c;u++)h[u-1]=arguments[u];i.emit(o,...h)}),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const dt=_o.createInstance();dt.createInstance=_o.createInstance;dt.createInstance;dt.dir;dt.init;dt.loadResources;dt.reloadResources;dt.use;dt.changeLanguage;dt.getFixedT;dt.t;dt.exists;dt.setDefaultNamespace;dt.hasLoadedNamespace;dt.loadNamespaces;dt.loadLanguages;const Gv=(...r)=>{console!=null&&console.warn&&(yr(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),console.warn(...r))},Jf={},Au=(...r)=>{yr(r[0])&&Jf[r[0]]||(yr(r[0])&&(Jf[r[0]]=new Date),Gv(...r))},wg=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Eu=(r,e,t)=>{r.loadNamespaces(e,wg(r,t))},Qf=(r,e,t,n)=>{if(yr(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Eu(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,wg(r,n))},Xv=(r,e,t={})=>!e.languages||!e.languages.length?(Au("i18n.languages were undefined or empty",e.languages),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{var i;if(((i=t.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),yr=r=>typeof r=="string",Kv=r=>typeof r=="object"&&r!==null,Yv=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Jv={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Qv=r=>Jv[r],Zv=r=>r.replace(Yv,Qv);let _u={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Zv};const ew=(r={})=>{_u={..._u,...r}},tw=()=>_u;let xg;const nw=r=>{xg=r},sw=()=>xg,iw={type:"3rdParty",init(r){ew(r.options.react),nw(r)}},rw=_.createContext();class aw{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const ow=(r,e)=>{const t=_.useRef();return _.useEffect(()=>{t.current=r},[r,e]),t.current},Sg=(r,e,t,n)=>r.getFixedT(e,t,n),lw=(r,e,t,n)=>_.useCallback(Sg(r,e,t,n),[r,e,t,n]),xe=(r,e={})=>{var k,C,T,P;const{i18n:t}=e,{i18n:n,defaultNS:s}=_.useContext(rw)||{},i=t||n||sw();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new aw),!i){Au("You will need to pass in an i18next instance by using initReactI18next");const L=(D,M)=>yr(M)?M:Kv(M)&&yr(M.defaultValue)?M.defaultValue:Array.isArray(D)?D[D.length-1]:D,R=[L,{},!1];return R.t=L,R.i18n={},R.ready=!1,R}(k=i.options.react)!=null&&k.wait&&Au("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...tw(),...i.options.react,...e},{useSuspense:o,keyPrefix:c}=a;let h=s||((C=i.options)==null?void 0:C.defaultNS);h=yr(h)?[h]:h||["translation"],(P=(T=i.reportNamespaces).addUsedNamespaces)==null||P.call(T,h);const u=(i.isInitialized||i.initializedStoreOnce)&&h.every(L=>Xv(L,i,a)),d=lw(i,e.lng||null,a.nsMode==="fallback"?h:h[0],c),f=()=>d,p=()=>Sg(i,e.lng||null,a.nsMode==="fallback"?h:h[0],c),[m,b]=_.useState(f);let w=h.join();e.lng&&(w=`${e.lng}${w}`);const x=ow(w),A=_.useRef(!0);_.useEffect(()=>{const{bindI18n:L,bindI18nStore:R}=a;A.current=!0,!u&&!o&&(e.lng?Qf(i,e.lng,h,()=>{A.current&&b(p)}):Eu(i,h,()=>{A.current&&b(p)})),u&&x&&x!==w&&A.current&&b(p);const D=()=>{A.current&&b(p)};return L&&(i==null||i.on(L,D)),R&&(i==null||i.store.on(R,D)),()=>{A.current=!1,i&&(L==null||L.split(" ").forEach(M=>i.off(M,D))),R&&i&&R.split(" ").forEach(M=>i.store.off(M,D))}},[i,w]),_.useEffect(()=>{A.current&&u&&b(f)},[i,c,u]);const E=[m,i,u];if(E.t=m,E.i18n=i,E.ready=u,u||!u&&!o)return E;throw new Promise(L=>{e.lng?Qf(i,e.lng,h,()=>L()):Eu(i,h,()=>L())})},cw={about:"Über mich",experience:"Erfahrung",projects:"Projekte",contact:"Kontakt",themeSwitch:{title:"Passe die UI an",light:"Heller Modus",dark:"Dunkler Modus",bordeaux:"Bordeaux",green:"Grün",lime:"Limette"},languageSwitch:{title:"Passe die Sprache an",german:"Deutsch",english:"Englisch"}},hw={intro:"Hey, ich bin",subtitle:"Ich entwickle leidenschaftlich innovative Lösungen zur Optimierung von Arbeitsabläufen und Steigerung der Produktivität der Nutzer durch benutzerfreundliche Webanwendungen.",contact:"Kontakt"},uw={title:"Über mich",introduction:"Ich bin Frederic Bahr, ein leidenschaftlicher Softwareentwickler aus Leipzig, Deutschland. Seit meiner ersten Berührung im Jahr 2017 während eines Schulprojektes entdeckte ich meine Leidenschaft für die Webentwicklung. Seither verbessere und vertiefe ich kontinuierlich meine Fähigkeiten und Kenntnisse. Darüberhinaus bietet mir ein akademischer Hintergrund in Medieninformatik ein solides Fundament und untermauert meine Expertise.",main:"Besonders fasziniert bin ich von der Entwicklung hochwertiger User Interfaces, die durch eine intuitive Benutzeroberfläche Prozesse für Nutzer vereinfachen. Meine Begeisterung für dieses Feld treibt mich dazu an, stets neue Technologien und Frameworks zu erforschen und mich weiterzuentwickeln. Dabei lege ich großen Wert auf eine saubere und strukturierte Codebasis, die eine Wartbarkeit und Skalierbarkeit gewährleistet.",volunteering:"Neben meiner beruflichen Tätigkeit entwickel ich in meiner Freizeit eine cloudbasierte Anwendung zur Verwaltung von Terminen für kleine Vereine in meiner Heimat.",technologies:"Mit einem klaren Fokus auf Qualität und Benutzerfreundlichkeit strebe ich danach, innovative Lösungen zu entwickeln, die einen echten Mehrwert bieten. Dafür verwende ich meistens:"},dw={title:"Erfahrung",subtitle:"Mein bisheriger Werdegang",jobTitles:{seniorSoftwareDeveloper:"Senior Software Developer",softwareDeveloper:"Software Developer",juniorSoftwareDeveloper:"Junior Software Developer",workingStudent:"Werkstudent",intern:"Praktikant",bachelor:"Bachelorand",master:"Masterand"},experiences:{softwareDeveloperIpoque:{description:{first:"Entwicklung von User Interfaces im Basis-Team",second:"Implementierung und Wartung von Komponenten für ein internes Designsystem",third:"Implementierung und Wartung eines internen Frameworks für Micro Frontends"}},juniorSoftwareDeveloperIpoque:{description:{first:"Entwicklung von User Interfaces im Basis-Team",second:"Implementierung und Wartung von Komponenten für ein internes Designsystem",third:"Implementierung und Wartung eines internen Frameworks für Micro Frontends"}},workingStudentIpoque:{description:{first:"Weiterentwicklung der DSL und des dazugehörigen Compilers",second:"Implementierung von Plugins für IDEs zur Unterstützung der DSL",third:"Migration der bestehenden Frontend-Tests auf modernere Technologien (Unit- und E2E-Tests)",fourth:"Implementierung und Wartung von Komponenten in das interne Designsystem",fifth:"Implementierung und Wartung eines internen Frontend Frameworks für Micro Frontends",sixth:"Entwicklung von Features in einer Micro Frontend Architektur"}},masterIpoque:{description:{first:"Konzeption, Implementierung und Evaluation framework-agnostischer Lösungen für das Scoping von Web Components in Micro-Frontends zur Vermeidung von Versionskonflikten",second:"Prototypische Implementierung der Lösungen in einer Micro-Frontend-Architektur und Evaluation der Ergebnisse",third:"Untersuchung einer möglichen Lösung zum Scoping von Web Components in Micro-Frontends mit unterschiedlichen Frameworks"}},bachelorIpoque:{description:{first:"Konzeption, Entwurf und Implementierung einer domänenspezifischen Sprache für die Generierung von Komponentenquellcode",second:"Entwurf und Implementierung eines Compilers für die Realisierung der domänenspezifischen Sprache",third:"Generierung von Angular-Komponentenquellcode auf Basis des definierten DSL-Modells"}},internIpoque:{description:{first:"Erstellung generischer Angularkomponenten zur Darstellung von UI-Komponenten in internem Showcase",second:"Automatisiertes Rendern verschiedener Formularelemente aufgrundlage einer benutzerdefinierten Konfiguration",third:"Reaktive Implementierung der Businesslogik mittels RxJS"}},workingStudentGDM:{description:{first:"Werkstudent in der Abteilung Service ITK",second:"Automatisierung von wiederkehrenden Aufgaben im Bereich der Microsoft Office Suite und Dateisystemen",third:"Prototypische Implementierung einer Automatisierung der Standortdatenpflege basierend auf diversen Dateien"}}},present:"Heute",cv:"Lebenslauf"},fw=JSON.parse('{"title":"Projekte","tab":"Auswahl","website":"Webseite","github":"GitHub","projectTitles":{"kirmize":"Kirmize","portfolio":"Portfolio","chatbot":"QUAtsCH Chatbot ´22","multimediaDB":"Multimedia Datenbank Tierartzpraxis","eaFlowShop":"EA Flow Shop Optimierung","weatherData":"XML Wetterdaten Visualisierung"},"details":{"focus":"Fokus","period":"Zeitraum","present":"Heute","goal":"Ziel","implementation":"Umsetzung","technologies":"Technologien","screenshots":"Screenshots","kirmize":{"focus":"Webentwicklung","subtitle":"Die mobile Webanwendung für die Kirmes zur Planung von Terminen.","goal":"Die Kirmize-App wurde entwickelt, um die Organisation und Planung von Terminen von lokalen Vereinen zu erleichtern. Das Ziel war es, eine benutzerfreundliche und intuitive Anwendung zu schaffen, die es den Nutzern ermöglicht, sich über die verschiedenen Veranstaltungen zu informieren und ihre Teilnahme an den Terminen zu planen. Die App sollte eine klare Struktur und ein ansprechendes Design aufweisen, um die Nutzererfahrung zu verbessern und die Interaktion mit der Anwendung zu erleichtern. Darüber hinaus sollte die Anwendung es ermöglichen Fotos und Videos von den Veranstaltungen hochzuladen und zu teilen. Zusätzlich sollen Umfragen und Abstimmungen duchgeführt werden können, um die Meinung der Nutzer zu verschiedenen Themen zu erfassen.","implementation":"Die Kirmize-App wurde mit React und ChakraUI entwickelt. Die Anwendung wurde als Progressive Web App (PWA) konzipiert, um eine optimale Performance und Benutzererfahrung auf verschiedenen Geräten zu gewährleisten. Die Implementierung erfolgte in enger Zusammenarbeit mit einem lokalen Vereinen, um die Anforderungen und Wünsche der Nutzer zu berücksichtigen. Zur Datenhaltung wird eine MongoDB-Datenbank verwendet, dessen Zugriff mittels Prisma ORM abstrahiert wird. Die Business-Logik der Anwedung wird in einem Express-Backend realisiert, welches die Kommunikation mit der Datenbank und die Bereitstellung der Daten für die Frontend-Anwendung übernimmt. Die Authentifizierung und Autorisierung der Nutzer erfolgt über JSON Web Tokens (JWT)."},"portfolio":{"focus":"Webentwicklung","subtitle":"Implementierung meiner persönlichen Portfolio-Webseite.","goal":"Das Ziel der Entwicklug meines eigenen Portfolios war es, meine bisherigen Projekte und Erfahrungen hervorzuheben, um so meine Fähigkeiten und Kenntnisse zu präsentieren. Zusätzlich diente es als Übung, um meine Fähigkeiten in Bereichen wie Design und Animation zu verbessern. Schließlich erhöht ein Portfolio die Online-Präsenz und erleichtert die Kontaktaufnahme mit potenziellen Arbeitgebern oder Kunden.","implementation":"Zunächst habe ich recherchiert, welche Merkmale in gutes Portfolio erfüllt und dazu Inspirationen gesammelt. Anschließend habe ich die Struktur meiner Webseite geplant und ein Konzept erstellt. Anschließend wurde das Portfolio mit React, ChakraUI und Framer Motion umgesetzt. Das Deployment erfolgt über GitHub Pages."},"chatbot":{"focus":"Question Answering Systeme","subtitle":"Ein Projekt zur Entwicklung eines Chatbots für die Landesanstalt für Umwelt Baden-Württemberg.","goal":"Die Landesanstalt für Umwelt Baden-Württemberg erfasst in einem Netz aus Messstationen Umweltdaten. Aus diesen Daten können Beobachtungen abgeleitet werden, um Aussagen über den Zustand der Ökosysteme zu treffen. Der öffentliche Zugang ermöglicht sowohl Forscher:innen als auch Privatpersonen eine Exploration der beobachteten Biotope. Die Menge und Komplexität der erfassten Daten erfordert neben einem vereinfachten Zugang für die diversen Benutzergruppen auch eine nachvollziehbare Aufbereitung der Informationen. Das Ziel dieses Projekts war es, die Umweltdaten über ein Frage-Antwort-System zugänglich zu machen und die korrekte Eingabe mithilfe von Chatbot-Funktionen zu stützen. Wesentlich hierbei war die Erzeugung eines Kontexts, in welchem eine Frage gestellt werden kann, sodass sie den Anforderungen der Datenquellen entspricht. Des Weiteren war eine Präzisierung der Frage, die Verarbeitung der Datensätze und dessen Darstellung relevant, um die Zugänglichkeit für den jeweiligen Benutzer zu gewährleisten.","implementation":"Um die Projektziele zu erfüllen, wurde eine webbasierte Anwendung entwickelt, welche die jeweiligen Anforderungen bedienen kann. Zur Bearbeitung der Chatbot-Funktionalität wurde der Rasa-Technologie-Stack* benutzt, welcher sowohl die Eingabe in einer webbasierten Oberflächen, die Zuweisung von natürlichsprachigen Anfragen zu Computer-Befehlen als auch die Ausführung der Befehle möglich macht. Das Frage-Antwort-System wurde mithilfe des Qanary-Technologie-Stack** umgesetzt. Diese Technologie ermöglicht es, einzelne Wissensfragmente aus der an das System gestellten Frage zu extrahieren und den Kontext der Frage herzustellen, sodass die Datenquellen abgefragt werden können. Die Präzisierung der Frage, die Verarbeitung und Darstellung der Datensätze konnte ebenfalls über diesen Mechanismus integriert werden.","rasa-detail":"Der Rasa-Technologie-Stack besteht aus Rasa-Chat, Rasa Open Source und Rasa Action Server:","qanary-detail":"Der Qanary-Technologie-Stack besteht aus einer Referenzimplementierung zur Erstellung von Fragebeantwortunssystemen nach der Qanary-Methodik:"},"multimediaDB":{"focus":"Multimedia Datenbanken, Fortgeschrittene Suchalgorithmen","subtitle":"Eine Implementierung einer Software zur Verwendung einer Multimedia Datenbank in einer Tierartztpraxis.","goal":"Das Ziel dieses Universitätsprojekts war es, die Verwendung einer Multimediadatenbank, insbesondere PostgreSQL, in einem nahezu realen Kontext zu präsentieren und zu erlernen. Letztendlich sollte eine erweiterte Suchfunktionalität basierend auf einem der vielfältigen Medientypen implementiert werden. Das Projekt wurde von einem Team aus zwei Studenten durchgeführt und von einem Professor betreut. Es war Teil des Kurses Multimediadatenbanksysteme und wurde in etwa 6 Wochen umgesetzt.","implementation":"Um das definierte Ziel zu erreichen, wurde ein auf die Bedürfnisse von Tierarztpraxen zugeschnittenes System entwickelt, das die Speicherung von Kunden-, Tier- und Medikamentendaten ermöglicht. Die Implementierung verschiedene Suchtechniken bezieht sich auf eine erweiterte Filterung von Medikamentendaten, eine datenbankbasierte Volltextsuche und das Finden von Tieren auf Basis von Bildvergleichen. Die Einführung dieser Suchtechniken soll die Benutzerfreundlichkeit und Funktionalität des Systems im veterinärmedizinischen Bereich verbessern. In diesem Projekt lernten wir erste praktische Erfahrungen in der Datenbankgestaltung und -implementierung sowie der Nutzung von Multimediadaten in spezialisierten Anwendungen sammeln."},"eaFlowShop":{"focus":"Optimierung, Evolutionäre Algorithmen","subtitle":"Ein evolutionärer Algorithmus (GA) zur Optimierung von Flow-Shop Problemen.","goal":"Das Fließbandproblem ist eine klassische Optimierungsherausforderung in Operations Research und Fertigung, bei der eine Reihe von Aufgaben über eine Folge von Maschinen geplant werden müssen, wobei die Gesamtfertigstellungszeit minimiert wird. In diesem Universitätsprojekt bin ich dieses Problem angegangen, indem ich evolutionäre Algorithmen, voranging den Hillclimber und den genetischen Algorithmus, eingesetzt habe, um ihre Wirksamkeit bei der Suche nach optimalen Lösungen zu untersuchen. Das Projekt hatte zusätzlich zum Ziel, ein Rahmen für das Testen verschiedener Methoden evolutionärer Algorithmen zu spannen.","implementation":"In meinem Projekt habe ich die Optimierung des Problems mithilfe von zwei unterschiedlichen evolutionären Algorithmen untersucht: der Hillclimber mit einer Verschiebungsmutation und einem genetischen Algorithmus mit verschiedenen evolutionären Methoden. Für den Hillclimber-Ansatz habe ich einen iterativen Verfeinerungsprozess entwickelt, der darauf abzielte, Lösungen kontinuierlich zu verbessern, indem Aufgaben zwischen Maschinen verschoben werden. Um die Erkundungsfähigkeiten des Algorithmus zu verbessern, habe ich einen Verschiebungsmutationsoperator integriert, der systematisch benachbarte Lösungen erforscht. Im Gegensatz dazu wurde der genetische Algorithmus entworfen, um eine Reihe von genetischen Operatoren und Auswahlstrategien zu testen. Konkret habe ich Methoden wie die Ordnungs-Rekombination, den Ein-Punkt-Crossover, die fitnessproportionale Auswahl, die Besten-Auswahl und die Turnierselektion implementiert. Die Ordnungs-Rekombination förderte die Vielfalt durch die Vermischung genetischen Materials aus Elternlösungen, während der Ein-Punkt-Crossover die Erstellung neuer Lösungen durch den Austausch von genetischem Material als Vorteil aufweiste. Die Auswahlstrategien waren vielfältig: Die fitnessproportionale Auswahl gewährleistete, dass Individuen mit höheren Fitnesswerten wahrscheinlicher ausgewählt wurden, um den evolutionären Prozess hin zu fitteren Lösungen zu lenken. Die Besten-Auswahl erhielt elitäre Lösungen, indem sie Individuen mit den höchsten Fitnesswerten bevorzugte und so über Generationen hinweg eine hochwertige Population aufrechterhielt. Die Turnierselektion hingegen förderte die Vielfalt und erhielt die Lösungsqualität, indem sie eine Teilmenge von Individuen gegeneinander antreten ließ. Diese komplexen Implementierungen ermöglichten eine umfassende Erforschung evolutionärer Techniken zur Bewältigung des Fließbandplanungsproblems und erleichterten Vergleiche zwischen verschiedenen Algorithmen und Strategien."},"weatherData":{"focus":"Data Visualization","subtitle":"Projekt zur Visualisierung von Wetterdaten aus einer XML-Datei.","goal":"Das Hauptziel dieses Universitätsprojekts bestand darin, ein visuelles Verarbeitungssystem für Wetterdaten zu entwickeln, die aus XML-Dateien stammen. Dabei sollten Techniken von Dokumentenbeschreibungssprachen wie XML-Schema-Definition und XSL-Transformation verwendet werden.","implementation":"Das definierte Ziel wurde erreicht, indem ein XML-Schema mit XML-Schema-Definition etabliert wurde, um die Daten effektiv zu strukturieren. Anschließend habe ich die XML-Daten mithilfe eigener XSL-Transformationen transformiert, um eine HTML-Struktur zur Darstellung der Daten zu generieren. Unter Nutzung von D3.js, einer leistungsfähigen JavaScript-Bibliothek für Datenvisualisierung, habe ich eine interaktive Website erstellt, um die verarbeiteten Wetterdaten anzuzeigen. Dieses Projekt demonstrierte nicht nur die Integration von XML-Technologien zur Datenstrukturierung und Transformation, sondern zeigte auch die Fähigkeiten von D3.js bei der Erstellung dynamischer und informativer Visualisierungen im Web."}}}'),pw={text:"Entwickelt von Frederic Bahr mit"},gw={tooltip:"Chatbot öffnen",header:{title:"Chatbot",subtitle:"Stell mir eine Frage!",close:"Schließen"},initialMessage:{firstMessage:"Hi, Ich bin Frederic`s ChatBot 🤖",secondMessage:"Wie kann ich dir helfen?"},sayHello:{actionText:"Ich wollte nur einmal Hallo sagen",firstMessage:"Hi, wie gehts?",secondMessage:"Hey, schön dich kennenzulernen!",thirdMessage:"Danke dass du dir mein Portfolio anschaust.",fourthMessage:"Ich hoffe dir gefällt meine Arbeit.",fifthMessage:"Kann ich dir sonst irgendwie helfen?"},showCV:{actionText:"Zeig mir deinen Lebenslauf.",firstMessage:"Hey, ich interessiere mich für deinen Lebenslauf!",secondMessage:"Danke für dein Interesse.",thirdMessage:"Unten kannst du meinen Lebenslauf herunterladen.",download:"Lebenslauf herunterladen"},directChat:{actionText:"Ich will mit dir persönlich reden.",firstMessage:"Ich mag deinen Chatbot sehr, aber ich würde gerne mit dir direkt reden.",secondMessage:"Schade, aber ich respektiere deine Entscheidung.",thirdMessage:"Schicke meinem Schöpfer eine Nachricht, er wird so schnell wie möglich antworten!"}},mw={github:"GitHub Profil",linkedin:"LinkedIn Profil"},bw={headline:"Komm' mit mir ins Gespräch - Ich bin nur eine Nachricht entfernt!",subtext:"Für eine gute Unterhaltung bin ich immer zu haben, sei es über ein Projekt, ein Jobangebot oder einfach nur, um Hallo zu sagen. Zögere nicht, mich über das Kontaktformular oder direkt per E-Mail zu erreichen.",form:{headline:"Schreib mir eine Nachricht!",name:"Name",email:"E-Mail",message:"Nachricht",submit:"Senden",emailError:"Bitte gib eine gültige E-Mail-Adresse ein."}},yw={navigation:cw,hero:hw,about:uw,experience:dw,projects:fw,footer:pw,chatbot:gw,socials:mw,contact:bw},vw={about:"About",experience:"Experience",projects:"Projects",contact:"Contact me",themeSwitch:{title:"Customize the ui",light:"Light mode",dark:"Dark mode",bordeaux:"Bordeaux",green:"Green",lime:"Lime"},languageSwitch:{title:"Customize the language",german:"German",english:"English"}},ww={intro:"Hey, I am",subtitle:"I specialize in creating innovative solutions designed to streamline processes, drive digital transformation, and enhance the customer experience.",contact:"Contact me"},xw={title:"About me",introduction:"I'm Frederic Bahr, an enthusiastic software developer hailing from Leipzig, Germany. My journey into the world of web development began with a school project back in 2017, igniting a passion that has only grown since. Over time, I've honed and expanded my skills, delving deeper into the intricacies of the field. Moreover, my academic background in media informatics not only lays a strong foundation but also reinforces my expertise in the domain.",main:"I'm particularly fascinated by the development of high-quality user interfaces that streamline processes for users through an intuitive interface. My enthusiasm for this field drives me to constantly explore new technologies and frameworks and to continue evolving. I place great emphasis on maintaining a clean and structured codebase that ensures maintainability and scalability.",volunteering:"In addition to my professional work, I develop a cloud-based application in my free time for managing appointments for small local clubs based in my hometown.",technologies:"With a clear focus on quality and user-friendliness, I strive to develop innovative solutions that provide real value. For this, I mainly use:"},Sw={title:"Experience",subtitle:"My professional journey",jobTitles:{seniorSoftwareDeveloper:"Senior Software Developer",softwareDeveloper:"Software Developer",juniorSoftwareDeveloper:"Junior Software Developer",workingStudent:"Working Student",intern:"Intern",bachelor:"Bachelor thesis",master:"Master thesis"},experiences:{softwareDeveloperIpoque:{description:{first:"Development of User Interfaces in the core team",second:"Implementation and maintenance of components for an internal design system",third:"Implementation and maintenance of an internal frontend framework for micro frontends"}},juniorSoftwareDeveloperIpoque:{description:{first:"Development of User Interfaces in the core team",second:"Implementation and maintenance of components for an internal design system",third:"Implementation and maintenance of an internal frontend framework for micro frontends"}},workingStudentIpoque:{description:{first:"Further development of the DSL and the associated compiler",second:"Implementation of plugins for IDEs to support the DSL",third:"Migration of existing front-end tests to more modern technologies (unit and e2e tests)",fourth:"Implementation and maintenance of components in the internal design system",fifth:"Implementation and maintenance of an internal frontend framework for micro frontends",sixth:"Development of features in a micro front-end architecture"}},masterIpoque:{description:{first:"Conception, implementation and evaluation of framework-agnostic solutions for the scoping of web components in micro-frontends to avoid version conflicts",second:"Prototypical implementation of the solutions in a micro front-end architecture and evaluation of the results",third:"Investigation of a possible solution for scoping web components in micro-frontends with different frameworks"}},bachelorIpoque:{description:{first:"Conception, design and implementation of a domain-specific language for the generation of component source code",second:"Design and implementation of a compiler for the realization of the domain-specific language",third:"Generierung von Angular-Komponentenquellcode auf Basis des definierten DSL-Modells"}},internIpoque:{description:{first:"Creation of generic Angular components to display UI components in an internal showcase",second:"Automated rendering of various form elements based on a user-defined configuration",third:"Reactive implementation of the business logic using RxJS"}},workingStudentGDM:{description:{first:"Working student in the Service ITK department",second:"Automation of recurring tasks in the area of the Microsoft Office Suite and file systems",third:"Prototypical implementation of an automation of location data maintenance based on various files"}}},present:"Present",cv:"Curriculum Vitae"},Aw={title:"Projects",tab:"Featured",website:"Website",github:"GitHub",projectTitles:{kirmize:"Kirmize",portfolio:"Portfolio",chatbot:"QUAtsCH Chatbot ´22",multimediaDB:"Multimedia Database Veterinary Practice",eaFlowShop:"EA Flow Shop Optimization",weatherData:"XML Weather Data Visiualization"},details:{focus:"Focus",period:"Period",present:"Present",goal:"Goal",implementation:"Implementation",technologies:"Technologies",screenshots:"Screenshots",kirmize:{focus:"Web Development",subtitle:"A mobil web application for the digitalization of planning appointments.",goal:"The Kirmize app was developed to facilitate the organization and planning of appointments for local clubs. The goal was to create a user-friendly and intuitive application that allows users to stay informed about various events and plan their attendance. The app should have a clear structure and appealing design to enhance user experience and facilitate interaction with the application. Additionally, the application should allow users to upload and share photos and videos from the events. Furthermore, surveys and polls should be conducted to capture users' opinions on various topics.",implementation:"The Kirmize app was developed using React and ChakraUI. The application was designed as a Progressive Web App (PWA) to ensure optimal performance and user experience across various devices. The implementation was done in close collaboration with local clubs to consider the requirements and preferences of the users. For data storage, a MongoDB database is used, with access abstracted through Prisma ORM. The business logic of the application is implemented in an Express backend, which handles communication with the database and provides data to the frontend application. User authentication and authorization are performed using JSON Web Tokens (JWT)."},portfolio:{focus:"Web Development",subtitle:"My personal portfolio website to showcase my work.",goal:"The goal of creating my own portfolio was to highlight my previous projects and experiences in order to showcase my skills and expertise. Additionally, it served as practice to improve skills such as design and animation. Lastly, a portfolio enhances online presence and facilitates contact with potential employers or clients.",implementation:"First, I researched what features make a good portfolio and gathered inspiration. Then, I planned the structure of my website and created a concept. Subsequently, the portfolio was implemented using React, ChakraUI, and Framer Motion. Deployment is done via GitHub Pages."},chatbot:{focus:"Question Answering System",subtitle:"A prototype of a chatbot for the Landesanstalt für Umwelt Baden-Württemberg.",goal:"The Landesanstalt für Umwelt Baden-Württemberg captures environmental data through a network of monitoring stations. From these data, observations can be derived to make statements about the state of ecosystems. Public access enables both researchers and private individuals to explore the observed biotopes. The quantity and complexity of the collected data require not only simplified access for various user groups but also a comprehensible preparation of the information. The goal of this project was to make environmental data accessible through a question-answer system and to support correct input using chatbot functions. Essential here was the creation of a context in which a question can be asked so that it corresponds to the requirements of the data sources. Furthermore, the clarification of the question, the processing of the data sets, and their presentation were relevant to ensure accessibility for the respective user.",implementation:"To fulfill the project goals, a web-based application was developed, which can meet the respective requirements. For the implementation of the chatbot functionality, the Rasa technology stack* was used, which enables both input in a web-based interface, the mapping of natural language queries to computer commands and the execution of commands. The question-answering system was implemented using the Qanary technology stack**. This technology allows for the extraction of individual knowledge fragments from the question posed to the system and establishing the context of the question so that the data sources can be queried. The clarification of the question, the processing, and presentation of the data sets could also be integrated through this mechanism.","rasa-detail":"The Rasa technology stack consists of Rasa Chat, Rasa Open Source, and Rasa Action Server:","qanary-detail":"The Qanary technology stack consists of a reference implementation for creating question answering systems based on the Qanary methodology:"},multimediaDB:{focus:"Database Management, Advanced Searching",subtitle:"A prototypical software using multimedia database for the digitalization of veterinary practices (Case Study).",goal:"The goal of this university project was to showcase and learn the usage of a multimedia database, specifically PostgreSQL, within a near-real-world context. Ultimately an advances searching functionality based on one of the diverse media types needed to be implemented. The project was conducted in a team of two students and was supervised by a professor. The project was part of the course 'Multimedia Database Systems' and was realised in about 6 weeks.",implementation:"To achieve the defined goal, a system tailored for veterinary practices was developed, allowing for the storage of customer, animal, and medication data. The implementation of various search techniques involved advanced filtering of medication data, database-based full-text search and finding animals based on image comparisons. The introduction of these search techniques aims to enhance the usability and functionality of the system within the veterinary domain. In this project, we gained initial practical experience in database design and implementation, as well as the utilization of multimedia data in specialized applications."},eaFlowShop:{focus:"Optimization, Evolutionary Algorithm",subtitle:"An evolutionary algorithm for the optimization of flow shop scheduling problems.",goal:"The flow shop problem is a classic optimization challenge in operations research and manufacturing, where a set of tasks must be scheduled across a series of machines while minimizing the overall completion time. In this university project, I tackled this problem by employing evolutionary algorithms, namely the hill climber and genetic algorithm, to explore their effectiveness in finding optimal solutions. The project also aimed to be a learning playground for different evolutionary algorithm methods.",implementation:"In my project, I delved into optimizing the problem through two distinct evolutionary algorithms: hill climbing with a shift mutation and a genetic algorithm featuring multiple methods. For the hill climbing approach, I engineered an iterative refinement process aimed at continuously improving solutions by shifting tasks between machines. To enhance the algorithm's exploration capabilities, I integrated a shift mutation operator, which systematically explores neighboring solutions. Conversely, the genetic algorithm was meticulously designed to accommodate a range of genetic operators and selection strategies. Specifically, I implemented order recombination, one-point crossover, fitness-proportional selection, best selection and tournament selection methods. Order recombination fostered diversity by blending genetic material from parent solutions, while one-point crossover facilitated the creation of novel solutions through random genetic material exchange. The selection strategies were varied: fitness-proportional selection ensured that individuals with higher fitness levels were more likely to be chosen, thereby driving the evolutionary process toward fitter solutions. Best selection preserved elite solutions by favoring individuals with the highest fitness values, maintaining a high-quality population over generations. Tournament selection, on the other hand, promoted diversity and maintained solution quality by pitting a subset of individuals against each other for selection. These intricate implementations allowed for a comprehensive exploration of evolutionary techniques in tackling the flow shop scheduling problem, facilitating nuanced comparisons between different algorithms and strategies."},weatherData:{focus:"Data Visualization",subtitle:"A web application for the visualization of weather data based on XML files.",goal:"The primary objective of this university project was to develop a visual processing system for weather data obtained from XML files. Thereby the techniques of Document Description Languages such as XML Schema Definition and XSL Transformation should be used.",implementation:"The defined goal was reached by establishing an XML schema with XML Schema Defintion to structure the data effectively. Subsequently, I transformed the XML data utilizing a custom XSL transformations to generate a HTML structure for representing the data. Leveraging D3.js, a powerful JavaScript library for data visualization, I created an interactive website to display the processed weather data. This project not only demonstrated the integration of XML technologies for data structuring and transformation but also showcased the capabilities of D3.js in rendering dynamic and informative visualizations on the web."}}},Ew={text:"Developed by Frederic Bahr with"},_w={tooltip:"Open the chatbot",header:{title:"Chatbot",subtitle:"Ask me anything!",close:"Close"},initialMessage:{firstMessage:"Hi, I´m Frederic`s ChatBot 🤖",secondMessage:"How can i help you?"},sayHello:{actionText:"I just wanted to say hello",firstMessage:"Hi, whats up?",secondMessage:"Well hello there, nice to meet you!👋",thirdMessage:"Thanks for looking at my personal website.",fourthMessage:"I hope you enjoy my work.",fifthMessage:"Can I help you with anything else?"},showCV:{actionText:"I want to see your CV.",firstMessage:"Hey, im interested in your CV!",secondMessage:"Thanks for reaching out to me.",thirdMessage:"Underneath you can download my CV.",download:"Download CV"},directChat:{actionText:"I want to talk to you directly.",firstMessage:"I really like your Chatbot, but i would rather talk to you directly.",secondMessage:"Sad times, but I respect your decision.",thirdMessage:"Send my creator a message and he will answer as soon as possible!"}},kw={github:"GitHub Profile",linkedin:"LinkedIn Profile"},Cw={headline:"Get in touch",subtext:"I'm always open for a good chat, whether it's about a project, a job offer, or just to say hello. Feel free to reach out to me via the contact form or directly via email.",form:{headline:"Send me a message!",name:"Name",email:"Email",message:"Message",submit:"Send message",emailError:"Please enter a valid email address."}},Tw={navigation:vw,hero:ww,about:xw,experience:Sw,projects:Aw,footer:Ew,chatbot:_w,socials:kw,contact:Cw},Pw={en:{translation:Tw},de:{translation:yw}};dt.use(iw).init({resources:Pw,lng:"de",fallbackLng:"de",interpolation:{escapeValue:!1}});const Lw=()=>g.jsxs("svg",{width:"20mm",height:"20mm",viewBox:"0 0 20 20",version:"1.1",id:"svg1139",children:[g.jsx("title",{id:"title200",children:"Chatbot icon"}),g.jsxs("defs",{id:"defs1133",children:[g.jsx("clipPath",{clipPathUnits:"userSpaceOnUse",id:"clipPath5238-1-8-9-8-4",children:g.jsx("rect",{transform:"rotate(-90)",style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#ffffff",fillOpacity:1,fillRule:"evenodd",stroke:"none"},id:"rect5240-2-3-9-5-1",width:"315.35437",height:"744.09448",x:"-1016.9291",y:"1461.6753"})}),g.jsx("clipPath",{clipPathUnits:"userSpaceOnUse",id:"clipPath5242-3-9-7-7",children:g.jsx("rect",{transform:"rotate(-90)",style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#ffffff",fillOpacity:1,fillRule:"evenodd",stroke:"none"},id:"rect5244-3-2-6-6",width:"315.35437",height:"744.09448",x:"-1016.9291",y:"1461.6753"})})]}),g.jsx("g",{id:"layer1",transform:"translate(-25.414562,-111.28127)",children:g.jsx("path",{style:{color:"#000000",display:"inline",overflow:"visible",visibility:"visible",fill:"#fbfffe",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:.62069714,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1,marker:"none"},d:"m 35.412312,115.5918 c -1.442046,0 -2.880739,0.49168 -4.052401,1.4748 -0.705182,0.59173 -1.2502,1.31171 -1.628713,2.10012 -0.05253,-0.005 -0.103652,-0.0164 -0.157588,-0.0164 -0.941869,0 -1.70024,0.75836 -1.70024,1.70021 v 2.10134 c 0,0.94184 0.758371,1.70021 1.70024,1.70021 0.05394,0 0.105059,-0.0117 0.157588,-0.0164 0.06777,0.14047 0.137889,0.27991 0.216918,0.41689 0.308938,0.55139 1.134304,0.0793 0.815588,-0.46655 -1.304955,-2.26029 -0.799571,-5.12447 1.199708,-6.80208 1.999326,-1.67765 4.903352,-1.67765 6.902655,0 1.999326,1.67761 2.50471,4.54174 1.199732,6.80208 l -0.01407,0.0234 -0.0094,0.0234 c 0,0 -0.633799,1.40211 -1.878344,1.40211 l -1.575387,-0.0141 c -0.147739,-0.21575 -0.384191,-0.366 -0.666512,-0.366 h -1.015533 c -0.45534,0 -0.821638,0.36752 -0.821638,0.82286 0,0.28087 0.178225,0.49415 0.586056,0.49415 l 3.493009,2.8e-4 c 1.867604,0 2.675336,-1.8335 2.712107,-1.91835 v -0.005 c 0.07832,-0.13578 0.147269,-0.27521 0.214572,-0.41444 0.05488,0.005 0.108342,0.0164 0.164858,0.0164 0.941869,0 1.700237,-0.75836 1.700237,-1.70021 v -2.10134 c 0,-0.94184 -0.75837,-1.70021 -1.700237,-1.70021 -0.05441,0 -0.105762,0.009 -0.158761,0.0164 -0.377627,-0.78846 -0.921023,-1.50837 -1.6263,-2.10014 -1.171614,-0.98312 -2.616355,-1.47481 -4.058451,-1.47481 z m -2.049205,2.98718 c -0.366019,-0.0239 -0.700354,0.0535 -0.992502,0.36114 -0.779049,0.82018 -1.260325,1.9365 -1.260325,3.12533 0,0.98061 0.327722,2.07941 0.879793,2.11951 0.786511,0.0572 2.027657,-0.45928 3.424676,-0.45928 1.480437,0 2.786843,0.57951 3.561606,0.44232 0.469528,-0.083 0.744064,-1.20536 0.744064,-2.10255 0,-1.18883 -0.482452,-2.30515 -1.261524,-3.12533 -0.779054,-0.82021 -1.855342,0 -3.044146,0 -0.743006,0 -1.441646,-0.32109 -2.051642,-0.36114 z m -0.174473,2.02134 c 0.434305,1.7e-4 0.786345,0.35219 0.786486,0.78651 -1.41e-4,0.43431 -0.352181,0.78633 -0.786486,0.78649 -0.434304,-1.6e-4 -0.786345,-0.35218 -0.786485,-0.78649 1.4e-4,-0.43432 0.352181,-0.78634 0.786485,-0.78651 z m 4.452304,0 c 0.434329,1.7e-4 0.786345,0.35219 0.786509,0.78651 -1.66e-4,0.43431 -0.35218,0.78633 -0.786509,0.78649 -0.434304,-1.6e-4 -0.786321,-0.35218 -0.786485,-0.78649 1.64e-4,-0.43432 0.352181,-0.78634 0.786485,-0.78651 z",id:"rect6094-5-9"})})]}),Rw=({onClick:r})=>{const{t:e}=xe();return g.jsx(b0,{paddingX:4,paddingY:4,children:g.jsx($,{children:g.jsxs(We,{width:"full",children:[g.jsx(y0,{icon:g.jsx(Lw,{}),colorScheme:"gray"}),g.jsxs($,{flex:1,children:[g.jsx(ie,{as:"h2",fontSize:"md",children:e("chatbot.header.title")}),g.jsx(ie,{as:"h3",fontSize:"sm",fontWeight:"normal",children:e("chatbot.header.subtitle")})]}),g.jsx(Ps,{label:e("chatbot.header.close"),hasArrow:!0,openDelay:300,children:g.jsx(v0,{onClick:r})})]})})})},Ag="/portfolio/assets/lebenslauf-CJWm1AYW.pdf",Mw=[{message:"chatbot.initialMessage.firstMessage",owner:"bot"},{message:"chatbot.initialMessage.secondMessage",owner:"bot"}],Eg={actionText:"chatbot.sayHello.actionText",messges:[{message:"chatbot.sayHello.firstMessage",owner:"customer"},{message:"chatbot.sayHello.secondMessage",owner:"bot"},{message:"chatbot.sayHello.thirdMessage",owner:"bot"},{message:"chatbot.sayHello.fourthMessage",owner:"bot"},{message:"chatbot.sayHello.fifthMessage",owner:"bot"}],furtherActions:["showCV","directChat"]},_g={actionText:"chatbot.showCV.actionText",messges:[{message:"chatbot.showCV.firstMessage",owner:"customer"},{message:"chatbot.showCV.secondMessage",owner:"bot"},{message:"chatbot.showCV.thirdMessage",owner:"bot"},{type:"pdf",owner:"bot",url:Ag,fileName:"cv_fredericbahr"}],furtherActions:["sayHello","directChat"]},kg={actionText:"chatbot.directChat.actionText",messges:[{message:"chatbot.directChat.firstMessage",owner:"customer"},{message:"chatbot.directChat.secondMessage",owner:"bot"},{message:"chatbot.directChat.thirdMessage",owner:"bot"},{url:"/contact"}],furtherActions:["sayHello","showCV"]},Wh=new Map;Wh.set("sayHello",Eg);Wh.set("showCV",_g);Wh.set("directChat",kg);const Dw=[Eg,_g,kg];function Iw(r){return r.message!==void 0}function jw(r){return r.fileName!==void 0}function Fw(r){return r.url!==void 0}const Ow=({children:r,handleAction:e})=>g.jsx(Xd,{variant:"outline",colorScheme:"gray",onClick:e,children:g.jsx(W,{as:"span",width:"full",style:{textWrap:"wrap"},textAlign:{base:"start",lg:"center"},children:r})}),Nw="modulepreload",zw=function(r){return"/portfolio/"+r},Zf={},Ac=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=zw(c),c in Zf)return;Zf[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Nw,h||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),h)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var xo={};xo.d=(r,e)=>{for(var t in e)xo.o(e,t)&&!xo.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};xo.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var U=globalThis.pdfjsLib={};xo.d(U,{AbortException:()=>Cr,AnnotationEditorLayer:()=>jd,AnnotationEditorParamsType:()=>V,AnnotationEditorType:()=>ne,AnnotationEditorUIManager:()=>wr,AnnotationLayer:()=>OS,AnnotationMode:()=>Ns,CMapCompressionType:()=>Cu,ColorPicker:()=>mh,DOMSVGFactory:()=>cf,DrawLayer:()=>zd,FeatureTest:()=>Ct,GlobalWorkerOptions:()=>_s,ImageKind:()=>Mc,InvalidPDFException:()=>Tg,MissingPDFException:()=>kr,OPS:()=>tn,Outliner:()=>md,PDFDataRangeTransport:()=>Am,PDFDateString:()=>jg,PDFWorker:()=>Wr,PasswordResponses:()=>Ww,PermissionFlag:()=>Bw,PixelsPerInch:()=>ci,RenderingCancelledException:()=>hf,TextLayer:()=>ph,UnexpectedResponseException:()=>Gh,Util:()=>z,VerbosityLevel:()=>Uh,XfaLayer:()=>_m,build:()=>bS,createValidAbsoluteUrl:()=>Gw,fetchData:()=>Qh,getDocument:()=>lS,getFilenameFromUrl:()=>sx,getPdfFilenameFromUrl:()=>ix,getXfaPageViewport:()=>rx,isDataScheme:()=>uf,isPdfFile:()=>df,noContextMenu:()=>Pt,normalizeUnicode:()=>Zw,renderTextLayer:()=>Zx,setLayerDimensions:()=>vr,shadow:()=>se,updateTextLayer:()=>eS,version:()=>mS});const ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Cg=[1,0,0,1,0,0],ku=[.001,0,0,.001,0,0],$w=1e7,hu=1.35,Kt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Ns={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Hw="pdfjs_internal_editor_",ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},V={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Bw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Mc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},to={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Uh={ERRORS:0,WARNINGS:1,INFOS:5},Cu={NONE:0,BINARY:1},tn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Ww={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vh=Uh.WARNINGS;function Uw(r){Number.isInteger(r)&&(Vh=r)}function Vw(){return Vh}function qh(r){Vh>=Uh.INFOS&&console.log(`Info: ${r}`)}function Y(r){Vh>=Uh.WARNINGS&&console.log(`Warning: ${r}`)}function ue(r){throw new Error(r)}function Be(r,e){r||ue(e)}function qw(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Gw(r,e=null,t=null){if(!r)return null;try{if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const s=r.match(/\./g);(s==null?void 0:s.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=Qw(r)}catch{}}const n=e?new URL(r,e):new URL(r);if(qw(n))return n}catch{}return null}function se(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const gi=function(){function e(t,n){this.constructor===e&&ue("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Tu extends gi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Pu extends gi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Tg extends gi{constructor(e){super(e,"InvalidPDFException")}}class kr extends gi{constructor(e){super(e,"MissingPDFException")}}class Gh extends gi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Xw extends gi{constructor(e){super(e,"FormatError")}}class Cr extends gi{constructor(e){super(e,"AbortException")}}function Pg(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&ue("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=r.subarray(s,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Xh(r){typeof r!="string"&&ue("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function Kw(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function of(r){const e=Object.create(null);for(const[t,n]of r)e[t]=n;return e}function Yw(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function Jw(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return se(this,"isLittleEndian",Yw())}static get isEvalSupported(){return se(this,"isEvalSupported",Jw())}static get isOffscreenCanvasSupported(){return se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?se(this,"platform",{isMac:navigator.platform.includes("Mac")}):se(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return se(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const uu=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var Cs,Dc,Lu;class z{static makeHexColor(e,t,n){return`#${uu[e]}${uu[t]}${uu[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,i]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],i[0],a[0]),Math.min(n[1],s[1],i[1],a[1]),Math.max(n[0],s[0],i[0],a[0]),Math.max(n[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-i*s))/2,h=o+c||1,u=o-c||1;return[Math.sqrt(h),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,s,a]}static bezierBoundingBox(e,t,n,s,i,a,o,c,h){return h?(h[0]=Math.min(h[0],e,o),h[1]=Math.min(h[1],t,c),h[2]=Math.max(h[2],e,o),h[3]=Math.max(h[3],t,c)):h=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],v(this,Cs,Lu).call(this,e,n,i,o,t,s,a,c,3*(-e+3*(n-i)+o),6*(e-2*n+i),3*(n-e),h),v(this,Cs,Lu).call(this,e,n,i,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),h),h}}Cs=new WeakSet,Dc=function(e,t,n,s,i,a,o,c,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,p=f*h,m=d*(d*(d*e+3*h*t)+3*f*n)+p*s,b=d*(d*(d*i+3*h*a)+3*f*o)+p*c;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],b),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],b)},Lu=function(e,t,n,s,i,a,o,c,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&v(this,Cs,Dc).call(this,e,t,n,s,i,a,o,c,-d/u,f);return}const p=u**2-4*d*h;if(p<0)return;const m=Math.sqrt(p),b=2*h;v(this,Cs,Dc).call(this,e,t,n,s,i,a,o,c,(-u+m)/b,f),v(this,Cs,Dc).call(this,e,t,n,s,i,a,o,c,(-u-m)/b,f)},S(z,Cs);function Qw(r){return decodeURIComponent(escape(r))}let du=null,ep=null;function Zw(r){return du||(du=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ep=new Map([["ﬅ","ſt"]])),r.replaceAll(du,(e,t,n)=>t?t.normalize("NFKC"):ep.get(n))}function ex(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const r=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(r);else for(let e=0;e<32;e++)r[e]=Math.floor(Math.random()*255);return Pg(r)}const Lg="pdfjs_internal_id_",Gn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Kh{constructor(){this.constructor===Kh&&ue("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,i){return"none"}destroy(e=!1){}}var To;const Ef=class Ef{constructor({enableHWA:e=!1}={}){S(this,To,!1);this.constructor===Ef&&ue("Cannot initialize BaseCanvasFactory."),y(this,To,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,To)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ue("Abstract method `_createCanvas` called.")}};To=new WeakMap;let hh=Ef;class Yh{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Yh&&ue("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?Cu.BINARY:Cu.NONE;return this._fetchData(t,n).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ue("Abstract method `_fetchData` called.")}}class Jh{constructor({baseUrl:e=null}){this.constructor===Jh&&ue("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ue("Abstract method `_fetchData` called.")}}class lf{constructor(){this.constructor===lf&&ue("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ue("Abstract method `_createSVG` called.")}}const Kn="http://www.w3.org/2000/svg",xi=class xi{};G(xi,"CSS",96),G(xi,"PDF",72),G(xi,"PDF_TO_CSS_UNITS",xi.CSS/xi.PDF);let ci=xi;var Ai,Sn,es,At,vh,Ei,N,at,Ir,jr,Ic,Rg,Ru,Fr,io,ro,Mu,ao;class tx extends Kh{constructor({docId:t,ownerDocument:n=globalThis.document}={}){super();S(this,N);S(this,Ai);S(this,Sn);S(this,es);S(this,At);S(this,vh);S(this,Ei,0);y(this,es,t),y(this,At,n)}addFilter(t){if(!t)return"none";let n=l(this,N,at).get(t);if(n)return n;const[s,i,a]=v(this,N,Ic).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(n=l(this,N,at).get(o),n)return l(this,N,at).set(t,n),n;const c=`g_${l(this,es)}_transfer_map_${Rt(this,Ei)._++}`,h=`url(#${c})`;l(this,N,at).set(t,h),l(this,N,at).set(o,h);const u=v(this,N,Fr).call(this,c);return v(this,N,ro).call(this,s,i,a,u),h}addHCMFilter(t,n){var m;const s=`${t}-${n}`,i="base";let a=l(this,N,Ir).get(i);if((a==null?void 0:a.key)===s||(a?((m=a.filter)==null||m.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},l(this,N,Ir).set(i,a)),!t||!n))return a.url;const o=v(this,N,ao).call(this,t);t=z.makeHexColor(...o);const c=v(this,N,ao).call(this,n);if(n=z.makeHexColor(...c),l(this,N,jr).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let b=0;b<=255;b++){const w=b/255;h[b]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=h.join(","),d=`g_${l(this,es)}_hcm_filter`,f=a.filter=v(this,N,Fr).call(this,d);v(this,N,ro).call(this,u,u,u,f),v(this,N,Ru).call(this,f);const p=(b,w)=>{const x=o[b]/255,A=c[b]/255,E=new Array(w+1);for(let k=0;k<=w;k++)E[k]=x+k/w*(A-x);return E.join(",")};return v(this,N,ro).call(this,p(0,5),p(1,5),p(2,5),f),a.url=`url(#${d})`,a.url}addAlphaFilter(t){let n=l(this,N,at).get(t);if(n)return n;const[s]=v(this,N,Ic).call(this,[t]),i=`alpha_${s}`;if(n=l(this,N,at).get(i),n)return l(this,N,at).set(t,n),n;const a=`g_${l(this,es)}_alpha_map_${Rt(this,Ei)._++}`,o=`url(#${a})`;l(this,N,at).set(t,o),l(this,N,at).set(i,o);const c=v(this,N,Fr).call(this,a);return v(this,N,Mu).call(this,s,c),o}addLuminosityFilter(t){let n=l(this,N,at).get(t||"luminosity");if(n)return n;let s,i;if(t?([s]=v(this,N,Ic).call(this,[t]),i=`luminosity_${s}`):i="luminosity",n=l(this,N,at).get(i),n)return l(this,N,at).set(t,n),n;const a=`g_${l(this,es)}_luminosity_map_${Rt(this,Ei)._++}`,o=`url(#${a})`;l(this,N,at).set(t,o),l(this,N,at).set(i,o);const c=v(this,N,Fr).call(this,a);return v(this,N,Rg).call(this,c),t&&v(this,N,Mu).call(this,s,c),o}addHighlightHCMFilter(t,n,s,i,a){var A;const o=`${n}-${s}-${i}-${a}`;let c=l(this,N,Ir).get(t);if((c==null?void 0:c.key)===o||(c?((A=c.filter)==null||A.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,N,Ir).set(t,c)),!n||!s))return c.url;const[h,u]=[n,s].map(v(this,N,ao).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,m]=[i,a].map(v(this,N,ao).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,N,jr).style.color="";const b=(E,k,C)=>{const T=new Array(256),P=(f-d)/C,L=E/255,R=(k-E)/(255*C);let D=0;for(let M=0;M<=C;M++){const J=Math.round(d+M*P),X=L+M*R;for(let B=D;B<=J;B++)T[B]=X;D=J+1}for(let M=D;M<256;M++)T[M]=T[D-1];return T.join(",")},w=`g_${l(this,es)}_hcm_${t}_filter`,x=c.filter=v(this,N,Fr).call(this,w);return v(this,N,Ru).call(this,x),v(this,N,ro).call(this,b(p[0],m[0],5),b(p[1],m[1],5),b(p[2],m[2],5),x),c.url=`url(#${w})`,c.url}destroy(t=!1){t&&l(this,N,Ir).size!==0||(l(this,Sn)&&(l(this,Sn).parentNode.parentNode.remove(),y(this,Sn,null)),l(this,Ai)&&(l(this,Ai).clear(),y(this,Ai,null)),y(this,Ei,0))}}Ai=new WeakMap,Sn=new WeakMap,es=new WeakMap,At=new WeakMap,vh=new WeakMap,Ei=new WeakMap,N=new WeakSet,at=function(){return l(this,Ai)||y(this,Ai,new Map)},Ir=function(){return l(this,vh)||y(this,vh,new Map)},jr=function(){if(!l(this,Sn)){const t=l(this,At).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=l(this,At).createElementNS(Kn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),y(this,Sn,l(this,At).createElementNS(Kn,"defs")),t.append(s),s.append(l(this,Sn)),l(this,At).body.append(t)}return l(this,Sn)},Ic=function(t){if(t.length===1){const h=t[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[n,s,i]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,o[h]=s[h]/255,c[h]=i[h]/255;return[a.join(","),o.join(","),c.join(",")]},Rg=function(t){const n=l(this,At).createElementNS(Kn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Ru=function(t){const n=l(this,At).createElementNS(Kn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Fr=function(t){const n=l(this,At).createElementNS(Kn,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,N,jr).append(n),n},io=function(t,n,s){const i=l(this,At).createElementNS(Kn,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},ro=function(t,n,s,i){const a=l(this,At).createElementNS(Kn,"feComponentTransfer");i.append(a),v(this,N,io).call(this,a,"feFuncR",t),v(this,N,io).call(this,a,"feFuncG",n),v(this,N,io).call(this,a,"feFuncB",s)},Mu=function(t,n){const s=l(this,At).createElementNS(Kn,"feComponentTransfer");n.append(s),v(this,N,io).call(this,s,"feFuncA",t)},ao=function(t){return l(this,N,jr).style.color=t,ff(getComputedStyle(l(this,N,jr)).getPropertyValue("color"))};class nx extends hh{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function Qh(r,e="text"){if(oo(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Mg extends Yh{_fetchData(e,t){return Qh(e,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):Xh(n),compressionType:t}))}}class Dg extends Jh{_fetchData(e){return Qh(e,"arraybuffer").then(t=>new Uint8Array(t))}}class cf extends lf{_createSVG(e){return document.createElementNS(Kn,e)}}class cc{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=i;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,u,d,f;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,u=0,d=0,f=1;break;case 90:h=0,u=1,d=1,f=0;break;case 270:h=0,u=-1,d=-1,f=0;break;case 0:h=1,u=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,m,b,w;h===0?(p=Math.abs(c-e[1])*t+s,m=Math.abs(o-e[0])*t+i,b=(e[3]-e[1])*t,w=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+s,m=Math.abs(c-e[1])*t+i,b=(e[2]-e[0])*t,w=(e[3]-e[1])*t),this.transform=[h*t,u*t,d*t,f*t,p-h*t*o-d*t*c,m-u*t*o-f*t*c],this.width=b,this.height=w}get rawDims(){const{viewBox:e}=this;return se(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new cc({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return z.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=z.applyTransform([e[0],e[1]],this.transform),n=z.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return z.applyInverseTransform([e,t],this.transform)}}class hf extends gi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function uf(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function df(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function sx(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function ix(r,e="document.pdf"){if(typeof r!="string")return e;if(uf(r))return Y('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(r);let i=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||e}class tp{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&Y(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Y(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-s}ms
`);return e.join("")}}function oo(r,e){try{const{protocol:t}=e?new URL(r,e):new URL(r);return t==="http:"||t==="https:"}catch{return!1}}function Pt(r){r.preventDefault()}function Ig(r){console.log("Deprecated API usage: "+r)}let np;class jg{static toDateObject(e){if(!e||typeof e!="string")return null;np||(np=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=np.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const h=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(a+=u,o+=d):h==="+"&&(a-=u,o-=d),new Date(Date.UTC(n,s,i,a,o,c))}}function rx(r,{scale:e=1,rotation:t=0}){const{width:n,height:s}=r.attributes.style,i=[0,0,parseInt(n),parseInt(s)];return new cc({viewBox:i,scale:e,rotation:t})}function ff(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Y(`Not a valid color format: "${r}"`),[0,0,0])}function ax(r){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,ff(n))}e.remove()}function Ce(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform();return[e,t,n,s,i,a]}function Xn(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform().invertSelf();return[e,t,n,s,i,a]}function vr(r,e,t=!1,n=!0){if(e instanceof cc){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=r,o=Ct.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${i}px`,u=o?`round(${c}, 1px)`:`calc(${c})`,d=o?`round(${h}, 1px)`:`calc(${h})`;!t||e.rotation%180===0?(a.width=u,a.height=d):(a.width=d,a.height=u)}n&&r.setAttribute("data-main-rotation",e.rotation)}var _i,ki,It,Ci,wh,Fg,vt,Og,Ng,jc,zg,Iu;const xh=class xh{constructor(e){S(this,vt);S(this,_i,null);S(this,ki,null);S(this,It);S(this,Ci,null);y(this,It,e)}render(){const e=y(this,_i,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,It)._uiManager._signal;e.addEventListener("contextmenu",Pt,{signal:t}),e.addEventListener("pointerdown",v(xh,wh,Fg),{signal:t});const n=y(this,Ci,document.createElement("div"));n.className="buttons",e.append(n);const s=l(this,It).toolbarPosition;if(s){const{style:i}=e,a=l(this,It)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return v(this,vt,zg).call(this),e}hide(){var e;l(this,_i).classList.add("hidden"),(e=l(this,ki))==null||e.hideDropdown()}show(){l(this,_i).classList.remove("hidden")}addAltTextButton(e){v(this,vt,jc).call(this,e),l(this,Ci).prepend(e,l(this,vt,Iu))}addColorPicker(e){y(this,ki,e);const t=e.renderButton();v(this,vt,jc).call(this,t),l(this,Ci).prepend(t,l(this,vt,Iu))}remove(){var e;l(this,_i).remove(),(e=l(this,ki))==null||e.destroy(),y(this,ki,null)}};_i=new WeakMap,ki=new WeakMap,It=new WeakMap,Ci=new WeakMap,wh=new WeakSet,Fg=function(e){e.stopPropagation()},vt=new WeakSet,Og=function(e){l(this,It)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Ng=function(e){l(this,It)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},jc=function(e){const t=l(this,It)._uiManager._signal;e.addEventListener("focusin",v(this,vt,Og).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",v(this,vt,Ng).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Pt,{signal:t})},zg=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${l(this,It).editorType}-button`),v(this,vt,jc).call(this,e),e.addEventListener("click",t=>{l(this,It)._uiManager.delete()},{signal:l(this,It)._uiManager._signal}),l(this,Ci).append(e)},Iu=function(){const e=document.createElement("div");return e.className="divider",e},S(xh,wh);let Du=xh;var Po,Ti,Pi,ui,$g,Hg,Bg;class ox{constructor(e){S(this,ui);S(this,Po,null);S(this,Ti,null);S(this,Pi);y(this,Pi,e)}show(e,t,n){const[s,i]=v(this,ui,Hg).call(this,t,n),{style:a}=l(this,Ti)||y(this,Ti,v(this,ui,$g).call(this));e.append(l(this,Ti)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Ti).remove()}}Po=new WeakMap,Ti=new WeakMap,Pi=new WeakMap,ui=new WeakSet,$g=function(){const e=y(this,Ti,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Pt,{signal:l(this,Pi)._signal});const t=y(this,Po,document.createElement("div"));return t.className="buttons",e.append(t),v(this,ui,Bg).call(this),e},Hg=function(e,t){let n=0,s=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const o=i.x+(t?i.width:0);if(a>n){s=o,n=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,n]},Bg=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=l(this,Pi)._signal;e.addEventListener("contextmenu",Pt,{signal:n}),e.addEventListener("click",()=>{l(this,Pi).highlightSelection("floating_button")},{signal:n}),l(this,Po).append(e)};function uh(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}function lx(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}var Sh;class cx{constructor(){S(this,Sh,0)}get id(){return`${Hw}${Rt(this,Sh)._++}`}}Sh=new WeakMap;var Lo,Ah,Vt,Ro,Fu;const _f=class _f{constructor(){S(this,Ro);S(this,Lo,ex());S(this,Ah,0);S(this,Vt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return se(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:i}=e;return v(this,Ro,Fu).call(this,`${t}_${n}_${s}_${i}`,e)}async getFromUrl(e){return v(this,Ro,Fu).call(this,e,e)}async getFromId(e){l(this,Vt)||y(this,Vt,new Map);const t=l(this,Vt).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=l(this,Vt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){l(this,Vt)||y(this,Vt,new Map);const t=l(this,Vt).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${l(this,Lo)}_`)}};Lo=new WeakMap,Ah=new WeakMap,Vt=new WeakMap,Ro=new WeakSet,Fu=async function(e,t){l(this,Vt)||y(this,Vt,new Map);let n=l(this,Vt).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Lo)}_${Rt(this,Ah)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Qh(t,"blob")):s=n.file=t,s.type==="image/svg+xml"){const i=_f._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((h,u)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,h()},a.onload=async()=>{const d=n.svgUrl=a.result;o.src=await i?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=u});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return l(this,Vt).set(e,n),n&&l(this,Vt).set(n.id,n),n};let ju=_f;var Ge,zs,Mo,Xe;class hx{constructor(e=128){S(this,Ge,[]);S(this,zs,!1);S(this,Mo);S(this,Xe,-1);y(this,Mo,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),l(this,zs))return;const c={cmd:e,undo:t,post:n,type:i};if(l(this,Xe)===-1){l(this,Ge).length>0&&(l(this,Ge).length=0),y(this,Xe,0),l(this,Ge).push(c);return}if(a&&l(this,Ge)[l(this,Xe)].type===i){o&&(c.undo=l(this,Ge)[l(this,Xe)].undo),l(this,Ge)[l(this,Xe)]=c;return}const h=l(this,Xe)+1;h===l(this,Mo)?l(this,Ge).splice(0,1):(y(this,Xe,h),h<l(this,Ge).length&&l(this,Ge).splice(h)),l(this,Ge).push(c)}undo(){if(l(this,Xe)===-1)return;y(this,zs,!0);const{undo:e,post:t}=l(this,Ge)[l(this,Xe)];e(),t==null||t(),y(this,zs,!1),y(this,Xe,l(this,Xe)-1)}redo(){if(l(this,Xe)<l(this,Ge).length-1){y(this,Xe,l(this,Xe)+1),y(this,zs,!0);const{cmd:e,post:t}=l(this,Ge)[l(this,Xe)];e(),t==null||t(),y(this,zs,!1)}}hasSomethingToUndo(){return l(this,Xe)!==-1}hasSomethingToRedo(){return l(this,Xe)<l(this,Ge).length-1}destroy(){y(this,Ge,null)}}Ge=new WeakMap,zs=new WeakMap,Mo=new WeakMap,Xe=new WeakMap;var Eh,Wg;class hc{constructor(e){S(this,Eh);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ct.platform;for(const[n,s,i={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(v(this,Eh,Wg).call(this,t));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(s.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}Eh=new WeakSet,Wg=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const _h=class _h{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ax(e),se(this,"_colors",e)}convert(e){const t=ff(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((i,a)=>i===t[a]))return _h._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?z.makeHexColor(...t):e}};G(_h,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ou=_h;var Gr,jt,Oe,Ye,Xr,ts,Kr,nn,Yr,Li,An,sn,Ri,Do,Io,En,Jr,$s,_n,kh,Hs,jo,Mi,Fo,Qr,Je,oe,ns,Di,Oo,No,zo,$o,Ho,Bo,Wo,Uo,Vo,qo,Go,Xo,Ko,Bs,kn,ss,Yo,I,Fc,Ug,Vg,Oc,qg,Gg,Xg,Nu,Kg,zu,$u,Yg,pt,js,Jg,Qg,Hu,Zg,lo,Bu;const Hr=class Hr{constructor(e,t,n,s,i,a,o,c,h){S(this,I);S(this,Gr,new AbortController);S(this,jt,null);S(this,Oe,new Map);S(this,Ye,new Map);S(this,Xr,null);S(this,ts,null);S(this,Kr,null);S(this,nn,new hx);S(this,Yr,0);S(this,Li,new Set);S(this,An,null);S(this,sn,null);S(this,Ri,new Set);S(this,Do,!1);S(this,Io,null);S(this,En,null);S(this,Jr,null);S(this,$s,!1);S(this,_n,null);S(this,kh,new cx);S(this,Hs,!1);S(this,jo,!1);S(this,Mi,null);S(this,Fo,null);S(this,Qr,null);S(this,Je,ne.NONE);S(this,oe,new Set);S(this,ns,null);S(this,Di,null);S(this,Oo,null);S(this,No,this.blur.bind(this));S(this,zo,this.focus.bind(this));S(this,$o,this.copy.bind(this));S(this,Ho,this.cut.bind(this));S(this,Bo,this.paste.bind(this));S(this,Wo,this.keydown.bind(this));S(this,Uo,this.keyup.bind(this));S(this,Vo,this.onEditingAction.bind(this));S(this,qo,this.onPageChanging.bind(this));S(this,Go,this.onScaleChanging.bind(this));S(this,Xo,this.onRotationChanging.bind(this));S(this,Ko,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Bs,[0,0]);S(this,kn,null);S(this,ss,null);S(this,Yo,null);this._signal=l(this,Gr).signal,y(this,ss,e),y(this,Yo,t),y(this,Xr,n),this._eventBus=s,this._eventBus._on("editingaction",l(this,Vo)),this._eventBus._on("pagechanging",l(this,qo)),this._eventBus._on("scalechanging",l(this,Go)),this._eventBus._on("rotationchanging",l(this,Xo)),v(this,I,qg).call(this),v(this,I,Yg).call(this),v(this,I,Nu).call(this),y(this,ts,i.annotationStorage),y(this,Io,i.filterFactory),y(this,Di,a),y(this,Jr,o||null),y(this,Do,c),y(this,Qr,h||null),this.viewParameters={realScale:ci.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Hr.prototype,t=a=>l(a,ss).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return se(this,"_keyboardManager",new hc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ss).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ss).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n;(e=l(this,Gr))==null||e.abort(),y(this,Gr,null),this._signal=null,this._eventBus._off("editingaction",l(this,Vo)),this._eventBus._off("pagechanging",l(this,qo)),this._eventBus._off("scalechanging",l(this,Go)),this._eventBus._off("rotationchanging",l(this,Xo));for(const s of l(this,Ye).values())s.destroy();l(this,Ye).clear(),l(this,Oe).clear(),l(this,Ri).clear(),y(this,jt,null),l(this,oe).clear(),l(this,nn).destroy(),(t=l(this,Xr))==null||t.destroy(),(n=l(this,_n))==null||n.hide(),y(this,_n,null),l(this,En)&&(clearTimeout(l(this,En)),y(this,En,null)),l(this,kn)&&(clearTimeout(l(this,kn)),y(this,kn,null))}async mlGuess(e){var t;return((t=l(this,Qr))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!l(this,Qr)}get hcmFilter(){return se(this,"hcmFilter",l(this,Di)?l(this,Io).addHCMFilter(l(this,Di).foreground,l(this,Di).background):"none")}get direction(){return se(this,"direction",getComputedStyle(l(this,ss)).direction)}get highlightColors(){return se(this,"highlightColors",l(this,Jr)?new Map(l(this,Jr).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){y(this,Fo,e)}editAltText(e){var t;(t=l(this,Xr))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){y(this,Yr,e-1)}focusMainContainer(){l(this,ss).focus()}findParent(e,t){for(const n of l(this,Ye).values()){const{x:s,y:i,width:a,height:o}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return n}return null}disableUserSelect(e=!1){l(this,Yo).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Ri).add(e)}removeShouldRescale(e){l(this,Ri).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ci.PDF_TO_CSS_UNITS;for(const t of l(this,Ri))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),h=v(this,I,Fc).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(h);if(u){t.empty(),l(this,Je)===ne.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:ne.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const d of l(this,Ye).values())if(d.hasTextLayer(h)){d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a,text:o});break}}}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ts)&&!l(this,ts).has(e.id)&&l(this,ts).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,$s)&&(y(this,$s,!1),v(this,I,Oc).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,oe))if(t.div.contains(e)){y(this,Mi,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Mi))return;const[e,t]=l(this,Mi);y(this,Mi,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){v(this,I,Nu).call(this),v(this,I,zu).call(this)}removeEditListeners(){v(this,I,Kg).call(this),v(this,I,$u).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of l(this,sn))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of l(this,sn))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=l(this,jt))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,oe)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of l(this,sn))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Y(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of n){const h=s.deserialize(c);if(!h)return;i.push(h)}const a=()=>{for(const c of i)v(this,I,Hu).call(this,c);v(this,I,Bu).call(this,i)},o=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){Y(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Je)!==ne.NONE&&!this.isEditorHandlingKeyboard&&Hr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,$s)&&(y(this,$s,!1),v(this,I,Oc).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(v(this,I,Gg).call(this),v(this,I,zu).call(this),v(this,I,pt).call(this,{isEditing:l(this,Je)!==ne.NONE,isEmpty:v(this,I,lo).call(this),hasSomethingToUndo:l(this,nn).hasSomethingToUndo(),hasSomethingToRedo:l(this,nn).hasSomethingToRedo(),hasSelectedEditor:!1})):(v(this,I,Xg).call(this),v(this,I,$u).call(this),v(this,I,pt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,sn)){y(this,sn,e);for(const t of l(this,sn))v(this,I,js).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,kh).id}get currentLayer(){return l(this,Ye).get(l(this,Yr))}getLayer(e){return l(this,Ye).get(e)}get currentPageIndex(){return l(this,Yr)}addLayer(e){l(this,Ye).set(e.pageIndex,e),l(this,Hs)?e.enable():e.disable()}removeLayer(e){l(this,Ye).delete(e.pageIndex)}updateMode(e,t=null,n=!1){if(l(this,Je)!==e){if(y(this,Je,e),e===ne.NONE){this.setEditingState(!1),v(this,I,Qg).call(this);return}this.setEditingState(!0),v(this,I,Jg).call(this),this.unselectAll();for(const s of l(this,Ye).values())s.updateMode(e);if(!t&&n){this.addNewEditorFromKeyboard();return}if(t){for(const s of l(this,Oe).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,Je)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(l(this,sn)){switch(e){case V.CREATE:this.currentLayer.addNewEditor();return;case V.HIGHLIGHT_DEFAULT_COLOR:(n=l(this,Fo))==null||n.updateColor(t);break;case V.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Oo)||y(this,Oo,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,oe))s.updateParams(e,t);for(const s of l(this,sn))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of l(this,Oe).values())a.editorType===e&&a.show(t);(((i=l(this,Oo))==null?void 0:i.get(V.HIGHLIGHT_SHOW_ALL))??!0)!==t&&v(this,I,js).call(this,[[V.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,jo)!==e){y(this,jo,e);for(const t of l(this,Ye).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of l(this,Oe).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return l(this,Oe).get(e)}addEditor(e){l(this,Oe).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,En)&&clearTimeout(l(this,En)),y(this,En,setTimeout(()=>{this.focusMainContainer(),y(this,En,null)},0))),l(this,Oe).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Li).has(e.annotationElementId))&&((t=l(this,ts))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Li).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Li).has(e)}removeDeletedAnnotationElement(e){l(this,Li).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,jt)!==e&&(y(this,jt,e),e&&v(this,I,js).call(this,e.propertiesToUpdate))}updateUI(e){l(this,I,Zg)===e&&v(this,I,js).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,oe).has(e)){l(this,oe).delete(e),e.unselect(),v(this,I,pt).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,oe).add(e),e.select(),v(this,I,js).call(this,e.propertiesToUpdate),v(this,I,pt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,oe))t!==e&&t.unselect();l(this,oe).clear(),l(this,oe).add(e),e.select(),v(this,I,js).call(this,e.propertiesToUpdate),v(this,I,pt).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,oe).has(e)}get firstSelectedEditor(){return l(this,oe).values().next().value}unselect(e){e.unselect(),l(this,oe).delete(e),v(this,I,pt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,oe).size!==0}get isEnterHandled(){return l(this,oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,nn).undo(),v(this,I,pt).call(this,{hasSomethingToUndo:l(this,nn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:v(this,I,lo).call(this)})}redo(){l(this,nn).redo(),v(this,I,pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,nn).hasSomethingToRedo(),isEmpty:v(this,I,lo).call(this)})}addCommands(e){l(this,nn).add(e),v(this,I,pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:v(this,I,lo).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,oe)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)v(this,I,Hu).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=l(this,jt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,jt)||this.hasSelection}selectAll(){for(const e of l(this,oe))e.commit();v(this,I,Bu).call(this,l(this,Oe).values())}unselectAll(){if(!(l(this,jt)&&(l(this,jt).commitOrRemove(),l(this,Je)!==ne.NONE))&&this.hasSelection){for(const e of l(this,oe))e.unselect();l(this,oe).clear(),v(this,I,pt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Bs)[0]+=e,l(this,Bs)[1]+=t;const[s,i]=l(this,Bs),a=[...l(this,oe)],o=1e3;l(this,kn)&&clearTimeout(l(this,kn)),y(this,kn,setTimeout(()=>{y(this,kn,null),l(this,Bs)[0]=l(this,Bs)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Oe).has(c.id)&&c.translateInPage(s,i)},undo:()=>{for(const c of a)l(this,Oe).has(c.id)&&c.translateInPage(-s,-i)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,An,new Map);for(const e of l(this,oe))l(this,An).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,An))return!1;this.disableUserSelect(!1);const e=l(this,An);y(this,An,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(s,i,a,o)=>{if(l(this,Oe).has(s.id)){const c=l(this,Ye).get(o);c?s._setParentAndPosition(c,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)n(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)n(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,An))for(const n of l(this,An).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,jt)===e}getActive(){return l(this,jt)}getMode(){return l(this,Je)}get imageManager(){return se(this,"imageManager",new ju)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,u=t.rangeCount;h<u;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(h,u,d,f)=>({x:(u-s)/a,y:1-(h+d-n)/i,width:f/a,height:d/i});break;case"180":o=(h,u,d,f)=>({x:1-(h+d-n)/i,y:1-(u+f-s)/a,width:d/i,height:f/a});break;case"270":o=(h,u,d,f)=>({x:1-(u+f-s)/a,y:(h-n)/i,width:f/a,height:d/i});break;default:o=(h,u,d,f)=>({x:(h-n)/i,y:(u-s)/a,width:d/i,height:f/a});break}const c=[];for(let h=0,u=t.rangeCount;h<u;h++){const d=t.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:p,width:m,height:b}of d.getClientRects())m===0||b===0||c.push(o(f,p,m,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Kr)||y(this,Kr,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Kr))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,Kr))==null?void 0:s.get(e.data.id);if(!t)return;const n=l(this,ts).getRawValue(t);n&&(l(this,Je)===ne.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Gr=new WeakMap,jt=new WeakMap,Oe=new WeakMap,Ye=new WeakMap,Xr=new WeakMap,ts=new WeakMap,Kr=new WeakMap,nn=new WeakMap,Yr=new WeakMap,Li=new WeakMap,An=new WeakMap,sn=new WeakMap,Ri=new WeakMap,Do=new WeakMap,Io=new WeakMap,En=new WeakMap,Jr=new WeakMap,$s=new WeakMap,_n=new WeakMap,kh=new WeakMap,Hs=new WeakMap,jo=new WeakMap,Mi=new WeakMap,Fo=new WeakMap,Qr=new WeakMap,Je=new WeakMap,oe=new WeakMap,ns=new WeakMap,Di=new WeakMap,Oo=new WeakMap,No=new WeakMap,zo=new WeakMap,$o=new WeakMap,Ho=new WeakMap,Bo=new WeakMap,Wo=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,qo=new WeakMap,Go=new WeakMap,Xo=new WeakMap,Ko=new WeakMap,Bs=new WeakMap,kn=new WeakMap,ss=new WeakMap,Yo=new WeakMap,I=new WeakSet,Fc=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Ug=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=v(this,I,Fc).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(l(this,_n)||y(this,_n,new ox(this)),l(this,_n).show(n,s,this.direction==="ltr"))},Vg=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,ns)&&((i=l(this,_n))==null||i.hide(),y(this,ns,null),v(this,I,pt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,ns))return;if(!v(this,I,Fc).call(this,e).closest(".textLayer")){l(this,ns)&&((a=l(this,_n))==null||a.hide(),y(this,ns,null),v(this,I,pt).call(this,{hasSelectedText:!1}));return}if((o=l(this,_n))==null||o.hide(),y(this,ns,t),v(this,I,pt).call(this,{hasSelectedText:!0}),!(l(this,Je)!==ne.HIGHLIGHT&&l(this,Je)!==ne.NONE)&&(l(this,Je)===ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,$s,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=this._signal,h=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",h),window.removeEventListener("blur",h),u.type==="pointerup"&&v(this,I,Oc).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}},Oc=function(e=""){l(this,Je)===ne.HIGHLIGHT?this.highlightSelection(e):l(this,Do)&&v(this,I,Ug).call(this)},qg=function(){document.addEventListener("selectionchange",v(this,I,Vg).bind(this),{signal:this._signal})},Gg=function(){const e=this._signal;window.addEventListener("focus",l(this,zo),{signal:e}),window.addEventListener("blur",l(this,No),{signal:e})},Xg=function(){window.removeEventListener("focus",l(this,zo)),window.removeEventListener("blur",l(this,No))},Nu=function(){const e=this._signal;window.addEventListener("keydown",l(this,Wo),{signal:e}),window.addEventListener("keyup",l(this,Uo),{signal:e})},Kg=function(){window.removeEventListener("keydown",l(this,Wo)),window.removeEventListener("keyup",l(this,Uo))},zu=function(){const e=this._signal;document.addEventListener("copy",l(this,$o),{signal:e}),document.addEventListener("cut",l(this,Ho),{signal:e}),document.addEventListener("paste",l(this,Bo),{signal:e})},$u=function(){document.removeEventListener("copy",l(this,$o)),document.removeEventListener("cut",l(this,Ho)),document.removeEventListener("paste",l(this,Bo))},Yg=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},pt=function(e){Object.entries(e).some(([n,s])=>l(this,Ko)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Ko),e)}),l(this,Je)===ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&v(this,I,js).call(this,[[V.HIGHLIGHT_FREE,!0]]))},js=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Jg=function(){if(!l(this,Hs)){y(this,Hs,!0);for(const e of l(this,Ye).values())e.enable();for(const e of l(this,Oe).values())e.enable()}},Qg=function(){if(this.unselectAll(),l(this,Hs)){y(this,Hs,!1);for(const e of l(this,Ye).values())e.disable();for(const e of l(this,Oe).values())e.disable()}},Hu=function(e){const t=l(this,Ye).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Zg=function(){let e=null;for(e of l(this,oe));return e},lo=function(){if(l(this,Oe).size===0)return!0;if(l(this,Oe).size===1)for(const e of l(this,Oe).values())return e.isEmpty();return!1},Bu=function(e){for(const t of l(this,oe))t.unselect();l(this,oe).clear();for(const t of e)t.isEmpty()||(l(this,oe).add(t),t.select());v(this,I,pt).call(this,{hasSelectedEditor:this.hasSelection})},G(Hr,"TRANSLATE_SMALL",1),G(Hr,"TRANSLATE_BIG",10);let wr=Hr;var is,rs,rn,as,Ft,Zr,an,Jo,Wu;const Yn=class Yn{constructor(e){S(this,Jo);S(this,is,"");S(this,rs,!1);S(this,rn,null);S(this,as,null);S(this,Ft,null);S(this,Zr,!1);S(this,an,null);y(this,an,e)}static initialize(e){Yn._l10nPromise||(Yn._l10nPromise=e)}async render(){const e=y(this,rn,document.createElement("button"));e.className="altText";const t=await Yn._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const n=l(this,an)._uiManager._signal;e.addEventListener("contextmenu",Pt,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),l(this,an)._uiManager.editAltText(l(this,an))};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(y(this,Zr,!0),s(i))},{signal:n}),await v(this,Jo,Wu).call(this),e}finish(){l(this,rn)&&(l(this,rn).focus({focusVisible:l(this,Zr)}),y(this,Zr,!1))}isEmpty(){return!l(this,is)&&!l(this,rs)}get data(){return{altText:l(this,is),decorative:l(this,rs)}}set data({altText:e,decorative:t}){l(this,is)===e&&l(this,rs)===t||(y(this,is,e),y(this,rs,t),v(this,Jo,Wu).call(this))}toggle(e=!1){l(this,rn)&&(!e&&l(this,Ft)&&(clearTimeout(l(this,Ft)),y(this,Ft,null)),l(this,rn).disabled=!e)}destroy(){var e;(e=l(this,rn))==null||e.remove(),y(this,rn,null),y(this,as,null)}};is=new WeakMap,rs=new WeakMap,rn=new WeakMap,as=new WeakMap,Ft=new WeakMap,Zr=new WeakMap,an=new WeakMap,Jo=new WeakSet,Wu=async function(){var s;const e=l(this,rn);if(!e)return;if(!l(this,is)&&!l(this,rs)){e.classList.remove("done"),(s=l(this,as))==null||s.remove();return}e.classList.add("done"),Yn._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{e.setAttribute("aria-label",i)});let t=l(this,as);if(!t){y(this,as,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${l(this,an).id}`;e.setAttribute("aria-describedby",i);const a=100,o=l(this,an)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Ft)),y(this,Ft,null)},{once:!0}),e.addEventListener("mouseenter",()=>{y(this,Ft,setTimeout(()=>{y(this,Ft,null),l(this,as).classList.add("show"),l(this,an)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:o}),e.addEventListener("mouseleave",()=>{var c;l(this,Ft)&&(clearTimeout(l(this,Ft)),y(this,Ft,null)),(c=l(this,as))==null||c.classList.remove("show")},{signal:o})}t.innerText=l(this,rs)?await Yn._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):l(this,is),t.parentNode||e.append(t);const n=l(this,an).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},G(Yn,"_l10nPromise",null);let dh=Yn;var Ii,on,ot,ea,ji,Qe,Fi,ta,na,lt,Qo,Oi,Ws,Zo,Ni,os,Cn,sa,ia,qt,el,Ch,Z,Uu,tl,Vu,qu,em,tm,Gu,Xu,Ku,nm,sm,im,rm,Yu,co;const fe=class fe{constructor(e){S(this,Z);S(this,Ii,null);S(this,on,null);S(this,ot,null);S(this,ea,!1);S(this,ji,!1);S(this,Qe,null);S(this,Fi,null);S(this,ta,this.focusin.bind(this));S(this,na,this.focusout.bind(this));S(this,lt,null);S(this,Qo,"");S(this,Oi,!1);S(this,Ws,null);S(this,Zo,!1);S(this,Ni,!1);S(this,os,!1);S(this,Cn,null);S(this,sa,0);S(this,ia,0);S(this,qt,null);G(this,"_initialOptions",Object.create(null));G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);G(this,"_l10nPromise",null);S(this,el,!1);S(this,Ch,fe._zIndex++);this.constructor===fe&&ue("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fe.prototype._resizeWithKeyboard,t=wr.TRANSLATE_SMALL,n=wr.TRANSLATE_BIG;return se(this,"_resizerKeyboardManager",new hc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],fe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ux({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(fe._l10nPromise||(fe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(i=>[i,e.get(i.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),n!=null&&n.strings)for(const i of n.strings)fe._l10nPromise.set(i,e.get(i));if(fe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);fe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,el)}set _isDraggable(e){var t;y(this,el,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Ch)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):v(this,Z,co).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Oi)?y(this,Oi,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[i,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/i,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){v(this,Z,Uu).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ws)||y(this,Ws,[this.x,this.y]),v(this,Z,Uu).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Ws)||y(this,Ws,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[o,c]=this.getBaseTranslation();i+=o,a+=c,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Ws)&&(l(this,Ws)[0]!==this.x||l(this,Ws)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=fe,s=n/e,i=n/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:i,width:a,height:o}=this;if(a*=t,o*=n,s*=t,i*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),i=Math.max(0,Math.min(n-o,i));break;case 90:s=Math.max(0,Math.min(t-o,s)),i=Math.min(n,Math.max(a,i));break;case 180:s=Math.min(t,Math.max(a,s)),i=Math.min(n,Math.max(o,i));break;case 270:s=Math.min(t,Math.max(o,s)),i=Math.max(0,Math.min(n-a,i));break}this.x=s/=t,this.y=i/=n;const[c,h]=this.getBaseTranslation();s+=c,i+=h;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return v(n=fe,tl,Vu).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return v(n=fe,tl,Vu).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,s=t*e,i=n*e;return Ct.isCSSRoundSupported?[Math.round(s),Math.round(i)]:[s,i]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,l(this,ji)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),i=!l(this,ji)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!l(this,ji)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,ot))==null||e.finish()}async addEditToolbar(){return l(this,lt)||l(this,Ni)?l(this,lt):(y(this,lt,new Du(this)),this.div.append(l(this,lt).render()),l(this,ot)&&l(this,lt).addAltTextButton(await l(this,ot).render()),l(this,lt))}removeEditToolbar(){var e;l(this,lt)&&(l(this,lt).remove(),y(this,lt,null),(e=l(this,ot))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,ot)||(dh.initialize(fe._l10nPromise),y(this,ot,new dh(this)),l(this,Ii)&&(l(this,ot).data=l(this,Ii),y(this,Ii,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,ot))==null?void 0:e.data}set altTextData(e){l(this,ot)&&(l(this,ot).data=e)}hasAltText(){var e;return!((e=l(this,ot))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,ea)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",l(this,ta),{signal:e}),this.div.addEventListener("focusout",l(this,na),{signal:e});const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),uh(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Ct.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(y(this,Oi,!0),this._isDraggable){v(this,Z,nm).call(this,e);return}v(this,Z,Ku).call(this,e)}moveInDOM(){l(this,Cn)&&clearTimeout(l(this,Cn)),y(this,Cn,setTimeout(()=>{var e;y(this,Cn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,c]=this.pageTranslation,h=e/s,u=t/s,d=this.x*i,f=this.y*a,p=this.width*i,m=this.height*a;switch(n){case 0:return[d+h+o,a-f-u-m+c,d+h+p+o,a-f-u+c];case 90:return[d+u+o,a-f+h+c,d+u+m+o,a-f+h+p+c];case 180:return[d-h-p+o,a-f+u+c,d-h+o,a-f+u+m+c];case 270:return[d-u-m+o,a-f-h-p+c,d-u+o,a-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,i,a]=e,o=i-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,o,c];case 90:return[n,t-s,c,o];case 180:return[i,t-s,o,c];case 270:return[i,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){y(this,Ni,!0)}disableEditMode(){y(this,Ni,!1)}isInEditMode(){return l(this,Ni)}shouldGetKeyboardEvents(){return l(this,os)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,n;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",l(this,ta),{signal:e}),(n=this.div)==null||n.addEventListener("focusout",l(this,na),{signal:e})}rotate(e){}serialize(e=!1,t=null){ue("An editor must be serializable")}static deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,y(s,Ii,e.accessibilityData);const[i,a]=s.pageDimensions,[o,c,h,u]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=c/a,s.width=h/i,s.height=u/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",l(this,ta)),this.div.removeEventListener("focusout",l(this,na)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Cn)&&(clearTimeout(l(this,Cn)),y(this,Cn,null)),v(this,Z,co).call(this),this.removeEditToolbar(),l(this,qt)){for(const e of l(this,qt).values())clearTimeout(e);y(this,qt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(v(this,Z,em).call(this),l(this,Qe).classList.remove("hidden"),uh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),y(this,Fi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Qe).children;if(!l(this,on)){y(this,on,Array.from(t));const a=v(this,Z,sm).bind(this),o=v(this,Z,im).bind(this),c=this._uiManager._signal;for(const h of l(this,on)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:c}),h.addEventListener("blur",o,{signal:c}),h.addEventListener("focus",v(this,Z,rm).bind(this,u),{signal:c}),fe._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(d=>h.setAttribute("aria-label",d))}}const n=l(this,on)[0];let s=0;for(const a of t){if(a===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,on).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)l(this,Qe).append(l(this,Qe).firstChild);else if(i>s)for(let o=0;o<i-s;o++)l(this,Qe).firstChild.before(l(this,Qe).lastChild);let a=0;for(const o of t){const h=l(this,on)[a++].getAttribute("data-resizer-name");fe._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(u=>o.setAttribute("aria-label",u))}}v(this,Z,Yu).call(this,0),y(this,os,!0),l(this,Qe).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,os)&&v(this,Z,Xu).call(this,l(this,Qo),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){v(this,Z,co).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!l(this,lt)){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=l(this,lt))==null||s.show())});return}(t=l(this,lt))==null||t.show()}unselect(){var e,t,n,s;(e=l(this,Qe))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=l(this,lt))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Zo)}set isEditing(e){y(this,Zo,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){y(this,ji,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,qt)||y(this,qt,new Map);const{action:n}=e;let s=l(this,qt).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,qt).delete(n),l(this,qt).size===0&&y(this,qt,null)},fe._telemetryTimeout),l(this,qt).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y(this,ea,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,ea,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ii=new WeakMap,on=new WeakMap,ot=new WeakMap,ea=new WeakMap,ji=new WeakMap,Qe=new WeakMap,Fi=new WeakMap,ta=new WeakMap,na=new WeakMap,lt=new WeakMap,Qo=new WeakMap,Oi=new WeakMap,Ws=new WeakMap,Zo=new WeakMap,Ni=new WeakMap,os=new WeakMap,Cn=new WeakMap,sa=new WeakMap,ia=new WeakMap,qt=new WeakMap,el=new WeakMap,Ch=new WeakMap,Z=new WeakSet,Uu=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},tl=new WeakSet,Vu=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},qu=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},em=function(){if(l(this,Qe))return;y(this,Qe,document.createElement("div")),l(this,Qe).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");l(this,Qe).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",v(this,Z,tm).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Pt,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,Qe))},tm=function(e,t){var b;t.preventDefault();const{isMac:n}=Ct.platform;if(t.button!==0||t.ctrlKey&&n)return;(b=l(this,ot))==null||b.toggle(!1);const s=v(this,Z,Xu).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const a=this._uiManager._signal,o={passive:!0,capture:!0,signal:a};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,o),window.addEventListener("contextmenu",Pt,{signal:a});const c=this.x,h=this.y,u=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{var w;this.parent.togglePointerEvents(!0),(w=l(this,ot))==null||w.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",s,o),window.removeEventListener("contextmenu",Pt),this.parent.div.style.cursor=f,this.div.style.cursor=p,v(this,Z,Gu).call(this,c,h,u,d)};window.addEventListener("pointerup",m,{signal:a}),window.addEventListener("blur",m,{signal:a})},Gu=function(e,t,n,s){const i=this.x,a=this.y,o=this.width,c=this.height;i===e&&a===t&&o===n&&c===s||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=i,this.y=a;const[h,u]=this.parentDimensions;this.setDims(h*o,u*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[h,u]=this.parentDimensions;this.setDims(h*n,u*s),this.fixAndSetPosition()},mustExec:!0})},Xu=function(e,t){const[n,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,c=this.height,h=fe.MIN_SIZE/n,u=fe.MIN_SIZE/s,d=F=>Math.round(F*1e4)/1e4,f=v(this,Z,qu).call(this,this.rotation),p=(F,O)=>[f[0]*F+f[2]*O,f[1]*F+f[3]*O],m=v(this,Z,qu).call(this,360-this.rotation),b=(F,O)=>[m[0]*F+m[2]*O,m[1]*F+m[3]*O];let w,x,A=!1,E=!1;switch(e){case"topLeft":A=!0,w=(F,O)=>[0,0],x=(F,O)=>[F,O];break;case"topMiddle":w=(F,O)=>[F/2,0],x=(F,O)=>[F/2,O];break;case"topRight":A=!0,w=(F,O)=>[F,0],x=(F,O)=>[0,O];break;case"middleRight":E=!0,w=(F,O)=>[F,O/2],x=(F,O)=>[0,O/2];break;case"bottomRight":A=!0,w=(F,O)=>[F,O],x=(F,O)=>[0,0];break;case"bottomMiddle":w=(F,O)=>[F/2,O],x=(F,O)=>[F/2,0];break;case"bottomLeft":A=!0,w=(F,O)=>[0,O],x=(F,O)=>[F,0];break;case"middleLeft":E=!0,w=(F,O)=>[0,O/2],x=(F,O)=>[F,O/2];break}const k=w(o,c),C=x(o,c);let T=p(...C);const P=d(i+T[0]),L=d(a+T[1]);let R=1,D=1,[M,J]=this.screenToPageTranslation(t.movementX,t.movementY);if([M,J]=b(M/n,J/s),A){const F=Math.hypot(o,c);R=D=Math.max(Math.min(Math.hypot(C[0]-k[0]-M,C[1]-k[1]-J)/F,1/o,1/c),h/o,u/c)}else E?R=Math.max(h,Math.min(1,Math.abs(C[0]-k[0]-M)))/o:D=Math.max(u,Math.min(1,Math.abs(C[1]-k[1]-J)))/c;const X=d(o*R),B=d(c*D);T=p(...x(X,B));const K=P-T[0],Q=L-T[1];this.width=X,this.height=B,this.x=K,this.y=Q,this.setDims(n*X,s*B),this.fixAndSetPosition()},Ku=function(e){const{isMac:t}=Ct.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},nm=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,s;const i=this._uiManager._signal;t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:i},y(this,sa,e.clientX),y(this,ia,e.clientY),s=o=>{const{clientX:c,clientY:h}=o,[u,d]=this.screenToPageTranslation(c-l(this,sa),h-l(this,ia));y(this,sa,c),y(this,ia,h),this._uiManager.dragSelectedEditors(u,d)},window.addEventListener("pointermove",s,n));const a=()=>{window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,n)),y(this,Oi,!1),this._uiManager.endDragSession()||v(this,Z,Ku).call(this,e)};window.addEventListener("pointerup",a,{signal:i}),window.addEventListener("blur",a,{signal:i})},sm=function(e){fe._resizerKeyboardManager.exec(this,e)},im=function(e){var t;l(this,os)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Qe)&&v(this,Z,co).call(this)},rm=function(e){y(this,Qo,l(this,os)?e:"")},Yu=function(e){if(l(this,on))for(const t of l(this,on))t.tabIndex=e},co=function(){if(y(this,os,!1),v(this,Z,Yu).call(this,-1),l(this,Fi)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=l(this,Fi);v(this,Z,Gu).call(this,e,t,n,s),y(this,Fi,null)}},S(fe,tl),G(fe,"_borderLineWidth",-1),G(fe,"_colorManager",new Ou),G(fe,"_zIndex",1),G(fe,"_telemetryTimeout",1e3);let ce=fe;class ux extends ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const sp=3285377520,Ut=4294901760,wn=65535;class am{constructor(e){this.h1=e?e&4294967295:sp,this.h2=e?e&4294967295:sp}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let b=0,w=e.length;b<w;b++){const x=e.charCodeAt(b);x<=255?t[n++]=x:(t[n++]=x>>>8,t[n++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,i=n-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&wn,m=f&wn;for(let b=0;b<s;b++)b&1?(o=a[b],o=o*d&Ut|o*p&wn,o=o<<15|o>>>17,o=o*f&Ut|o*m&wn,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[b],c=c*d&Ut|c*p&wn,c=c<<15|c>>>17,c=c*f&Ut|c*m&wn,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*d&Ut|o*p&wn,o=o<<15|o>>>17,o=o*f&Ut|o*m&wn,s&1?h^=o:u^=o}this.h1=h,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ut|e*36045&wn,t=t*4283543511&Ut|((t<<16|e>>>16)*2950163797&Ut)>>>16,e^=t>>>1,e=e*444984403&Ut|e*60499&wn,t=t*3301882366&Ut|((t<<16|e>>>16)*3120437893&Ut)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ju=Object.freeze({map:null,hash:"",transfer:void 0});var zi,Ze,Th,om;class pf{constructor(){S(this,Th);S(this,zi,!1);S(this,Ze,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=l(this,Ze).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,Ze).get(e)}remove(e){if(l(this,Ze).delete(e),l(this,Ze).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Ze).values())if(t instanceof ce)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=l(this,Ze).get(e);let s=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(s=!0,n[i]=a);else s=!0,l(this,Ze).set(e,t);s&&v(this,Th,om).call(this),t instanceof ce&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Ze).has(e)}getAll(){return l(this,Ze).size>0?of(l(this,Ze)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return l(this,Ze).size}resetModified(){l(this,zi)&&(y(this,zi,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lm(this)}get serializable(){if(l(this,Ze).size===0)return Ju;const e=new Map,t=new am,n=[],s=Object.create(null);let i=!1;for(const[a,o]of l(this,Ze)){const c=o instanceof ce?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Ju}get editorStats(){let e=null;const t=new Map;for(const n of l(this,Ze).values()){if(!(n instanceof ce))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}}zi=new WeakMap,Ze=new WeakMap,Th=new WeakSet,om=function(){l(this,zi)||(y(this,zi,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var nl;class lm extends pf{constructor(t){super();S(this,nl);const{map:n,hash:s,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);y(this,nl,{map:a,hash:s,transfer:i})}get print(){ue("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,nl)}}nl=new WeakMap;var ra;class dx{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,ra,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,ra).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,ra).has(e.loadedName))){if(Be(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:i}=e,a=new FontFace(n,s,i);this.addNativeFontFace(a);try{await a.load(),l(this,ra).add(n),t==null||t(e)}catch{Y(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Y(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return se(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ht||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),se(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Be(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return se(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,C){return k.charCodeAt(C)<<24|k.charCodeAt(C+1)<<16|k.charCodeAt(C+2)<<8|k.charCodeAt(C+3)&255}function s(k,C,T,P){const L=k.substring(0,C),R=k.substring(C+T);return L+P+R}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let h=0;function u(k,C){if(++h>30){Y("Load test font never loaded."),C();return}if(c.font="30px "+k,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,k,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,b=1482184792;let w=n(f,m);for(i=0,a=d.length-3;i<a;i+=4)w=w-b+n(d,i)|0;i<d.length&&(w=w-b+n(d+"XXX",i)|0),f=s(f,m,4,Kw(w));const x=`url(data:font/opentype;base64,${btoa(f)});`,A=`@font-face {font-family:"${d}";src:${x}}`;this.insertRule(A);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const k of[e.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=k,E.append(C)}this._document.body.append(E),u(d,()=>{E.remove(),t.complete()})}}ra=new WeakMap;class fx{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=Pg(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),n}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){Y(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(i,a){};const s=[];for(let i=0,a=n.length;i<a;)switch(n[i++]){case Gn.BEZIER_CURVE_TO:{const[o,c,h,u,d,f]=n.slice(i,i+6);s.push(p=>p.bezierCurveTo(o,c,h,u,d,f)),i+=6}break;case Gn.MOVE_TO:{const[o,c]=n.slice(i,i+2);s.push(h=>h.moveTo(o,c)),i+=2}break;case Gn.LINE_TO:{const[o,c]=n.slice(i,i+2);s.push(h=>h.lineTo(o,c)),i+=2}break;case Gn.QUADRATIC_CURVE_TO:{const[o,c,h,u]=n.slice(i,i+4);s.push(d=>d.quadraticCurveTo(o,c,h,u)),i+=4}break;case Gn.RESTORE:s.push(o=>o.restore());break;case Gn.SAVE:s.push(o=>o.save());break;case Gn.SCALE:Be(s.length===2,"Scale command is only valid at the third position.");break;case Gn.TRANSFORM:{const[o,c,h,u,d,f]=n.slice(i,i+6);s.push(p=>p.transform(o,c,h,u,d,f)),i+=6}break;case Gn.TRANSLATE:{const[o,c]=n.slice(i,i+2);s.push(h=>h.translate(o,c)),i+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let c=2,h=s.length;c<h;c++)s[c](a)}}}if(ht){var Qu=Promise.withResolvers(),So=null;(async()=>{const e=await Ac(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Ac(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Ac(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Ac(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,a;return new Map(Object.entries({fs:e,http:t,https:n,url:s,canvas:i,path2d:a}))})().then(e=>{So=e,Qu.resolve()},e=>{Y(`loadPackages: ${e}`),So=new Map,Qu.resolve()})}class Wn{static get promise(){return Qu.promise}static get(e){return So==null?void 0:So.get(e)}}const cm=function(r){return Wn.get("fs").promises.readFile(r).then(t=>new Uint8Array(t))};class px extends Kh{}class gx extends hh{_createCanvas(e,t){return Wn.get("canvas").createCanvas(e,t)}}class mx extends Yh{_fetchData(e,t){return cm(e).then(n=>({cMapData:n,compressionType:t}))}}class bx extends Jh{_fetchData(e){return cm(e)}}const bt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Zu(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),r.clip(s)}class uc{constructor(){this.constructor===uc&&ue("Cannot initialize BaseShadingPattern.")}getPattern(){ue("Abstract method `getPattern` called.")}}class yx extends uc{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let i;if(s===bt.STROKE||s===bt.FILL){const a=t.current.getClippedPathBoundingBox(s,Ce(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",o,c,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),n=z.transform(n,[1,0,0,1,a[0],a[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Zu(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(n);i.setTransform(d)}else Zu(e,this._bbox),i=this._createGradient(e);return i}}function fu(r,e,t,n,s,i,a,o){const c=e.coords,h=e.colors,u=r.data,d=r.width*4;let f;c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=a,a=o,o=f),c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,b=(c[n]+e.offsetX)*e.scaleX,w=(c[n+1]+e.offsetY)*e.scaleY,x=(c[s]+e.offsetX)*e.scaleX,A=(c[s+1]+e.offsetY)*e.scaleY;if(m>=A)return;const E=h[i],k=h[i+1],C=h[i+2],T=h[a],P=h[a+1],L=h[a+2],R=h[o],D=h[o+1],M=h[o+2],J=Math.round(m),X=Math.round(A);let B,K,Q,F,O,Le,Ue,Zt;for(let Se=J;Se<=X;Se++){if(Se<w){const ve=Se<m?0:(m-Se)/(m-w);B=p-(p-b)*ve,K=E-(E-T)*ve,Q=k-(k-P)*ve,F=C-(C-L)*ve}else{let ve;Se>A?ve=1:w===A?ve=0:ve=(w-Se)/(w-A),B=b-(b-x)*ve,K=T-(T-R)*ve,Q=P-(P-D)*ve,F=L-(L-M)*ve}let _e;Se<m?_e=0:Se>A?_e=1:_e=(m-Se)/(m-A),O=p-(p-x)*_e,Le=E-(E-R)*_e,Ue=k-(k-D)*_e,Zt=C-(C-M)*_e;const Wt=Math.round(Math.min(B,O)),Lt=Math.round(Math.max(B,O));let ft=d*Se+Wt*4;for(let ve=Wt;ve<=Lt;ve++)_e=(B-ve)/(B-O),_e<0?_e=0:_e>1&&(_e=1),u[ft++]=K-(K-Le)*_e|0,u[ft++]=Q-(Q-Ue)*_e|0,u[ft++]=F-(F-Zt)*_e|0,u[ft++]=255}}function vx(r,e,t){const n=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(n.length/o)-1,h=o-1;for(i=0;i<c;i++){let u=i*o;for(let d=0;d<h;d++,u++)fu(r,t,n[u],n[u+1],n[u+o],s[u],s[u+1],s[u+o]),fu(r,t,n[u+o+1],n[u+1],n[u+o],s[u+o+1],s[u+1],s[u+o])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)fu(r,t,n[i],n[i+1],n[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class wx extends uc{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),p=h/d,m=u/f,b={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/m},w=d+2*2,x=f+2*2,A=n.getCanvas("mesh",w,x,!1),E=A.context,k=E.createImageData(d,f);if(t){const T=k.data;for(let P=0,L=T.length;P<L;P+=4)T[P]=t[0],T[P+1]=t[1],T[P+2]=t[2],T[P+3]=255}for(const T of this._figures)vx(k,T,b);return E.putImageData(k,2,2),{canvas:A.canvas,offsetX:o-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,n,s){Zu(e,this._bbox);let i;if(s===bt.SHADING)i=z.singularValueDecompose2dScale(Ce(e));else if(i=z.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=z.singularValueDecompose2dScale(this.matrix);i=[i[0]*o[0],i[1]*o[1]]}const a=this._createMeshCanvas(i,s===bt.SHADING?null:this._background,t.cachedCanvases);return s!==bt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class xx extends uc{getPattern(){return"hotpink"}}function Sx(r){switch(r[0]){case"RadialAxial":return new yx(r);case"Mesh":return new wx(r);case"Dummy":return new xx}throw new Error(`Unknown IR type: ${r[0]}`)}const ip={COLORED:1,UNCOLORED:2},Ph=class Ph{constructor(e,t,n,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,s=this.xstep,i=this.ystep,a=this.paintType,o=this.tilingType,c=this.color,h=this.canvasGraphicsFactory;qh("TilingType: "+o);const u=n[0],d=n[1],f=n[2],p=n[3],m=z.singularValueDecompose2dScale(this.matrix),b=z.singularValueDecompose2dScale(this.baseTransform),w=[m[0]*b[0],m[1]*b[1]],x=this.getSizeAndScale(s,this.ctx.canvas.width,w[0]),A=this.getSizeAndScale(i,this.ctx.canvas.height,w[1]),E=e.cachedCanvases.getCanvas("pattern",x.size,A.size,!0),k=E.context,C=h.createCanvasGraphics(k);C.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(C,a,c);let T=u,P=d,L=f,R=p;return u<0&&(T=0,L+=Math.abs(u)),d<0&&(P=0,R+=Math.abs(d)),k.translate(-(x.scale*T),-(A.scale*P)),C.transform(x.scale,0,0,A.scale,0,0),k.save(),this.clipBbox(C,T,P,L,R),C.baseTransform=Ce(C.ctx),C.executeOperatorList(t),C.endDrawing(),{canvas:E.canvas,scaleX:x.scale,scaleY:A.scale,offsetX:T,offsetY:P}}getSizeAndScale(e,t,n){e=Math.abs(e);const s=Math.max(Ph.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=s?i=s:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,s,i){const a=s-t,o=i-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax(Ce(e.ctx),[t,n,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,i=e.current;switch(t){case ip.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case ip.UNCOLORED:const o=z.makeHexColor(n[0],n[1],n[2]);s.fillStyle=o,s.strokeStyle=o,i.fillColor=o,i.strokeColor=o;break;default:throw new Xw(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let i=n;s!==bt.SHADING&&(i=z.transform(i,t.baseTransform),this.matrix&&(i=z.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};G(Ph,"MAX_PATTERN_SIZE",3e3);let ed=Ph;function Ax({src:r,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=Ct.isLittleEndian?4278190080:255,[c,h]=a?[i,o]:[o,i],u=n>>3,d=n&7,f=r.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const w=e+u;e<w;e++){const x=e<f?r[e]:255;t[p++]=x&128?h:c,t[p++]=x&64?h:c,t[p++]=x&32?h:c,t[p++]=x&16?h:c,t[p++]=x&8?h:c,t[p++]=x&4?h:c,t[p++]=x&2?h:c,t[p++]=x&1?h:c}if(d===0)continue;const b=e<f?r[e++]:255;for(let w=0;w<d;w++)t[p++]=b&1<<7-w?h:c}return{srcPos:e,destPos:p}}const rp=16,ap=100,Ex=15,op=10,lp=1e3,_t=16;function _x(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},r.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},r.transform=function(n,s,i,a,o,c){e.transform(n,s,i,a,o,c),this.__originalTransform(n,s,i,a,o,c)},r.setTransform=function(n,s,i,a,o,c){e.setTransform(n,s,i,a,o,c),this.__originalSetTransform(n,s,i,a,o,c)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(n){e.rotate(n),this.__originalRotate(n)},r.clip=function(n){e.clip(n),this.__originalClip(n)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,s,i,a,o){e.bezierCurveTo(t,n,s,i,a,o),this.__originalBezierCurveTo(t,n,s,i,a,o)},r.rect=function(t,n,s,i){e.rect(t,n,s,i),this.__originalRect(t,n,s,i)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class kx{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ec(r,e,t,n,s,i,a,o,c,h){const[u,d,f,p,m,b]=Ce(r);if(d===0&&f===0){const A=a*u+m,E=Math.round(A),k=o*p+b,C=Math.round(k),T=(a+c)*u+m,P=Math.abs(Math.round(T)-E)||1,L=(o+h)*p+b,R=Math.abs(Math.round(L)-C)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(p),E,C),r.drawImage(e,t,n,s,i,0,0,P,R),r.setTransform(u,d,f,p,m,b),[P,R]}if(u===0&&p===0){const A=o*f+m,E=Math.round(A),k=a*d+b,C=Math.round(k),T=(o+h)*f+m,P=Math.abs(Math.round(T)-E)||1,L=(a+c)*d+b,R=Math.abs(Math.round(L)-C)||1;return r.setTransform(0,Math.sign(d),Math.sign(f),0,E,C),r.drawImage(e,t,n,s,i,0,0,R,P),r.setTransform(u,d,f,p,m,b),[R,P]}r.drawImage(e,t,n,s,i,a,o,c,h);const w=Math.hypot(u,d),x=Math.hypot(f,p);return[w*c,x*h]}function Cx(r){const{width:e,height:t}=r;if(e>lp||t>lp)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),o,c,h;const u=e+7&-8;let d=new Uint8Array(u*t),f=0;for(const x of r.data){let A=128;for(;A>0;)d[f++]=x&A?0:255,A>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[c]=2,++p),o=1;o<t;o++){f=o*u,h=o*i,d[f-u]!==d[f]&&(a[h]=d[f]?1:8,++p);let x=(d[f]?4:0)+(d[f-u]?8:0);for(c=1;c<e;c++)x=(x>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0),s[x]&&(a[h+c]=s[x],++p),f++;if(d[f-u]!==d[f]&&(a[h+c]=d[f]?2:4,++p),p>n)return null}for(f=u*(t-1),h=o*i,d[f]!==0&&(a[h]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[h+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[h+c]=4,++p),p>n)return null;const m=new Int32Array([0,i,-1,0,-i,0,0,0,1]),b=new Path2D;for(o=0;p&&o<=t;o++){let x=o*i;const A=x+e;for(;x<A&&!a[x];)x++;if(x===A)continue;b.moveTo(x%i,o);const E=x;let k=a[x];do{const C=m[k];do x+=C;while(!a[x]);const T=a[x];T!==5&&T!==10?(k=T,a[x]=0):(k=T&51*k>>4,a[x]&=k>>2|k<<2),b.lineTo(x%i,x/i|0),a[x]||--p}while(E!==x);--o}return d=null,a=null,function(x){x.save(),x.scale(1/e,-1/t),x.translate(0,-t),x.fill(b),x.beginPath(),x.restore()}}class cp{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Cg,this.textMatrixScale=1,this.fontMatrix=ku,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=rt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=z.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=z.applyTransform(t,e),s=z.applyTransform(t.slice(2),e),i=z.applyTransform([t[0],t[3]],e),a=z.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){z.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,i,a,o,c,h,u){const d=z.bezierBoundingBox(t,n,s,i,a,o,c,h,u);u||this.updateRectMinMax(e,d)}getPathBoundingBox(e=bt.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===bt.STROKE){t||ue("Stroke bounding box must include transform.");const s=z.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=z.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=bt.FILL,t=null){return z.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function hp(r,e){if(typeof ImageData<"u"&&e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%_t,i=(t-s)/_t,a=s===0?i:i+1,o=r.createImageData(n,_t);let c=0,h;const u=e.data,d=o.data;let f,p,m,b;if(e.kind===Mc.GRAYSCALE_1BPP){const w=u.byteLength,x=new Uint32Array(d.buffer,0,d.byteLength>>2),A=x.length,E=n+7>>3,k=4294967295,C=Ct.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<i?_t:s,h=0,p=0;p<m;p++){const T=w-c;let P=0;const L=T>E?n:T*8-7,R=L&-8;let D=0,M=0;for(;P<R;P+=8)M=u[c++],x[h++]=M&128?k:C,x[h++]=M&64?k:C,x[h++]=M&32?k:C,x[h++]=M&16?k:C,x[h++]=M&8?k:C,x[h++]=M&4?k:C,x[h++]=M&2?k:C,x[h++]=M&1?k:C;for(;P<L;P++)D===0&&(M=u[c++],D=128),x[h++]=M&D?k:C,D>>=1}for(;h<A;)x[h++]=0;r.putImageData(o,0,f*_t)}}else if(e.kind===Mc.RGBA_32BPP){for(p=0,b=n*_t*4,f=0;f<i;f++)d.set(u.subarray(c,c+b)),c+=b,r.putImageData(o,0,p),p+=_t;f<a&&(b=n*s*4,d.set(u.subarray(c,c+b)),r.putImageData(o,0,p))}else if(e.kind===Mc.RGB_24BPP)for(m=_t,b=n*m,f=0;f<a;f++){for(f>=i&&(m=s,b=n*m),h=0,p=b;p--;)d[h++]=u[c++],d[h++]=u[c++],d[h++]=u[c++],d[h++]=255;r.putImageData(o,0,f*_t)}else throw new Error(`bad image kind: ${e.kind}`)}function up(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%_t,i=(t-s)/_t,a=s===0?i:i+1,o=r.createImageData(n,_t);let c=0;const h=e.data,u=o.data;for(let d=0;d<a;d++){const f=d<i?_t:s;({srcPos:c}=Ax({src:h,srcPos:c,dest:u,width:n,height:f,nonBlackColor:0})),r.putImageData(o,0,d*_t)}}function no(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function _c(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!ht){const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}}function dp(r,e){if(e)return!0;const t=z.singularValueDecompose2dScale(r);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ci.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const Tx=["butt","round","square"],Px=["miter","round","bevel"],Lx={},fp={};var di,td,nd;const kf=class kf{constructor(e,t,n,s,i,{optionalContentConfig:a,markedContentStack:o=null},c,h){S(this,di);this.ctx=e,this.current=new cp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new kx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ce(this.compositeCtx))}this.ctx.save(),_c(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ce(this.ctx)}executeOperatorList(e,t,n,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const c=i.length;if(c===o)return o;const h=c-o>op&&typeof n=="function",u=h?Date.now()+Ex:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,n),o;if(m=a[o],m!==tn.dependency)this[m].apply(this,i[o]);else for(const b of i[o]){const w=b.startsWith("g_")?f:p;if(!w.has(b))return w.get(b,n),o}if(o++,o===c)return o;if(h&&++d>op){if(Date.now()>u)return n(),o;d=0}}}endDrawing(){v(this,di,td).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),v(this,di,nd).call(this)}_scaleImage(e,t){const n=e.width,s=e.height;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,c=s,h="prescale1",u,d;for(;i>2&&o>1||a>2&&c>1;){let f=o,p=c;i>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),u=this.cachedCanvases.getCanvas(h,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,c,0,0,f,p),e=u.canvas,o=f,c=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=Ce(t);let c,h,u,d;if((e.bitmap||e.data)&&e.count>1){const L=e.bitmap||e.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),i]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));const R=c.get(h);if(R&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),M=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:R,offsetX:D,offsetY:M}}u=R}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),up(d.context,e));let f=z.transform(o,[1/n,0,0,-1/s,0,0]);f=z.transform(f,[1,0,0,1,0,-s]);const[p,m,b,w]=z.getAxialAlignedBoundingBox([0,0,n,s],f),x=Math.round(b-p)||1,A=Math.round(w-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",x,A),k=E.context,C=p,T=m;k.translate(-C,-T),k.transform(...f),u||(u=this._scaleImage(d.canvas,Xn(k)),u=u.img,c&&a&&c.set(h,u)),k.imageSmoothingEnabled=dp(Ce(k),e.interpolate),Ec(k,u,0,0,u.width,u.height,0,0,n,s),k.globalCompositeOperation="source-in";const P=z.transform(Xn(k),[1,0,0,1,-C,-T]);return k.fillStyle=a?i.getPattern(t,this,P,bt.FILL):i,k.fillRect(0,0,n,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,E.canvas)),{canvas:E.canvas,offsetX:Math.round(C),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Tx[e]}setLineJoin(e){this.ctx.lineJoin=Px[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...Ce(this.suspendedCtx)),no(this.suspendedCtx,i),_x(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),no(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const i=s[0],a=s[1],o=s[2]-i,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,n,o,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,i,a,o,c,h,u,d){let f=e.canvas,p=c-u,m=h-d;if(a){if(p<0||m<0||p+n>f.width||m+s>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,s),x=w.context;x.drawImage(f,-p,-m),a.some(A=>A!==0)&&(x.globalCompositeOperation="destination-atop",x.fillStyle=z.makeHexColor(...a),x.fillRect(0,0,n,s),x.globalCompositeOperation="source-over"),f=w.canvas,p=m=0}else if(a.some(w=>w!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(p,m,n,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=z.makeHexColor(...a),e.fillRect(p,m,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const b=new Path2D;b.rect(c,h,n,s),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,n,s,c,h,n,s),t.restore()}save(){this.inSMaskMode?(no(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),no(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,i,a){this.ctx.transform(e,t,n,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,i=this.current;let a=i.x,o=i.y,c,h;const u=Ce(s),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,f=d?n.slice(0):null;for(let p=0,m=0,b=e.length;p<b;p++)switch(e[p]|0){case tn.rectangle:a=t[m++],o=t[m++];const w=t[m++],x=t[m++],A=a+w,E=o+x;s.moveTo(a,o),w===0||x===0?s.lineTo(A,E):(s.lineTo(A,o),s.lineTo(A,E),s.lineTo(a,E)),d||i.updateRectMinMax(u,[a,o,A,E]),s.closePath();break;case tn.moveTo:a=t[m++],o=t[m++],s.moveTo(a,o),d||i.updatePathMinMax(u,a,o);break;case tn.lineTo:a=t[m++],o=t[m++],s.lineTo(a,o),d||i.updatePathMinMax(u,a,o);break;case tn.curveTo:c=a,h=o,a=t[m+4],o=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),i.updateCurvePathMinMax(u,c,h,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case tn.curveTo2:c=a,h=o,s.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),i.updateCurvePathMinMax(u,c,h,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case tn.curveTo3:c=a,h=o,a=t[m+2],o=t[m+3],s.bezierCurveTo(t[m],t[m+1],a,o,a,o),i.updateCurvePathMinMax(u,c,h,t[m],t[m+1],a,o,a,o,f),m+=4;break;case tn.closePath:s.closePath();break}d&&i.updateScalingPathMinMax(u,f),i.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Xn(t),bt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,Xn(t),bt.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Lx}eoClip(){this.pendingClip=fp}beginText(){this.current.textMatrix=Cg,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||ku,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Y("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",a=((u=n.systemFontInfo)==null?void 0:u.css)||`"${i}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const c=n.italic?"italic":"normal";let h=t;t<rp?h=rp:t>ap&&(h=ap),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${o} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,i,a){this.current.textMatrix=[e,t,n,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const i=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,u=c&rt.FILL_STROKE_MASK,d=!!(c&rt.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(i.save(),i.translate(t,n),i.beginPath(),p(i,h),s&&i.setTransform(...s),(u===rt.FILL||u===rt.FILL_STROKE)&&i.fill(),(u===rt.STROKE||u===rt.FILL_STROKE)&&i.stroke(),i.restore()):((u===rt.FILL||u===rt.FILL_STROKE)&&i.fillText(e,t,n),(u===rt.STROKE||u===rt.FILL_STROKE)&&i.strokeText(e,t,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ce(i),x:t,y:n,fontSize:h,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return se(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,h=t.fontDirection,u=t.textHScale*h,d=e.length,f=n.vertical,p=f?1:-1,m=n.defaultVMetrics,b=s*t.fontMatrix[0],w=t.textRenderingMode===rt.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(u,-1):i.scale(u,1);let x;if(t.patternFill){i.save();const T=t.fillColor.getPattern(i,this,Xn(i),bt.FILL);x=Ce(i),i.restore(),i.fillStyle=T}let A=t.lineWidth;const E=t.textMatrixScale;if(E===0||A===0){const T=t.textRenderingMode&rt.FILL_STROKE_MASK;(T===rt.STROKE||T===rt.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=E;if(a!==1&&(i.scale(a,a),A/=a),i.lineWidth=A,n.isInvalidPDFjsFont){const T=[];let P=0;for(const L of e)T.push(L.unicode),P+=L.width;i.fillText(T.join(""),0,0),t.x+=P*b*u,i.restore(),this.compose();return}let k=0,C;for(C=0;C<d;++C){const T=e[C];if(typeof T=="number"){k+=p*T*s/1e3;continue}let P=!1;const L=(T.isSpace?c:0)+o,R=T.fontChar,D=T.accent;let M,J,X=T.width;if(f){const K=T.vmetric||m,Q=-(T.vmetric?K[1]:X*.5)*b,F=K[2]*b;X=K?-K[0]:X,M=Q/a,J=(k+F)/a}else M=k/a,J=0;if(n.remeasure&&X>0){const K=i.measureText(R).width*1e3/s*a;if(X<K&&this.isFontSubpixelAAEnabled){const Q=X/K;P=!0,i.save(),i.scale(Q,1),M/=Q}else X!==K&&(M+=(X-K)/2e3*s/a)}if(this.contentVisible&&(T.isInFont||n.missingFile)){if(w&&!D)i.fillText(R,M,J);else if(this.paintChar(R,M,J,x),D){const K=M+s*D.offset.x/a,Q=J-s*D.offset.y/a;this.paintChar(D.fontChar,K,Q,x)}}const B=f?X*b-L*h:X*b+L*h;k+=B,P&&i.restore()}f?t.y-=k:t.x+=k*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,i=n.fontSize,a=n.fontDirection,o=s.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,u=n.textHScale*a,d=n.fontMatrix||ku,f=e.length,p=n.textRenderingMode===rt.INVISIBLE;let m,b,w,x;if(!(p||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(u,a),m=0;m<f;++m){if(b=e[m],typeof b=="number"){x=o*b*i/1e3,this.ctx.translate(x,0),n.x+=x*u;continue}const A=(b.isSpace?h:0)+c,E=s.charProcOperatorList[b.operatorListId];if(!E){Y(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(i,i),t.transform(...d),this.executeOperatorList(E),this.restore()),w=z.applyTransform([b.width,0],d)[0]*i+A,t.translate(w,0),n.x+=w*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,i,a){this.ctx.rect(n,s,i-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||Ce(this.ctx),i={createCanvasGraphics:a=>new kf(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new ed(e,n,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const s=z.makeHexColor(e,t,n);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,n){const s=z.makeHexColor(e,t,n);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Sx(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Xn(t),bt.SHADING);const s=Xn(t);if(s){const{width:i,height:a}=t.canvas,[o,c,h,u]=z.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(o,c,h-o,u-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ue("Should not call beginInlineImage")}beginImageData(){ue("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ce(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(Ce(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||qh("TODO: Support non-isolated groups."),e.knockout&&Y("Knockout groups not supported.");const n=Ce(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=z.getAxialAlignedBoundingBox(e.bbox,Ce(t));const i=[0,0,t.canvas.width,t.canvas.height];s=z.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,c,h),f=d.context;f.translate(-a,-o),f.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),no(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ce(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=z.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,s,i){if(v(this,di,td).call(this),_c(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,h]=z.singularValueDecompose2dScale(Ce(this.ctx)),{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),f=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,o*h),_c(this.ctx)}else _c(this.ctx),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.endPath()}this.current=new cp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),v(this,di,nd).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=Cx(e)),s.compiled)){s.compiled(n);return}const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Ce(o);o.transform(t,n,s,i,0,0);const h=this._createMaskCanvas(e);o.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,d=a.length;u<d;u+=2){const f=z.transform(c,[t,n,s,i,a[u],a[u+1]]),[p,m]=z.applyTransform([0,0],f);o.drawImage(h.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:c,transform:h}=i,u=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=u.context;d.save();const f=this.getObject(a,i);up(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?n.getPattern(d,this,Xn(t),bt.FILL):n,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...h),t.scale(1,-1),Ec(t,u.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Y("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Y("Dependent image isn't ready yet");return}const a=i.width,o=i.height,c=[];for(let h=0,u=s.length;h<u;h+=2)c.push({transform:[t,0,0,n,s[h],s[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!ht){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/n);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;hp(c,e),i=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(i,Xn(s));s.imageSmoothingEnabled=dp(Ce(s),e.interpolate),Ec(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;hp(c,e),s=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),Ec(n,s,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===fp?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ce(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:i}=this.ctx.getTransform();let a,o;if(n===0&&s===0){const c=Math.abs(t),h=Math.abs(i);if(c===h)if(e===0)a=o=1/c;else{const u=c*e;a=o=u<1?1/u:1}else if(e===0)a=1/c,o=1/h;else{const u=c*e,d=h*e;a=u<1?1/u:1,o=d<1?1/d:1}}else{const c=Math.abs(t*i-n*s),h=Math.hypot(t,n),u=Math.hypot(s,i);if(e===0)a=u/c,o=h/c;else{const d=e*c;a=u>d?u/d:1,o=h>d?h/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const o=Math.max(s,i);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};di=new WeakSet,td=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nd=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Br=kf;for(const r in tn)Br.prototype[r]!==void 0&&(Br.prototype[tn[r]]=Br.prototype[r]);var sl,il;class _s{static get workerPort(){return l(this,sl)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");y(this,sl,e)}static get workerSrc(){return l(this,il)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");y(this,il,e)}}sl=new WeakMap,il=new WeakMap,S(_s,sl,null),S(_s,il,"");const kc={UNKNOWN:0,DATA:1,ERROR:2},Ie={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Mt(r){switch(r instanceof Error||typeof r=="object"&&r!==null||ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Cr(r.message);case"MissingPDFException":return new kr(r.message);case"PasswordException":return new Tu(r.message,r.code);case"UnexpectedResponseException":return new Gh(r.message,r.status);case"UnknownErrorException":return new Pu(r.message,r.details);default:return new Pu(r.message,r.toString())}}var Hn,hm,um,Nc;class ho{constructor(e,t,n){S(this,Hn);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const i=s.data;if(i.targetName!==this.sourceName)return;if(i.stream){v(this,Hn,um).call(this,i);return}if(i.callback){const o=i.callbackId,c=this.callbackCapabilities[o];if(!c)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],i.callback===kc.DATA)c.resolve(i.data);else if(i.callback===kc.ERROR)c.reject(Mt(i.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[i.action];if(!a)throw new Error(`Unknown action from worker: ${i.action}`);if(i.callbackId){const o=this.sourceName,c=i.sourceName;new Promise(function(h){h(a(i.data))}).then(function(h){n.postMessage({sourceName:o,targetName:c,callback:kc.DATA,callbackId:i.callbackId,data:h})},function(h){n.postMessage({sourceName:o,targetName:c,callback:kc.ERROR,callbackId:i.callbackId,reason:Mt(h)})});return}if(i.streamId){v(this,Hn,hm).call(this,i);return}a(i.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,c.postMessage({sourceName:a,targetName:o,stream:Ie.PULL,streamId:i,desiredSize:h.desiredSize}),u.promise},cancel:h=>{Be(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:Ie.CANCEL,streamId:i,reason:Mt(h)}),u.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Hn=new WeakSet,hm=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:Ie.ENQUEUE,streamId:t,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Ie.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){Be(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Ie.ERROR,streamId:t,reason:Mt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(h){h(o(e.data,c))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ie.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:s,stream:Ie.START_COMPLETE,streamId:t,reason:Mt(h)})})},um=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Ie.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Mt(e.reason));break;case Ie.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Mt(e.reason));break;case Ie.PULL:if(!o){i.postMessage({sourceName:n,targetName:s,stream:Ie.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){var h;c((h=o.onPull)==null?void 0:h.call(o))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ie.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:Ie.PULL_COMPLETE,streamId:t,reason:Mt(c)})});break;case Ie.ENQUEUE:if(Be(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Ie.CLOSE:if(Be(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),v(this,Hn,Nc).call(this,a,t);break;case Ie.ERROR:Be(a,"error should have stream controller"),a.controller.error(Mt(e.reason)),v(this,Hn,Nc).call(this,a,t);break;case Ie.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Mt(e.reason)),v(this,Hn,Nc).call(this,a,t);break;case Ie.CANCEL:if(!o)break;new Promise(function(c){var h;c((h=o.onCancel)==null?void 0:h.call(o,Mt(e.reason)))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ie.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:Ie.CANCEL_COMPLETE,streamId:t,reason:Mt(c)})}),o.sinkCapability.reject(Mt(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Nc=async function(e,t){var n,s,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var $i,rl;class Rx{constructor({parsedData:e,rawData:t}){S(this,$i);S(this,rl);y(this,$i,e),y(this,rl,t)}getRaw(){return l(this,rl)}get(e){return l(this,$i).get(e)??null}getAll(){return of(l(this,$i))}has(e){return l(this,$i).has(e)}}$i=new WeakMap,rl=new WeakMap;const Fs=Symbol("INTERNAL");var al,ol,ll,aa;class Mx{constructor(e,{name:t,intent:n,usage:s}){S(this,al,!1);S(this,ol,!1);S(this,ll,!1);S(this,aa,!0);y(this,al,!!(e&Kt.DISPLAY)),y(this,ol,!!(e&Kt.PRINT)),this.name=t,this.intent=n,this.usage=s}get visible(){if(l(this,ll))return l(this,aa);if(!l(this,aa))return!1;const{print:e,view:t}=this.usage;return l(this,al)?(t==null?void 0:t.viewState)!=="OFF":l(this,ol)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Fs&&ue("Internal method `_setVisible` called."),y(this,ll,n),y(this,aa,t)}}al=new WeakMap,ol=new WeakMap,ll=new WeakMap,aa=new WeakMap;var Us,he,oa,la,cl,sd;class Dx{constructor(e,t=Kt.DISPLAY){S(this,cl);S(this,Us,null);S(this,he,new Map);S(this,oa,null);S(this,la,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,y(this,la,e.order);for(const n of e.groups)l(this,he).set(n.id,new Mx(t,n));if(e.baseState==="OFF")for(const n of l(this,he).values())n._setVisible(Fs,!1);for(const n of e.on)l(this,he).get(n)._setVisible(Fs,!0);for(const n of e.off)l(this,he).get(n)._setVisible(Fs,!1);y(this,oa,this.getHash())}}isVisible(e){if(l(this,he).size===0)return!0;if(!e)return qh("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,he).has(e.id)?l(this,he).get(e.id).visible:(Y(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return v(this,cl,sd).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,he).has(t))return Y(`Optional content group not found: ${t}`),!0;if(l(this,he).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,he).has(t))return Y(`Optional content group not found: ${t}`),!0;if(!l(this,he).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,he).has(t))return Y(`Optional content group not found: ${t}`),!0;if(!l(this,he).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,he).has(t))return Y(`Optional content group not found: ${t}`),!0;if(l(this,he).get(t).visible)return!1}return!0}return Y(`Unknown optional content policy ${e.policy}.`),!0}return Y(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const n=l(this,he).get(e);if(!n){Y(`Optional content group not found: ${e}`);return}n._setVisible(Fs,!!t,!0),y(this,Us,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const i=l(this,he).get(s);if(i)switch(n){case"ON":i._setVisible(Fs,!0);break;case"OFF":i._setVisible(Fs,!1);break;case"Toggle":i._setVisible(Fs,!i.visible);break}}y(this,Us,null)}get hasInitialVisibility(){return l(this,oa)===null||this.getHash()===l(this,oa)}getOrder(){return l(this,he).size?l(this,la)?l(this,la).slice():[...l(this,he).keys()]:null}getGroups(){return l(this,he).size>0?of(l(this,he)):null}getGroup(e){return l(this,he).get(e)||null}getHash(){if(l(this,Us)!==null)return l(this,Us);const e=new am;for(const[t,n]of l(this,he))e.update(`${t}:${n.visible}`);return y(this,Us,e.hexdigest())}}Us=new WeakMap,he=new WeakMap,oa=new WeakMap,la=new WeakMap,cl=new WeakSet,sd=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=v(this,cl,sd).call(this,i);else if(l(this,he).has(i))a=l(this,he).get(i).visible;else return Y(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class Ix{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Be(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),e.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Be(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Be(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new jx(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Fx(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class jx{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=df(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Fx{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Ox(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let u=o(t);return u=unescape(u),u=c(u),u=h(u),i(u)}if(t=a(r),t){const u=h(t);return i(u)}if(t=n("filename","i").exec(r),t){t=t[1];let u=o(t);return u=h(u),i(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=Xh(d);d=f.decode(p),e=!1}catch{}}return d}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function a(u){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,b,w,x]=f;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[w,x]}const m=[];for(let b=0;b<d.length&&b in d;++b){let[w,x]=d[b];x=o(x),w&&(x=unescape(x),b===0&&(x=c(x))),m.push(x)}return m.join("")}function o(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),m=u.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,w){return String.fromCharCode(parseInt(w,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function gf({getResponseHeader:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(r("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||n||!e||r("Accept-Ranges")!=="bytes"||(r("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function mf(r){const e=r("Content-Disposition");if(e){let t=Ox(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(df(t))return t}return null}function Zh(r,e){return r===404||r===0&&e.startsWith("file:")?new kr('Missing PDF "'+e+'".'):new Gh(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r)}function dm(r){return r===200||r===206}function fm(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pm(r){const e=new Headers;for(const t in r){const n=r[t];n!==void 0&&e.append(t,n)}return e}function gm(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Y(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class pp{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Be(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Nx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new zx(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Nx{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=pm(this._stream.httpHeaders);const n=t.url;fetch(n,fm(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!dm(s.status))throw Zh(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const i=c=>s.headers.get(c),{allowRangeRequests:a,suggestedLength:o}=gf({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=mf(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Cr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gm(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class zx{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=pm(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const i=s.url;fetch(i,fm(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!dm(a.status))throw Zh(a.status,i);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:gm(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const pu=200,gu=206;function $x(r){const e=r.response;return typeof e!="string"?e:Xh(e).buffer}class Hx{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const i in n)s[i]=n[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const a=this.httpHeaders[i];a!==void 0&&t.setRequestHeader(i,a)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=gu):s.expectedStatus=pu,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){var c,h,u;const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,s.status);return}const i=s.status||pu;if(!(i===pu&&n.expectedStatus===gu)&&i!==n.expectedStatus){(h=n.onError)==null||h.call(n,s.status);return}const o=$x(s);if(i===gu){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);n.onDone({begin:parseInt(f[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):(u=n.onError)==null||u.call(n,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Bx{constructor(e){this._source=e,this._manager=new Hx(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Be(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Wx(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Ux(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Wx{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=a=>t.getResponseHeader(a),{allowRangeRequests:s,suggestedLength:i}=gf({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=mf(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Zh(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ux{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Zh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const mm=/^file:\/\/\/[a-zA-Z]:\//;function Vx(r){const e=Wn.get("url"),t=e.parse(r);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(r)?e.parse(`file:///${r}`):(t.host||(t.protocol="file:"),t)}class qx{constructor(e){this.source=e,this.url=Vx(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Be(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Kx(this):new Gx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Yx(this,e,t):new Xx(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bm{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Cr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ym{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function fh(r,e){return{protocol:r.protocol,auth:r.auth,host:r.hostname,port:r.port,path:r.path,method:"GET",headers:e}}class Gx extends bm{constructor(e){super(e);const t=n=>{if(n.statusCode===404){const o=new kr(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:i,suggestedLength:a}=gf({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=mf(s)};if(this._request=null,this._url.protocol==="http:"){const n=Wn.get("http");this._request=n.request(fh(this._url,e.httpHeaders),t)}else{const n=Wn.get("https");this._request=n.request(fh(this._url,e.httpHeaders),t)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class Xx extends ym{constructor(e,t,n){super(e),this._httpHeaders={};for(const i in e.httpHeaders){const a=e.httpHeaders[i];a!==void 0&&(this._httpHeaders[i]=a)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const s=i=>{if(i.statusCode===404){const a=new kr(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(i)};if(this._request=null,this._url.protocol==="http:"){const i=Wn.get("http");this._request=i.request(fh(this._url,this._httpHeaders),s)}else{const i=Wn.get("https");this._request=i.request(fh(this._url,this._httpHeaders),s)}this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class Kx extends bm{constructor(e){super(e);let t=decodeURIComponent(this._url.path);mm.test(this._url.href)&&(t=t.replace(/^\//,""));const n=Wn.get("fs");n.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new kr(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class Yx extends ym{constructor(e,t,n){super(e);let s=decodeURIComponent(this._url.path);mm.test(this._url.href)&&(s=s.replace(/^\//,""));const i=Wn.get("fs");this._setReadableStream(i.createReadStream(s,{start:t,end:n-1}))}}const Jx=1e5,St=30,Qx=.8;var Bp,Vs,Et,hl,ul,Hi,ls,dl,fl,Bi,ca,ha,qs,ua,pl,da,Wi,gl,ml,He,Ui,Vi,Gs,fa,Ls,vm,wm,id,Bn,zc,xm,Sm;let ph=(He=class{constructor({textContentSource:e,container:t,viewport:n}){S(this,Ls);S(this,Vs,Promise.withResolvers());S(this,Et,null);S(this,hl,!1);S(this,ul,!!((Bp=globalThis.FontInspector)!=null&&Bp.enabled));S(this,Hi,null);S(this,ls,null);S(this,dl,0);S(this,fl,0);S(this,Bi,null);S(this,ca,null);S(this,ha,0);S(this,qs,0);S(this,ua,Object.create(null));S(this,pl,[]);S(this,da,null);S(this,Wi,[]);S(this,gl,new WeakMap);S(this,ml,null);var c;if(e instanceof ReadableStream)y(this,da,e);else if(typeof e=="object")y(this,da,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,Et,y(this,ca,t)),y(this,qs,n.scale*(globalThis.devicePixelRatio||1)),y(this,ha,n.rotation),y(this,ls,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=n.rawDims;y(this,ml,[1,0,0,-1,-a,o+i]),y(this,fl,s),y(this,dl,i),v(c=He,Bn,xm).call(c),vr(t,n),l(this,Vs).promise.catch(()=>{}).then(()=>{l(He,fa).delete(this),y(this,ls,null),y(this,ua,null)})}render(){const e=()=>{l(this,Bi).read().then(({value:t,done:n})=>{if(n){l(this,Vs).resolve();return}l(this,Hi)??y(this,Hi,t.lang),Object.assign(l(this,ua),t.styles),v(this,Ls,vm).call(this,t.items),e()},l(this,Vs).reject)};return y(this,Bi,l(this,da).getReader()),l(He,fa).add(this),e(),l(this,Vs).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,ha)&&(t==null||t(),y(this,ha,s),vr(l(this,ca),{rotation:s})),n!==l(this,qs)){t==null||t(),y(this,qs,n);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:v(i=He,Bn,zc).call(i,l(this,Hi))};for(const o of l(this,Wi))a.properties=l(this,gl).get(o),a.div=o,v(this,Ls,id).call(this,a)}}cancel(){var t;const e=new Cr("TextLayer task cancelled.");(t=l(this,Bi))==null||t.cancel(e).catch(()=>{}),y(this,Bi,null),l(this,Vs).reject(e)}get textDivs(){return l(this,Wi)}get textContentItemsStr(){return l(this,pl)}static cleanup(){if(!(l(this,fa).size>0)){l(this,Ui).clear();for(const{canvas:e}of l(this,Vi).values())e.remove();l(this,Vi).clear()}}},Vs=new WeakMap,Et=new WeakMap,hl=new WeakMap,ul=new WeakMap,Hi=new WeakMap,ls=new WeakMap,dl=new WeakMap,fl=new WeakMap,Bi=new WeakMap,ca=new WeakMap,ha=new WeakMap,qs=new WeakMap,ua=new WeakMap,pl=new WeakMap,da=new WeakMap,Wi=new WeakMap,gl=new WeakMap,ml=new WeakMap,Ui=new WeakMap,Vi=new WeakMap,Gs=new WeakMap,fa=new WeakMap,Ls=new WeakSet,vm=function(e){var s,i;if(l(this,hl))return;(i=l(this,ls)).ctx??(i.ctx=v(s=He,Bn,zc).call(s,l(this,Hi)));const t=l(this,Wi),n=l(this,pl);for(const a of e){if(t.length>Jx){Y("Ignoring additional textDivs for performance reasons."),y(this,hl,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,Et);y(this,Et,document.createElement("span")),l(this,Et).classList.add("markedContent"),a.id!==null&&l(this,Et).setAttribute("id",`${a.id}`),o.append(l(this,Et))}else a.type==="endMarkedContent"&&y(this,Et,l(this,Et).parentNode);continue}n.push(a.str),v(this,Ls,wm).call(this,a)}},wm=function(e){var b;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Wi).push(t);const s=z.transform(l(this,ml),e.transform);let i=Math.atan2(s[1],s[0]);const a=l(this,ua)[e.fontName];a.vertical&&(i+=Math.PI/2);const o=l(this,ul)&&a.fontSubstitution||a.fontFamily,c=Math.hypot(s[2],s[3]),h=c*v(b=He,Bn,Sm).call(b,o,l(this,Hi));let u,d;i===0?(u=s[4],d=s[5]-h):(u=s[4]+h*Math.sin(i),d=s[5]-h*Math.cos(i));const f="calc(var(--scale-factor)*",p=t.style;l(this,Et)===l(this,ca)?(p.left=`${(100*u/l(this,fl)).toFixed(2)}%`,p.top=`${(100*d/l(this,dl)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(He,Gs)*c).toFixed(2)}px)`,p.fontFamily=o,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,ul)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(m=!0)}if(m&&(n.canvasWidth=a.vertical?e.height:e.width),l(this,gl).set(t,n),l(this,ls).div=t,l(this,ls).properties=n,v(this,Ls,id).call(this,l(this,ls)),n.hasText&&l(this,Et).append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,Et).append(w)}},id=function(e){const{div:t,properties:n,ctx:s,prevFontSize:i,prevFontFamily:a}=e,{style:o}=t;let c="";if(l(He,Gs)>1&&(c=`scale(${1/l(He,Gs)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=o,{canvasWidth:u,fontSize:d}=n;(i!==d||a!==h)&&(s.font=`${d*l(this,qs)}px ${h}`,e.prevFontSize=d,e.prevFontFamily=h);const{width:f}=s.measureText(t.textContent);f>0&&(c=`scaleX(${u*l(this,qs)/f}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)},Bn=new WeakSet,zc=function(e=null){let t=l(this,Vi).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Vi).set(e,t)}return t},xm=function(){if(l(this,Gs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),y(this,Gs,e.getBoundingClientRect().height),e.remove()},Sm=function(e,t){const n=l(this,Ui).get(e);if(n)return n;const s=v(this,Bn,zc).call(this,t),i=s.font;s.canvas.width=s.canvas.height=St,s.font=`${St}px ${e}`;const a=s.measureText("");let o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(o){const d=o/(o+c);return l(this,Ui).set(e,d),s.canvas.width=s.canvas.height=0,s.font=i,d}s.strokeStyle="red",s.clearRect(0,0,St,St),s.strokeText("g",0,0);let h=s.getImageData(0,0,St,St).data;c=0;for(let d=h.length-1-3;d>=0;d-=4)if(h[d]>0){c=Math.ceil(d/4/St);break}s.clearRect(0,0,St,St),s.strokeText("A",0,St),h=s.getImageData(0,0,St,St).data,o=0;for(let d=0,f=h.length;d<f;d+=4)if(h[d]>0){o=St-Math.floor(d/4/St);break}s.canvas.width=s.canvas.height=0,s.font=i;const u=o?o/(o+c):Qx;return l(this,Ui).set(e,u),u},S(He,Bn),S(He,Ui,new Map),S(He,Vi,new Map),S(He,Gs,null),S(He,fa,new Set),He);function Zx(){Ig("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:r,container:e,viewport:t,...n}=arguments[0],s=Object.keys(n);s.length>0&&Y("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new ph({textContentSource:r,container:e,viewport:t}),{textDivs:a,textContentItemsStr:o}=i;return{promise:i.render(),textDivs:a,textContentItemsStr:o}}function eS(){Ig("`updateTextLayer`, please use `TextLayer` instead.")}class ko{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(ko.shouldBuildText(o))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)s(h)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const tS=65536,nS=100,sS=5e3,iS=ht?gx:nx,rS=ht?mx:Mg,aS=ht?px:tx,oS=ht?bx:Dg;function lS(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new rd,{docId:t}=e,n=r.url?cS(r.url):null,s=r.data?hS(r.data):null,i=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,c=r.range instanceof Am?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:tS;let u=r.worker instanceof Wr?r.worker:null;const d=r.verbosity,f=typeof r.docBaseUrl=="string"&&!uf(r.docBaseUrl)?r.docBaseUrl:null,p=typeof r.cMapUrl=="string"?r.cMapUrl:null,m=r.cMapPacked!==!1,b=r.CMapReaderFactory||rS,w=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,x=r.StandardFontDataFactory||oS,A=r.stopAtErrors!==!0,E=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,k=r.isEvalSupported!==!1,C=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!ht,T=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,P=typeof r.disableFontFace=="boolean"?r.disableFontFace:ht,L=r.fontExtraProperties===!0,R=r.enableXfa===!0,D=r.ownerDocument||globalThis.document,M=r.disableRange===!0,J=r.disableStream===!0,X=r.disableAutoFetch===!0,B=r.pdfBug===!0,K=r.enableHWA===!0,Q=c?c.length:r.length??NaN,F=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!ht&&!P,O=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:b===Mg&&x===Dg&&p&&w&&oo(p,document.baseURI)&&oo(w,document.baseURI),Le=r.canvasFactory||new iS({ownerDocument:D,enableHWA:K}),Ue=r.filterFactory||new aS({docId:t,ownerDocument:D}),Zt=null;Uw(d);const Se={canvasFactory:Le,filterFactory:Ue};if(O||(Se.cMapReaderFactory=new b({baseUrl:p,isCompressed:m}),Se.standardFontDataFactory=new x({baseUrl:w})),!u){const Lt={verbosity:d,port:_s.workerPort};u=Lt.port?Wr.fromPort(Lt):new Wr(Lt),e._worker=u}const _e={docId:t,apiVersion:"4.4.168",data:s,password:o,disableAutoFetch:X,rangeChunkSize:h,length:Q,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:E,disableFontFace:P,ignoreErrors:A,isEvalSupported:k,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:T,fontExtraProperties:L,useSystemFonts:F,cMapUrl:O?p:null,standardFontDataUrl:O?w:null}},Wt={disableFontFace:P,fontExtraProperties:L,ownerDocument:D,pdfBug:B,styleElement:Zt,loadingParams:{disableAutoFetch:X,enableXfa:R}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Lt=u.messageHandler.sendWithPromise("GetDocRequest",_e,s?[s.buffer]:null);let ft;if(c)ft=new Ix(c,{disableRange:M,disableStream:J});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");ft=(xt=>ht?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&oo(xt.url)?new pp(xt):new qx(xt):oo(xt.url)?new pp(xt):new Bx(xt))({url:n,length:Q,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:M,disableStream:J})}return Lt.then(ve=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const xt=new ho(t,ve,u.port),vn=new pS(xt,e,ft,Wt,Se);e._transport=vn,xt.send("Ready",null)})}).catch(e._capability.reject),e}function cS(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(ht&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function hS(r){if(ht&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Xh(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function gp(r){return typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0}var Lh;const Rh=class Rh{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Rt(Rh,Lh)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Lh=new WeakMap,S(Rh,Lh,0);let rd=Rh,Am=class{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class uS{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Xs,cs,Yt,Or,$c;class dS{constructor(e,t,n,s=!1){S(this,Yt);S(this,Xs,null);S(this,cs,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new tp:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new Em,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}={}){return new cc({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=Ns.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null}){var E,k;(E=this._stats)==null||E.time("Overall");const d=this._transport.getRenderingIntent(n,s,u),{renderingIntent:f,cacheKey:p}=d;y(this,cs,!1),v(this,Yt,$c).call(this),o||(o=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const b=!!(f&Kt.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(d));const w=C=>{var T;m.renderTasks.delete(x),(this._maybeCleanupAfterRender||b)&&y(this,cs,!0),v(this,Yt,Or).call(this,!b),C?(x.capability.reject(C),this._abortOperatorList({intentState:m,reason:C instanceof Error?C:new Error(C)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new od({callback:w,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||(m.renderTasks=new Set)).add(x);const A=x.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([C,T])=>{var P;if(this.destroyed){w();return}if((P=this._stats)==null||P.time("Rendering"),!(T.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:C,optionalContentConfig:T}),x.operatorListChanged()}).catch(w),A}getOperatorList({intent:e="display",annotationMode:t=Ns.ENABLE,printAnnotationStorage:n=null}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const i=this._transport.getRenderingIntent(e,t,n,!0);let a=this._intentStates.get(i.cacheKey);a||(a=Object.create(null),this._intentStates.set(i.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(i)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ko.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function i(){a.read().then(function({value:c,done:h}){if(h){n(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),y(this,cs,!1),v(this,Yt,$c).call(this),Promise.all(e)}cleanup(e=!1){y(this,cs,!0);const t=v(this,Yt,Or).call(this,!1);return e&&t&&this._stats&&(this._stats=new tp),t}_startRenderPage(e,t){var s,i;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&v(this,Yt,Or).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n}){const{map:s,transfer:i}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},i).getReader(),c=this._intentStates.get(t);c.streamReader=o;const h=()=>{o.read().then(({value:u,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,c),h())},u=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();v(this,Yt,Or).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(u);else if(c.opListReadCapability)c.opListReadCapability.reject(u);else throw u}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof hf){let s=nS;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Cr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Xs=new WeakMap,cs=new WeakMap,Yt=new WeakSet,Or=function(e=!1){if(v(this,Yt,$c).call(this),!l(this,cs)||this.destroyed)return!1;if(e)return y(this,Xs,setTimeout(()=>{y(this,Xs,null),v(this,Yt,Or).call(this,!1)},sS)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,cs,!1),!0},$c=function(){l(this,Xs)&&(clearTimeout(l(this,Xs)),y(this,Xs,null))};var qi,Mh;class fS{constructor(){S(this,qi,new Set);S(this,Mh,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};l(this,Mh).then(()=>{for(const s of l(this,qi))s.call(this,n)})}addEventListener(e,t){l(this,qi).add(t)}removeEventListener(e,t){l(this,qi).delete(t)}terminate(){l(this,qi).clear()}}qi=new WeakMap,Mh=new WeakMap;const Zn={isWorkerDisabled:!1,fakeWorkerId:0};ht&&(Zn.isWorkerDisabled=!0,_s.workerSrc||(_s.workerSrc="./pdf.worker.mjs")),Zn.isSameOrigin=function(r,e){let t;try{if(t=new URL(r),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},Zn.createCDNWrapper=function(r){const e=`await import("${r}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Gi,pa,Hc,ga,Bc;const Dt=class Dt{constructor({name:e=null,port:t=null,verbosity:n=Vw()}={}){S(this,pa);var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(Dt,Gi))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Dt,Gi)||y(Dt,Gi,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return ht?Promise.all([Wn.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ho("main","worker",e),this._messageHandler.on("ready",function(){}),v(this,pa,Hc).call(this)}_initialize(){if(Zn.isWorkerDisabled||l(Dt,ga,Bc)){this._setupFakeWorker();return}let{workerSrc:e}=Dt;try{Zn.isSameOrigin(window.location.href,e)||(e=Zn.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ho("main","worker",t),s=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),n.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}this._messageHandler=n,this._port=t,this._webWorker=t,v(this,pa,Hc).call(this)}),n.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{qh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Zn.isWorkerDisabled||(Y("Setting up fake worker."),Zn.isWorkerDisabled=!0),Dt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new fS;this._port=t;const n=`fake${Zn.fakeWorkerId++}`,s=new ho(n+"_worker",n,t);e.setup(s,t),this._messageHandler=new ho(n,n+"_worker",t),v(this,pa,Hc).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Dt,Gi))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=l(this,Gi))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Dt(e)}static get workerSrc(){if(_s.workerSrc)return _s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return se(this,"_setupFakeWorkerGlobal",(async()=>l(this,ga,Bc)?l(this,ga,Bc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gi=new WeakMap,pa=new WeakSet,Hc=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ga=new WeakSet,Bc=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(Dt,ga),S(Dt,Gi);let Wr=Dt;var hs,Tn,ma,ba,Pn,Xi,uo;class pS{constructor(e,t,n,s,i){S(this,Xi);S(this,hs,new Map);S(this,Tn,new Map);S(this,ma,new Map);S(this,ba,new Map);S(this,Pn,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Em,this.fontLoader=new dx({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return se(this,"annotationStorage",new pf)}getRenderingIntent(e,t=Ns.ENABLE,n=null,s=!1){let i=Kt.DISPLAY,a=Ju;switch(e){case"any":i=Kt.ANY;break;case"display":break;case"print":i=Kt.PRINT;break;default:Y(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Ns.DISABLE:i+=Kt.ANNOTATIONS_DISABLE;break;case Ns.ENABLE:break;case Ns.ENABLE_FORMS:i+=Kt.ANNOTATIONS_FORMS;break;case Ns.ENABLE_STORAGE:i+=Kt.ANNOTATIONS_STORAGE,a=(i&Kt.PRINT&&n instanceof lm?n:this.annotationStorage).serializable;break;default:Y(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(i+=Kt.OPLIST),{renderingIntent:i,cacheKey:`${i}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,Pn))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Tn).values())e.push(s._destroy());l(this,Tn).clear(),l(this,ma).clear(),l(this,ba).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,hs).clear(),this.filterFactory.destroy(),ph.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Cr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Be(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Be(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",n=>{const s=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then(()=>{var a;(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),i.onProgress=o=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:o.loaded,total:o.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(n,s)=>{Be(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Be(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new uS(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new Tu(n.message,n.code);break;case"InvalidPDFException":s=new Tg(n.message);break;case"MissingPDFException":s=new kr(n.message);break;case"UnexpectedResponseException":s=new Gh(n.message,n.status);break;case"UnknownErrorException":s=new Pu(n.message,n.details);break;default:ue("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(y(this,Pn,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?l(this,Pn).reject(i):l(this,Pn).resolve({password:i})};try{t.onPassword(s,n.code)}catch(i){l(this,Pn).reject(i)}}else l(this,Pn).reject(new Tu(n.message,n.code));return l(this,Pn).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Tn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in i){const p=i.error;Y(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const u=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new fx(i,{disableFontFace:o,inspectFont:u});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=i;Be(f,"The imageRef must be defined.");for(const p of l(this,Tn).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,i,a])=>{var c;if(this.destroyed)return;const o=l(this,Tn).get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":o.objs.resolve(n,a),(a==null?void 0:a.dataLen)>$w&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Y("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=l(this,ma).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,ba).set(i.refStr,e);const a=new dS(t,i,this,this._params.pdfBug);return l(this,Tn).set(t,a),a});return l(this,ma).set(t,s),s}getPageIndex(e){return gp(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return v(this,Xi,uo).call(this,"GetFieldObjects")}hasJSActions(){return v(this,Xi,uo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return v(this,Xi,uo).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return v(this,Xi,uo).call(this,"GetOptionalContentConfig").then(t=>new Dx(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,hs).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new Rx(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,hs).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Tn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,hs).clear(),this.filterFactory.destroy(!0),ph.cleanup()}}cachedPageNumber(e){if(!gp(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,ba).get(t)??null}}hs=new WeakMap,Tn=new WeakMap,ma=new WeakMap,ba=new WeakMap,Pn=new WeakMap,Xi=new WeakSet,uo=function(e,t=null){const n=l(this,hs).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return l(this,hs).set(e,s),s};const Cc=Symbol("INITIAL_DATA");var ln,bl,ad;class Em{constructor(){S(this,bl);S(this,ln,Object.create(null))}get(e,t=null){if(t){const s=v(this,bl,ad).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=l(this,ln)[e];if(!n||n.data===Cc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=l(this,ln)[e];return!!t&&t.data!==Cc}resolve(e,t=null){const n=v(this,bl,ad).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in l(this,ln)){const{data:n}=l(this,ln)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}y(this,ln,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,ln)){const{data:t}=l(this,ln)[e];t!==Cc&&(yield[e,t])}}}ln=new WeakMap,bl=new WeakSet,ad=function(e){var t;return(t=l(this,ln))[e]||(t[e]={...Promise.withResolvers(),data:Cc})};var Ks;class gS{constructor(e){S(this,Ks,null);y(this,Ks,e),this.onContinue=null}get promise(){return l(this,Ks).capability.promise}cancel(e=0){l(this,Ks).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Ks).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Ks);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ks=new WeakMap;var Ys,Ki;const Si=class Si{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){S(this,Ys,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(Si,Ki).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Si,Ki).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:i,background:a}=this.params;this.gfx=new Br(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Ys)&&(window.cancelAnimationFrame(l(this,Ys)),y(this,Ys,null)),l(Si,Ki).delete(this._canvas),this.callback(e||new hf(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,Ys,window.requestAnimationFrame(()=>{y(this,Ys,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Si,Ki).delete(this._canvas),this.callback())))}};Ys=new WeakMap,Ki=new WeakMap,S(Si,Ki,new WeakSet);let od=Si;const mS="4.4.168",bS="19fbc8998";function mp(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function so(r){return Math.max(0,Math.min(255,255*r))}class bp{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=so(e),[e,e,e]}static G_HTML([e]){const t=mp(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(so)}static RGB_HTML(e){return`#${e.map(mp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[so(1-Math.min(1,e+s)),so(1-Math.min(1,n+s)),so(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,i=1-t,a=1-n,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class _m{static setupStorage(e,t,n,s,i){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&e.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,h)}o&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var d,f;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:n});const o=i!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&ko.shouldBuildText(s.name)&&h.push(p)}return{textDivs:h}}const u=[[s,-1,a]];for(;u.length>0;){const[p,m,b]=u.at(-1);if(m+1===p.children.length){u.pop();continue}const w=p.children[++u.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const E=document.createTextNode(w.value);h.push(E),b.append(E);continue}const A=(d=w==null?void 0:w.attributes)!=null&&d.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(b.append(A),w.attributes&&this.setAttributes({html:A,element:w,storage:t,intent:i,linkService:n}),((f=w.children)==null?void 0:f.length)>0)u.push([w,-1,A]);else if(w.value){const E=document.createTextNode(w.value);o&&ko.shouldBuildText(x)&&h.push(E),A.append(E)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dc=1e3,yS=9,xr=new WeakSet;function ks(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class vS{static create(e){switch(e.data.annotationType){case Fe.LINK:return new km(e);case Fe.TEXT:return new wS(e);case Fe.WIDGET:switch(e.data.fieldType){case"Tx":return new xS(e);case"Btn":return e.data.radioButton?new Pm(e):e.data.checkBox?new AS(e):new ES(e);case"Ch":return new _S(e);case"Sig":return new SS(e)}return new Tr(e);case Fe.POPUP:return new cd(e);case Fe.FREETEXT:return new Im(e);case Fe.LINE:return new CS(e);case Fe.SQUARE:return new TS(e);case Fe.CIRCLE:return new PS(e);case Fe.POLYLINE:return new jm(e);case Fe.CARET:return new RS(e);case Fe.INK:return new Fm(e);case Fe.POLYGON:return new LS(e);case Fe.HIGHLIGHT:return new MS(e);case Fe.UNDERLINE:return new DS(e);case Fe.SQUIGGLY:return new IS(e);case Fe.STRIKEOUT:return new jS(e);case Fe.STAMP:return new Om(e);case Fe.FILEATTACHMENT:return new FS(e);default:return new Me(e)}}}var Yi,ya,va,yl,ld;const Cf=class Cf{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){S(this,yl);S(this,Yi,null);S(this,ya,!1);S(this,va,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get hasPopupData(){return Cf._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;l(this,Yi)||y(this,Yi,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&v(this,yl,ld).call(this,t),(n=l(this,va))==null||n.popup.updateEdited(e)}resetEdited(){var e;l(this,Yi)&&(v(this,yl,ld).call(this,l(this,Yi).rect),(e=l(this,va))==null||e.popup.resetEdited(),y(this,Yi,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Tr||(i.tabIndex=dc);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.popupRef&&i.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof cd){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,i),i}const{width:o,height:c}=ks(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(b>0||w>0){const A=`calc(${b}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;a.borderRadius=A}else if(this instanceof Pm){const A=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=A}switch(t.borderStyle.style){case to.SOLID:a.borderStyle="solid";break;case to.DASHED:a.borderStyle="dashed";break;case to.BEVELED:Y("Unimplemented border style: beveled");break;case to.INSET:Y("Unimplemented border style: inset");break;case to.UNDERLINE:a.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(y(this,ya,!0),a.borderColor=z.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):a.borderWidth=0}const h=z.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=s.rawDims;a.left=`${100*(h[0]-f)/u}%`,a.top=`${100*(h[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/u}%`,a.height=`${100*c/d}%`):this.setRotation(m,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=ks(this.data.rect);let o,c;e%180===0?(o=100*i/n,c=100*a/s):(o=100*a/n,c=100*i/s),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[n]=bp[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:bp[`${a}_rgb`](o)})};return se(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||n[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,i]of Object.entries(t)){const a=n[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,i]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,w,x,A]=e.subarray(2,6);if(s===b&&i===w&&t===x&&n===A)return}const{style:a}=this.container;let o;if(l(this,ya)){const{borderColor:b,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=s-t,h=i-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let b=2,w=e.length;b<w;b+=8){const x=e[b],A=e[b+1],E=e[b+2],k=e[b+3],C=u.createElement("rect"),T=(E-t)/c,P=(i-A)/h,L=(x-E)/c,R=(A-k)/h;C.setAttribute("x",T),C.setAttribute("y",P),C.setAttribute("width",L),C.setAttribute("height",R),p.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${P}" width="${L}" height="${R}"/>`)}l(this,ya)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=y(this,va,new cd({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const c=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!xr.has(h)){Y(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&xr.has(s)&&n.push({id:a,exportValue:i,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Yi=new WeakMap,ya=new WeakMap,va=new WeakMap,yl=new WeakSet,ld=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:u}=ks(e);t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*h/i}%`,t.height=`${100*u/a}%`):this.setRotation(s)};let Me=Cf;var Bt,bi,Cm,Tm;class km extends Me{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});S(this,Bt);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(v(this,Bt,Cm).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(v(this,Bt,Tm).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&v(this,Bt,bi).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),v(this,Bt,bi).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),v(this,Bt,bi).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),v(this,Bt,bi).call(this),!this._fieldObjects){Y('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:i,refs:a,include:o}=n,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const p of i){const m=this._fieldObjects[p]||[];for(const{id:b}of m)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,u=[];for(const f of c){const{id:p}=f;switch(u.push(p),f.type){case"text":{const b=f.defaultValue||"";h.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;h.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";h.setValue(p,{value:b});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!xr.has(m)){Y(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Bt=new WeakSet,bi=function(){this.container.setAttribute("data-internal-link","")},Cm=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(n.content,n.filename,s),!1},v(this,Bt,bi).call(this)},Tm=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),v(this,Bt,bi).call(this)};class wS extends Me{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Tr extends Me{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ct.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,i){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,n,s){var i,a,o;for(const[c,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,h,s),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":z.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||yS,i=e.style;let a;const o=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(h/(hu*s))||1,d=h/u;a=Math.min(s,c(d/hu))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(h/hu))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=z.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class xS extends Tr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[s]:n})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let h=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),xr.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=dc,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=u.userValue=p,u.formattedValue=null});let d=f=>{const{formattedValue:p}=u;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var b;if(u.focused)return;const{target:m}=p;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(b){u.userValue=b.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),b.target.value=u.userValue},formattedValue(b){const{formattedValue:w}=b.detail;u.formattedValue=w,w!=null&&b.target!==document.activeElement&&(b.target.value=w),e.setValue(t,{formattedValue:w})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var E;const{charLimit:w}=b.detail,{target:x}=b;if(w===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",w);let A=u.userValue;!A||A.length<=w||(A=A.slice(0,w),x.value=u.userValue=A,e.setValue(t,{value:A}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),n.addEventListener("keydown",p=>{var w;u.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:b}=p.target;u.lastCommittedValue!==b&&(u.lastCommittedValue=b,u.userValue=b,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var b,w;if(!u.focused||!p.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(u.focused=!1);const{value:m}=p.target;u.userValue=m,u.lastCommittedValue!==m&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",p=>{var C;u.lastCommittedValue=null;const{data:m,target:b}=p,{value:w,selectionStart:x,selectionEnd:A}=b;let E=x,k=A;switch(p.inputType){case"deleteWordBackward":{const T=w.substring(0,x).match(/\w*[^\w]*$/);T&&(E-=T[0].length);break}case"deleteWordForward":{const T=w.substring(x).match(/^[^\w]*\w*/);T&&(k+=T[0].length);break}case"deleteContentBackward":x===A&&(E-=1);break;case"deleteContentForward":x===A&&(k+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:m||"",willCommit:!1,selStart:E,selEnd:k}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class SS extends Tr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class AS extends Tr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return xr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=dc,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n)){const u=c&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=u),e.setValue(h.id,{value:u})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Pm extends Tr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(xr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=dc,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const c={value:h=>{const u=a===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===n;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ES extends km{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class _S extends Tr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");xr.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=dc;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),i=!1),s.append(d)}let a=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),a=()=>{u.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const d={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const b of s.options)b.selected=m.has(b.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:b}=f.detail.insert,w=s.children[p],x=document.createElement("option");x.textContent=m,x.value=b,w?w.before(x):s.append(x),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:b,exportValue:w}=m,x=document.createElement("option");x.textContent=b,x.value=w,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),s.addEventListener("input",u=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class cd extends Me{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Me._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new kS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Lg}${n}`).join(",")),this.container}}var wa,Dh,Ih,xa,Ji,Pe,us,Qi,vl,wl,Sa,ds,cn,fs,xl,ps,Sl,Zi,er,de,Wc,hd,Lm,Rm,Mm,Dm,Uc,Vc,ud;class kS{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:c,rect:h,parentRect:u,open:d}){S(this,de);S(this,wa,v(this,de,Mm).bind(this));S(this,Dh,v(this,de,ud).bind(this));S(this,Ih,v(this,de,Vc).bind(this));S(this,xa,v(this,de,Uc).bind(this));S(this,Ji,null);S(this,Pe,null);S(this,us,null);S(this,Qi,null);S(this,vl,null);S(this,wl,null);S(this,Sa,null);S(this,ds,!1);S(this,cn,null);S(this,fs,null);S(this,xl,null);S(this,ps,null);S(this,Sl,null);S(this,Zi,null);S(this,er,!1);var f;y(this,Pe,e),y(this,Sl,s),y(this,us,a),y(this,ps,o),y(this,wl,c),y(this,Ji,t),y(this,xl,h),y(this,Sa,u),y(this,vl,n),y(this,Qi,jg.toDateObject(i)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,xa)),p.addEventListener("mouseenter",l(this,Ih)),p.addEventListener("mouseleave",l(this,Dh)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",l(this,wa));l(this,Pe).hidden=!0,d&&v(this,de,Uc).call(this)}render(){if(l(this,cn))return;const e=y(this,cn,document.createElement("div"));if(e.className="popup",l(this,Ji)){const i=e.style.outlineColor=z.makeHexColor(...l(this,Ji));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=z.makeHexColor(...l(this,Ji).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=l(this,Sl),e.append(t),l(this,Qi)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),i.setAttribute("data-l10n-args",JSON.stringify({date:l(this,Qi).toLocaleDateString(),time:l(this,Qi).toLocaleTimeString()})),t.append(i)}const s=l(this,de,Wc);if(s)_m.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(l(this,us));e.append(i)}l(this,Pe).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];n.append(document.createTextNode(o)),i<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;l(this,Zi)||y(this,Zi,{contentsObj:l(this,us),richText:l(this,ps)}),e&&y(this,fs,null),t&&(y(this,ps,v(this,de,Rm).call(this,t)),y(this,us,null)),(n=l(this,cn))==null||n.remove(),y(this,cn,null)}resetEdited(){var e;l(this,Zi)&&({contentsObj:Rt(this,us)._,richText:Rt(this,ps)._}=l(this,Zi),y(this,Zi,null),(e=l(this,cn))==null||e.remove(),y(this,cn,null),y(this,fs,null))}forceHide(){y(this,er,this.isVisible),l(this,er)&&(l(this,Pe).hidden=!0)}maybeShow(){l(this,er)&&(l(this,cn)||v(this,de,Vc).call(this),y(this,er,!1),l(this,Pe).hidden=!1)}get isVisible(){return l(this,Pe).hidden===!1}}wa=new WeakMap,Dh=new WeakMap,Ih=new WeakMap,xa=new WeakMap,Ji=new WeakMap,Pe=new WeakMap,us=new WeakMap,Qi=new WeakMap,vl=new WeakMap,wl=new WeakMap,Sa=new WeakMap,ds=new WeakMap,cn=new WeakMap,fs=new WeakMap,xl=new WeakMap,ps=new WeakMap,Sl=new WeakMap,Zi=new WeakMap,er=new WeakMap,de=new WeakSet,Wc=function(){const e=l(this,ps),t=l(this,us);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,ps).html||null},hd=function(){var e,t,n;return((n=(t=(e=l(this,de,Wc))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},Lm=function(){var e,t,n;return((n=(t=(e=l(this,de,Wc))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},Rm=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,de,Lm),fontSize:l(this,de,hd)?`calc(${l(this,de,hd)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return n},Mm=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,ds))&&v(this,de,Uc).call(this)},Dm=function(){if(l(this,fs)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:i}}}=l(this,wl);let a=!!l(this,Sa),o=a?l(this,Sa):l(this,xl);for(const m of l(this,vl))if(!o||z.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const c=z.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=a?o[2]-o[0]+5:0,d=c[0]+u,f=c[1];y(this,fs,[100*(d-s)/t,100*(f-i)/n]);const{style:p}=l(this,Pe);p.left=`${l(this,fs)[0]}%`,p.top=`${l(this,fs)[1]}%`},Uc=function(){y(this,ds,!l(this,ds)),l(this,ds)?(v(this,de,Vc).call(this),l(this,Pe).addEventListener("click",l(this,xa)),l(this,Pe).addEventListener("keydown",l(this,wa))):(v(this,de,ud).call(this),l(this,Pe).removeEventListener("click",l(this,xa)),l(this,Pe).removeEventListener("keydown",l(this,wa)))},Vc=function(){l(this,cn)||this.render(),this.isVisible?l(this,ds)&&l(this,Pe).classList.add("focused"):(v(this,de,Dm).call(this),l(this,Pe).hidden=!1,l(this,Pe).style.zIndex=parseInt(l(this,Pe).style.zIndex)+1e3)},ud=function(){l(this,Pe).classList.remove("focused"),!(l(this,ds)||!this.isVisible)&&(l(this,Pe).hidden=!0,l(this,Pe).style.zIndex=parseInt(l(this,Pe).style.zIndex)-1e3)};class Im extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Al;class CS extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Al,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=ks(t.rect),i=this.svgFactory.create(n,s,!0),a=y(this,Al,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Al)}addHighlightArea(){this.container.classList.add("highlightArea")}}Al=new WeakMap;var El;class TS extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,El,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=ks(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=y(this,El,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,El)}addHighlightArea(){this.container.classList.add("highlightArea")}}El=new WeakMap;var _l;class PS extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,_l,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=ks(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=y(this,_l,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",s/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,_l)}addHighlightArea(){this.container.classList.add("highlightArea")}}_l=new WeakMap;var kl;class jm extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,kl,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:i}}=this;if(!n)return this.container;const{width:a,height:o}=ks(t),c=this.svgFactory.create(a,o,!0);let h=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-t[0],m=t[3]-n[d+1];h.push(`${p},${m}`)}h=h.join(" ");const u=y(this,kl,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,kl)}addHighlightArea(){this.container.classList.add("highlightArea")}}kl=new WeakMap;class LS extends jm{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class RS extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Cl;class Fm extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Cl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:s,popupRef:i}}=this,{width:a,height:o}=ks(t),c=this.svgFactory.create(a,o,!0);for(const h of n){let u=[];for(let f=0,p=h.length;f<p;f+=2){const m=h[f]-t[0],b=t[3]-h[f+1];u.push(`${m},${b}`)}u=u.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Cl).push(d),d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!i&&this.hasPopupData&&this._createPopup(),c.append(d)}return this.container.append(c),this.container}getElementsToTriggerPopup(){return l(this,Cl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cl=new WeakMap;class MS extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class DS extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class IS extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class jS extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Om extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Tl,Pl,dd;class FS extends Me{constructor(t){var s;super(t,{isRenderable:!0});S(this,Pl);S(this,Tl,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",v(this,Pl,dd).bind(this)),y(this,Tl,s);const{isMac:i}=Ct.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&v(this,Pl,dd).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Tl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tl=new WeakMap,Pl=new WeakSet,dd=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ll,tr,Aa,Ar,Nm,fd,Wp;let OS=(Wp=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:i,viewport:a}){S(this,Ar);S(this,Ll,null);S(this,tr,null);S(this,Aa,new Map);this.div=e,y(this,Ll,t),y(this,tr,n),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var a;const{annotations:t}=e,n=this.div;vr(n,this.viewport);const s=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new cf,annotationStorage:e.annotationStorage||new pf,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Fe.POPUP;if(c){const d=s.get(o.id);if(!d)continue;i.elements=d}else{const{width:d,height:f}=ks(o.rect);if(d<=0||f<=0)continue}i.data=o;const h=vS.create(i);if(!h.isRenderable)continue;if(!c&&o.popupRef){const d=s.get(o.popupRef);d?d.push(h):s.set(o.popupRef,[h])}const u=h.render();o.hidden&&(u.style.visibility="hidden"),v(this,Ar,Nm).call(this,u,o.id),h.annotationEditorType>0&&(l(this,Aa).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}v(this,Ar,fd).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,vr(t,{rotation:e.rotation}),v(this,Ar,fd).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Aa).values())}getEditableAnnotation(e){return l(this,Aa).get(e)}},Ll=new WeakMap,tr=new WeakMap,Aa=new WeakMap,Ar=new WeakSet,Nm=function(e,t){var s;const n=e.firstChild||e;n.id=`${Lg}${t}`,this.div.append(e),(s=l(this,Ll))==null||s.moveElementInDOM(this.div,e,n,!1)},fd=function(){if(!l(this,tr))return;const e=this.div;for(const[t,n]of l(this,tr)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):s.append(n)}l(this,tr).clear()},Wp);const Tc=/\r\n?|\n/g;var Rl,Ml,Dl,Il,jl,hn,Ot,Fl,Nt,Ea,je,zm,$m,Hm,qc,Ts,Gc,Xc,Bm,gd,Wm;const ye=class ye extends ce{constructor(t){super({...t,name:"freeTextEditor"});S(this,je);S(this,Rl,this.editorDivBlur.bind(this));S(this,Ml,this.editorDivFocus.bind(this));S(this,Dl,this.editorDivInput.bind(this));S(this,Il,this.editorDivKeydown.bind(this));S(this,jl,this.editorDivPaste.bind(this));S(this,hn);S(this,Ot,"");S(this,Fl,`${this.id}-editor`);S(this,Nt);S(this,Ea,null);y(this,hn,t.color||ye._defaultColor||ce._defaultLineColor),y(this,Nt,t.fontSize||ye._defaultFontSize)}static get _keyboardManager(){const t=ye.prototype,n=a=>a.isEmpty(),s=wr.TRANSLATE_SMALL,i=wr.TRANSLATE_BIG;return se(this,"_keyboardManager",new hc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){ce.initialize(t,n,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case V.FREETEXT_SIZE:ye._defaultFontSize=n;break;case V.FREETEXT_COLOR:ye._defaultColor=n;break}}updateParams(t,n){switch(t){case V.FREETEXT_SIZE:v(this,je,zm).call(this,n);break;case V.FREETEXT_COLOR:v(this,je,$m).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[V.FREETEXT_SIZE,ye._defaultFontSize],[V.FREETEXT_COLOR,ye._defaultColor||ce._defaultLineColor]]}get propertiesToUpdate(){return[[V.FREETEXT_SIZE,l(this,Nt)],[V.FREETEXT_COLOR,l(this,hn)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ye._internalPadding*t,-(ye._internalPadding+l(this,Nt))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ne.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",l(this,Il),{signal:t}),this.editorDiv.addEventListener("focus",l(this,Ml),{signal:t}),this.editorDiv.addEventListener("blur",l(this,Rl),{signal:t}),this.editorDiv.addEventListener("input",l(this,Dl),{signal:t}),this.editorDiv.addEventListener("paste",l(this,jl),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Fl)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,Il)),this.editorDiv.removeEventListener("focus",l(this,Ml)),this.editorDiv.removeEventListener("blur",l(this,Rl)),this.editorDiv.removeEventListener("input",l(this,Dl)),this.editorDiv.removeEventListener("paste",l(this,jl)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Ot),n=y(this,Ot,v(this,je,Hm).call(this).trimEnd());if(t===n)return;const s=i=>{if(y(this,Ot,i),!i){this.remove();return}v(this,je,Xc).call(this),this._uiManager.rebuild(this),v(this,je,qc).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),v(this,je,qc).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Fl)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),ce._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Nt)}px * var(--scale-factor))`,s.color=l(this,hn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),uh(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=l(this,Ea);let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,b;switch(this.rotation){case 0:m=t+(o[0]-f)/u,b=n+this.height-(o[1]-p)/d;break;case 90:m=t+(o[0]-f)/u,b=n-(o[1]-p)/d,[c,h]=[h,-c];break;case 180:m=t-this.width+(o[0]-f)/u,b=n-(o[1]-p)/d,[c,h]=[-c,-h];break;case 270:m=t+(o[0]-f-this.height*d)/u,b=n+(o[1]-p-this.width*u)/d,[c,h]=[-h,c];break}this.setAt(m*i,b*a,c,h)}else this.setAt(t*i,n*a,this.width*i,this.height*a);v(this,je,Xc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,b,w;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=v(m=ye,Ts,gd).call(m,n.getData("text")||"").replaceAll(Tc,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=o,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(d.push(c.nodeValue.slice(h).replaceAll(Tc,"")),x!==this.editorDiv){let A=u;for(const E of this.editorDiv.childNodes){if(E===x){A=d;continue}A.push(v(b=ye,Ts,Gc).call(b,E))}}u.push(c.nodeValue.slice(0,h).replaceAll(Tc,""))}else if(c===this.editorDiv){let x=u,A=0;for(const E of this.editorDiv.childNodes)A++===h&&(x=d),x.push(v(w=ye,Ts,Gc).call(w,E))}y(this,Ot,`${u.join(`
`)}${i}${d.join(`
`)}`),v(this,je,Xc).call(this);const f=new Range;let p=u.reduce((x,A)=>x+A.length,0);for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const A=x.nodeValue.length;if(p<=A){f.setStart(x,p),f.setEnd(x,p);break}p-=A}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(t,n,s){var o;let i=null;if(t instanceof Im){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:d,id:f},textContent:p,textPosition:m,parent:{page:{pageNumber:b}}}=t;if(!p||p.length===0)return null;i=t={annotationType:ne.FREETEXT,color:Array.from(h),fontSize:c,value:p.join(`
`),position:m,pageIndex:b-1,rect:u.slice(0),rotation:d,id:f,deleted:!1}}const a=super.deserialize(t,n,s);return y(a,Nt,t.fontSize),y(a,hn,z.makeHexColor(...t.color)),y(a,Ot,v(o=ye,Ts,gd).call(o,t.value)),a.annotationElementId=t.id||null,y(a,Ea,i),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=ye._internalPadding*this.parentScale,s=this.getRect(n,n),i=ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,hn)),a={annotationType:ne.FREETEXT,color:i,fontSize:l(this,Nt),value:v(this,je,Bm).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!v(this,je,Wm).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${l(this,Nt)}px * var(--scale-factor))`,s.color=l(this,hn),n.replaceChildren();for(const a of l(this,Ot).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}const i=ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:l(this,Ot)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Rl=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,Il=new WeakMap,jl=new WeakMap,hn=new WeakMap,Ot=new WeakMap,Fl=new WeakMap,Nt=new WeakMap,Ea=new WeakMap,je=new WeakSet,zm=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-l(this,Nt))*this.parentScale),y(this,Nt,i),v(this,je,qc).call(this)},s=l(this,Nt);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$m=function(t){const n=i=>{y(this,hn,this.editorDiv.style.color=i)},s=l(this,hn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Hm=function(){var n;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(v(n=ye,Ts,Gc).call(n,s));return t.join(`
`)},qc=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},Ts=new WeakSet,Gc=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Tc,"")},Xc=function(){if(this.editorDiv.replaceChildren(),!!l(this,Ot))for(const t of l(this,Ot).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},Bm=function(){return l(this,Ot).replaceAll(" "," ")},gd=function(t){return t.replaceAll(" "," ")},Wm=function(t){const{value:n,fontSize:s,color:i,pageIndex:a}=l(this,Ea);return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==a},S(ye,Ts),G(ye,"_freeTextDefaultContent",""),G(ye,"_internalPadding",0),G(ye,"_defaultColor",null),G(ye,"_defaultFontSize",10),G(ye,"_type","freetext"),G(ye,"_editorType",ne.FREETEXT);let pd=ye;var Ol,Js,un,wt,Um,Kc,Vm,qm,bd;class md{constructor(e,t=0,n=0,s=!0){S(this,wt);S(this,Ol);S(this,Js,[]);S(this,un,[]);let i=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x,y:A,width:E,height:k}of e){const C=Math.floor((x-t)/u)*u,T=Math.ceil((x+E+t)/u)*u,P=Math.floor((A-t)/u)*u,L=Math.ceil((A+k+t)/u)*u,R=[C,P,L,!0],D=[T,P,L,!1];l(this,Js).push(R,D),i=Math.min(i,C),a=Math.max(a,T),o=Math.min(o,P),c=Math.max(c,L)}const d=a-i+2*n,f=c-o+2*n,p=i-n,m=o-n,b=l(this,Js).at(s?-1:-2),w=[b[0],b[2]];for(const x of l(this,Js)){const[A,E,k]=x;x[0]=(A-p)/d,x[1]=(E-m)/f,x[2]=(k-m)/f}y(this,Ol,{x:p,y:m,width:d,height:f,lastPoint:w})}getOutlines(){l(this,Js).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of l(this,Js))t[3]?(e.push(...v(this,wt,bd).call(this,t)),v(this,wt,Vm).call(this,t)):(v(this,wt,qm).call(this,t),e.push(...v(this,wt,bd).call(this,t)));return v(this,wt,Um).call(this,e)}}Ol=new WeakMap,Js=new WeakMap,un=new WeakMap,wt=new WeakSet,Um=function(e){const t=[],n=new Set;for(const a of e){const[o,c,h]=a;t.push([o,c,a],[o,h,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],h=t[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let i;for(;n.size>0;){const a=n.values().next().value;let[o,c,h,u,d]=a;n.delete(a);let f=o,p=c;for(i=[o,h],s.push(i);;){let m;if(n.has(u))m=u;else if(n.has(d))m=d;else break;n.delete(m),[o,c,h,u,d]=m,f!==o&&(i.push(f,p,o,p===c?c:h),f=o),p=p===c?h:c}i.push(f,p)}return new NS(s,l(this,Ol))},Kc=function(e){const t=l(this,un);let n=0,s=t.length-1;for(;n<=s;){const i=n+s>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:s=i-1}return s+1},Vm=function([,e,t]){const n=v(this,wt,Kc).call(this,e);l(this,un).splice(n,0,[e,t])},qm=function([,e,t]){const n=v(this,wt,Kc).call(this,e);for(let s=n;s<l(this,un).length;s++){const[i,a]=l(this,un)[s];if(i!==e)break;if(i===e&&a===t){l(this,un).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[i,a]=l(this,un)[s];if(i!==e)break;if(i===e&&a===t){l(this,un).splice(s,1);return}}},bd=function(e){const[t,n,s]=e,i=[[t,n,s]],a=v(this,wt,Kc).call(this,s);for(let o=0;o<a;o++){const[c,h]=l(this,un)[o];for(let u=0,d=i.length;u<d;u++){const[,f,p]=i[u];if(!(h<=f||p<=c)){if(f>=c){if(p>h)i[u][1]=h;else{if(d===1)return[];i.splice(u,1),u--,d--}continue}i[u][2]=c,p>h&&i.push([t,h,p])}}}return i};class Gm{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof vd}}var Nl,_a;class NS extends Gm{constructor(t,n){super();S(this,Nl);S(this,_a);y(this,_a,t),y(this,Nl,n)}toSVGPath(){const t=[];for(const n of l(this,_a)){let[s,i]=n;t.push(`M${s} ${i}`);for(let a=2;a<n.length;a+=2){const o=n[a],c=n[a+1];o===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,n,s,i],a){const o=[],c=s-t,h=i-n;for(const u of l(this,_a)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=t+u[f]*c,d[f+1]=i-u[f+1]*h;o.push(d)}return o}get box(){return l(this,Nl)}}Nl=new WeakMap,_a=new WeakMap;var Ln,gs,ka,Ca,Rn,te,nr,sr,zl,$l,Ta,Pa,Qs,Hl,jh,Fh,Bl,yd;const Jn=class Jn{constructor({x:e,y:t},n,s,i,a,o=0){S(this,Bl);S(this,Ln);S(this,gs,[]);S(this,ka);S(this,Ca);S(this,Rn,[]);S(this,te,new Float64Array(18));S(this,nr);S(this,sr);S(this,zl);S(this,$l);S(this,Ta);S(this,Pa);S(this,Qs,[]);y(this,Ln,n),y(this,Pa,i*s),y(this,Ca,a),l(this,te).set([NaN,NaN,NaN,NaN,e,t],6),y(this,ka,o),y(this,$l,l(Jn,Hl)*s),y(this,zl,l(Jn,Fh)*s),y(this,Ta,s),l(this,Qs).push(e,t)}get free(){return!0}isEmpty(){return isNaN(l(this,te)[8])}add({x:e,y:t}){var R;y(this,nr,e),y(this,sr,t);const[n,s,i,a]=l(this,Ln);let[o,c,h,u]=l(this,te).subarray(8,12);const d=e-h,f=t-u,p=Math.hypot(d,f);if(p<l(this,zl))return!1;const m=p-l(this,$l),b=m/p,w=b*d,x=b*f;let A=o,E=c;o=h,c=u,h+=w,u+=x,(R=l(this,Qs))==null||R.push(e,t);const k=-x/m,C=w/m,T=k*l(this,Pa),P=C*l(this,Pa);return l(this,te).set(l(this,te).subarray(2,8),0),l(this,te).set([h+T,u+P],4),l(this,te).set(l(this,te).subarray(14,18),12),l(this,te).set([h-T,u-P],16),isNaN(l(this,te)[6])?(l(this,Rn).length===0&&(l(this,te).set([o+T,c+P],2),l(this,Rn).push(NaN,NaN,NaN,NaN,(o+T-n)/i,(c+P-s)/a),l(this,te).set([o-T,c-P],14),l(this,gs).push(NaN,NaN,NaN,NaN,(o-T-n)/i,(c-P-s)/a)),l(this,te).set([A,E,o,c,h,u],6),!this.isEmpty()):(l(this,te).set([A,E,o,c,h,u],6),Math.abs(Math.atan2(E-c,A-o)-Math.atan2(x,w))<Math.PI/2?([o,c,h,u]=l(this,te).subarray(2,6),l(this,Rn).push(NaN,NaN,NaN,NaN,((o+h)/2-n)/i,((c+u)/2-s)/a),[o,c,A,E]=l(this,te).subarray(14,18),l(this,gs).push(NaN,NaN,NaN,NaN,((A+o)/2-n)/i,((E+c)/2-s)/a),!0):([A,E,o,c,h,u]=l(this,te).subarray(0,6),l(this,Rn).push(((A+5*o)/6-n)/i,((E+5*c)/6-s)/a,((5*o+h)/6-n)/i,((5*c+u)/6-s)/a,((o+h)/2-n)/i,((c+u)/2-s)/a),[h,u,o,c,A,E]=l(this,te).subarray(12,18),l(this,gs).push(((A+5*o)/6-n)/i,((E+5*c)/6-s)/a,((5*o+h)/6-n)/i,((5*c+u)/6-s)/a,((o+h)/2-n)/i,((c+u)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Rn),t=l(this,gs),n=l(this,te).subarray(4,6),s=l(this,te).subarray(16,18),[i,a,o,c]=l(this,Ln),[h,u,d,f]=v(this,Bl,yd).call(this);if(isNaN(l(this,te)[6])&&!this.isEmpty())return`M${(l(this,te)[2]-i)/o} ${(l(this,te)[3]-a)/c} L${(l(this,te)[4]-i)/o} ${(l(this,te)[5]-a)/c} L${h} ${u} L${d} ${f} L${(l(this,te)[16]-i)/o} ${(l(this,te)[17]-a)/c} L${(l(this,te)[14]-i)/o} ${(l(this,te)[15]-a)/c} Z`;const p=[];p.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?p.push(`L${e[m+4]} ${e[m+5]}`):p.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);p.push(`L${(n[0]-i)/o} ${(n[1]-a)/c} L${h} ${u} L${d} ${f} L${(s[0]-i)/o} ${(s[1]-a)/c}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?p.push(`L${t[m+4]} ${t[m+5]}`):p.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return p.push(`L${t[4]} ${t[5]} Z`),p.join(" ")}getOutlines(){var x;const e=l(this,Rn),t=l(this,gs),n=l(this,te),s=n.subarray(4,6),i=n.subarray(16,18),[a,o,c,h]=l(this,Ln),u=new Float64Array((((x=l(this,Qs))==null?void 0:x.length)??0)+2);for(let A=0,E=u.length-2;A<E;A+=2)u[A]=(l(this,Qs)[A]-a)/c,u[A+1]=(l(this,Qs)[A+1]-o)/h;u[u.length-2]=(l(this,nr)-a)/c,u[u.length-1]=(l(this,sr)-o)/h;const[d,f,p,m]=v(this,Bl,yd).call(this);if(isNaN(n[6])&&!this.isEmpty()){const A=new Float64Array(36);return A.set([NaN,NaN,NaN,NaN,(n[2]-a)/c,(n[3]-o)/h,NaN,NaN,NaN,NaN,(n[4]-a)/c,(n[5]-o)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(n[16]-a)/c,(n[17]-o)/h,NaN,NaN,NaN,NaN,(n[14]-a)/c,(n[15]-o)/h],0),new vd(A,u,l(this,Ln),l(this,Ta),l(this,ka),l(this,Ca))}const b=new Float64Array(l(this,Rn).length+24+l(this,gs).length);let w=e.length;for(let A=0;A<w;A+=2){if(isNaN(e[A])){b[A]=b[A+1]=NaN;continue}b[A]=e[A],b[A+1]=e[A+1]}b.set([NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-o)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-o)/h],w),w+=24;for(let A=t.length-6;A>=6;A-=6)for(let E=0;E<6;E+=2){if(isNaN(t[A+E])){b[w]=b[w+1]=NaN,w+=2;continue}b[w]=t[A+E],b[w+1]=t[A+E+1],w+=2}return b.set([NaN,NaN,NaN,NaN,t[4],t[5]],w),new vd(b,u,l(this,Ln),l(this,Ta),l(this,ka),l(this,Ca))}};Ln=new WeakMap,gs=new WeakMap,ka=new WeakMap,Ca=new WeakMap,Rn=new WeakMap,te=new WeakMap,nr=new WeakMap,sr=new WeakMap,zl=new WeakMap,$l=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,Qs=new WeakMap,Hl=new WeakMap,jh=new WeakMap,Fh=new WeakMap,Bl=new WeakSet,yd=function(){const e=l(this,te).subarray(4,6),t=l(this,te).subarray(16,18),[n,s,i,a]=l(this,Ln);return[(l(this,nr)+(e[0]-t[0])/2-n)/i,(l(this,sr)+(e[1]-t[1])/2-s)/a,(l(this,nr)+(t[0]-e[0])/2-n)/i,(l(this,sr)+(t[1]-e[1])/2-s)/a]},S(Jn,Hl,8),S(Jn,jh,2),S(Jn,Fh,l(Jn,Hl)+l(Jn,jh));let gh=Jn;var La,ir,ms,Wl,zt,Ul,Re,Tt,fo,po,Xm;class vd extends Gm{constructor(t,n,s,i,a,o){super();S(this,Tt);S(this,La);S(this,ir,null);S(this,ms);S(this,Wl);S(this,zt);S(this,Ul);S(this,Re);y(this,Re,t),y(this,zt,n),y(this,La,s),y(this,Ul,i),y(this,ms,a),y(this,Wl,o),v(this,Tt,Xm).call(this,o);const{x:c,y:h,width:u,height:d}=l(this,ir);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/u,t[f+1]=(t[f+1]-h)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/u,n[f+1]=(n[f+1]-h)/d}toSVGPath(){const t=[`M${l(this,Re)[4]} ${l(this,Re)[5]}`];for(let n=6,s=l(this,Re).length;n<s;n+=6){if(isNaN(l(this,Re)[n])){t.push(`L${l(this,Re)[n+4]} ${l(this,Re)[n+5]}`);continue}t.push(`C${l(this,Re)[n]} ${l(this,Re)[n+1]} ${l(this,Re)[n+2]} ${l(this,Re)[n+3]} ${l(this,Re)[n+4]} ${l(this,Re)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,i],a){const o=s-t,c=i-n;let h,u;switch(a){case 0:h=v(this,Tt,fo).call(this,l(this,Re),t,i,o,-c),u=v(this,Tt,fo).call(this,l(this,zt),t,i,o,-c);break;case 90:h=v(this,Tt,po).call(this,l(this,Re),t,n,o,c),u=v(this,Tt,po).call(this,l(this,zt),t,n,o,c);break;case 180:h=v(this,Tt,fo).call(this,l(this,Re),s,n,-o,c),u=v(this,Tt,fo).call(this,l(this,zt),s,n,-o,c);break;case 270:h=v(this,Tt,po).call(this,l(this,Re),s,i,-o,-c),u=v(this,Tt,po).call(this,l(this,zt),s,i,-o,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,ir)}getNewOutline(t,n){const{x:s,y:i,width:a,height:o}=l(this,ir),[c,h,u,d]=l(this,La),f=a*u,p=o*d,m=s*u+c,b=i*d+h,w=new gh({x:l(this,zt)[0]*f+m,y:l(this,zt)[1]*p+b},l(this,La),l(this,Ul),t,l(this,Wl),n??l(this,ms));for(let x=2;x<l(this,zt).length;x+=2)w.add({x:l(this,zt)[x]*f+m,y:l(this,zt)[x+1]*p+b});return w.getOutlines()}}La=new WeakMap,ir=new WeakMap,ms=new WeakMap,Wl=new WeakMap,zt=new WeakMap,Ul=new WeakMap,Re=new WeakMap,Tt=new WeakSet,fo=function(t,n,s,i,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c]*i,o[c+1]=s+t[c+1]*a;return o},po=function(t,n,s,i,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c+1]*i,o[c+1]=s+t[c]*a;return o},Xm=function(t){const n=l(this,Re);let s=n[4],i=n[5],a=s,o=i,c=s,h=i,u=s,d=i;const f=t?Math.max:Math.min;for(let x=6,A=n.length;x<A;x+=6){if(isNaN(n[x]))a=Math.min(a,n[x+4]),o=Math.min(o,n[x+5]),c=Math.max(c,n[x+4]),h=Math.max(h,n[x+5]),d<n[x+5]?(u=n[x+4],d=n[x+5]):d===n[x+5]&&(u=f(u,n[x+4]));else{const E=z.bezierBoundingBox(s,i,...n.slice(x,x+6));a=Math.min(a,E[0]),o=Math.min(o,E[1]),c=Math.max(c,E[2]),h=Math.max(h,E[3]),d<E[3]?(u=E[2],d=E[3]):d===E[3]&&(u=f(u,E[2]))}s=n[x+4],i=n[x+5]}const p=a-l(this,ms),m=o-l(this,ms),b=c-a+2*l(this,ms),w=h-o+2*l(this,ms);y(this,ir,{x:p,y:m,width:b,height:w,lastPoint:[u,d]})};var Vl,ql,dn,rr,Ra,Ne,Gl,Ma,Xl,Kl,fn,Da,ge,wd,xd,Km,yi,Ym,Os;const Qn=class Qn{constructor({editor:e=null,uiManager:t=null}){S(this,ge);S(this,Vl,v(this,ge,Km).bind(this));S(this,ql,v(this,ge,Ym).bind(this));S(this,dn,null);S(this,rr,null);S(this,Ra);S(this,Ne,null);S(this,Gl,!1);S(this,Ma,!1);S(this,Xl,null);S(this,Kl);S(this,fn,null);S(this,Da);var n;e?(y(this,Ma,!1),y(this,Da,V.HIGHLIGHT_COLOR),y(this,Xl,e)):(y(this,Ma,!0),y(this,Da,V.HIGHLIGHT_DEFAULT_COLOR)),y(this,fn,(e==null?void 0:e._uiManager)||t),y(this,Kl,l(this,fn)._eventBus),y(this,Ra,(e==null?void 0:e.color)||((n=l(this,fn))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return se(this,"_keyboardManager",new hc([[["Escape","mac+Escape"],Qn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qn.prototype._moveToPrevious],[["Home","mac+Home"],Qn.prototype._moveToBeginning],[["End","mac+End"],Qn.prototype._moveToEnd]]))}renderButton(){const e=y(this,dn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,fn)._signal;e.addEventListener("click",v(this,ge,yi).bind(this),{signal:t}),e.addEventListener("keydown",l(this,Vl),{signal:t});const n=y(this,rr,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=l(this,Ra),e.append(n),e}renderMainDropdown(){const e=y(this,Ne,v(this,ge,wd).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,dn)){v(this,ge,yi).call(this,e);return}const t=e.target.getAttribute("data-color");t&&v(this,ge,xd).call(this,t,e)}_moveToNext(e){var t,n;if(!l(this,ge,Os)){v(this,ge,yi).call(this,e);return}if(e.target===l(this,dn)){(t=l(this,Ne).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=l(this,Ne))==null?void 0:t.firstChild)||e.target===l(this,dn)){l(this,ge,Os)&&this._hideDropdownFromKeyboard();return}l(this,ge,Os)||v(this,ge,yi).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!l(this,ge,Os)){v(this,ge,yi).call(this,e);return}(t=l(this,Ne).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ge,Os)){v(this,ge,yi).call(this,e);return}(t=l(this,Ne).lastChild)==null||t.focus()}hideDropdown(){var e;(e=l(this,Ne))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",l(this,ql))}_hideDropdownFromKeyboard(){var e;if(!l(this,Ma)){if(!l(this,ge,Os)){(e=l(this,Xl))==null||e.unselect();return}this.hideDropdown(),l(this,dn).focus({preventScroll:!0,focusVisible:l(this,Gl)})}}updateColor(e){if(l(this,rr)&&(l(this,rr).style.backgroundColor=e),!l(this,Ne))return;const t=l(this,fn).highlightColors.values();for(const n of l(this,Ne).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,dn))==null||e.remove(),y(this,dn,null),y(this,rr,null),(t=l(this,Ne))==null||t.remove(),y(this,Ne,null)}};Vl=new WeakMap,ql=new WeakMap,dn=new WeakMap,rr=new WeakMap,Ra=new WeakMap,Ne=new WeakMap,Gl=new WeakMap,Ma=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,fn=new WeakMap,Da=new WeakMap,ge=new WeakSet,wd=function(){const e=document.createElement("div"),t=l(this,fn)._signal;e.addEventListener("contextmenu",Pt,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of l(this,fn).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=n,i.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.setAttribute("aria-selected",s===l(this,Ra)),i.addEventListener("click",v(this,ge,xd).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",l(this,Vl),{signal:t}),e},xd=function(e,t){t.stopPropagation(),l(this,Kl).dispatch("switchannotationeditorparams",{source:this,type:l(this,Da),value:e})},Km=function(e){Qn._keyboardManager.exec(this,e)},yi=function(e){if(l(this,ge,Os)){this.hideDropdown();return}if(y(this,Gl,e.detail===0),window.addEventListener("pointerdown",l(this,ql),{signal:l(this,fn)._signal}),l(this,Ne)){l(this,Ne).classList.remove("hidden");return}const t=y(this,Ne,v(this,ge,wd).call(this));l(this,dn).append(t)},Ym=function(e){var t;(t=l(this,Ne))!=null&&t.contains(e.target)||this.hideDropdown()},Os=function(){return l(this,Ne)&&!l(this,Ne).classList.contains("hidden")};let mh=Qn;var Ia,Yl,Zs,ar,ja,Gt,Jl,Ql,or,pn,gt,$t,Oh,Fa,lr,ze,Oa,Mn,Zl,ee,Sd,Ad,Jm,Qm,Zm,Ed,go,Jt,Nr,eb,Yc,mo,tb,nb,sb,ib;const ae=class ae extends ce{constructor(t){super({...t,name:"highlightEditor"});S(this,ee);S(this,Ia,null);S(this,Yl,0);S(this,Zs);S(this,ar,null);S(this,ja,null);S(this,Gt,null);S(this,Jl,null);S(this,Ql,0);S(this,or,null);S(this,pn,null);S(this,gt,null);S(this,$t,!1);S(this,Oh,v(this,ee,eb).bind(this));S(this,Fa,null);S(this,lr);S(this,ze,null);S(this,Oa,"");S(this,Mn);S(this,Zl,"");this.color=t.color||ae._defaultColor,y(this,Mn,t.thickness||ae._defaultThickness),y(this,lr,t.opacity||ae._defaultOpacity),y(this,Zs,t.boxes||null),y(this,Zl,t.methodOfCreation||""),y(this,Oa,t.text||""),this._isDraggable=!1,t.highlightId>-1?(y(this,$t,!0),v(this,ee,Ad).call(this,t),v(this,ee,go).call(this)):(y(this,Ia,t.anchorNode),y(this,Yl,t.anchorOffset),y(this,Jl,t.focusNode),y(this,Ql,t.focusOffset),v(this,ee,Sd).call(this),v(this,ee,go).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ae.prototype;return se(this,"_keyboardManager",new hc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,$t)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Mn),methodOfCreation:l(this,Zl)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;ce.initialize(t,n),ae._defaultColor||(ae._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case V.HIGHLIGHT_DEFAULT_COLOR:ae._defaultColor=n;break;case V.HIGHLIGHT_THICKNESS:ae._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,Fa)}updateParams(t,n){switch(t){case V.HIGHLIGHT_COLOR:v(this,ee,Jm).call(this,n);break;case V.HIGHLIGHT_THICKNESS:v(this,ee,Qm).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[V.HIGHLIGHT_DEFAULT_COLOR,ae._defaultColor],[V.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[V.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[V.HIGHLIGHT_THICKNESS,l(this,Mn)||ae._defaultThickness],[V.HIGHLIGHT_FREE,l(this,$t)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(y(this,ja,new mh({editor:this})),t.addColorPicker(l(this,ja))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(v(this,ee,mo).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,v(this,ee,mo).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){v(this,ee,Ed).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(v(this,ee,go).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?v(this,ee,Ed).call(this):t&&(v(this,ee,go).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,o;const{drawLayer:n}=this.parent;let s;l(this,$t)?(t=(t-this.rotation+360)%360,s=v(i=ae,Jt,Nr).call(i,l(this,pn).box,t)):s=v(a=ae,Jt,Nr).call(a,this,t),n.rotate(l(this,gt),t),n.rotate(l(this,ze),t),n.updateBox(l(this,gt),s),n.updateBox(l(this,ze),v(o=ae,Jt,Nr).call(o,l(this,Gt).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,Oa)&&(t.setAttribute("aria-label",l(this,Oa)),t.setAttribute("role","mark")),l(this,$t)?t.classList.add("free"):this.div.addEventListener("keydown",l(this,Oh),{signal:this._uiManager._signal});const n=y(this,or,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,ar);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),uh(this,l(this,or),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(l(this,ze),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(l(this,ze),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:v(this,ee,Yc).call(this,!0);break;case 1:case 3:v(this,ee,Yc).call(this,!1);break}}select(){var t,n;super.select(),l(this,ze)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,ze),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(l(this,ze),"selected"))}unselect(){var t;super.unselect(),l(this,ze)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,ze),"selected"),l(this,$t)||v(this,ee,Yc).call(this,!1))}get _mustFixPosition(){return!l(this,$t)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,gt),t),this.parent.drawLayer.show(l(this,ze),t))}static startHighlighting(t,n,{target:s,x:i,y:a}){const{x:o,y:c,width:h,height:u}=s.getBoundingClientRect(),d=w=>{v(this,Jt,sb).call(this,t,w)},f=t._signal,p={capture:!0,passive:!1,signal:f},m=w=>{w.preventDefault(),w.stopPropagation()},b=w=>{s.removeEventListener("pointermove",d),window.removeEventListener("blur",b),window.removeEventListener("pointerup",b),window.removeEventListener("pointerdown",m,p),window.removeEventListener("contextmenu",Pt),v(this,Jt,ib).call(this,t,w)};window.addEventListener("blur",b,{signal:f}),window.addEventListener("pointerup",b,{signal:f}),window.addEventListener("pointerdown",m,p),window.addEventListener("contextmenu",Pt,{signal:f}),s.addEventListener("pointermove",d,{signal:f}),this._freeHighlight=new gh({x:i,y:a},[o,c,h,u],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,n,s){var b;const i=super.deserialize(t,n,s),{rect:[a,o,c,h],color:u,quadPoints:d}=t;i.color=z.makeHexColor(...u),y(i,lr,t.opacity);const[f,p]=i.pageDimensions;i.width=(c-a)/f,i.height=(h-o)/p;const m=y(i,Zs,[]);for(let w=0;w<d.length;w+=8)m.push({x:(d[4]-c)/f,y:(h-(1-d[w+5]))/p,width:(d[w+2]-d[w])/f,height:(d[w+5]-d[w+1])/p});return v(b=i,ee,Sd).call(b),i}serialize(t=!1){if(this.isEmpty()||t)return null;const n=this.getRect(0,0),s=ce._colorManager.convert(this.color);return{annotationType:ne.HIGHLIGHT,color:s,opacity:l(this,lr),thickness:l(this,Mn),quadPoints:v(this,ee,tb).call(this),outlines:v(this,ee,nb).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:v(this,ee,mo).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Ia=new WeakMap,Yl=new WeakMap,Zs=new WeakMap,ar=new WeakMap,ja=new WeakMap,Gt=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,or=new WeakMap,pn=new WeakMap,gt=new WeakMap,$t=new WeakMap,Oh=new WeakMap,Fa=new WeakMap,lr=new WeakMap,ze=new WeakMap,Oa=new WeakMap,Mn=new WeakMap,Zl=new WeakMap,ee=new WeakSet,Sd=function(){const t=new md(l(this,Zs),.001);y(this,pn,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,pn).box;const n=new md(l(this,Zs),.0025,.001,this._uiManager.direction==="ltr");y(this,Gt,n.getOutlines());const{lastPoint:s}=l(this,Gt).box;y(this,Fa,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Ad=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var d,f;if(y(this,pn,t),y(this,Gt,t.getNewOutline(l(this,Mn)/2+1.5,.0025)),n>=0)y(this,gt,n),y(this,ar,s),this.parent.drawLayer.finalizeLine(n,t),y(this,ze,this.parent.drawLayer.highlightOutline(l(this,Gt)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,gt),t),this.parent.drawLayer.updateBox(l(this,gt),v(d=ae,Jt,Nr).call(d,l(this,pn).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,ze),l(this,Gt)),this.parent.drawLayer.updateBox(l(this,ze),v(f=ae,Jt,Nr).call(f,l(this,Gt).box,p))}const{x:a,y:o,width:c,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*m/p,this.height=h*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*m/p,this.height=h*p/m;break}}const{lastPoint:u}=l(this,Gt).box;y(this,Fa,[(u[0]-a)/c,(u[1]-o)/h])},Jm=function(t){const n=i=>{var a,o;this.color=i,(a=this.parent)==null||a.drawLayer.changeColor(l(this,gt),i),(o=l(this,ja))==null||o.updateColor(i)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Qm=function(t){const n=l(this,Mn),s=i=>{y(this,Mn,i),v(this,ee,Zm).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Zm=function(t){if(!l(this,$t))return;v(this,ee,Ad).call(this,{highlightOutlines:l(this,pn).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Ed=function(){l(this,gt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,gt)),y(this,gt,null),this.parent.drawLayer.remove(l(this,ze)),y(this,ze,null))},go=function(t=this.parent){l(this,gt)===null&&({id:Rt(this,gt)._,clipPathId:Rt(this,ar)._}=t.drawLayer.highlight(l(this,pn),this.color,l(this,lr)),y(this,ze,t.drawLayer.highlightOutline(l(this,Gt))),l(this,or)&&(l(this,or).style.clipPath=l(this,ar)))},Jt=new WeakSet,Nr=function({x:t,y:n,width:s,height:i},a){switch(a){case 90:return{x:1-n-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-n-i,width:s,height:i};case 270:return{x:n,y:1-t-s,width:i,height:s}}return{x:t,y:n,width:s,height:i}},eb=function(t){ae._keyboardManager.exec(this,t)},Yc=function(t){if(!l(this,Ia))return;const n=window.getSelection();t?n.setPosition(l(this,Ia),l(this,Yl)):n.setPosition(l(this,Jl),l(this,Ql))},mo=function(){return l(this,$t)?this.rotation:0},tb=function(){if(l(this,$t))return null;const[t,n]=this.pageDimensions,s=l(this,Zs),i=new Float32Array(s.length*8);let a=0;for(const{x:o,y:c,width:h,height:u}of s){const d=o*t,f=(1-c-u)*n;i[a]=i[a+4]=d,i[a+1]=i[a+3]=f,i[a+2]=i[a+6]=d+h*t,i[a+5]=i[a+7]=f+u*n,a+=8}return i},nb=function(t){return l(this,pn).serialize(t,v(this,ee,mo).call(this))},sb=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},ib=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},S(ae,Jt),G(ae,"_defaultColor",null),G(ae,"_defaultOpacity",1),G(ae,"_defaultThickness",12),G(ae,"_l10nPromise"),G(ae,"_type","highlight"),G(ae,"_editorType",ne.HIGHLIGHT),G(ae,"_freeHighlightId",-1),G(ae,"_freeHighlight",null),G(ae,"_freeHighlightClipId","");let bh=ae;var cr,hr,ec,tc,nc,ur,Dn,bs,Xt,dr,fr,ys,pr,gr,ei,j,rb,ab,ob,lb,kd,cb,Cd,hb,ub,db,fb,pb,vi,Td,Jc,Qc,zr,Pd,Zc,Rs,gb,Ld,mb,bb,Rd,eh,bo;const ke=class ke extends ce{constructor(t){super({...t,name:"inkEditor"});S(this,j);S(this,cr,0);S(this,hr,0);S(this,ec,this.canvasPointermove.bind(this));S(this,tc,this.canvasPointerleave.bind(this));S(this,nc,this.canvasPointerup.bind(this));S(this,ur,this.canvasPointerdown.bind(this));S(this,Dn,null);S(this,bs,new Path2D);S(this,Xt,!1);S(this,dr,!1);S(this,fr,!1);S(this,ys,null);S(this,pr,0);S(this,gr,0);S(this,ei,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){ce.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case V.INK_THICKNESS:ke._defaultThickness=n;break;case V.INK_COLOR:ke._defaultColor=n;break;case V.INK_OPACITY:ke._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case V.INK_THICKNESS:v(this,j,rb).call(this,n);break;case V.INK_COLOR:v(this,j,ab).call(this,n);break;case V.INK_OPACITY:v(this,j,ob).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[V.INK_THICKNESS,ke._defaultThickness],[V.INK_COLOR,ke._defaultColor||ce._defaultLineColor],[V.INK_OPACITY,Math.round(ke._defaultOpacity*100)]]}get propertiesToUpdate(){return[[V.INK_THICKNESS,this.thickness||ke._defaultThickness],[V.INK_COLOR,this.color||ke._defaultColor||ce._defaultLineColor],[V.INK_OPACITY,Math.round(100*(this.opacity??ke._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(v(this,j,Jc).call(this),v(this,j,Qc).call(this)),this.isAttachedToDOM||(this.parent.add(this),v(this,j,zr).call(this)),v(this,j,bo).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,Dn)&&(clearTimeout(l(this,Dn)),y(this,Dn,null)),(t=l(this,ys))==null||t.disconnect(),y(this,ys,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,i=this.height*n;this.setDimensions(s,i)}enableEditMode(){l(this,Xt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,ur),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,ur)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,Xt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),y(this,Xt,!0),this.div.classList.add("disabled"),v(this,j,bo).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,Xt)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),v(this,j,cb).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),v(this,j,Cd).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),v(this,j,Td).call(this,t)}canvasPointerleave(t){v(this,j,Td).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,Xt)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,a,o]=v(this,j,lb).call(this);if(this.setAt(s,i,0,0),this.setDims(a,o),v(this,j,Jc).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(t*c,n*h,this.width*c,this.height*h),y(this,fr,!0),v(this,j,zr).call(this),this.setDims(this.width*c,this.height*h),v(this,j,vi).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return v(this,j,Qc).call(this),this.div}setDimensions(t,n){const s=Math.round(t),i=Math.round(n);if(l(this,pr)===s&&l(this,gr)===i)return;y(this,pr,s),y(this,gr,i),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=n/o,this.fixAndSetPosition(),l(this,Xt)&&v(this,j,Pd).call(this,t,n),v(this,j,zr).call(this),v(this,j,vi).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,n,s){var w,x,A;if(t instanceof Fm)return null;const i=super.deserialize(t,n,s);i.thickness=t.thickness,i.color=z.makeHexColor(...t.color),i.opacity=t.opacity;const[a,o]=i.pageDimensions,c=i.width*a,h=i.height*o,u=i.parentScale,d=t.thickness/2;y(i,Xt,!0),y(i,pr,Math.round(c)),y(i,gr,Math.round(h));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:E}of f){E=v(w=ke,Rs,mb).call(w,E,p,m);const k=[];i.paths.push(k);let C=u*(E[0]-d),T=u*(E[1]-d);for(let L=2,R=E.length;L<R;L+=6){const D=u*(E[L]-d),M=u*(E[L+1]-d),J=u*(E[L+2]-d),X=u*(E[L+3]-d),B=u*(E[L+4]-d),K=u*(E[L+5]-d);k.push([[C,T],[D,M],[J,X],[B,K]]),C=B,T=K}const P=v(this,Rs,gb).call(this,k);i.bezierPath2D.push(P)}const b=v(x=i,j,Rd).call(x);return y(i,hr,Math.max(ce.MIN_SIZE,b[2]-b[0])),y(i,cr,Math.max(ce.MIN_SIZE,b[3]-b[1])),v(A=i,j,Pd).call(A,c,h),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=ce._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ne.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:v(this,j,bb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};cr=new WeakMap,hr=new WeakMap,ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,ur=new WeakMap,Dn=new WeakMap,bs=new WeakMap,Xt=new WeakMap,dr=new WeakMap,fr=new WeakMap,ys=new WeakMap,pr=new WeakMap,gr=new WeakMap,ei=new WeakMap,j=new WeakSet,rb=function(t){const n=i=>{this.thickness=i,v(this,j,bo).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ab=function(t){const n=i=>{this.color=i,v(this,j,vi).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ob=function(t){const n=i=>{this.opacity=i,v(this,j,vi).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},lb=function(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},kd=function(){const{ctx:t,color:n,opacity:s,thickness:i,parentScale:a,scaleFactor:o}=this;t.lineWidth=i*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${lx(s)}`},cb=function(t,n){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Pt,{signal:s}),this.canvas.addEventListener("pointerleave",l(this,tc),{signal:s}),this.canvas.addEventListener("pointermove",l(this,ec),{signal:s}),this.canvas.addEventListener("pointerup",l(this,nc),{signal:s}),this.canvas.removeEventListener("pointerdown",l(this,ur)),this.isEditing=!0,l(this,fr)||(y(this,fr,!0),v(this,j,zr).call(this),this.thickness||(this.thickness=ke._defaultThickness),this.color||(this.color=ke._defaultColor||ce._defaultLineColor),this.opacity??(this.opacity=ke._defaultOpacity)),this.currentPath.push([t,n]),y(this,dr,!1),v(this,j,kd).call(this),y(this,ei,()=>{v(this,j,db).call(this),l(this,ei)&&window.requestAnimationFrame(l(this,ei))}),window.requestAnimationFrame(l(this,ei))},Cd=function(t,n){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===i)return;const a=this.currentPath;let o=l(this,bs);if(a.push([t,n]),y(this,dr,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,n);return}a.length===3&&(y(this,bs,o=new Path2D),o.moveTo(...a[0])),v(this,j,fb).call(this,o,...a.at(-3),...a.at(-2),t,n)},hb=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,bs).lineTo(...t)},ub=function(t,n){y(this,ei,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),v(this,j,Cd).call(this,t,n),v(this,j,hb).call(this);let s;if(this.currentPath.length!==1)s=v(this,j,pb).call(this);else{const h=[t,n];s=[[h,h.slice(),h.slice(),h]]}const i=l(this,bs),a=this.currentPath;this.currentPath=[],y(this,bs,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(v(this,j,Jc).call(this),v(this,j,Qc).call(this)),v(this,j,bo).call(this))};this.addCommands({cmd:o,undo:c,mustExec:!0})},db=function(){if(!l(this,dr))return;y(this,dr,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(o=>o[0]),i=n.map(o=>o[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(l(this,bs)),a.restore()},fb=function(t,n,s,i,a,o,c){const h=(n+i)/2,u=(s+a)/2,d=(i+o)/2,f=(a+c)/2;t.bezierCurveTo(h+2*(i-h)/3,u+2*(a-u)/3,d+2*(i-d)/3,f+2*(a-f)/3,d,f)},pb=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[i,a]=t[0];for(s=1;s<t.length-2;s++){const[p,m]=t[s],[b,w]=t[s+1],x=(p+b)/2,A=(m+w)/2,E=[i+2*(p-i)/3,a+2*(m-a)/3],k=[x+2*(p-x)/3,A+2*(m-A)/3];n.push([[i,a],E,k,[x,A]]),[i,a]=[x,A]}const[o,c]=t[s],[h,u]=t[s+1],d=[i+2*(o-i)/3,a+2*(c-a)/3],f=[h+2*(o-h)/3,u+2*(c-u)/3];return n.push([[i,a],d,f,[h,u]]),n},vi=function(){if(this.isEmpty()){v(this,j,Zc).call(this);return}v(this,j,kd).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),v(this,j,Zc).call(this);for(const s of this.bezierPath2D)n.stroke(s)},Td=function(t){this.canvas.removeEventListener("pointerleave",l(this,tc)),this.canvas.removeEventListener("pointermove",l(this,ec)),this.canvas.removeEventListener("pointerup",l(this,nc)),this.canvas.addEventListener("pointerdown",l(this,ur),{signal:this._uiManager._signal}),l(this,Dn)&&clearTimeout(l(this,Dn)),y(this,Dn,setTimeout(()=>{y(this,Dn,null),this.canvas.removeEventListener("contextmenu",Pt)},10)),v(this,j,ub).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Jc=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Qc=function(){y(this,ys,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),l(this,ys).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,ys))==null||t.disconnect(),y(this,ys,null)},{once:!0})},zr=function(){if(!l(this,fr))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),v(this,j,Zc).call(this)},Pd=function(t,n){const s=v(this,j,eh).call(this),i=(t-s)/l(this,hr),a=(n-s)/l(this,cr);this.scaleFactor=Math.min(i,a)},Zc=function(){const t=v(this,j,eh).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Rs=new WeakSet,gb=function(t){const n=new Path2D;for(let s=0,i=t.length;s<i;s++){const[a,o,c,h]=t[s];s===0&&n.moveTo(...a),n.bezierCurveTo(o[0],o[1],c[0],c[1],h[0],h[1])}return n},Ld=function(t,n,s){const[i,a,o,c]=n;switch(s){case 0:for(let h=0,u=t.length;h<u;h+=2)t[h]+=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,u=t.length;h<u;h+=2){const d=t[h];t[h]=t[h+1]+i,t[h+1]=d+a}break;case 180:for(let h=0,u=t.length;h<u;h+=2)t[h]=o-t[h],t[h+1]+=a;break;case 270:for(let h=0,u=t.length;h<u;h+=2){const d=t[h];t[h]=o-t[h+1],t[h+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},mb=function(t,n,s){const[i,a,o,c]=n;switch(s){case 0:for(let h=0,u=t.length;h<u;h+=2)t[h]-=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,u=t.length;h<u;h+=2){const d=t[h];t[h]=t[h+1]-a,t[h+1]=d-i}break;case 180:for(let h=0,u=t.length;h<u;h+=2)t[h]=o-t[h],t[h+1]-=a;break;case 270:for(let h=0,u=t.length;h<u;h+=2){const d=t[h];t[h]=c-t[h+1],t[h+1]=o-d}break;default:throw new Error("Invalid rotation")}return t},bb=function(t,n,s,i){var u,d;const a=[],o=this.thickness/2,c=t*n+o,h=t*s+o;for(const f of this.paths){const p=[],m=[];for(let b=0,w=f.length;b<w;b++){const[x,A,E,k]=f[b];if(x[0]===k[0]&&x[1]===k[1]&&w===1){const X=t*x[0]+c,B=t*x[1]+h;p.push(X,B),m.push(X,B);break}const C=t*x[0]+c,T=t*x[1]+h,P=t*A[0]+c,L=t*A[1]+h,R=t*E[0]+c,D=t*E[1]+h,M=t*k[0]+c,J=t*k[1]+h;b===0&&(p.push(C,T),m.push(C,T)),p.push(P,L,R,D,M,J),m.push(P,L),b===w-1&&m.push(M,J)}a.push({bezier:v(u=ke,Rs,Ld).call(u,p,i,this.rotation),points:v(d=ke,Rs,Ld).call(d,m,i,this.rotation)})}return a},Rd=function(){let t=1/0,n=-1/0,s=1/0,i=-1/0;for(const a of this.paths)for(const[o,c,h,u]of a){const d=z.bezierBoundingBox(...o,...c,...h,...u);t=Math.min(t,d[0]),s=Math.min(s,d[1]),n=Math.max(n,d[2]),i=Math.max(i,d[3])}return[t,s,n,i]},eh=function(){return l(this,Xt)?Math.ceil(this.thickness*this.parentScale):0},bo=function(t=!1){if(this.isEmpty())return;if(!l(this,Xt)){v(this,j,vi).call(this);return}const n=v(this,j,Rd).call(this),s=v(this,j,eh).call(this);y(this,hr,Math.max(ce.MIN_SIZE,n[2]-n[0])),y(this,cr,Math.max(ce.MIN_SIZE,n[3]-n[1]));const i=Math.ceil(s+l(this,hr)*this.scaleFactor),a=Math.ceil(s+l(this,cr)*this.scaleFactor),[o,c]=this.parentDimensions;this.width=i/o,this.height=a/c,this.setAspectRatio(i,a);const h=this.translationX,u=this.translationY;this.translationX=-n[0],this.translationY=-n[1],v(this,j,zr).call(this),v(this,j,vi).call(this),y(this,pr,i),y(this,gr,a),this.setDims(i,a);const d=t?s/this.scaleFactor/2:0;this.translate(h-this.translationX-d,u-this.translationY-d)},S(ke,Rs),G(ke,"_defaultColor",null),G(ke,"_defaultOpacity",1),G(ke,"_defaultThickness",1),G(ke,"_type","ink"),G(ke,"_editorType",ne.INK);let _d=ke;var et,tt,ti,vs,ni,Na,In,ws,jn,gn,sc,re,yo,vo,th,Dd,yb,vb,Id,nh,wb;const Ao=class Ao extends ce{constructor(t){super({...t,name:"stampEditor"});S(this,re);S(this,et,null);S(this,tt,null);S(this,ti,null);S(this,vs,null);S(this,ni,null);S(this,Na,"");S(this,In,null);S(this,ws,null);S(this,jn,null);S(this,gn,!1);S(this,sc,!1);y(this,vs,t.bitmapUrl),y(this,ni,t.bitmapFile)}static initialize(t,n){ce.initialize(t,n)}static get supportedTypes(){return se(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return se(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(ne.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,n;l(this,tt)&&(y(this,et,null),this._uiManager.imageManager.deleteId(l(this,tt)),(t=l(this,In))==null||t.remove(),y(this,In,null),(n=l(this,ws))==null||n.disconnect(),y(this,ws,null),l(this,jn)&&(clearTimeout(l(this,jn)),y(this,jn,null))),super.remove()}rebuild(){if(!this.parent){l(this,tt)&&v(this,re,th).call(this);return}super.rebuild(),this.div!==null&&(l(this,tt)&&l(this,In)===null&&v(this,re,th).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,ti)||l(this,et)||l(this,vs)||l(this,ni)||l(this,tt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,et)?v(this,re,Dd).call(this):v(this,re,th).call(this),this.width){const[s,i]=this.parentDimensions;this.setAt(t*s,n*i,this.width*s,this.height*i)}return this.div}getImageForAltText(){return l(this,In)}static deserialize(t,n,s){if(t instanceof Om)return null;const i=super.deserialize(t,n,s),{rect:a,bitmapUrl:o,bitmapId:c,isSvg:h,accessibilityData:u}=t;c&&s.imageManager.isValidId(c)?y(i,tt,c):y(i,vs,o),y(i,gn,h);const[d,f]=i.pageDimensions;return i.width=(a[2]-a[0])/d,i.height=(a[3]-a[1])/f,u&&(i.altTextData=u),i}serialize(t=!1,n=null){if(this.isEmpty())return null;const s={annotationType:ne.STAMP,bitmapId:l(this,tt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,gn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=v(this,re,nh).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:i,altText:a}=this.altTextData;if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),n===null)return s;n.stamps||(n.stamps=new Map);const o=l(this,gn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(l(this,tt)))n.stamps.set(l(this,tt),{area:o,serialized:s}),s.bitmap=v(this,re,nh).call(this,!1);else if(l(this,gn)){const c=n.stamps.get(l(this,tt));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=v(this,re,nh).call(this,!1))}return s}};et=new WeakMap,tt=new WeakMap,ti=new WeakMap,vs=new WeakMap,ni=new WeakMap,Na=new WeakMap,In=new WeakMap,ws=new WeakMap,jn=new WeakMap,gn=new WeakMap,sc=new WeakMap,re=new WeakSet,yo=function(t,n=!1){if(!t){this.remove();return}y(this,et,t.bitmap),n||(y(this,tt,t.id),y(this,gn,t.isSvg)),t.file&&y(this,Na,t.file.name),v(this,re,Dd).call(this)},vo=function(){y(this,ti,null),this._uiManager.enableWaiting(!1),l(this,In)&&this.div.focus()},th=function(){if(l(this,tt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,tt)).then(s=>v(this,re,yo).call(this,s,!0)).finally(()=>v(this,re,vo).call(this));return}if(l(this,vs)){const s=l(this,vs);y(this,vs,null),this._uiManager.enableWaiting(!0),y(this,ti,this._uiManager.imageManager.getFromUrl(s).then(i=>v(this,re,yo).call(this,i)).finally(()=>v(this,re,vo).call(this)));return}if(l(this,ni)){const s=l(this,ni);y(this,ni,null),this._uiManager.enableWaiting(!0),y(this,ti,this._uiManager.imageManager.getFromFile(s).then(i=>v(this,re,yo).call(this,i)).finally(()=>v(this,re,vo).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ao.supportedTypesStr;const n=this._uiManager._signal;y(this,ti,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);v(this,re,yo).call(this,i)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>v(this,re,vo).call(this))),t.click()},Dd=function(){const{div:t}=this;let{width:n,height:s}=l(this,et);const[i,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*i,s=this.height*a;else if(n>o*i||s>o*a){const d=Math.min(o*i/n,o*a/s);n*=d,s*=d}const[c,h]=this.parentDimensions;this.setDims(n*c/i,s*h/a),this._uiManager.enableWaiting(!1);const u=y(this,In,document.createElement("canvas"));t.append(u),t.hidden=!1,v(this,re,Id).call(this,n,s),v(this,re,wb).call(this),l(this,sc)||(this.parent.addUndoableEditor(this),y(this,sc,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Na)&&u.setAttribute("aria-label",l(this,Na))},yb=function(t,n){var o;const[s,i]=this.parentDimensions;this.width=t/s,this.height=n/i,this.setDims(t,n),(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,jn)!==null&&clearTimeout(l(this,jn)),y(this,jn,setTimeout(()=>{y(this,jn,null),v(this,re,Id).call(this,t,n)},200))},vb=function(t,n){const{width:s,height:i}=l(this,et);let a=s,o=i,c=l(this,et);for(;a>2*t||o>2*n;){const h=a,u=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,h,u,0,0,a,o),c=d.transferToImageBitmap()}return c},Id=function(t,n){t=Math.ceil(t),n=Math.ceil(n);const s=l(this,In);if(!s||s.width===t&&s.height===n)return;s.width=t,s.height=n;const i=l(this,gn)?l(this,et):v(this,re,vb).call(this,t,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(t,n).getContext("2d");c.drawImage(i,0,0,i.width,i.height,0,0,t,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,t,n).data,width:t,height:n,channels:4}}).then(h=>{const u=(h==null?void 0:h.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const a=s.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(i,0,0,i.width,i.height,0,0,t,n)},nh=function(t){if(t){if(l(this,gn)){const i=this._uiManager.imageManager.getSvgUrl(l(this,tt));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,et),n.getContext("2d").drawImage(l(this,et),0,0),n.toDataURL()}if(l(this,gn)){const[n,s]=this.pageDimensions,i=Math.round(this.width*n*ci.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*ci.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(l(this,et),0,0,l(this,et).width,l(this,et).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(l(this,et))},wb=function(){this._uiManager._signal&&(y(this,ws,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&v(this,re,yb).call(this,n.width,n.height)})),l(this,ws).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,ws))==null||t.disconnect(),y(this,ws,null)},{once:!0}))},G(Ao,"_type","stamp"),G(Ao,"_editorType",ne.STAMP);let Md=Ao;var mr,za,Fn,br,xs,Ss,As,Ht,si,$a,Ha,mt,H,ii,st,xb,Fd,Od,Nd,sh;const en=class en{constructor({uiManager:e,pageIndex:t,div:n,accessibilityManager:s,annotationLayer:i,drawLayer:a,textLayer:o,viewport:c,l10n:h}){S(this,st);S(this,mr);S(this,za,!1);S(this,Fn,null);S(this,br,null);S(this,xs,null);S(this,Ss,null);S(this,As,null);S(this,Ht,new Map);S(this,si,!1);S(this,$a,!1);S(this,Ha,!1);S(this,mt,null);S(this,H);const u=[...l(en,ii).values()];if(!en._initialized){en._initialized=!0;for(const d of u)d.initialize(h,e)}e.registerEditorTypes(u),y(this,H,e),this.pageIndex=t,this.div=n,y(this,mr,s),y(this,Fn,i),this.viewport=c,y(this,mt,o),this.drawLayer=a,l(this,H).addLayer(this)}get isEmpty(){return l(this,Ht).size===0}get isInvisible(){return this.isEmpty&&l(this,H).getMode()===ne.NONE}updateToolbar(e){l(this,H).updateToolbar(e)}updateMode(e=l(this,H).getMode()){switch(v(this,st,sh).call(this),e){case ne.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ne.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of l(en,ii).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,mt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,H).getMode()!==ne.INK)return;if(!e){for(const n of l(this,Ht).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,H).setEditingState(e)}addCommands(e){l(this,H).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Fn))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of l(this,Ht).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,H).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!l(this,Fn))return;const t=l(this,Fn).getEditableAnnotations();for(const n of t){if(n.hide(),l(this,H).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;y(this,Ha,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of l(this,Ht).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(l(this,Fn)){const i=l(this,Fn).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(l(this,H).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,H).addChangedExistingAnnotation(c),c.renderAnnotationElement(a),c.show(!1)),a.show()}}v(this,st,sh).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of l(en,ii).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,Ha,!1)}getEditableAnnotation(e){var t;return((t=l(this,Fn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,H).getActive()!==e&&l(this,H).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=l(this,mt))!=null&&e.div&&!l(this,Ss)&&(y(this,Ss,v(this,st,xb).bind(this)),l(this,mt).div.addEventListener("pointerdown",l(this,Ss),{signal:l(this,H)._signal}),l(this,mt).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,mt))!=null&&e.div&&l(this,Ss)&&(l(this,mt).div.removeEventListener("pointerdown",l(this,Ss)),y(this,Ss,null),l(this,mt).div.classList.remove("highlighting"))}enableClick(){if(l(this,xs))return;const e=l(this,H)._signal;y(this,xs,this.pointerdown.bind(this)),y(this,br,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",l(this,xs),{signal:e}),this.div.addEventListener("pointerup",l(this,br),{signal:e})}disableClick(){l(this,xs)&&(this.div.removeEventListener("pointerdown",l(this,xs)),this.div.removeEventListener("pointerup",l(this,br)),y(this,xs,null),y(this,br,null))}attach(e){l(this,Ht).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,H).isDeletedAnnotationElement(t)&&l(this,H).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Ht).delete(e.id),(t=l(this,mr))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,Ha)&&e.annotationElementId&&l(this,H).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,H).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,$a)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,H).addDeletedAnnotationElement(e.annotationElementId),ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,H).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,H).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,As)&&(e._focusEventsAllowed=!1,y(this,As,setTimeout(()=>{y(this,As,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,H)._signal}),t.focus())},0))),e._structTreeParentId=(n=l(this,mr))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return l(this,H).getId()}get _signal(){return l(this,H)._signal}canCreateNewEmptyEditor(){var e;return(e=l(this,st,Fd))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,H).updateToolbar(e),l(this,H).updateMode(e);const{offsetX:n,offsetY:s}=v(this,st,Nd).call(this),i=this.getNextId(),a=v(this,st,Od).call(this,{parent:this,id:i,x:n,y:s,uiManager:l(this,H),isCentered:!0,...t});a&&this.add(a)}deserialize(e){var t;return((t=l(en,ii).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,H)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),i=v(this,st,Od).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,H),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(v(this,st,Nd).call(this),!0)}setSelected(e){l(this,H).setSelected(e)}toggleSelected(e){l(this,H).toggleSelected(e)}isSelected(e){return l(this,H).isSelected(e)}unselect(e){l(this,H).unselect(e)}pointerup(e){const{isMac:t}=Ct.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,si)){if(y(this,si,!1),!l(this,za)){y(this,za,!0);return}if(l(this,H).getMode()===ne.STAMP){l(this,H).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,H).getMode()===ne.HIGHLIGHT&&this.enableTextSelection(),l(this,si)){y(this,si,!1);return}const{isMac:t}=Ct.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;y(this,si,!0);const n=l(this,H).getActive();y(this,za,!n||n.isEmpty())}findNewParent(e,t,n){const s=l(this,H).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,H).getActive())==null?void 0:e.parent)===this&&(l(this,H).commitOrRemove(),l(this,H).setActiveEditor(null)),l(this,As)&&(clearTimeout(l(this,As)),y(this,As,null));for(const n of l(this,Ht).values())(t=l(this,mr))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,Ht).clear(),l(this,H).removeLayer(this)}render({viewport:e}){this.viewport=e,vr(this.div,e);for(const t of l(this,H).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,H).commitOrRemove(),v(this,st,sh).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,vr(this.div,{rotation:n}),t!==n)for(const s of l(this,Ht).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,H).viewParameters.realScale}};mr=new WeakMap,za=new WeakMap,Fn=new WeakMap,br=new WeakMap,xs=new WeakMap,Ss=new WeakMap,As=new WeakMap,Ht=new WeakMap,si=new WeakMap,$a=new WeakMap,Ha=new WeakMap,mt=new WeakMap,H=new WeakMap,ii=new WeakMap,st=new WeakSet,xb=function(e){if(l(this,H).unselectAll(),e.target===l(this,mt).div){const{isMac:t}=Ct.platform;if(e.button!==0||e.ctrlKey&&t)return;l(this,H).showAllEditors("highlight",!0,!0),l(this,mt).div.classList.add("free"),bh.startHighlighting(this,l(this,H).direction==="ltr",e),l(this,mt).div.addEventListener("pointerup",()=>{l(this,mt).div.classList.remove("free")},{once:!0,signal:l(this,H)._signal}),e.preventDefault()}},Fd=function(){return l(en,ii).get(l(this,H).getMode())},Od=function(e){const t=l(this,st,Fd);return t?new t.prototype.constructor(e):null},Nd=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),h=(i+o)/2-e,u=(a+c)/2-t,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},sh=function(){y(this,$a,!0);for(const e of l(this,Ht).values())e.isEmpty()&&e.remove();y(this,$a,!1)},G(en,"_initialized",!1),S(en,ii,new Map([pd,_d,Md,bh].map(e=>[e._editorType,e])));let jd=en;var On,ic,$e,ri,rc,$d,Er,Hd,Sb;const Ke=class Ke{constructor({pageIndex:e}){S(this,Er);S(this,On,null);S(this,ic,0);S(this,$e,new Map);S(this,ri,new Map);this.pageIndex=e}setParent(e){if(!l(this,On)){y(this,On,e);return}if(l(this,On)!==e){if(l(this,$e).size>0)for(const t of l(this,$e).values())t.remove(),e.append(t);y(this,On,e)}}static get _svgFactory(){return se(this,"_svgFactory",new cf)}highlight(e,t,n,s=!1){const i=Rt(this,ic)._++,a=v(this,Er,Hd).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const o=Ke._svgFactory.createElement("defs");a.append(o);const c=Ke._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("d",e.toSVGPath()),s&&l(this,ri).set(i,c);const u=v(this,Er,Sb).call(this,o,h),d=Ke._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),d.setAttribute("href",`#${h}`),l(this,$e).set(i,a),{id:i,clipPathId:`url(#${u})`}}highlightOutline(e){const t=Rt(this,ic)._++,n=v(this,Er,Hd).call(this,e.box);n.classList.add("highlightOutline");const s=Ke._svgFactory.createElement("defs");n.append(s);const i=Ke._svgFactory.createElement("path");s.append(i);const a=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",a),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.free){n.classList.add("free");const u=Ke._svgFactory.createElement("mask");s.append(u),o=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",o),u.setAttribute("maskUnits","objectBoundingBox");const d=Ke._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Ke._svgFactory.createElement("use");u.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=Ke._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const h=c.cloneNode();return n.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),l(this,$e).set(t,n),t}finalizeLine(e,t){const n=l(this,ri).get(e);l(this,ri).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,$e).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),l(this,ri).delete(e)}updatePath(e,t){l(this,ri).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;v(n=Ke,rc,$d).call(n,l(this,$e).get(e),t)}show(e,t){l(this,$e).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,$e).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,$e).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,$e).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,$e).get(e).classList.add(t)}removeClass(e,t){l(this,$e).get(e).classList.remove(t)}remove(e){l(this,On)!==null&&(l(this,$e).get(e).remove(),l(this,$e).delete(e))}destroy(){y(this,On,null);for(const e of l(this,$e).values())e.remove();l(this,$e).clear()}};On=new WeakMap,ic=new WeakMap,$e=new WeakMap,ri=new WeakMap,rc=new WeakSet,$d=function(e,{x:t=0,y:n=0,width:s=1,height:i=1}={}){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Er=new WeakSet,Hd=function(e){var n;const t=Ke._svgFactory.create(1,1,!0);return l(this,On).append(t),t.setAttribute("aria-hidden",!0),v(n=Ke,rc,$d).call(n,t,e),t},Sb=function(e,t){const n=Ke._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Ke._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},S(Ke,rc);let zd=Ke;var zS=U.AbortException,$S=U.AnnotationEditorLayer,HS=U.AnnotationEditorParamsType,BS=U.AnnotationEditorType,WS=U.AnnotationEditorUIManager,Ab=U.AnnotationLayer,Eb=U.AnnotationMode,US=U.CMapCompressionType,VS=U.ColorPicker,qS=U.DOMSVGFactory,GS=U.DrawLayer,XS=U.FeatureTest,bf=U.GlobalWorkerOptions,KS=U.ImageKind,YS=U.InvalidPDFException,JS=U.MissingPDFException,QS=U.OPS,ZS=U.Outliner,eA=U.PDFDataRangeTransport,tA=U.PDFDateString,nA=U.PDFWorker,sA=U.PasswordResponses,iA=U.PermissionFlag,rA=U.PixelsPerInch,aA=U.RenderingCancelledException,_b=U.TextLayer,oA=U.UnexpectedResponseException,lA=U.Util,cA=U.VerbosityLevel,hA=U.XfaLayer,uA=U.build,dA=U.createValidAbsoluteUrl,fA=U.fetchData,kb=U.getDocument,pA=U.getFilenameFromUrl,gA=U.getPdfFilenameFromUrl,mA=U.getXfaPageViewport,bA=U.isDataScheme,yA=U.isPdfFile,vA=U.noContextMenu,wA=U.normalizeUnicode,xA=U.renderTextLayer,SA=U.setLayerDimensions,AA=U.shadow,EA=U.updateTextLayer,Cb=U.version;const _A=Object.freeze(Object.defineProperty({__proto__:null,AbortException:zS,AnnotationEditorLayer:$S,AnnotationEditorParamsType:HS,AnnotationEditorType:BS,AnnotationEditorUIManager:WS,AnnotationLayer:Ab,AnnotationMode:Eb,CMapCompressionType:US,ColorPicker:VS,DOMSVGFactory:qS,DrawLayer:GS,FeatureTest:XS,GlobalWorkerOptions:bf,ImageKind:KS,InvalidPDFException:YS,MissingPDFException:JS,OPS:QS,Outliner:ZS,PDFDataRangeTransport:eA,PDFDateString:tA,PDFWorker:nA,PasswordResponses:sA,PermissionFlag:iA,PixelsPerInch:rA,RenderingCancelledException:aA,TextLayer:_b,UnexpectedResponseException:oA,Util:lA,VerbosityLevel:cA,XfaLayer:hA,build:uA,createValidAbsoluteUrl:dA,fetchData:fA,getDocument:kb,getFilenameFromUrl:pA,getPdfFilenameFromUrl:gA,getXfaPageViewport:mA,isDataScheme:bA,isPdfFile:yA,noContextMenu:vA,normalizeUnicode:wA,renderTextLayer:xA,setLayerDimensions:SA,shadow:AA,updateTextLayer:EA,version:Cb},Symbol.toStringTag,{value:"Module"}));var qe=function(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},kA=["onCopy","onCut","onPaste"],CA=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],TA=["onFocus","onBlur"],PA=["onInput","onInvalid","onReset","onSubmit"],LA=["onLoad","onError"],RA=["onKeyDown","onKeyPress","onKeyUp"],MA=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DA=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],IA=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],jA=["onSelect"],FA=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],OA=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],NA=["onScroll"],zA=["onWheel"],$A=["onAnimationStart","onAnimationEnd","onAnimationIteration"],HA=["onTransitionEnd"],BA=["onToggle"],WA=["onChange"],UA=qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe(qe([],kA,!0),CA,!0),TA,!0),PA,!0),LA,!0),RA,!0),MA,!0),DA,!0),IA,!0),jA,!0),FA,!0),OA,!0),NA,!0),zA,!0),$A,!0),HA,!0),WA,!0),BA,!0);function Tb(r,e){var t={};return UA.forEach(function(n){var s=r[n];s&&(e?t[n]=function(i){return s(i,e(n))}:t[n]=s)}),t}function fc(r){var e=!1,t=new Promise(function(n,s){r.then(function(i){return!e&&n(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function Pb(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Pb(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function eu(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Pb(r))&&(n&&(n+=" "),n+=e);return n}var VA="Invariant failed";function pe(r,e){if(!r)throw new Error(VA)}var mu,yp;function qA(){if(yp)return mu;yp=1;var r=function(){};return mu=r,mu}var GA=qA();const ct=ng(GA);var vp=Object.prototype.hasOwnProperty;function wp(r,e,t){for(t of r.keys())if(Ur(t,e))return t}function Ur(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&Ur(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=wp(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=wp(e,s),!s)||!Ur(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(vp.call(r,t)&&++n&&!vp.call(e,t)||!(t in e)||!Ur(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}const Lb=_.createContext(null);function Vr({children:r,type:e}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const XA="noopener noreferrer nofollow";class KA{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){pe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{pe(this.pdfDocument),pe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pe(Array.isArray(t));const n=t[0];new Promise(s=>{pe(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(i=>{s(i)}).catch(()=>{pe(!1)}):typeof n=="number"?s(n):pe(!1)}).then(s=>{const i=s+1;pe(this.pdfViewer),pe(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;pe(this.pdfViewer),pe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||XA,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const xp={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},tu=typeof window<"u",Rb=tu&&window.location.protocol==="file:";function YA(r){return typeof r<"u"}function mi(r){return YA(r)&&r!==null}function JA(r){return typeof r=="string"}function QA(r){return r instanceof ArrayBuffer}function ZA(r){return pe(tu),r instanceof Blob}function Bd(r){return JA(r)&&/^data:/.test(r)}function Sp(r){pe(Bd(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function e1(){return tu&&window.devicePixelRatio||1}const Mb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Ap(){ct(!Rb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Mb}`)}function t1(){ct(!Rb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Mb}`)}function Sr(r){r!=null&&r.cancel&&r.cancel()}function Wd(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function n1(r){return r.name==="RenderingCancelledException"}function s1(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}function i1(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function Ba(){return _.useReducer(i1,{value:void 0,error:void 0})}var r1=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{h(n.next(u))}catch(d){a(d)}}function c(u){try{h(n.throw(u))}catch(d){a(d)}}function h(u){u.done?i(u.value):s(u.value).then(o,c)}h((n=n.apply(r,e||[])).next())})},Ep=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const{PDFDataRangeTransport:a1}=_A,o1=(r,e)=>{switch(e){case xp.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case xp.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function _p(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const l1=_.forwardRef(function(e,t){var{children:n,className:s,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:c,inputRef:h,imageResourcesPath:u,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:b,onLoadSuccess:w,onPassword:x=o1,onSourceError:A,onSourceSuccess:E,options:k,renderMode:C,rotate:T}=e,P=Ep(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[L,R]=Ba(),{value:D,error:M}=L,[J,X]=Ba(),{value:B,error:K}=J,Q=_.useRef(new KA),F=_.useRef([]),O=_.useRef(void 0),Le=_.useRef(void 0);c&&c!==O.current&&_p(c)&&(ct(!Ur(c,O.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),O.current=c),k&&k!==Le.current&&(ct(!Ur(k,Le.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Le.current=k);const Ue=_.useRef({scrollPageIntoView:be=>{const{dest:De,pageNumber:it,pageIndex:Ve=it-1}=be;if(p){p({dest:De,pageIndex:Ve,pageNumber:it});return}const Pr=F.current[Ve];if(Pr){Pr.scrollIntoView();return}ct(!1,`An internal link leading to page ${it} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});_.useImperativeHandle(t,()=>({linkService:Q,pages:F,viewer:Ue}),[]);function Zt(){E&&E()}function Se(){M&&(ct(!1,M.toString()),A&&A(M))}function _e(){R({type:"RESET"})}_.useEffect(_e,[c,R]);const Wt=_.useCallback(()=>r1(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return Bd(c)?{data:Sp(c)}:(Ap(),{url:c});if(c instanceof a1)return{range:c};if(QA(c))return{data:c};if(tu&&ZA(c))return{data:yield s1(c)};if(pe(typeof c=="object"),pe(_p(c)),"url"in c&&typeof c.url=="string"){if(Bd(c.url)){const{url:be}=c,De=Ep(c,["url"]),it=Sp(be);return Object.assign({data:it},De)}Ap()}return c}),[c]);_.useEffect(()=>{const be=fc(Wt());return be.promise.then(De=>{R({type:"RESOLVE",value:De})}).catch(De=>{R({type:"REJECT",error:De})}),()=>{Sr(be)}},[Wt,R]),_.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){Se();return}Zt()}},[D]);function Lt(){B&&(w&&w(B),F.current=new Array(B.numPages),Q.current.setDocument(B))}function ft(){K&&(ct(!1,K.toString()),m&&m(K))}_.useEffect(function(){X({type:"RESET"})},[X,D]),_.useEffect(function(){if(!D)return;const De=k?Object.assign(Object.assign({},D),k):D,it=kb(De);b&&(it.onProgress=b),x&&(it.onPassword=x);const Ve=it,Pr=Ve.promise.then(Ja=>{X({type:"RESOLVE",value:Ja})}).catch(Ja=>{Ve.destroyed||X({type:"REJECT",error:Ja})});return()=>{Pr.finally(()=>Ve.destroy())}},[k,X,D]),_.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){ft();return}Lt()}},[B]),_.useEffect(function(){Q.current.setViewer(Ue.current),Q.current.setExternalLinkRel(a),Q.current.setExternalLinkTarget(o)},[a,o]);const ve=_.useCallback((be,De)=>{F.current[be]=De},[]),xt=_.useCallback(be=>{delete F.current[be]},[]),vn=_.useMemo(()=>({imageResourcesPath:u,linkService:Q.current,onItemClick:p,pdf:B,registerPage:ve,renderMode:C,rotate:T,unregisterPage:xt}),[u,p,B,ve,C,T,xt]),Te=_.useMemo(()=>Tb(P,()=>B),[P,B]);function Ka(){return g.jsx(Lb.Provider,{value:vn,children:n})}function Ya(){return c?B==null?g.jsx(Vr,{type:"loading",children:typeof d=="function"?d():d}):B===!1?g.jsx(Vr,{type:"error",children:typeof i=="function"?i():i}):Ka():g.jsx(Vr,{type:"no-data",children:typeof f=="function"?f():f})}return g.jsx("div",Object.assign({className:eu("react-pdf__Document",s),ref:h,style:{"--scale-factor":"1"}},Te,{children:Ya()}))});function Db(){return _.useContext(Lb)}function Ib(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(i){t.forEach(function(a){typeof a=="function"?a(i):a&&(a.current=i)})}}const jb=_.createContext(null),Fb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},c1=/^H(\d+)$/;function h1(r){return r in Fb}function nu(r){return"children"in r}function Ob(r){return nu(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function u1(r){const e={};if(nu(r)){const{role:t}=r,n=t.match(c1);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(h1(t)){const s=Fb[t];s&&(e.role=s)}}return e}function Nb(r){const e={};if(nu(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),Ob(r)){const[t]=r.children;if(t){const n=Nb(t);return Object.assign(Object.assign({},e),n)}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function d1(r){return r?Object.assign(Object.assign({},u1(r)),Nb(r)):null}function zb({className:r,node:e}){const t=_.useMemo(()=>d1(e),[e]),n=_.useMemo(()=>!nu(e)||Ob(e)?null:e.children.map((s,i)=>g.jsx(zb,{node:s},i)),[e]);return g.jsx("span",Object.assign({className:r},t,{children:n}))}function su(){return _.useContext(jb)}function f1(){const r=su();pe(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[n,s]=Ba(),{value:i,error:a}=n,{customTextRenderer:o,page:c}=r;function h(){i&&t&&t(i)}function u(){a&&(ct(!1,a.toString()),e&&e(a))}return _.useEffect(function(){s({type:"RESET"})},[s,c]),_.useEffect(function(){if(o||!c)return;const f=fc(c.getStructTree()),p=f;return f.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>Sr(p)},[o,c,s]),_.useEffect(()=>{if(i!==void 0){if(i===!1){u();return}h()}},[i]),i?g.jsx(zb,{className:"react-pdf__Page__structTree structTree",node:i}):null}const kp=Eb;function p1(r){const e=su();pe(e);const t=Object.assign(Object.assign({},e),r),{_className:n,canvasBackground:s,devicePixelRatio:i=e1(),onRenderError:a,onRenderSuccess:o,page:c,renderForms:h,renderTextLayer:u,rotate:d,scale:f}=t,{canvasRef:p}=r;pe(c);const m=_.useRef(null);function b(){c&&o&&o(Wd(c,f))}function w(k){n1(k)||(ct(!1,k.toString()),a&&a(k))}const x=_.useMemo(()=>c.getViewport({scale:f*i,rotation:d}),[i,c,d,f]),A=_.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);_.useEffect(function(){if(!c)return;c.cleanup();const{current:C}=m;if(!C)return;C.width=x.width,C.height=x.height,C.style.width=`${Math.floor(A.width)}px`,C.style.height=`${Math.floor(A.height)}px`,C.style.visibility="hidden";const T={annotationMode:h?kp.ENABLE_FORMS:kp.ENABLE,canvasContext:C.getContext("2d",{alpha:!1}),viewport:x};s&&(T.background=s);const P=c.render(T),L=P;return P.promise.then(()=>{C.style.visibility="",b()}).catch(w),()=>Sr(L)},[s,c,h,x,A]);const E=_.useCallback(()=>{const{current:k}=m;k&&(k.width=0,k.height=0)},[]);return _.useEffect(()=>E,[E]),g.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Ib(p,m),style:{display:"block",userSelect:"none"},children:u?g.jsx(f1,{}):null})}function g1(r){return"str"in r}function m1(){const r=su();pe(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:a,pageIndex:o,pageNumber:c,rotate:h,scale:u}=r;pe(a);const[d,f]=Ba(),{value:p,error:m}=d,b=_.useRef(null),w=_.useRef(void 0);ct(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){p&&n&&n(p)}function A(){m&&(ct(!1,m.toString()),t&&t(m))}_.useEffect(function(){f({type:"RESET"})},[a,f]),_.useEffect(function(){if(!a)return;const R=fc(a.getTextContent()),D=R;return R.promise.then(M=>{f({type:"RESOLVE",value:M})}).catch(M=>{f({type:"REJECT",error:M})}),()=>Sr(D)},[a,f]),_.useEffect(()=>{if(p!==void 0){if(p===!1){A();return}x()}},[p]);const E=_.useCallback(()=>{i&&i()},[i]),k=_.useCallback(L=>{ct(!1,L.toString()),s&&s(L)},[s]);function C(){const L=w.current;L&&L.classList.add("active")}function T(){const L=w.current;L&&L.classList.remove("active")}const P=_.useMemo(()=>a.getViewport({scale:u,rotation:h}),[a,h,u]);return _.useLayoutEffect(function(){if(!a||!p)return;const{current:R}=b;if(!R)return;R.innerHTML="";const D=a.streamTextContent({includeMarkedContent:!0}),M={container:R,textContentSource:D,viewport:P},J=new _b(M),X=J;return J.render().then(()=>{const B=document.createElement("div");B.className="endOfContent",R.append(B),w.current=B;const K=R.querySelectorAll('[role="presentation"]');if(e){let Q=0;p.items.forEach((F,O)=>{if(!g1(F))return;const Le=K[Q];if(!Le)return;const Ue=e(Object.assign({pageIndex:o,pageNumber:c,itemIndex:O},F));Le.innerHTML=Ue,Q+=F.str&&F.hasEOL?2:1})}E()}).catch(k),()=>Sr(X)},[e,k,E,a,o,c,p,P]),g.jsx("div",{className:eu("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:C,ref:b})}function b1(){const r=Db(),e=su();pe(e);const t=Object.assign(Object.assign({},r),e),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:c,page:h,pdf:u,renderForms:d,rotate:f,scale:p=1}=t;pe(u),pe(h),pe(s);const[m,b]=Ba(),{value:w,error:x}=m,A=_.useRef(null);ct(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){w&&a&&a(w)}function k(){x&&(ct(!1,x.toString()),i&&i(x))}_.useEffect(function(){b({type:"RESET"})},[b,h]),_.useEffect(function(){if(!h)return;const R=fc(h.getAnnotations()),D=R;return R.promise.then(M=>{b({type:"RESOLVE",value:M})}).catch(M=>{b({type:"REJECT",error:M})}),()=>{Sr(D)}},[b,h]),_.useEffect(()=>{if(w!==void 0){if(w===!1){k();return}E()}},[w]);function C(){c&&c()}function T(L){ct(!1,`${L}`),o&&o(L)}const P=_.useMemo(()=>h.getViewport({scale:p,rotation:f}),[h,f,p]);return _.useEffect(function(){if(!u||!h||!s||!w)return;const{current:R}=A;if(!R)return;const D=P.clone({dontFlip:!0}),M={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:R,l10n:null,page:h,viewport:D},J={annotations:w,annotationStorage:u.annotationStorage,div:R,imageResourcesPath:n,linkService:s,page:h,renderForms:d,viewport:D};R.innerHTML="";try{new Ab(M).render(J),C()}catch(X){T(X)}return()=>{}},[w,n,s,h,u,d,P]),g.jsx("div",{className:eu("react-pdf__Page__annotations","annotationLayer"),ref:A})}var y1=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Cp=1;function v1(r){const e=Db(),t=Object.assign(Object.assign({},e),r),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:a,children:o,className:c,customRenderer:h,customTextRenderer:u,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:m,loading:b="Loading page…",noData:w="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:A,onGetStructTreeError:E,onGetStructTreeSuccess:k,onGetTextError:C,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:L,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:D,onRenderError:M,onRenderSuccess:J,onRenderTextLayerError:X,onRenderTextLayerSuccess:B,pageIndex:K,pageNumber:Q,pdf:F,registerPage:O,renderAnnotationLayer:Le=!0,renderForms:Ue=!1,renderMode:Zt="canvas",renderTextLayer:Se=!0,rotate:_e,scale:Wt=Cp,unregisterPage:Lt,width:ft}=t,ve=y1(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[xt,vn]=Ba(),{value:Te,error:Ka}=xt,Ya=_.useRef(null);pe(F);const be=mi(Q)?Q-1:K??null,De=Q??(mi(K)?K+1:null),it=_e??(Te?Te.rotate:null),Ve=_.useMemo(()=>{if(!Te)return null;let Lr=1;const mc=Wt??Cp;if(ft||p){const bc=Te.getViewport({scale:1,rotation:it});ft?Lr=ft/bc.width:p&&(Lr=p/bc.height)}return mc*Lr},[p,Te,it,Wt,ft]);_.useEffect(function(){return()=>{mi(be)&&s&&Lt&&Lt(be)}},[s,F,be,Lt]);function Pr(){if(L){if(!Te||!Ve)return;L(Wd(Te,Ve))}if(s&&O){if(!mi(be)||!Ya.current)return;O(be,Ya.current)}}function Ja(){Ka&&(ct(!1,Ka.toString()),P&&P(Ka))}_.useEffect(function(){vn({type:"RESET"})},[vn,F,be]),_.useEffect(function(){if(!F||!De)return;const mc=fc(F.getPage(De)),bc=mc;return mc.promise.then(ru=>{vn({type:"RESOLVE",value:ru})}).catch(ru=>{vn({type:"REJECT",error:ru})}),()=>Sr(bc)},[vn,F,De]),_.useEffect(()=>{if(Te!==void 0){if(Te===!1){Ja();return}Pr()}},[Te,Ve]);const l0=_.useMemo(()=>Te&&mi(be)&&De&&mi(it)&&mi(Ve)?{_className:n,canvasBackground:i,customTextRenderer:u,devicePixelRatio:d,onGetAnnotationsError:x,onGetAnnotationsSuccess:A,onGetStructTreeError:E,onGetStructTreeSuccess:k,onGetTextError:C,onGetTextSuccess:T,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:D,onRenderError:M,onRenderSuccess:J,onRenderTextLayerError:X,onRenderTextLayerSuccess:B,page:Te,pageIndex:be,pageNumber:De,renderForms:Ue,renderTextLayer:Se,rotate:it,scale:Ve}:null,[n,i,u,d,x,A,E,k,C,T,R,D,M,J,X,B,Te,be,De,Ue,Se,it,Ve]),c0=_.useMemo(()=>Tb(ve,()=>Te&&(Ve?Wd(Te,Ve):void 0)),[ve,Te,Ve]),gc=`${be}@${Ve}/${it}`;function h0(){switch(Zt){case"custom":return pe(h),g.jsx(h,{},`${gc}_custom`);case"none":return null;case"canvas":default:return g.jsx(p1,{canvasRef:a},`${gc}_canvas`)}}function u0(){return Se?g.jsx(m1,{},`${gc}_text`):null}function d0(){return Le?g.jsx(b1,{},`${gc}_annotations`):null}function f0(){return g.jsxs(jb.Provider,{value:l0,children:[h0(),u0(),d0(),o]})}function p0(){return De?F===null||Te===void 0||Te===null?g.jsx(Vr,{type:"loading",children:typeof b=="function"?b():b}):F===!1||Te===!1?g.jsx(Vr,{type:"error",children:typeof f=="function"?f():f}):f0():g.jsx(Vr,{type:"no-data",children:typeof w=="function"?w():w})}return g.jsx("div",Object.assign({className:eu(n,c),"data-page-number":De,ref:Ib(m,Ya),style:{"--scale-factor":`${Ve}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},c0,{children:p0()}))}t1();bf.workerSrc="pdf.worker.mjs";function bu(r){if(r){const e=r.offsetWidth,t=r.offsetHeight;return{width:e,height:t}}return{width:0,height:0}}function w1(r){const[e,t]=_.useState(bu(r));return _.useLayoutEffect(()=>{t(bu(r));function n(){t(bu(r))}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[r]),e}bf.workerSrc=`//unpkg.com/pdfjs-dist@${Cb}/legacy/build/pdf.worker.min.js`;const x1=({type:r,url:e,fileName:t})=>{const{t:n}=xe(),s=_.useRef(null),i=w1(s.current),a=()=>{const c=document.createElement("a");document.body.appendChild(c),c.download=t.toString(),c.href=e.toString(),c.click(),document.body.removeChild(c)},o=()=>g.jsx(ai,{width:"full",children:g.jsxs(Up,{onClick:()=>a(),_hover:{cursor:"pointer"},children:[g.jsx(Vp,{ref:s,children:g.jsx(l1,{file:e,children:g.jsx(v1,{pageNumber:1,width:i.width,loading:"Laden"})})}),g.jsx(w0,{width:"full",padding:2,children:g.jsxs(We,{width:"full",justifyContent:"space-between",children:[g.jsxs(W,{fontSize:"sm",children:[t,".pdf"]}),g.jsx(Ps,{label:n("chatbot.showCV.download"),hasArrow:!0,openDelay:300,children:g.jsx(mn,{onClick:()=>a(),"aria-label":"Download",icon:g.jsx(we,{as:W0}),variant:"ghost",colorScheme:"gray"})})]})})]})});return g.jsx(g.Fragment,{children:r==="pdf"?o():null})},S1=({url:r})=>g.jsx(dg,{to:r}),A1=({children:r,owner:e})=>g.jsx(x0,{in:!0,style:{width:"100%"},children:g.jsx(ai,{width:"full",justifyContent:e==="bot"?"start":"end",children:g.jsx(W,{minHeight:6,width:"fit-content",maxWidth:"80%",boxShadow:"0 0 2rem rgba(black, 0.075), 0rem 1rem 1rem -1rem rgba(black, 0.1)",backgroundColor:e==="bot"?"gray.200":"black",color:e==="bot"?"black":"white",borderRadius:e==="bot"?"1.125rem 1.125rem 1.125rem 0":"1.125rem 1.125rem 0 1.125rem",paddingX:4,paddingY:2,style:{hyphens:"auto",wordWrap:"break-word"},children:r})})}),E1=()=>{const{t:r}=xe(),[e,t]=_.useState(Mw),[n,s]=_.useState(Dw),i=_.useRef(null);_.useEffect(()=>{h()},[e,n]);const a=()=>e.map((u,d)=>Iw(u)?g.jsx(A1,{owner:u.owner,children:r(u.message)},d):jw(u)?g.jsx(x1,{owner:u.owner,type:u.type,fileName:u.fileName,url:u.url},d):Fw(u)?g.jsx(S1,{url:u.url},d):null),o=u=>{const d=[];return u.forEach(f=>{const p=Wh.get(f);p&&d.push(p)}),d},c=async u=>{s([]);const f=u.messges.map((p,m)=>new Promise(b=>{setTimeout(()=>{t(w=>[...w,p]),b()},m*1e3)}));await Promise.all(f),s(u.furtherActions?o(u.furtherActions):[])},h=()=>{var u;(u=i==null?void 0:i.current)==null||u.scrollIntoView({behavior:"smooth"})};return g.jsxs($,{spacing:6,children:[g.jsx($,{width:"full",spacing:3,children:a()}),g.jsx(Qt,{direction:{base:"column",lg:"row"},width:"full",flexWrap:"wrap",children:n.map((u,d)=>g.jsx(Ow,{handleAction:()=>c(u),children:r(u.actionText)},d))}),g.jsx("div",{ref:i})]})},_1=({onClick:r})=>g.jsxs(Up,{position:"fixed",bottom:{base:0,lg:"5%"},right:{base:0,lg:"5%"},height:{base:"full",lg:"auto"},maxWidth:{base:"full",lg:"25vw"},maxHeight:{base:"full",lg:"65vh"},zIndex:3,children:[g.jsx(Rw,{onClick:r}),g.jsx(Vp,{overflowY:"auto",children:g.jsx(E1,{})})]}),k1=({onClick:r})=>{const{t:e}=xe();return g.jsx(Ps,{label:e("chatbot.tooltip"),hasArrow:!0,openDelay:300,children:g.jsx(mn,{"aria-label":"Chatbot",icon:g.jsx(we,{as:U0,boxSize:8}),position:"fixed",bottom:"5%",right:"5%",size:"lg",variant:{base:"solid",lg:"outline"},colorScheme:"gray",onClick:r})})},C1=()=>{const[r,e]=_.useState(!1);return r?g.jsx(_1,{onClick:()=>e(!1)}):g.jsx(k1,{onClick:()=>e(!0)})},T1=r=>g.jsxs(ut,{as:"svg",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",display:"inline",...r,children:[g.jsx("rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}),g.jsx("rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}),g.jsx("path",{d:"M6 20h4"}),g.jsx("path",{d:"M14 10h4"}),g.jsx("path",{d:"M6 14h2v6"}),g.jsx("path",{d:"M14 4h2v6"})]}),Ud=r=>{const{t:e}=xe(),{colorMode:t,toggleColorMode:n}=qp();return g.jsx(Ps,{label:e(t==="light"?"navigation.themeSwitch.dark":"navigation.themeSwitch.light"),"aria-label":"Dark mode switch",hasArrow:!0,openDelay:300,children:g.jsx(mn,{icon:g.jsx(we,{as:t==="light"?V0:q0,boxSize:{base:6,lg:5}}),variant:"outline",colorScheme:"gray",onClick:n,...r,"aria-label":"Dark mode switch"})})},P1=()=>{const{t:r}=xe(),[e]=Wa("(max-width: 62em)");return g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",marginTop:6,children:[g.jsxs(W,{fontSize:"sm",display:"flex",flexDirection:{base:"column",lg:"row"},alignItems:{base:"center",lg:"start"},gap:1,flex:1,children:[g.jsx(W,{as:"span",children:"© 2024"})," ",r("footer.text")," ",g.jsx(T1,{color:"brand.500"})]}),e?g.jsxs(We,{spacing:4,width:"full",justifyContent:"center",children:[g.jsx(Ae,{"aria-label":"Github",isExternal:!0,href:"https://github.com/fredericbahr",children:g.jsx(we,{as:fi,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})}),g.jsx(Ae,{"aria-label":"Linkedin",isExternal:!0,href:"https://www.linkedin.com/in/frederic-bahr-446925251/",children:g.jsx(we,{as:sg,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})}),g.jsx(Ud,{variant:"ghost",justifySelf:"end"})]}):g.jsx(Ud,{variant:"ghost",justifySelf:"end"})]})},L1=({...r})=>{const[e]=Kd("colors",["brand.500"]);return g.jsxs(ut,{as:"svg",id:"e76RbDrnTZM1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 226.304018 200.378",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",...r,children:[g.jsx("path",{id:"e76RbDrnTZM2",d:"M75.000003,20.999997L75.000003,43.003079L152.325119,43.003079L152.325119,20.999997L75.000003,20.999997Z",fill:e,stroke:e,strokeWidth:"0.452608"}),g.jsx("path",{id:"e76RbDrnTZM3",d:"M75.000003,72.550075L75.000003,156.999998L97.841297,156.999997L97.841297,94.972261L152.325119,94.97226L152.325119,72.550072L75.000003,72.550075Z",transform:"matrix(1 0 0 1 0 0.000003)",fill:e,stroke:e,strokeWidth:"0.452608"})]})},yf={initialColorMode:localStorage.getItem("chakra-ui-color-mode")??"light",useSystemColorMode:!1},vf={Heading:{baseStyle:{fontFamily:"'Orbitron', sans-serif"}}},$b=Yd({config:yf,components:vf,colors:{brand:{50:"#FFB7B1",100:"#FF9E98",200:"#FF3E30",300:"#FB1100",400:"#C80D00",500:"#930A00",600:"#890900",700:"#7F0800",800:"#740800",900:"#6A0700"}}},Jd({colorScheme:"brand"})),Hb=Yd({config:yf,components:vf,colors:{brand:{50:"#9ad1a1",100:"#86c88e",200:"#72bf7b",300:"#5db568",400:"#49ac55",500:"#35a342",600:"#30933b",700:"#2a8235",800:"#25722e",900:"#1b5221"}}},Jd({colorScheme:"brand"})),R1=Yd({config:yf,components:vf,colors:{brand:{50:"#99f0c5",100:"#85ecb9",200:"#70e9ad",300:"#5ce6a1",400:"#47e396",500:"#33e08a",600:"#2eca7c",700:"#29b36e",800:"#249d61",900:"#1f8653"}}},Jd({colorScheme:"brand"})),Tp=new Map([["bordeaux",$b],["green",Hb],["lime",R1]]),Bb=_.createContext({colorScheme:$b}),M1=({children:r})=>{const e=()=>{const i=localStorage.getItem("colorScheme");if(i){const a=JSON.parse(i);return Tp.get(a)}return Hb},[t,n]=_.useState(e()),s=i=>{localStorage.setItem("colorScheme",JSON.stringify(i)),n(Tp.get(i))};return g.jsx(Bb.Provider,{value:{colorScheme:t,setColorScheme:i=>s(i)},children:r})},Wb=()=>_.useContext(Bb);var Ub=(r=>(r.Bordeaux="#930A00",r.Green="#35a342",r.Lime="#33e08a",r))(Ub||{}),Vb=(r=>(r.Bordeaux="bordeaux",r.Green="green",r.Lime="lime",r))(Vb||{}),Vd=(r=>(r.Bordeaux="bordeaux",r.Green="green",r.Lime="lime",r))(Vd||{});const qb=()=>{const{t:r}=xe(),{setColorScheme:e}=Wb(),t=n=>{e(n)};return g.jsxs(Gp,{placement:"bottom-end",closeOnEsc:!0,children:[g.jsx(Xp,{children:g.jsx(mn,{"aria-label":"Change color theme",icon:g.jsx(we,{as:G0}),variant:"outline",colorScheme:"gray"})}),g.jsx(Kp,{children:g.jsxs(Yp,{children:[g.jsx(Jp,{}),g.jsxs(Qp,{display:"flex",alignItems:"center",children:[g.jsx(W,{as:"span",children:r("navigation.themeSwitch.title")})," ",g.jsx(Zp,{})]}),g.jsx(eg,{children:g.jsxs(We,{alignItems:"center",gap:4,wrap:"wrap",width:"full",justifyContent:"space-evenly",children:[g.jsx(Ud,{}),Object.entries(Vb).map(([n,s])=>g.jsx(Ps,{label:r(`navigation.themeSwitch.${Vd[n]}`),"aria-label":Vd[n],hasArrow:!0,children:g.jsx(ut,{backgroundColor:Ub[n],minWidth:"2rem",minHeight:"2rem",borderRadius:"full",ms:"0 !important",_hover:{cursor:"pointer"},onClick:()=>t(s)})},s))]})})]})})]})},Gb=()=>{const{t:r,i18n:e}=xe(),t=kt("gray.100","gray.800"),{isOpen:n,onOpen:s,onClose:i}=tg(),a=o=>{e.changeLanguage(o),i()};return g.jsxs(Gp,{placement:"bottom-end",closeOnEsc:!0,onClose:i,onOpen:s,isOpen:n,children:[g.jsx(Xp,{children:g.jsx(mn,{"aria-label":"Change language",icon:g.jsx(we,{as:X0}),variant:"outline",colorScheme:"gray"})}),g.jsx(Kp,{children:g.jsxs(Yp,{children:[g.jsx(Jp,{}),g.jsx(Qp,{display:"flex",alignItems:"center",children:r("navigation.languageSwitch.title")}),g.jsxs(eg,{padding:0,children:[g.jsxs(ac,{spacing:2,children:[g.jsx(yt,{width:"full",_hover:{backgroundColor:t,cursor:"pointer"},onClick:()=>a("de"),children:g.jsx(W,{paddingY:2,paddingX:4,children:r("navigation.languageSwitch.german")})}),g.jsx(yt,{_hover:{backgroundColor:t,cursor:"pointer"},onClick:()=>a("en"),children:g.jsx(W,{paddingY:2,paddingX:4,children:r("navigation.languageSwitch.english")})})]}),g.jsx(Zp,{})]})]})})]})},D1=()=>{const{t:r}=xe(),e=kt("gray.500","gray.400"),t=_r(),n=()=>{t("/contact")};return g.jsxs($,{spacing:3,children:[g.jsxs(ac,{alignSelf:"start",spacing:3,fontSize:"large",children:[g.jsx(yt,{style:{counterIncrement:"navitem 1"},children:g.jsx(Ae,{href:"/#about",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.about")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},children:g.jsx(Ae,{href:"/#experience",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.experience")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},children:g.jsx(Ae,{href:"/#projects",_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.projects")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},children:g.jsx(Ae,{onClick:n,_before:{content:"'0' counter(navitem) '.'",marginRight:1,color:"brand.500",fontSize:"xs"},children:r("navigation.contact")})})]}),g.jsx(Qd,{borderColor:e}),g.jsxs(We,{spacing:8,children:[g.jsx(qb,{}),g.jsx(Gb,{})]})]})},I1=()=>{const{t:r}=xe(),e=_r(),t=()=>{e("/contact")};return g.jsxs(ut,{as:"nav",flex:1,display:"flex",justifyContent:"end",alignItems:"center",marginRight:8,gap:8,children:[g.jsxs(S0,{display:"flex",flexDirection:"row",gap:8,style:{counterReset:"navitem 0"},children:[g.jsx(yt,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:g.jsx(Ae,{href:"/#about",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.about")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:g.jsx(Ae,{href:"/#experience",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.experience")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:g.jsx(Ae,{href:"/#projects",_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.projects")})}),g.jsx(yt,{style:{counterIncrement:"navitem 1"},listStyleType:"none",children:g.jsx(Ae,{onClick:t,_hover:{textDecoration:"none",color:"brand.500"},_before:{content:"'0' counter(navitem) '.'",marginRight:2,color:"brand.500",fontSize:"sm"},children:r("navigation.contact")})})]}),g.jsx(qb,{}),g.jsx(Gb,{})]})},j1=()=>{const[r]=Wa("(max-width: 62em)"),{isOpen:e,onToggle:t}=tg(),n=_r();return g.jsxs(g.Fragment,{children:[g.jsxs(ai,{as:"header",flexDirection:"row",width:"full",padding:2,marginBottom:{base:0,lg:2},justifyContent:{base:"space-between",lg:"unset"},children:[g.jsx(mn,{icon:g.jsx(L1,{maxH:12}),"aria-label":"Logo",variant:"ghost",marginLeft:6,onClick:()=>n("/")}),r&&g.jsx(mn,{"aria-label":"Open Menu",icon:e?g.jsx(we,{as:K0}):g.jsx(we,{as:Y0}),onClick:t,variant:"ghost",colorScheme:"gray"}),!r&&g.jsx(I1,{})]}),r&&g.jsx(ai,{justifyContent:"center",width:"full",margin:"0 auto",marginTop:-3,children:g.jsx(A0,{in:e,animateOpacity:!0,children:g.jsx(D1,{})})})]})},F1=()=>{const{t:r}=xe(),e=kt("gray.600","gray.200");return g.jsx(ut,{position:"fixed",bottom:"0px",left:"5%",children:g.jsxs(ac,{spacing:4,display:"flex",flexDirection:"column",alignItems:"center",_after:{content:"''",display:"block",height:"90px",width:"1px",backgroundColor:e,marginTop:"4"},children:[g.jsx(yt,{children:g.jsx(Ps,{label:r("socials.github"),hasArrow:!0,openDelay:300,children:g.jsx(Ae,{"aria-label":"Github",isExternal:!0,href:"https://github.com/fredericbahr",children:g.jsx(we,{as:fi,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})})})}),g.jsx(yt,{children:g.jsx(Ps,{label:r("socials.linkedin"),hasArrow:!0,openDelay:300,children:g.jsx(Ae,{"aria-label":"Linkedin",isExternal:!0,href:"https://www.linkedin.com/in/frederic-bahr-446925251/",children:g.jsx(we,{as:sg,boxSize:6,transition:"all 0.2s ease-in-out",_hover:{color:"brand.500",transform:"translateY(-4px) scale(1.2)"}})})})})]})})},Ds=({children:r})=>{const[e]=Wa("(max-width: 62em)");return g.jsxs($,{minHeight:"100vh",marginBottom:10,children:[g.jsx(j1,{}),g.jsx(E0,{maxWidth:{base:"full",lg:"80%"},style:{counterReset:"heading 0"},children:g.jsxs($,{width:"full",alignItems:"start",spacing:{base:8,lg:16},children:[r,g.jsx(P1,{})]})}),!e&&g.jsx(F1,{}),g.jsx(C1,{})]})};function O1({...r}){const[e]=Kd("colors",["brand.500"]),t=yc`
    from {
      stroke-dashoffset: 200.65640258789062px;
      stroke-dasharray: 200.65640258789062px;
    }

    to {
      stroke-dashoffset: 0;
      stroke-dasharray: 200.65640258789062px;
    }`,n=yc`
    from {
      stroke-dashoffset: 325.55010986328125px;
      stroke-dasharray: 325.55010986328125px;
    }
  
    to {
      stroke-dashoffset: 0;
      stroke-dasharray: 325.55010986328125px;
    }
  `,s=yc` 
    from {
      fill: transparent;
    }
  
    to {
      fill: ${e};
    }
  `,i=yc` 
    from {
      opacity: 1;
    }
  
    to {
      opacity: 0;
    }
  `;return g.jsxs("svg",{id:"e76RbDrnTZM1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 226.304018 200.378",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",...r,children:[g.jsx(ut,{as:"path",id:"e76RbDrnTZM2",d:"M75.000003,20.999997L75.000003,43.003079L152.325119,43.003079L152.325119,20.999997L75.000003,20.999997Z",fill:e,stroke:e,strokeWidth:"0.452608",animation:`${t} 1.2s ease 0s both, ${s} 0.5s ease-in 1.2s both,
          ${i} 0.5s ease-in 2s both`}),g.jsx(ut,{as:"path",id:"e76RbDrnTZM3",d:"M75.000003,72.550075L75.000003,156.999998L97.841297,156.999997L97.841297,94.972261L152.325119,94.97226L152.325119,72.550072L75.000003,72.550075Z",transform:"matrix(1 0 0 1 0 0.000003)",fill:e,stroke:e,strokeWidth:"0.452608",animation:`${n} 1.2s ease 0.1s both, ${s} 0.5s ease-in 1.2s both,
        ${i} 0.5s ease-in 2s both`})]})}const wf=({children:r,id:e})=>g.jsx(ie,{id:e,as:"h2",fontSize:{base:"3xl",lg:"4xl"},display:"flex",alignItems:"center",justifyContent:"center",width:"full",marginTop:{base:4,lg:12},style:{counterIncrement:"heading 1"},_before:{content:"'0' counter(heading) '.'",marginRight:3,color:"brand.500",fontSize:"lg",alignSelf:"flex-end",marginBottom:1.5},_after:{content:"''",display:{base:"none",lg:"block"},width:"100%",height:.25,backgroundColor:"gray.300",marginLeft:{base:4,lg:8},marginTop:3,minWidth:{base:"unset",lg:"lg"}},children:g.jsx(W,{as:"span",style:{textWrap:"nowrap"},children:r})}),N1=["TypeScript","Jest","React","Playwright","Lit","Node.js","ChakraUI","Express"],z1=()=>{const{t:r}=xe();return g.jsxs($,{width:"full",alignItems:"start",spacing:8,children:[g.jsx(wf,{id:"about",children:r("about.title")}),g.jsxs(Nh,{gap:8,width:"full",gridTemplateColumns:{base:"1fr",lg:"1fr auto"},alignItems:"center",children:[g.jsxs($,{spacing:4,children:[g.jsx(W,{children:r("about.introduction")}),g.jsx(W,{children:r("about.main")}),g.jsx(W,{children:r("about.volunteering")}),g.jsx(W,{children:r("about.technologies")}),g.jsx(ac,{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",columnGap:8,rowGap:.5,alignSelf:"start",children:N1.map((e,t)=>g.jsxs(yt,{display:"flex",alignItems:"center",children:[g.jsx(yu,{as:vu,color:"green.500"}),g.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:e})]},`${e}-${t}`))})]}),g.jsx(ut,{display:"flex",justifyContent:"center"})]})]})};class pc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const $1=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},nt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:$1()},xf=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},H1=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=xf(r);nt.publicKey=t.publicKey,nt.blockHeadless=t.blockHeadless,nt.storageProvider=t.storageProvider,nt.blockList=t.blockList,nt.limitRate=t.limitRate,nt.origin=t.origin||e},Xb=async(r,e,t={})=>{const n=await fetch(nt.origin+r,{method:"POST",headers:t,body:e}),s=await n.text(),i=new pc(n.status,s);if(n.ok)return i;throw i},Kb=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},B1=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Yb=r=>r.webdriver||!r.languages||r.languages.length===0,Jb=()=>new pc(451,"Unavailable For Headless Browser"),W1=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},U1=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},V1=(r,e)=>r instanceof FormData?r.get(e):r[e],Qb=(r,e)=>{if(U1(r))return!1;W1(r.list,r.watchVariable);const t=V1(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},Zb=()=>new pc(403,"Forbidden"),q1=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},G1=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},e0=async(r,e,t)=>{if(!e.throttle||!t)return!1;q1(e.throttle,e.id);const n=e.id||r;return await G1(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},t0=()=>new pc(429,"Too Many Requests"),X1=async(r,e,t,n)=>{const s=xf(n),i=s.publicKey||nt.publicKey,a=s.blockHeadless||nt.blockHeadless,o=s.storageProvider||nt.storageProvider,c={...nt.blockList,...s.blockList},h={...nt.limitRate,...s.limitRate};return a&&Yb(navigator)?Promise.reject(Jb()):(Kb(i,r,e),B1(t),t&&Qb(c,t)?Promise.reject(Zb()):await e0(location.pathname,h,o)?Promise.reject(t0()):Xb("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},K1=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Y1=r=>typeof r=="string"?document.querySelector(r):r,J1=async(r,e,t,n)=>{const s=xf(n),i=s.publicKey||nt.publicKey,a=s.blockHeadless||nt.blockHeadless,o=nt.storageProvider||s.storageProvider,c={...nt.blockList,...s.blockList},h={...nt.limitRate,...s.limitRate};if(a&&Yb(navigator))return Promise.reject(Jb());const u=Y1(t);Kb(i,r,e),K1(u);const d=new FormData(u);return Qb(c,d)?Promise.reject(Zb()):await e0(location.pathname,h,o)?Promise.reject(t0()):(d.append("lib_version","4.4.1"),d.append("service_id",r),d.append("template_id",e),d.append("user_id",i),Xb("/api/v1.0/email/send-form",d))},Q1={init:H1,send:X1,sendForm:J1,EmailJSResponseStatus:pc},Z1={chars:"-./^*!}<~$012345abcdef",interval:50},eE=r=>r[Math.floor(Math.random()*r.length)],tE=(r,e,t,n,s,i)=>e>r?n[e]:r>=t&&e<r-t?s[e]:eE(i),nE=r=>{const{chars:e,interval:t,callback:n,initialValue:s}={...Z1,...r};let i,a;s&&(i=s,n(i));function*o(c,h=""){const u=c.length,d=h.length,f=Math.max(u,d),p=2*f;let m=0;for(yield h;m<p;)yield[...new Array(f)].map((b,w)=>tE(m,w,f,h,c,e)).join(""),m++;yield c}return c=>{clearInterval(a);const h=o(c,i);return new Promise(u=>{a=setInterval(()=>{var d=h.next();d.done?(clearInterval(a),u(i)):(i=d.value,n(i))},t)})}};function n0(r,e){let t="",n={};typeof r=="object"?n=r:typeof r=="string"&&(t=r,n={});const[s,i]=ih.useState(),[a,o]=ih.useState(()=>nE({...n,initialValue:t,callback:i}));return[s,a]}const Sf=({label:r,...e})=>{const t=kt("white","gray.800"),n=kt("gray.800","white"),s=kt("white","gray.800"),[i,a]=n0(r);return _.useEffect(()=>{a(r)},[r,a]),g.jsxs(Xd,{colorScheme:"brand",size:"lg",position:"relative",borderRadius:"none",overflow:"hidden",backgroundColor:"brand.500",_before:{content:"''",width:"20px",height:"20px",position:"absolute",transform:"rotate(45deg)",borderWidth:2,backgroundColor:t,bottom:"-10px",left:"-10px",overflow:"hidden",zIndex:1},_after:{content:"''",width:"20px",height:"20px",position:"absolute",transform:"rotate(45deg)",borderWidth:2,backgroundColor:t,top:"-10px",right:"-10px",overflow:"hidden",zIndex:1},_hover:{color:s},sx:{"&:hover > div":{left:0}},onMouseEnter:()=>a(r),onMouseLeave:()=>a(r),...e,children:[g.jsx(W,{as:"span",zIndex:"1",children:i}),g.jsx(ut,{className:"btn-slide-effect",position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:n,transition:"all 0.3s"})]})},Pp=r=>g.jsx(_0,{focusBorderColor:"brand.500",size:"lg",_placeholder:{fontSize:"sm"},...r}),sE=r=>g.jsx(k0,{focusBorderColor:"brand.500",size:"lg",_placeholder:{fontSize:"sm"},...r}),iE=()=>{const{t:r}=xe(),[e,t]=_.useState(""),[n,s]=_.useState(""),[i,a]=_.useState(""),[o,c]=_.useState(!1),h=m=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(m),u=m=>{t(m.target.value)},d=m=>{s(m.target.value)},f=m=>{a(m.target.value)},p=async m=>{m.preventDefault(),m.stopPropagation();const b={from_completeName:e,from_emailcontact:n,message:i};if(!h(n)){c(!0);return}try{await Q1.send(void 0,void 0,b),c(!1)}catch(w){console.error("Failed to send email",w)}};return g.jsxs($,{spacing:12,align:"start",width:"full",marginTop:{base:8,lg:16},children:[g.jsx(ie,{children:r("contact.headline")}),g.jsx(ai,{width:"full",children:g.jsx(W,{width:{base:"full",lg:"65%"},textAlign:"start",children:r("contact.subtext")})}),g.jsxs(We,{spacing:6,width:"full",children:[g.jsx(we,{as:J0,width:6,height:6}),g.jsx(Ae,{href:"mailto:fredericbahr1@gmail.com",children:"fredericbahr1@gmail.com"})]}),g.jsxs($,{spacing:4,width:"full",children:[g.jsx(W,{width:"full",textAlign:"start",children:r("contact.form.headline")}),g.jsxs(Nh,{gridTemplateColumns:{base:"1fr",lg:"1fr 1fr"},gridTemplateRows:{base:"auto auto 1fr",lg:"1fr 1fr"},columnGap:6,rowGap:4,width:"full",children:[g.jsx(Pp,{placeholder:r("contact.form.name"),gridColumn:"1",gridRow:"1",value:e,onChange:u}),g.jsxs(C0,{isInvalid:o,gridColumn:"1",gridRow:"2",children:[g.jsx(Pp,{placeholder:r("contact.form.email"),value:n,onChange:d}),o&&g.jsx(T0,{children:r("contact.form.emailError")})]}),g.jsx(sE,{placeholder:r("contact.form.message"),height:"full",gridRow:{base:"auto",lg:"1 / span 2"},value:i,onChange:f})]}),g.jsx(Sf,{label:r("contact.form.submit"),alignSelf:{base:"center",lg:"end"},onClick:p})]})]})},s0=6048e5,rE=864e5,Lp=Symbol.for("constructDateFrom");function hi(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&Lp in r?r[Lp](e):r instanceof Date?new r.constructor(e):new Date(e)}function yn(r,e){return hi(e||r,r)}let aE={};function iu(){return aE}function Co(r,e){var o,c,h,u;const t=iu(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(h=t.locale)==null?void 0:h.options)==null?void 0:u.weekStartsOn)??0,s=yn(r,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function yh(r,e){return Co(r,{...e,weekStartsOn:1})}function i0(r,e){const t=yn(r,e==null?void 0:e.in),n=t.getFullYear(),s=hi(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=yh(s),a=hi(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=yh(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Rp(r){const e=yn(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function oE(r,...e){const t=hi.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Mp(r,e){const t=yn(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function lE(r,e,t){const[n,s]=oE(t==null?void 0:t.in,r,e),i=Mp(n),a=Mp(s),o=+i-Rp(i),c=+a-Rp(a);return Math.round((o-c)/rE)}function cE(r,e){const t=i0(r,e),n=hi(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),yh(n)}function hE(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function uE(r){return!(!hE(r)&&typeof r!="number"||isNaN(+yn(r)))}function dE(r,e){const t=yn(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const fE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pE=(r,e,t)=>{let n;const s=fE[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function qr(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const gE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yE={date:qr({formats:gE,defaultWidth:"full"}),time:qr({formats:mE,defaultWidth:"full"}),dateTime:qr({formats:bE,defaultWidth:"full"})},vE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wE=(r,e,t,n)=>vE[r];function Nn(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const xE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},EE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_E={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CE=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},TE={ordinalNumber:CE,era:Nn({values:xE,defaultWidth:"wide"}),quarter:Nn({values:SE,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Nn({values:AE,defaultWidth:"wide"}),day:Nn({values:EE,defaultWidth:"wide"}),dayPeriod:Nn({values:_E,defaultWidth:"wide",formattingValues:kE,defaultFormattingWidth:"wide"})};function zn(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?LE(o,d=>d.test(a)):PE(o,d=>d.test(a));let h;h=r.valueCallback?r.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;const u=e.slice(a.length);return{value:h,rest:u}}}function PE(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function LE(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function r0(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const RE=/^(\d+)(th|st|nd|rd)?/i,ME=/\d+/i,DE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IE={any:[/^b/i,/^(a|c)/i]},jE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FE={any:[/1/i,/2/i,/3/i,/4/i]},OE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$E={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},BE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WE={ordinalNumber:r0({matchPattern:RE,parsePattern:ME,valueCallback:r=>parseInt(r,10)}),era:zn({matchPatterns:DE,defaultMatchWidth:"wide",parsePatterns:IE,defaultParseWidth:"any"}),quarter:zn({matchPatterns:jE,defaultMatchWidth:"wide",parsePatterns:FE,defaultParseWidth:"any",valueCallback:r=>r+1}),month:zn({matchPatterns:OE,defaultMatchWidth:"wide",parsePatterns:NE,defaultParseWidth:"any"}),day:zn({matchPatterns:zE,defaultMatchWidth:"wide",parsePatterns:$E,defaultParseWidth:"any"}),dayPeriod:zn({matchPatterns:HE,defaultMatchWidth:"any",parsePatterns:BE,defaultParseWidth:"any"})},UE={code:"en-US",formatDistance:pE,formatLong:yE,formatRelative:wE,localize:TE,match:WE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function VE(r,e){const t=yn(r,e==null?void 0:e.in);return lE(t,dE(t))+1}function qE(r,e){const t=yn(r,e==null?void 0:e.in),n=+yh(t)-+cE(t);return Math.round(n/s0)+1}function a0(r,e){var u,d,f,p;const t=yn(r,e==null?void 0:e.in),n=t.getFullYear(),s=iu(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=hi((e==null?void 0:e.in)||r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=Co(a,e),c=hi((e==null?void 0:e.in)||r,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const h=Co(c,e);return+t>=+o?n+1:+t>=+h?n:n-1}function GE(r,e){var o,c,h,u;const t=iu(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(h=t.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??1,s=a0(r,e),i=hi((e==null?void 0:e.in)||r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Co(i,e)}function XE(r,e){const t=yn(r,e==null?void 0:e.in),n=+Co(t,e)-+GE(t,e);return Math.round(n/s0)+1}function le(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Is={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return le(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):le(t+1,2)},d(r,e){return le(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return le(r.getHours()%12||12,e.length)},H(r,e){return le(r.getHours(),e.length)},m(r,e){return le(r.getMinutes(),e.length)},s(r,e){return le(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return le(s,e.length)}},Dr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Dp={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return Is.y(r,e)},Y:function(r,e,t,n){const s=a0(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return le(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):le(i,e.length)},R:function(r,e){const t=i0(r);return le(t,e.length)},u:function(r,e){const t=r.getFullYear();return le(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return le(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return le(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Is.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return le(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=XE(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):le(s,e.length)},I:function(r,e,t){const n=qE(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):le(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Is.d(r,e)},D:function(r,e,t){const n=VE(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):le(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return le(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return le(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return le(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=Dr.noon:n===0?s=Dr.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=Dr.evening:n>=12?s=Dr.afternoon:n>=4?s=Dr.morning:s=Dr.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Is.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Is.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):le(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):le(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Is.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Is.s(r,e)},S:function(r,e){return Is.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return jp(n);case"XXXX":case"XX":return wi(n);case"XXXXX":case"XXX":default:return wi(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return jp(n);case"xxxx":case"xx":return wi(n);case"xxxxx":case"xxx":default:return wi(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ip(n,":");case"OOOO":default:return"GMT"+wi(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ip(n,":");case"zzzz":default:return"GMT"+wi(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return le(n,e.length)},T:function(r,e,t){return le(+r,e.length)}};function Ip(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+le(i,2)}function jp(r,e){return r%60===0?(r>0?"-":"+")+le(Math.abs(r)/60,2):wi(r,e)}function wi(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=le(Math.trunc(n/60),2),i=le(n%60,2);return t+s+e+i}const Fp=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},o0=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},KE=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return Fp(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Fp(n,e)).replace("{{time}}",o0(s,e))},YE={p:o0,P:KE},JE=/^D+$/,QE=/^Y+$/,ZE=["D","DD","YY","YYYY"];function e_(r){return JE.test(r)}function t_(r){return QE.test(r)}function n_(r,e,t){const n=s_(r,e,t);if(console.warn(n),ZE.includes(r))throw new RangeError(n)}function s_(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,r_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a_=/^'([^]*?)'?$/,o_=/''/g,l_=/[a-zA-Z]/;function Un(r,e,t){var u,d,f,p,m,b,w,x;const n=iu(),s=(t==null?void 0:t.locale)??n.locale??UE,i=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((b=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((x=(w=n.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,o=yn(r,t==null?void 0:t.in);if(!uE(o))throw new RangeError("Invalid time value");let c=e.match(r_).map(A=>{const E=A[0];if(E==="p"||E==="P"){const k=YE[E];return k(A,s.formatLong)}return A}).join("").match(i_).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const E=A[0];if(E==="'")return{isToken:!1,value:c_(A)};if(Dp[E])return{isToken:!0,value:A};if(E.match(l_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:A}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(A=>{if(!A.isToken)return A.value;const E=A.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&t_(E)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&e_(E))&&n_(E,e,String(r));const k=Dp[E[0]];return k(o,E,s.localize,h)}).join("")}function c_(r){const e=r.match(a_);return e?e[1].replace(o_,"'"):r}const Op={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},h_=(r,e,t)=>{let n;const s=t!=null&&t.addSuffix?Op[r].withPreposition:Op[r].standalone;return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:"vor "+n:n},u_={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},d_={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},f_={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},p_={date:qr({formats:u_,defaultWidth:"full"}),time:qr({formats:d_,defaultWidth:"full"}),dateTime:qr({formats:f_,defaultWidth:"full"})},g_={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},m_=(r,e,t,n)=>g_[r],b_={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},y_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},qd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},v_={narrow:qd.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:qd.wide},w_={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},x_={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},S_={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},A_=r=>Number(r)+".",E_={ordinalNumber:A_,era:Nn({values:b_,defaultWidth:"wide"}),quarter:Nn({values:y_,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Nn({values:qd,formattingValues:v_,defaultWidth:"wide"}),day:Nn({values:w_,defaultWidth:"wide"}),dayPeriod:Nn({values:x_,defaultWidth:"wide",formattingValues:S_,defaultFormattingWidth:"wide"})},__=/^(\d+)(\.)?/i,k_=/\d+/i,C_={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},T_={any:[/^v/i,/^n/i]},P_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},L_={any:[/1/i,/2/i,/3/i,/4/i]},R_={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},M_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},D_={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},I_={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},j_={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},F_={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},O_={ordinalNumber:r0({matchPattern:__,parsePattern:k_,valueCallback:r=>parseInt(r)}),era:zn({matchPatterns:C_,defaultMatchWidth:"wide",parsePatterns:T_,defaultParseWidth:"any"}),quarter:zn({matchPatterns:P_,defaultMatchWidth:"wide",parsePatterns:L_,defaultParseWidth:"any",valueCallback:r=>r+1}),month:zn({matchPatterns:R_,defaultMatchWidth:"wide",parsePatterns:M_,defaultParseWidth:"any"}),day:zn({matchPatterns:D_,defaultMatchWidth:"wide",parsePatterns:I_,defaultParseWidth:"any"}),dayPeriod:zn({matchPatterns:j_,defaultMatchWidth:"wide",parsePatterns:F_,defaultParseWidth:"any"})},Vn={code:"de",formatDistance:h_,formatLong:p_,formatRelative:m_,localize:E_,match:O_,options:{weekStartsOn:1,firstWeekContainsDate:4}},N_=[{title:"softwareDeveloper",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2024-12-01",endDate:"present",location:"Leipzig, Deutschland",description:["experience.experiences.softwareDeveloperIpoque.description.first","experience.experiences.softwareDeveloperIpoque.description.second","experience.experiences.softwareDeveloperIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"juniorSoftwareDeveloper",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2024-02-01",endDate:"2024-11-31",location:"Leipzig, Deutschland",description:["experience.experiences.juniorSoftwareDeveloperIpoque.description.first","experience.experiences.juniorSoftwareDeveloperIpoque.description.second","experience.experiences.juniorSoftwareDeveloperIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"workingStudent",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-01-01",endDate:"2023-12-31",location:"Leipzig, Deutschland",description:["experience.experiences.workingStudentIpoque.description.first","experience.experiences.workingStudentIpoque.description.second","experience.experiences.workingStudentIpoque.description.third","experience.experiences.workingStudentIpoque.description.fourth","experience.experiences.workingStudentIpoque.description.fifth","experience.experiences.workingStudentIpoque.description.sixth"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular"]},{title:"master",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2023-05-15",endDate:"2023-11-15",location:"Leipzig, Deutschland",description:["experience.experiences.masterIpoque.description.first","experience.experiences.masterIpoque.description.second","experience.experiences.masterIpoque.description.third"],skills:["TypeScript","Micro Frontends","Web Components","Lit","React","Angular","DOM-Spezifikation"]},{title:"bachelor",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-07-01",endDate:"2021-09-31",location:"Leipzig, Deutschland",description:["experience.experiences.bachelorIpoque.description.first","experience.experiences.bachelorIpoque.description.second","experience.experiences.bachelorIpoque.description.third"],skills:["TypeScript","Angular","Compilerbau","DSL"]},{title:"intern",company:"ipoque GmbH",companyUrl:"https://www.ipoque.com/",startDate:"2021-01-01",endDate:"2021-02-28",location:"Leipzig, Deutschland",description:["experience.experiences.internIpoque.description.first","experience.experiences.internIpoque.description.second","experience.experiences.internIpoque.description.third"],skills:["TypeScript","Angular","RxJS"]},{title:"workingStudent",company:"GDMcom GmbH",companyUrl:"https://gdmcom.de/",startDate:"2019-06-01",endDate:"2020-12-01",location:"Leipzig, Deutschland",description:["experience.experiences.workingStudentGDM.description.first","experience.experiences.workingStudentGDM.description.second","experience.experiences.workingStudentGDM.description.third"],skills:["Shell-Scription","VBA","Microsoft Office"]}],z_=r=>typeof r=="string",$_=()=>{const{t:r,i18n:e}=xe(),t=kt("gray.800","gray.200"),n=kt("gray.500","gray.400"),s=()=>{const i=document.createElement("a");i.href=Ag,i.download="Lebenslauf_Frederic_Bahr.pdf",i.click()};return g.jsxs($,{width:"full",alignItems:"start",spacing:8,children:[g.jsx(wf,{id:"experience",children:r("experience.title")}),g.jsxs($,{width:"full",spacing:12,children:[g.jsx(ie,{as:"h3",width:"full",textAlign:"center",fontSize:"xl",children:r("experience.subtitle")}),g.jsx(P0,{allowMultiple:!0,width:"full",display:"flex",flexDirection:"column",gap:6,children:N_.map((i,a)=>g.jsx(L0,{border:"1px solid",borderColor:t,children:({isExpanded:o})=>g.jsxs(g.Fragment,{children:[g.jsx(ie,{as:"h4",fontSize:{base:"md",lg:"lg"},children:g.jsxs(R0,{paddingX:4,paddingY:3,children:[g.jsxs(We,{width:"full",justifyContent:"space-between",marginRight:4,children:[g.jsxs(We,{spacing:1,children:[g.jsx(W,{as:"span",fontSize:{base:"sm",lg:"lg"},children:r(`experience.jobTitles.${i.title}`)}),g.jsx(W,{as:"span",color:"brand.500",children:"@"}),g.jsx(Ae,{href:i.companyUrl,isExternal:!0,fontSize:{base:"sm",lg:"lg"},children:i.company})]}),g.jsxs(W,{as:"span",fontSize:{base:"2xs",lg:"md"},children:[Un(new Date(i.startDate),"MMM yyyy",{locale:e.language==="de"?Vn:void 0})," ","-"," ",i.endDate==="present"?r("experience.present"):Un(new Date(i.endDate),"MMM yyyy",{locale:e.language==="de"?Vn:void 0})]})]}),g.jsx(M0,{as:Q0})]})}),o&&g.jsx(Qd,{width:"98%",margin:"auto",borderColor:n}),g.jsx(D0,{paddingBottom:4,paddingX:4,fontSize:"md",marginTop:2,children:g.jsxs($,{width:"full",alignItems:"start",spacing:6,children:[g.jsxs(Qt,{direction:{base:"column",lg:"row"},spacing:6,children:[g.jsxs(We,{spacing:1,children:[g.jsx(we,{as:Z0}),g.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:i.location})]}),g.jsxs(We,{spacing:1,children:[g.jsx(we,{as:zh}),g.jsx(Ae,{href:i.companyUrl,isExternal:!0,fontSize:{base:"sm",lg:"lg"},children:i.companyUrl})]})]}),g.jsx(ac,{marginLeft:2,spacing:2,children:z_(i.description)?g.jsxs(yt,{children:[g.jsx(yu,{as:vu,color:"green.500"}),g.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:r(i.description)})]}):g.jsx(g.Fragment,{children:i.description.map(c=>g.jsxs(yt,{display:"flex",children:[g.jsx(yu,{as:vu,color:"green.500"}),g.jsx(W,{fontSize:{base:"sm",lg:"lg"},children:r(c)})]},`experience-${i.title}-${a}-${c}`))})}),g.jsx(Qt,{direction:{base:"column",lg:"row"},spacing:2,width:"full",children:i.skills.map(c=>g.jsx(me,{colorScheme:"gray",justifyContent:"center",children:c},`experience-${i.title}-${a}-${c}`))})]})})]})},`experience-${i.title}-${a}`))}),g.jsx(ai,{width:"full",justifyContent:"center",children:g.jsx(Sf,{size:{base:"md",lg:"lg"},label:r("experience.cv"),onClick:s})})]})]})},H_=({fill:r})=>g.jsxs(ut,{as:"svg",className:"spotlight",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3787 2842",fill:"none",pointerEvents:"none",position:"absolute",top:-120,left:-250,maxHeight:"100vh",children:[g.jsx("g",{filter:"url(#filter)",children:g.jsx("ellipse",{cx:"2574.71",cy:"273.501",rx:"1424.71",ry:"353.501",transform:"matrix(-0.822377 -0.768943 -0.568943 0.822377 3831.88 2291.09)",fill:r||"white",fillOpacity:"0.27"})}),g.jsx("defs",{children:g.jsxs("filter",{id:"filter",x:"0.860352",y:"0.838989",width:"3785.16",height:"2840.26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[g.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),g.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),g.jsx("feGaussianBlur",{stdDeviation:"151",result:"effect1_foregroundBlur_1065_8"})]})})]}),Np=["Software Developer","Web Enthusiast","Frederic Bahr"],B_=()=>{const[r,e]=n0("Frederic Bahr"),[t]=Wa("(max-width: 62em)");return _.useEffect(()=>{let n=0;const s=setInterval(()=>{e(Np[n]),n=n===Np.length-1?0:n+1},4e3);return()=>clearInterval(s)},[]),t?"Frederic Bahr":r},W_=()=>{const{t:r}=xe(),e=_r(),{colorMode:t}=qp(),n=B_(),s=()=>{e("/contact")};return g.jsxs(We,{width:"full",children:[g.jsxs($,{alignItems:"start",marginTop:{base:8,lg:32},spacing:8,children:[g.jsxs($,{alignItems:"start",spacing:2,children:[g.jsx(W,{fontSize:{base:"sm",lg:"xl"},children:r("hero.intro")}),g.jsx(ie,{as:"h1",fontSize:{base:"4xl",lg:"7xl"},color:"brand.500",wordBreak:"break-word",children:n})]}),g.jsx(W,{fontSize:{base:"md",lg:"xl"},maxWidth:{base:"full",lg:"50%"},children:r("hero.subtitle")}),g.jsx(Sf,{size:{base:"md",lg:"lg"},alignSelf:{base:"center",lg:"start"},label:r("hero.contact"),onClick:s})]}),t==="dark"&&g.jsx(H_,{})]})},U_="/portfolio/assets/flow-shop-hero-CY9liu4E.jpg",V_="/portfolio/assets/screenshot-1-sPvSOtkf.png",Ga=()=>(_.useEffect(()=>{window.scrollTo(0,0)},[]),null),Xa=({focus:r,period:e,subtitle:t,title:n})=>{const{t:s}=xe();return g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",justifyContent:"space-between",alignItems:"start",children:[g.jsxs($,{width:"full",maxWidth:{base:"full",lg:"65%"},alignItems:"start",spacing:{base:6,lg:4},children:[g.jsx(ie,{as:"h1",color:"brand.500",fontSize:{base:"3xl",lg:"5xl"},children:n}),g.jsx(ie,{as:"h2",fontSize:{base:"md",lg:"lg"},fontWeight:400,children:t}),g.jsx(Qd,{borderTopWidth:{base:"2px",lg:"3px"},width:{base:"full",lg:"10%"},borderColor:"brand.500"})]}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},spacing:{base:4,lg:16},whiteSpace:"nowrap",marginTop:{base:4,lg:0},children:[g.jsxs(Pf,{children:[g.jsx(Lf,{children:s("projects.details.period")}),g.jsx(Rf,{margin:0,style:{textWrap:"wrap"},children:e})]}),g.jsxs(Pf,{children:[g.jsx(Lf,{children:s("projects.details.focus")}),g.jsx(Rf,{margin:0,style:{textWrap:"wrap"},children:r})]})]})]})},q_=()=>{const{t:r,i18n:e}=xe();return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.eaFlowShop.focus"),period:Un(new Date("2022-06-01"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0})+" - "+Un(new Date("2022-07-31"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0}),title:r("projects.projectTitles.eaFlowShop"),subtitle:r("projects.details.eaFlowShop.subtitle")}),g.jsx(oi,{src:U_,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),g.jsx(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:g.jsxs(Ae,{href:"https://github.com/fredericbahr/ea-flow-shop",display:"flex",gap:2,children:[g.jsx(we,{as:fi,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Github"})]})}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.eaFlowShop.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.eaFlowShop.implementation")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsx(Qt,{direction:{base:"column",lg:"row"},width:"full",children:g.jsx(me,{justifyContent:"center",children:"TypeScript"})})]}),g.jsx($,{width:"full",alignItems:"start",spacing:4,children:g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")})}),g.jsx(oi,{src:V_,width:"full",maxHeight:"50vh",objectFit:"contain"})]})]})]})},G_="/portfolio/assets/appointments-dark-bordeaux-C3PeAb01.jpg",X_="/portfolio/assets/appointments-light-bordeaux-8GdUm38b.jpg",K_="/portfolio/assets/hero-dark-bordeaux-DcvnTf-G.jpg",Y_="/portfolio/assets/hero-light-bordeaux-v2m2GUFd.jpg",J_="/portfolio/assets/heroImage-DBfcuPuh.png",Q_="/portfolio/assets/photos-dark-bordeaux-Bdch-8Zw.jpg",Z_="/portfolio/assets/photos-light-bordeaux-D72iiGaR.jpg",ek="/portfolio/assets/surveys-dark-bordeaux-DMrF2xmB.jpg",tk="/portfolio/assets/surveys-light-bordeaux-aNhYc9F7.jpg",nk="Left",sk="Right",ik="Up",rk="Down",$r={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Gd={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},zp="mousemove",$p="mouseup",ak="touchend",ok="touchmove",lk="touchstart";function ck(r,e,t,n){return r>e?t>0?sk:nk:n>0?rk:ik}function Hp(r,e){if(e===0)return r;const t=Math.PI/180*e,n=r[0]*Math.cos(t)+r[1]*Math.sin(t),s=r[1]*Math.cos(t)-r[0]*Math.sin(t);return[n,s]}function hk(r,e){const t=u=>{const d="touches"in u;d&&u.touches.length>1||r((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(zp,n),document.addEventListener($p,a));const{clientX:m,clientY:b}=d?u.touches[0]:u,w=Hp([m,b],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},f),Gd),{initial:w.slice(),xy:w,start:u.timeStamp||0})})},n=u=>{r((d,f)=>{const p="touches"in u;if(p&&u.touches.length>1)return d;if(u.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:m,clientY:b}=p?u.touches[0]:u,[w,x]=Hp([m,b],f.rotationAngle),A=w-d.xy[0],E=x-d.xy[1],k=Math.abs(A),C=Math.abs(E),T=(u.timeStamp||0)-d.start,P=Math.sqrt(k*k+C*C)/(T||1),L=[A/(T||1),E/(T||1)],R=ck(k,C,A,E),D=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||$r.delta;if(k<D&&C<D&&!d.swiping)return d;const M={absX:k,absY:C,deltaX:A,deltaY:E,dir:R,event:u,first:d.first,initial:d.initial,velocity:P,vxvy:L};M.first&&f.onSwipeStart&&f.onSwipeStart(M),f.onSwiping&&f.onSwiping(M);let J=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(J=!0),J&&f.preventScrollOnSwipe&&f.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:M,swiping:!0})})},s=u=>{r((d,f)=>{let p;if(d.swiping&&d.eventData){if(u.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:u}),f.onSwiped&&f.onSwiped(p);const m=f[`onSwiped${p.dir}`];m&&m(p)}}else f.onTap&&f.onTap({event:u});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},d),Gd),{eventData:p})})},i=()=>{document.removeEventListener(zp,n),document.removeEventListener($p,a)},a=u=>{i(),s(u)},o=(u,d)=>{let f=()=>{};if(u&&u.addEventListener){const p=Object.assign(Object.assign({},$r.touchEventOptions),d.touchEventOptions),m=[[lk,t,p],[ok,n,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[ak,s,p]];m.forEach(([b,w,x])=>u.addEventListener(b,w,x)),f=()=>m.forEach(([b,w])=>u.removeEventListener(b,w))}return f},h={ref:u=>{u!==null&&r((d,f)=>{if(d.el===u)return d;const p={};return d.el&&d.el!==u&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&u&&(p.cleanUpTouch=o(u,f)),Object.assign(Object.assign(Object.assign({},d),{el:u}),p)})}};return e.trackMouse&&(h.onMouseDown=t),[h,o]}function uk(r,e,t,n){return!e.trackTouch||!r.el?(r.cleanUpTouch&&r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:void 0})):r.cleanUpTouch?e.preventScrollOnSwipe!==t.preventScrollOnSwipe||e.touchEventOptions.passive!==t.touchEventOptions.passive?(r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})):r:Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})}function dk(r){const{trackMouse:e}=r,t=_.useRef(Object.assign({},Gd)),n=_.useRef(Object.assign({},$r)),s=_.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},$r),r);let i;for(i in $r)n.current[i]===void 0&&(n.current[i]=$r[i]);const[a,o]=_.useMemo(()=>hk(c=>t.current=c(t.current,n.current),{trackMouse:e}),[e]);return t.current=uk(t.current,n.current,s.current,o),a}const Af=({images:r,index:e=0,imageProps:t,onIndexChange:n})=>{const s=_.useRef(null),i=()=>{s.current&&s.current.requestFullscreen()},a=dk({onSwipedRight:()=>n(o(e+1,r.length)),onSwipedLeft:()=>n(o(e-1,r.length)),onTouchEndOrOnMouseUp:i,trackMouse:!0}),o=(c,h)=>(c%h+h)%h;return g.jsxs($,{width:"full",children:[g.jsxs(Nh,{gridTemplateColumns:"auto 1fr auto",placeItems:"center",width:"full",gap:12,children:[g.jsx(mn,{"aria-label":"Previous",icon:g.jsx(we,{as:ey}),onClick:()=>n(o(e-1,r.length)),size:{base:"xs",lg:"md"}}),g.jsx(oi,{src:r[e],objectFit:"contain",maxWidth:{base:"full",lg:"min(400px, 70%)"},draggable:!0,onClick:i,...a,ref:s,_hover:{cursor:"pointer"},...t}),g.jsx(mn,{"aria-label":"Next",icon:g.jsx(we,{as:ty}),onClick:()=>n(o(e+1,r.length)),size:{base:"xs",lg:"md"}})]}),g.jsx($,{gap:4,children:g.jsx(We,{gap:4,children:Array.from({length:r.length}).map((c,h)=>g.jsx(ut,{minWidth:4,minHeight:1,backgroundColor:e===h?"brand.500":"brand.900",_hover:{cursor:"pointer",transform:"scale(1.2)"},transition:"all 0.2s ease-in-out",onClick:()=>n(h)},h))})})]})},fk=()=>{const{t:r,i18n:e}=xe(),[t,n]=_.useState(0),s=i=>{n(i)};return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.kirmize.focus"),period:Un(new Date("2022-04-01"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0})+" - "+r("projects.details.present"),title:r("projects.projectTitles.kirmize"),subtitle:r("projects.details.kirmize.subtitle")}),g.jsx(oi,{src:J_,width:"full",maxHeight:"35vh",objectFit:"contain",marginTop:{base:4,lg:0}}),g.jsx(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:g.jsxs(Ae,{href:"https://kirmize.netlify.app",display:"flex",gap:2,children:[g.jsx(we,{as:zh,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Website"})]})}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.kirmize.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.kirmize.implementation")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",children:[g.jsx(me,{justifyContent:"center",children:"TypeScript"}),g.jsx(me,{justifyContent:"center",children:"React"}),g.jsx(me,{justifyContent:"center",children:"Chakra UI"}),g.jsx(me,{justifyContent:"center",children:"Express"}),g.jsx(me,{justifyContent:"center",children:"Prisma"}),g.jsx(me,{justifyContent:"center",children:"Mongo DB"})]})]})]}),g.jsxs($,{width:"full",alignItems:"start",children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),g.jsx(ut,{alignSelf:"center",width:"full",children:g.jsx(Af,{images:[K_,Y_,G_,X_,Q_,Z_,ek,tk],index:t,imageProps:{maxWidth:{base:"80%",lg:"250px"}},onIndexChange:s})})]})]})]})},pk="/portfolio/assets/mmdb-veteran-hero-socJzde0.jpg",gk="/portfolio/assets/screenshot-1-WwQfIWaT.png",mk="/portfolio/assets/screenshot-2-C8c0nTcp.png",bk="/portfolio/assets/screenshot-3-zPyw2luP.png",yk="/portfolio/assets/screenshot-4-BqhILdl0.png",vk="/portfolio/assets/screenshot-5-BK9kGBkn.png",wk="/portfolio/assets/screenshot-6-B08BqXBd.png",xk=()=>{const{t:r,i18n:e}=xe(),[t,n]=_.useState(0),s=i=>{n(i)};return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.multimediaDB.focus"),period:Un(new Date("2022-05-31"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0})+" - "+Un(new Date("2022-07-27"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0}),title:r("projects.projectTitles.multimediaDB"),subtitle:r("projects.details.multimediaDB.subtitle")}),g.jsx(oi,{src:pk,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),g.jsx(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:g.jsxs(Ae,{href:"https://github.com/fredericbahr/mmdba_tierarztpraxis",display:"flex",gap:2,children:[g.jsx(we,{as:fi,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Github"})]})}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.multimediaDB.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.multimediaDB.implementation")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",children:[g.jsx(me,{justifyContent:"center",children:"TypeScript"}),g.jsx(me,{justifyContent:"center",children:"React"}),g.jsx(me,{justifyContent:"center",children:"Chakra UI"}),g.jsx(me,{justifyContent:"center",children:"Express"}),g.jsx(me,{justifyContent:"center",children:"Prisma"}),g.jsx(me,{justifyContent:"center",children:"Postgres"})]})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),g.jsx(ut,{alignSelf:"center",width:"full",children:g.jsx(Af,{images:[gk,mk,bk,yk,vk,wk],index:t,imageProps:{maxWidth:{base:"full",lg:"600px"}},onIndexChange:s})})]})]})]})]})},Sk="/portfolio/assets/portfolio-hero-Ur1G_Pbq.jpg",Ak=()=>{const{t:r,i18n:e}=xe();return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.portfolio.focus"),period:Un(new Date("2024-03-01"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0})+" - "+r("projects.details.present"),title:r("projects.projectTitles.portfolio"),subtitle:r("projects.details.portfolio.subtitle")}),g.jsx(oi,{src:Sk,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),g.jsxs(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:[g.jsxs(Ae,{href:"https://fredericbahr.github.io/portfolio/",display:"flex",gap:2,children:[g.jsx(we,{as:zh,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Website"})]}),g.jsxs(Ae,{href:"https://github.com/fredericbahr/portfolio",display:"flex",gap:2,children:[g.jsx(we,{as:fi,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Github"})]})]}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.portfolio.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.portfolio.implementation")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",children:[g.jsx(me,{justifyContent:"center",children:"TypeScript"}),g.jsx(me,{justifyContent:"center",children:"React"}),g.jsx(me,{justifyContent:"center",children:"Chakra UI"}),g.jsx(me,{justifyContent:"center",children:"Framer Motion"})]})]})]})]})]})},Ek=()=>{const{t:r,i18n:e}=xe();return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:4,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.chatbot.focus"),period:Un(new Date("2023-01-10"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0})+" - "+Un(new Date("2023-03-21"),"MMM. yy",{locale:e.language==="de-DE"?Vn:void 0}),title:r("projects.projectTitles.chatbot"),subtitle:r("projects.details.chatbot.subtitle")}),g.jsx(oi,{src:"https://s3-ap-south-1.amazonaws.com/static.awfis.com/wp-content/uploads/2017/07/07184649/ProjectManagement.jpg",width:"full",maxHeight:"35vh",objectFit:"contain",marginTop:{base:4,lg:0}}),g.jsx(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:g.jsxs(Ae,{href:"https://github.com/fredericbahr/quatsch-project-22",display:"flex",gap:2,children:[g.jsx(we,{as:fi,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Github"})]})}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.chatbot.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.chatbot.implementation")}),g.jsxs($,{width:"full",alignItems:"start",children:[g.jsxs(W,{children:["* ",r("projects.details.chatbot.rasa-detail")," ",g.jsx(Ae,{href:"https://rasa.com/",isExternal:!0,color:"brand.500",children:"Rasa"})]}),g.jsxs(W,{children:["** ",r("projects.details.chatbot.qanary-detail")," ",g.jsx(Ae,{href:"https://github.com/WDAqua/Qanary",isExternal:!0,color:"brand.500",children:"Qanary"})]})]})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",children:[g.jsx(me,{justifyContent:"center",children:"TypeScript"}),g.jsx(me,{justifyContent:"center",children:"Qanary"}),g.jsx(me,{justifyContent:"center",children:"Rasa"}),g.jsx(me,{justifyContent:"center",children:"RDF"}),g.jsx(me,{justifyContent:"center",children:"Docker"})]})]}),g.jsx($,{width:"full",alignItems:"start",spacing:4,children:g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")})})]})]})]})},_k="/portfolio/assets/screenshot-1-CLYFZTYh.png",kk="/portfolio/assets/screenshot-2-D3zWgeMl.png",Ck="/portfolio/assets/screenshot-3-C2J4p0uX.png",Tk="/portfolio/assets/weather-data-hero-nOFHWKIP.jpg",Pk=()=>{const{t:r}=xe(),[e,t]=_.useState(0),n=s=>{t(s)};return g.jsxs(g.Fragment,{children:[g.jsx(Ga,{}),g.jsxs($,{width:"full",alignItems:"start",spacing:{base:2,lg:8},marginTop:{base:4,lg:16},children:[g.jsx(Xa,{focus:r("projects.details.weatherData.focus"),period:"-",title:r("projects.projectTitles.weatherData"),subtitle:r("projects.details.weatherData.subtitle")}),g.jsx(oi,{src:Tk,width:"full",maxHeight:"50vh",objectFit:"cover",marginTop:{base:4,lg:0}}),g.jsx(We,{marginTop:8,spacing:8,width:"full",alignItems:"center",children:g.jsxs(Ae,{href:"https://github.com/fredericbahr/dbs_weatherdata",display:"flex",gap:2,children:[g.jsx(we,{as:fi,boxSize:{base:5,lg:6}}),g.jsx(W,{as:"span",children:"Github"})]})}),g.jsxs($,{marginTop:4,spacing:16,width:"full",alignItems:"start",children:[g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.goal")}),g.jsx(W,{children:r("projects.details.weatherData.goal")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.implementation")}),g.jsx(W,{children:r("projects.details.weatherData.implementation")})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.technologies")}),g.jsxs(Qt,{direction:{base:"column",lg:"row"},width:"full",children:[g.jsx(me,{justifyContent:"center",children:"XML"}),g.jsx(me,{justifyContent:"center",children:"XML Schema Definiton"}),g.jsx(me,{justifyContent:"center",children:"XSL Transformation"}),g.jsx(me,{justifyContent:"center",children:"D3.js"})]})]}),g.jsxs($,{width:"full",alignItems:"start",spacing:4,children:[g.jsx(ie,{as:"h2",fontSize:"3xl",children:r("projects.details.screenshots")}),g.jsx(ut,{alignSelf:"center",width:"full",children:g.jsx(Af,{images:[_k,kk,Ck],index:e,onIndexChange:n})})]})]})]})]})},Lk=[{title:"kirmize",url:"/kirmize",backgroundType:"lines",links:{website:"https://kirmize.netlify.app"}},{title:"portfolio",url:"/personal-portfolio",backgroundType:"none",links:{github:"https://github.com/fredericbahr/portfolio"}},{title:"chatbot",url:"/quatsch-chatbot-2022",backgroundType:"lines",links:{github:"https://github.com/fredericbahr/quatsch-project-22"}},{title:"multimediaDB",url:"/multimedia-database-veterinary-practice",backgroundType:"contour",links:{github:"https://github.com/fredericbahr/mmdba_tierarztpraxis"}},null,{title:"eaFlowShop",url:"/ea-flow-shop-optimizer",backgroundType:"contour",links:{github:"https://github.com/fredericbahr/ea-flow-shop"}},{title:"weatherData",url:"/xml-weather-visualization",backgroundType:"none",links:{github:"https://github.com/fredericbahr/dbs_weatherdata"}},null],Pc=ih.forwardRef((r,e)=>{const t=I0({...r,ref:e}),n=!!t["aria-selected"],s=j0("Tabs",t),i=kt("gray.300","gray.400");return g.jsx(Xd,{__css:s.tab,...t,textTransform:"uppercase",paddingX:3,paddingY:1,minWidth:16,borderBottom:"2px solid",borderColor:n?"brand.300":i,pointerEvents:"none",fontSize:"sm",children:g.jsx(W,{as:"span",visibility:n?"visible":"hidden",children:t.children})})}),Rk=({children:r})=>{const{t:e}=xe();return g.jsxs(F0,{defaultIndex:1,children:[g.jsxs(O0,{border:"none",gap:4,children:[g.jsx(Pc,{}),g.jsx(Pc,{children:e("projects.tab")}),g.jsx(Pc,{}),g.jsx(Pc,{})]}),g.jsxs(N0,{children:[g.jsx(vc,{children:r&&r[0]}),g.jsx(vc,{children:r&&r[1]}),g.jsx(vc,{children:r&&r[2]}),g.jsx(vc,{children:r&&r[3]})]})]})},Mk=({title:r,url:e,backgroundType:t="none",links:n,...s})=>{const i=_r(),{t:a}=xe(),[o]=Wa("(max-width: 62em)"),[c,h]=Kd("colors",["gray.200","gray.700"]).map(A=>A.replace("#","%23").toLowerCase()),u=kt("white","gray.800"),d=kt("gray.300","gray.600"),f=kt("gray.100","gray.700"),p=kt(c,h),m=kt("blackAlpha.800","whiteAlpha.800"),b=()=>t==="none"?{backgroundColor:u}:t==="lines"?{backgroundImage:`repeating-linear-gradient(-45deg, ${f} 0, ${f} 1.5px, transparent 0, transparent 50%);`,backgroundSize:"12px 12px",backgroundColor:u}:t==="contour"?{backgroundImage:`url(
                "data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.dev/svgjs' width='500' height='400' preserveAspectRatio='none' viewBox='0 0 500 400'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1104%26quot%3b)' fill='none'%3e%3cuse xlink:href='%23SvgjsPath1105' x='30' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='30' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='30' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='30' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='30' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='90' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='90' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='90' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='90' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='90' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='150' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='150' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='150' y='150' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='150' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='150' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='150' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='150' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='210' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='210' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='210' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='210' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='210' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='270' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1108' x='270' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='270' y='150' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='270' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='270' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='270' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='270' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='330' y='30' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='330' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='330' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='330' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='330' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='390' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='390' y='210' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='390' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='390' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='390' y='390' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='450' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='450' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='450' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='270' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='450' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='450' y='390' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1105' x='510' y='30' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='510' y='90' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1110' x='510' y='150' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='510' y='210' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1109' x='510' y='270' stroke='${p}' stroke-width='3'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1106' x='510' y='330' stroke='${p}'%3e%3c/use%3e%3cuse xlink:href='%23SvgjsPath1107' x='510' y='390' stroke='${p}'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1104'%3e%3crect width='500' height='400' fill='white'%3e%3c/rect%3e%3c/mask%3e%3cpath d='M-1 0 a1 1 0 1 0 2 0 a1 1 0 1 0 -2 0z' id='SvgjsPath1105'%3e%3c/path%3e%3cpath d='M-3 0 a3 3 0 1 0 6 0 a3 3 0 1 0 -6 0z' id='SvgjsPath1110'%3e%3c/path%3e%3cpath d='M-5 0 a5 5 0 1 0 10 0 a5 5 0 1 0 -10 0z' id='SvgjsPath1107'%3e%3c/path%3e%3cpath d='M2 -2 L-2 2z' id='SvgjsPath1108'%3e%3c/path%3e%3cpath d='M6 -6 L-6 6z' id='SvgjsPath1106'%3e%3c/path%3e%3cpath d='M30 -30 L-30 30z' id='SvgjsPath1109'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e"
            )`,backgroundColor:u}:{},w=()=>{i(e||"/")},x=(A,E)=>{A.stopPropagation(),window.open(E,"_blank")};return g.jsx(z0,{className:"project-tile",border:"2px solid",borderColor:d,paddingX:6,paddingY:1,display:"flex",justifyContent:{base:"start",lg:"center"},alignItems:"center",minHeight:"2xs",minWidth:"3xs",transitionProperty:"border-color, transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out",style:{counterIncrement:r&&"projects 1"},sx:{"&:has(+ .project-tile)":{borderLeft:o?"2px solid":"none",borderBottom:o?"none":"2px solid",borderColor:d},"&:has(+ .project-tile-placeholder)":{borderLeft:"none"},"&:nth-child(n+5):not(:hover)":{borderTop:"none"},"&:nth-child(1):not(:hover)":{borderLeft:"2px solid",borderColor:d},"&:nth-child(6):not(:hover)":{borderLeft:"2px solid",borderColor:d},"& .project-tile-placeholder":{marginRight:"-2px"},"&:nth-child(4):not(:hover)":{borderLeft:o?"2px solid":"none",borderColor:d},"&:nth-child(7):not(:hover)":{borderTop:o?"2px solid":"none",borderLeft:o?"2px solid":"none",borderColor:d},"&:hover":{border:"2px solid",borderColor:"brand.500"},"&:hover .project-counter:before":{color:"brand.500"},"&:hover .project-links":{display:"flex"}},_hover:{border:"all",borderColor:"brand.500",borderWidth:4,transform:"scale(1.05)",cursor:"pointer",zIndex:1},...b(),onClick:w,...s,children:g.jsxs($,{spacing:3,width:"full",children:[r&&g.jsxs($,{spacing:0,width:"full",alignItems:"start",children:[g.jsx(W,{as:"span",className:"project-counter",alignSelf:"start",_before:{content:"'0' counter(projects) '.'",color:"gray.500",fontSize:"sm",display:"block"}}),g.jsx(ie,{as:"h3",color:m,fontSize:{base:"2xl",lg:"3xl"},wordBreak:"break-word",children:r})]}),g.jsxs(We,{className:"project-links",display:{base:"block",lg:"none"},justifyContent:"start",width:{base:"full",lg:"auto"},children:[(n==null?void 0:n.website)&&g.jsx(Ps,{label:a("projects.website"),hasArrow:!0,openDelay:300,children:g.jsx(mn,{icon:g.jsx(we,{as:zh}),"aria-label":"website",variant:"ghost",colorScheme:"gray",onClick:A=>x(A,n.website||"/")})}),(n==null?void 0:n.github)&&g.jsx(Ps,{label:a("projects.github"),hasArrow:!0,openDelay:300,children:g.jsx(mn,{icon:g.jsx(we,{as:fi}),"aria-label":"github",variant:"ghost",colorScheme:"gray",onClick:A=>x(A,n.github||"/")})})]})]})})},Dk=()=>{const{t:r}=xe(),[e]=Wa("(max-width: 62em)");return g.jsxs($,{width:"full",alignItems:"start",spacing:4,style:{counterReset:"projects 0"},children:[g.jsx(wf,{id:"projects",children:r("projects.title")}),g.jsx(ai,{width:"full",justifyContent:"center",children:g.jsx(Rk,{})}),g.jsx(Nh,{width:"full",gridTemplateColumns:{base:"1fr",lg:"repeat(4, 1fr)"},gridTemplateRows:{base:"repeat(6, 1fr)",lg:"repeat(2, 1fr)"},children:Lk.map((t,n)=>g.jsx(ut,{className:`project-tile-wrapper-${n}`,display:e&&!t?"none":"block",children:t?g.jsx(Mk,{title:r(`projects.projectTitles.${t.title}`),backgroundType:t.backgroundType,links:t.links,url:t.url},`project-tile-${t.title}-${n}`):g.jsx(ut,{className:"project-tile-placeholder",display:{base:"none",lg:"block"}},`project-tile-placeholder-${n}`)},`project-tile-wrapper-${n}`))})]})};function Ik(){const{colorScheme:r}=Wb(),[e,t]=_.useState(!0);return _.useEffect(()=>{setTimeout(()=>{t(!1)},2800)},[]),g.jsx($0,{theme:r,children:g.jsxs(Ky,{children:[g.jsx(xn,{path:"/",element:e?g.jsx(ai,{justifyContent:"center",alignItems:"center",height:"100vh",children:g.jsx(O1,{height:"30vh"})}):g.jsxs(Ds,{children:[g.jsx(W_,{}),g.jsx(z1,{}),g.jsx($_,{}),g.jsx(Dk,{})]})}),g.jsx(xn,{path:"/kirmize",element:g.jsx(Ds,{children:g.jsx(fk,{})})}),g.jsx(xn,{path:"/personal-portfolio",element:g.jsx(Ds,{children:g.jsx(Ak,{})})}),g.jsx(xn,{path:"/quatsch-chatbot-2022",element:g.jsx(Ds,{children:g.jsx(Ek,{})})}),g.jsx(xn,{path:"/multimedia-database-veterinary-practice",element:g.jsx(Ds,{children:g.jsx(xk,{})})}),g.jsx(xn,{path:"/ea-flow-shop-optimizer",element:g.jsx(Ds,{children:g.jsx(q_,{})})}),g.jsx(xn,{path:"/xml-weather-visualization",element:g.jsx(Ds,{children:g.jsx(Pk,{})})}),g.jsx(xn,{path:"contact",element:g.jsx(Ds,{children:g.jsx(iE,{})})}),g.jsx(xn,{path:"*",element:g.jsx(dg,{to:"/"})})]})})}iy.createRoot(document.getElementById("root")).render(g.jsxs(ih.StrictMode,{children:[g.jsx(H0,{initialColorMode:"dark"}),g.jsx(vv,{children:g.jsx(M1,{children:g.jsx(Ik,{})})})]}));
